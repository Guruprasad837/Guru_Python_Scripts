
;dojo.provide("jazz.util.ResizeNotifier");
(function(){
var _1=new Array();
var _2=new Array();
var _3=new Array();
var _4=false;
var _5=0;
var _6=1;
jazz.util.ResizeNotifier.register=function(_7){
if(!_7.callback){
return;
}
if(typeof _7.browserEvents=="undefined"){
_7.browserEvents=true;
}
if(typeof _7.publishEvents=="undefined"){
_7.publishEvents=true;
}
_7.id=_8();
if(_7.priority!=null&&_1.length>_7.priority){
_1.splice(_7.priority,0,_7);
}else{
_1.push(_7);
}
if(!_4){
_9();
}
return _7.id;
};
jazz.util.ResizeNotifier.unregister=function(id){
for(var i=0;i<_1.length;i++){
if(_1[i].id==id){
_1.splice(i,1);
if(_1.length==0){
_a();
}
return;
}
}
};
jazz.util.ResizeNotifier.poke=function(){
_b(null,true);
};
function _a(){
_1=new Array();
while(_2.length>0){
dojo.unsubscribe(_2.pop());
}
_2=new Array();
while(_3.length>0){
dojo.disconnect(_3.pop());
}
_3=new Array();
_4=false;
};
function _9(){
_2.push(dojo.subscribe("jazz.ui.SideNavigationLayout.slideLeftNav.onEnd",_c));
_2.push(dojo.subscribe("jazz.util.ResizeNotifier.resizeEvent",_b));
_3.push(dojo.connect(window,"onresize",_b));
_5=document.documentElement.clientWidth;
_4=true;
};
function _8(){
return _6++;
};
function _c(){
_b(null,true);
};
function _b(_d,_e){
for(var i=0;i<_1.length;i++){
if(_e||_1[i].force||_5!=document.documentElement.clientWidth){
if(_1[i]&&(!_d||_1[i].browserEvents)&&(_d||_1[i].publishEvents)&&_1[i].callback){
try{
setTimeout(dojo.hitch(_1[i].context,_1[i].callback),0);
}
catch(err){
console.err("Failed to notify client about resize event: "+err);
}
}
}
}
_5=document.documentElement.clientWidth;
};
})();


;dojo.provide("com.ibm.team.dashboard.web.ui.IMemento");
(function(){
dojo.declare("com.ibm.team.dashboard.web.ui.IMemento",null,{get:function(_1){
},set:function(_2,_3){
}});
})();


;dojo.provide("com.ibm.team.dashboard.web.ui.internal.ContributorMemento");




(function(){
var _1=com.ibm.team.dashboard.web.ui.internal.Constants;
var _2=com.ibm.team.dashboard.web.ui.IMemento;
dojo.declare("com.ibm.team.dashboard.web.ui.internal.ContributorMemento",_2,{constructor:function(_3,_4){
this._viewletInfo=_3;
this._container=_4;
if(_3.memento){
this._memento=dojo.fromJson(_3.memento);
}else{
this._memento=new Object();
}
},get:function(_5){
return this._memento[_5];
},set:function(_6,_7){
this._memento[_6]=_7;
this._viewletInfo.memento=dojo.toJson(this._memento);
this._container.propertyChanged(_1.PROPERTY_CONTRIBUTOR_INFO);
}});
})();


;dojo.provide("com.ibm.team.dashboard.web.ui.internal.ViewletMemento");




(function(){
var _1=com.ibm.team.dashboard.web.ui.internal.Constants;
var _2=com.ibm.team.dashboard.web.ui.IMemento;
dojo.declare("com.ibm.team.dashboard.web.ui.internal.ViewletMemento",_2,{constructor:function(_3,_4,_5){
this._memento=_3;
this._container=_5;
this._viewletHelper=_4;
},startEditing:function(){
this._workingCopy=dojo.clone(this._memento);
},stopEditing:function(_6){
if(_6){
this._memento=this._workingCopy;
this._save();
}
delete this._workingCopy;
},_save:function(){
this._viewletHelper.memento=dojo.toJson(this._memento);
this._container.propertyChanged(_1.PROPERTY_DASHBOARD);
},get:function(_7){
var _8=this._workingCopy?this._workingCopy:this._memento;
if(_8[_7]){
return _8[_7];
}
return null;
},set:function(_9,_a){
var _b=this._workingCopy?this._workingCopy:this._memento;
_b[_9]=_a;
if(!this._workingCopy){
this._save();
}
}});
})();

dojo.provide("com.ibm.team.dashboard.web.ui.internal.DashboardConfiguration");
com.ibm.team.dashboard.web.ui.internal.DashboardConfiguration={
    "hrefs": {
        "allProjectDashboards": "\/web\/projects\/${projectName}#action=com.ibm.team.dashboard.viewAllDashboards",
        "allProjects": "\/web",
        "projectDashboard": "\/web\/projects\/${projectName}#action=com.ibm.team.dashboard.viewDashboard",
        "teamDashboard": "\/web\/projects\/${projectName}#action=com.ibm.team.dashboard.viewDashboard&team=${team}"
    },
    "projectDetails": [
        "com.ibm.team.rtc.web.ui.internal.PlanInfo",
        "com.ibm.team.dashboard.web.ui.details.TimelineInfo",
        "com.ibm.team.dashboard.web.ui.details.MemberInfo"
    ],
    "teamDetails": [
        "com.ibm.team.rtc.web.ui.internal.PlanInfo",
        "com.ibm.team.dashboard.web.ui.details.TimelineInfo",
        "com.ibm.team.dashboard.web.ui.details.MemberInfo"
    ]
};
;(function(){
dojo.provide("com.ibm.team.dashboard.web.util.DashboardUtil");








var _1=com.ibm.team.dashboard.web.ui.DashboardConstants;
var _2=com.ibm.team.dashboard.web.ui.internal.DashboardConfiguration;
var _3="${projectName}";
var _4="${team}";
com.ibm.team.dashboard.web.util.DashboardUtil={getDashboardHref:function(_5,_6,_7,_8,_9,_a){
var _b;
_8=_8||jazz.app.context.get().name;
switch(_5){
case _1.SCOPE_CONTRIBUTOR:
_b="/dashboards/"+_6;
break;
case _1.SCOPE_PROJECT_AREA:
_b=_2.hrefs.projectDashboard;
_b=_b.replace(_3,encodeURIComponent(_8));
break;
case _1.SCOPE_TEAM_AREA:
var _c=[];
var _d=_6.length;
for(var i=0;i<_d;++i){
_c.push(encodeURIComponent(_6[i]));
}
_b=_2.hrefs.teamDashboard;
_b=_b.replace(_3,encodeURIComponent(_8));
_b=_b.replace(_4,_c.join("/"));
break;
}
if(_7){
var _e=_b.indexOf("#");
_b+=((_e!==-1&&_e<_b.length-1)?"&":"#")+_1.URL_PARAM_TAB+"="+_7;
}
if(!_a&&djConfig.isDebug){
var _f=_b.split("#");
_f[0]+="?debug="+djConfig.isDebug;
_b=_f.join("#");
}
return (_9||net.jazz.ajax.contextRoot())+_b;
}};
})();

dojo.setObject("net.jazz.ajax.rootServices", function() {
return null;
});
dojo.provide("net.jazz.ajax.rootServices");
;dojo.provide("com.ibm.team.dashboard.web.util.internal.Util");




















(function(){
var _1=com.ibm.team.dashboard.web.util.DashboardUtil;
var _2=com.ibm.team.dashboard.web.ui.internal.DashboardConfiguration;
var _3=com.ibm.team.dashboard.web.ui.DashboardConstants;
var _4=com.ibm.team.dashboard.web.ui.internal.Constants;
var _5=new dojo._Url(location.href);
var _6=["debug","view"];
var _7="${projectName}";
com.ibm.team.dashboard.web.util.internal.Util={addUIParams:function(_8){
var _9=false;
var _a=[];
var _b=location.search;
if(_b&&_b.length>1){
var _c=dojo.queryToObject(_b.substring(1));
for(var i=0;i<_6.length;++i){
_a[i]=_c[_6[i]];
_9=_9||_a[i];
}
}
if(_9){
var _d=new dojo._Url(_8);
var _e=dojo.queryToObject(_d.query||"");
for(var i=0;i<_6.length;++i){
if(_a[i]){
_e[_6[i]]=_a[i];
}
}
_d.query=dojo.objectToQuery(_e);
var _f=[];
_d.scheme&&_f.push(_d.scheme+"://"+_d.host);
_d.port&&_f.push(":"+_d.port);
_d.path&&_f.push(_d.path);
_d.query&&_f.push("?"+_d.query);
_d.fragment&&_f.push("#"+_d.fragment);
return _f.join("");
}
return _8;
},getContextPath:function(_10){
var _11=net.jazz.ajax.contextRoot();
if(_10){
_11=_5.scheme+"://"+_5.host+(_5.port?":"+_5.port:"")+_11;
}
return _11;
},getDefinitionId:function(_12){
var url=new dojo._Url(_12);
return url.query.match(/definitionIds=([^&]*)/)[1];
},getJTSURL:function(){
var _13=net.jazz.ajax.BootstrapProperties.DISCOVERYSERVICE_URL;
if(_13){
var _14=_13.lastIndexOf("/");
if(_14!==-1){
return _13.substring(0,_14);
}
}
},getServiceRoot:function(url){
if(url){
var _15=url.indexOf("/service/com.ibm.team.dashboard.common.internal.service.IDashboardRestService");
if(_15!=-1){
return url.substring(0,_15);
}
_15=url.indexOf("/viewlet/");
if(_15!=-1){
return url.substring(0,_15);
}
return;
}
return this.getContextPath(true);
},getWebUIRoot:function(url){
var _16=url.indexOf("/viewlet/");
if(_16>0){
return url.substring(0,_16);
}
var url=new dojo._Url(url);
if(!url.query){
return "";
}
return decodeURIComponent(url.query.match(/webUIRoot=([^&]*)/)[1]);
},getServiceURL:function(_17,_18,_19,_1a){
if(!_1a){
_1a=this.getContextPath();
}
var buf=[_1a,"/service/",_17];
if(_18){
buf.push("/");
buf.push(_18);
}
if(_19){
buf.push("?");
buf.push(dojo.objectToQuery(_19));
}
var url=buf.join("");
var _1b=new dojo._Url(url);
return this._isDifferentOrigin(_1b)?jazz.app.proxy.encodeProxiedURI(url):url;
},getDashboardHref:function(_1c,_1d,_1e){
var _1f=_1c.scope;
var _20;
switch(_1f){
case _3.SCOPE_TEAM_AREA:
_20=_1c.defaults.team.path;
break;
case _3.SCOPE_PROJECT_AREA:
_20=_1c.defaults.project.name;
break;
default:
var url=_1c.dashboardUrl;
_1f=_3.SCOPE_CONTRIBUTOR;
_20=url.substring(url.lastIndexOf("/")+1);
break;
}
return _1.getDashboardHref(_1f,_20,_1d,_1e);
},getAllPersonalDashboardsHref:function(){
return net.jazz.ajax.contextRoot()+"/dashboards/all";
},getAllPersonalDashboardsHash:function(){
return "#/all";
},getAllProjectDashboardsHref:function(_21){
return this.addUIParams(net.jazz.ajax.contextRoot()+_2.hrefs.allProjectDashboards.replace(_7,encodeURIComponent(_21)));
},getAllProjectsHref:function(){
return this.addUIParams(net.jazz.ajax.contextRoot()+_2.hrefs.allProjects);
},getDashboardUpdateHref:function(){
return net.jazz.ajax.contextRoot()+"/dashboards/update";
},getDashboardParams:function(_22,_23,_24){
var _25=_22.scope;
var _26=_25==_3.SCOPE_TEAM_AREA?_22.defaults.team.path.join("/"):null;
var url=_22.dashboardUrl;
var id=url.substring(url.lastIndexOf("/")+1);
return this._getDashboardParams(_25,id,_26,_23,_24);
},_getDashboardParams:function(_27,id,_28,_29,_2a){
var _2b=new Object();
switch(_27){
case _3.SCOPE_CONTRIBUTOR:
_2b[_3.URL_PARAM_ID]=decodeURIComponent(id);
break;
case _3.SCOPE_TEAM_AREA:
_2b[_3.URL_PARAM_TEAM]=decodeURIComponent(_28);
break;
case _3.SCOPE_PROJECT_AREA:
if(!_2a){
_2b[_3.URL_PARAM_ID]=decodeURIComponent(id);
}
break;
}
if(_29){
_2b[_3.URL_PARAM_TAB]=decodeURIComponent(_29);
}
return _2b;
},getScopeItemName:function(_2c){
var _2d=_2c.dashboard.scopeItem.itemId;
var _2e=_2c.itemNames;
for(var i=0;i<_2e.length;i++){
if(_2e[i].itemId==_2d){
return _2e[i].name;
}
}
},getView:function(){
var _2f=location.search;
if(_2f&&_2f.length>1){
var _30=dojo.queryToObject(_2f.substring(1));
var _31=_30["view"];
if(_31==="embedded"){
return _31;
}
}
},isLocal:function(_32){
return this.isLocalOrigin(_32.origin);
},isLocalDefinition:function(url){
var _33=this.getWebUIRoot(url);
if(!_33){
return false;
}
var _34=net.jazz.ajax.viewletWebUIRoot()||(this.getContextPath(true));
return this._urlEquals(_33,_34);
},isLocalOrigin:function(_35){
if(!_35){
return true;
}
return this._urlEquals(_35,net.jazz.ajax.rootServices());
},toEntryArray:function(obj){
var _36=new Array();
if(obj){
for(var i in obj){
_36.push({id:i,value:obj[i]});
}
}
return _36;
},toJson:function(_37){
var _38=dojo.isArray;
dojo.isArray=_39;
try{
return dojo.toJson(_37);
}
finally{
dojo.isArray=_38;
}
},toObject:function(_3a){
var obj=new Object();
if(_3a){
for(var i=0;i<_3a.length;i++){
var _3b=_3a[i];
obj[_3b.id]=_3b.value;
}
}
return obj;
},isScopeApplicible:function(_3c,_3d){
if(!_3d.scopeSensitive){
return false;
}
if(_3d.appliesTo==_4.SCOPE_APPLIES_TO_ALL){
return true;
}
switch(_3c){
case _3.SCOPE_CONTRIBUTOR:
return _3d.appliesTo==_4.SCOPE_APPLIES_TO_CONTRIBUTORS;
case _3.SCOPE_TEAM_AREA:
return _3d.appliesTo==_4.SCOPE_APPLIES_TO_TEAMS||_3d.appliesTo==_4.SCOPE_APPLIES_TO_PROCESS;
case _3.SCOPE_PROJECT_AREA:
return _3d.appliesTo==_4.SCOPE_APPLIES_TO_PROJECTS||_3d.appliesTo==_4.SCOPE_APPLIES_TO_PROCESS;
}
},_isDifferentOrigin:function(url){
if(!url.host){
return false;
}
this._normalizePort(url);
var _3e=["scheme","host","port"];
for(var i=0;i<_3e.length;i++){
var _3f=_3e[i];
if(url[_3f]!==_5[_3f]){
return true;
}
}
return false;
},_normalizePort:function(url){
var _40=url.scheme||"http";
if(!url.port){
url.port=_40==="http"?"80":"443";
}
},_urlEquals:function(_41,_42){
_41=new dojo._Url(_41);
_42=new dojo._Url(_42);
this._normalizePort(_41);
this._normalizePort(_42);
if(_41.host.toLowerCase()!=_42.host.toLowerCase()){
return false;
}
var _43=["scheme","port","path","query","fragment"];
for(var i=0;i<_43.length;i++){
var _44=_43[i];
if(_41[_44]!==_42[_44]){
return false;
}
}
return true;
},_cast:function(_45,_46){
if(_45===_4.SettingsArea.FIELD_INTEGER){
var _47=parseInt(_46);
if(isNaN(_47)){
return null;
}
return _47;
}else{
if(_45===_4.SettingsArea.FIELD_BOOLEAN){
if(_46===true||_46===false){
return _46;
}
return _46==="true"?true:false;
}
}
return _46;
}};
function _39(_48){
return _48&&(typeof _48=="array"||_48 instanceof Array||(typeof _48=="object"&&isFinite(_48.length)));
};
})();


;dojo.provide("com.ibm.team.dashboard.web.ui.internal.LegacyViewletSite");












(function(){
var _1=com.ibm.team.dashboard.web.ui.internal.Constants;
var _2=com.ibm.team.dashboard.web.ui.internal.ContributorMemento;
var _3=com.ibm.team.dashboard.web.ui.DashboardConstants;
var _4=com.ibm.team.dashboard.web.ui.internal.util.ItemNameRegistry;
var _5=com.ibm.team.dashboard.web.util.internal.Util;
var _6=com.ibm.team.dashboard.web.ui.internal.ViewletMemento;
dojo.declare("com.ibm.team.dashboard.web.ui.internal.LegacyViewletSite",null,{constructor:function(_7){
this._container=_7.container;
this._dashboardItem=_7.dashboardItem;
this._definition=_7.definition;
this._viewlet=_7.viewlet;
this._viewletHelper=_7.viewletHelper;
this._loading=false;
},addMenuItem:function(_8,_9,_a){
var _b={label:_8,onClick:dojo.hitch(this._container._viewlet,_a)};
if(_9){
_9=_9+"";
if(_9.indexOf("/")!=-1){
_b.icon=_9;
}else{
dojo.deprecated("com.ibm.team.dashboard.web.ui.ViewletSite.addMenuItem(label, iconClass, callback)","Use an icon URL for the second parameter instead of a css class");
_b.iconClass=_9;
}
}
this._container.addMenuItem(_b);
},canViewDashboard:function(_c){
var _d=this._container.dashboardBundle.permissions;
if(_c==_3.SCOPE_PROJECT_AREA){
return _d.viewProject;
}
if(_c==_3.SCOPE_TEAM_AREA){
return _d.viewTeam;
}
if(_c==_3.SCOPE_CONTRIBUTOR){
return _d.viewPersonal;
}
return false;
},error:function(_e){
dojo.publish(_1.serverError,[_e]);
},getContributorState:function(){
if(!this._contributorMemento){
var _f=this._container._viewletContributorInfo;
this._contributorMemento=new _2(_f,this._container);
}
return this._contributorMemento;
},getPreference:function(id){
var _10=this._definition.preferenceDefinitions;
if(_10){
for(var i=0;i<_10.length;i++){
var _11=_10[i];
if(_11.id==id){
var _12;
var _13=this._viewletHelper.preferences;
if(_13){
for(var j=0;j<_13.length;j++){
if(_13[j].id==id){
_12=_13[j].value;
break;
}
}
}
if(_12||_12==false){
return this._cast(_12,_11.preferenceType);
}
if(_11.defaultValue){
return this._cast(_11.defaultValue,_11.preferenceType);
}
return null;
}
}
}
return null;
},getScope:function(){
var _14=this._viewletHelper.scope;
if(!this._definition.scopeSensitive||(_14!=_3.SCOPE_CONTRIBUTOR&&_14!=_3.SCOPE_TEAM_AREA&&_14!=_3.SCOPE_PROJECT_AREA)){
_14=this._dashboardItem.scope;
}
switch(this._definition.appliesTo){
case _1.SCOPE_APPLIES_TO_TEAMS:
return _3.SCOPE_TEAM_AREA;
case _1.SCOPE_APPLIES_TO_CONTRIBUTORS:
return _3.SCOPE_CONTRIBUTOR;
case _1.SCOPE_APPLIES_TO_PROJECTS:
return _3.SCOPE_PROJECT_AREA;
case _1.SCOPE_APPLIES_TO_PROCESS:
if(_14==_3.SCOPE_CONTRIBUTOR){
return _3.SCOPE_PROJECT_AREA;
}
}
return _14;
},getScopeItem:function(){
if(typeof (this._viewletHelper.scope)!="undefined"&&!_5.isScopeApplicible(this._viewletHelper.scope,this._definition)){
if(this._definition.scopeSensitive){
return null;
}
}
if(this._definition.scopeSensitive){
var _15=this._viewletHelper.scopeItem;
if(_15){
var _16=_4.getName(_15.itemId);
if(_16){
_15.name=_16;
}
return _15;
}
}
if(_5.isLocal(this._viewletHelper)){
return this._getDefaultItem(this.getScope());
}
return null;
},getScopeSubteams:function(){
var _17=this._viewletHelper.scopeSubteams;
if(!_17&&_17!=false){
_17=this._definition.scopeSubteams=="yes-and-check";
}
return _17;
},getViewletState:function(){
if(!this._viewletMemento){
var _18;
var _19=this._viewletHelper.memento;
if(_19){
_18=dojo.fromJson(_19);
}else{
_18=this._viewlet.getDefaultState();
}
this._viewletMemento=new _6(_18,this._viewletHelper,this._container);
}
return this._viewletMemento;
},setAutoRefresh:function(_1a){
this._container.setAutoRefresh(_1a);
},setIcon:function(url){
this._container.setIcon(url);
},setLoading:function(_1b){
if(this._container._iconImage){
if(_1b){
this._container._iconImage.style.display="none";
dojo.addClass(this._container._headerIcon,"com-ibm-team-dashboard-progressIcon");
}else{
this._container._iconImage.style.display="inline";
dojo.removeClass(this._container._headerIcon,"com-ibm-team-dashboard-progressIcon");
}
}
this._loading=_1b;
},isLoading:function(){
return this._loading;
},toggleSettings:function(){
this._container.toggleSettings();
},editContents:function(){
this._container.startEditing();
},setTitle:function(_1c,_1d){
if(!this._viewletHelper.userTitle){
this._container.setTitle(_1c,_1d);
}
},setSecondaryTitle:function(_1e){
this._container.setSecondaryTitle(_1e);
},getTitle:function(){
return this._viewletHelper.title;
},getSecondaryTitle:function(){
return this._container.getSecondaryTitle();
},getActionArea:function(){
return this._container.actionArea;
},isDashboardEditing:function(){
return this._container.editing;
},isActive:function(){
return this._container.viewletPage.isActive;
},getHeight:function(){
if(dojo.isIE==6){
return this._container._contentWrapper.clientHeight;
}else{
return dojo.style(this._container._contentWrapper,"height");
}
},getWidth:function(){
if(dojo.isIE==6){
var _1f=this._container._header.clientWidth-5;
if(_1f<0){
_1f=this._container._contentWrapper.clientWidth-40;
}
return _1f;
}else{
return dojo.style(this._container._contentWrapper,"width");
}
},doneRefresh:function(){
this._container.isRefreshing--;
if(this._container.isRefreshing<0){
this._container.isRefreshing=0;
}
},refresh:function(){
this._container.refreshViewlet(true);
},navigateAwayEvent:function(_20,_21){
return this._container.viewletPage.dashboardContainer.dashboardWidget.navigateAwayEvent(_20,_21);
},_cast:function(_22,_23){
if(_23=="INTEGER"){
var _24=parseInt(_22);
if(isNaN(_24)){
return null;
}
return _24;
}else{
if(_23=="BOOLEAN"){
if(_22==true||_22==false){
return _22;
}
return _22=="true"?true:false;
}
}
return _22;
},_getDefaultItem:function(_25){
if(this._container._isLocal()){
var _26=this._dashboardBundle.defaults;
switch(_25){
case _3.SCOPE_CONTRIBUTOR:
return _26.contributor;
case _3.SCOPE_TEAM_AREA:
return _26.team;
case _3.SCOPE_PROJECT_AREA:
return _26.project;
}
}
}});
})();


;dojo.provide("com.ibm.team.dashboard.web.ui.internal.util.ServiceTracker");
(function(){
dojo.declare("com.ibm.team.dashboard.web.ui.internal.util.ServiceTracker",null,{constructor:function(){
this._activeRequests=new Object();
this._currentRequestId=0;
},getActiveRequests:function(){
var _1=new Array();
for(var i in this._activeRequests){
_1.push(this._activeRequests[i]);
}
return _1;
},register:function(_2,_3){
var _4={_id:"req"+this._currentRequestId,_self:this,_doCallback:dojo.hitch(_3,_3.doCallback),_doErrorCallback:dojo.hitch(_3,_3.doErrorCallback),doCallback:function(_5){
delete this._self._activeRequests[this._id];
this._doCallback(_5);
},doErrorCallback:function(_6){
delete this._self._activeRequests[this._id];
this._doErrorCallback(_6);
}};
_3.doCallback=dojo.hitch(_4,_4.doCallback);
_3.doErrorCallback=dojo.hitch(_4,_4.doErrorCallback);
this._activeRequests[this._currentRequestId++]=_2;
},abortActiveRequests:function(){
for(var i in this._activeRequests){
this._activeRequests[i].abort();
}
}});
})();


;dojo.provide("com.ibm.team.dashboard.web.ui.Viewlet");








(function(){
var _1=com.ibm.team.dashboard.web.ui.internal.LegacyViewletSite;
var _2=com.ibm.team.dashboard.web.ui.internal.util.ServiceTracker;
dojo.declare("com.ibm.team.dashboard.web.ui.Viewlet",[dijit._Widget,dijit._Templated],{constructor:function(_3){
this._viewletContainer=_3.container;
this._dashboardBundle=_3.dashboardBundle;
this._definition=_3.definition;
this._helper=_3.helper;
this._site=_3.site;
if(this._site){
this._site.viewlet=this;
}else{
this._site=new _1({container:_3.container,dashboardItem:_3.dashboardItem,definition:_3.definition,viewlet:this,viewletHelper:this._helper});
}
this._webURL=_3.webURL;
this._zoomed=false;
this._editing=false;
},destroy:function(){
this._isDestroyed=true;
if(this._serviceTracker){
var _4=this._serviceTracker.getActiveRequests();
for(var i=0;i<_4.length;i++){
_4[i].abort();
}
}
this.inherited(arguments);
},init:function(){
},isDestroyed:function(){
return this._isDestroyed?true:false;
},getSite:function(){
return this._site;
},getContributorState:function(){
return this._site.getContributorState();
},getServiceTracker:function(){
if(!this._serviceTracker){
this._serviceTracker=new _2();
}
return this._serviceTracker;
},getViewletState:function(){
return this._site.getViewletState();
},getWebURL:function(){
return this._webURL;
},hasContributorState:function(){
if(this._site.hasContributorState){
return this._site.hasContributorState();
}else{
return true;
}
},settingsAreaToggled:function(_5){
},preSaveState:function(){
},validateEditedContent:function(){
return true;
},getDefaultState:function(){
return new Object();
},getPreference:function(id){
return this._site.getPreference(id);
},setPreference:function(id,_6){
return this._site.setPreference(id,_6);
},getScope:function(){
return this._site.getScope();
},getScopeItem:function(){
return this._site.getScopeItem();
},getScopeSubteams:function(){
return this._site.getScopeSubteams();
},getTitleHyperlinkURL:function(){
return null;
},refresh:function(){
},update:function(){
},setZoomed:function(_7){
this._zoomed=_7;
this.update();
},isZoomed:function(){
return this._zoomed;
},preZoom:function(){
},postZoom:function(){
},setDashboardEditing:function(_8){
},setActive:function(_9){
},setEditing:function(_a){
this._editing=_a;
this.update();
},isEditing:function(){
return this._editing;
},hasZoomableContent:function(){
return true;
},getPreferenceOptions:function(_b,_c){
},getPreferenceProvider:function(_d){
return null;
},settingsChanged:function(_e,_f){
this._site.refresh();
},settingsCanceled:function(_10,_11){
},settingChanging:function(_12,_13){
return new Array();
}});
})();


;dojo.provide("jazz.util.i18n");
(function(){
jazz.util.i18n={STRONG:"b",SPAN:"s",LRM:"\u200e",RLM:"\u200f",LRE:"\u202a",RLE:"\u202b",PDF:"\u202c",split:function(_1){
try{
var _2=[];
if(typeof (_1)=="string"){
var _3=_1;
var _4=_3.indexOf("<");
while(_4!=-1){
if(_4!=0){
_2.push({text:_3.substring(0,_4)});
}
_3=_3.substring(_4+1);
if(_3.charAt(0)=="/"){
throw "End tag with no start tag.";
}
_4=_3.indexOf(">");
var id=_3.substring(0,_4);
_3=_3.substring(_4+1);
if(id.charAt(id.length-1)=="/"){
id=id.substring(0,id.length-1);
var _5="";
}else{
var _6="</"+id+">";
_4=_3.indexOf(_6);
if(_4==-1){
throw "Start tag with no end tag for id "+id+".";
}
var _5=_3.substring(0,_4);
_3=_3.substring(_4+_6.length);
}
var r=this._parseId(id);
r.text=_5;
_2.push(r);
_4=_3.indexOf("<");
}
_2.push({text:_3});
}
return _2;
}
catch(e){
console.error("I18nUtil error in message \""+_1+"\":"+e);
}
},addMessage:function(_7,_8){
var r=[];
var s=this.split(_8);
for(var i=0;i<s.length;i++){
if(typeof s[i].type=="undefined"){
_7.appendChild(document.createTextNode(s[i].text));
}else{
var c=document.createElement(s[i].type);
if(s[i].type=="a"){
c.href="#";
}
c.innerHTML=s[i].text;
_7.appendChild(c);
if(s[i].id==0||s[i].id){
r[s[i].id]=c;
}
}
}
return r;
},_parseId:function(id){
var c=id.charAt(0).toLowerCase();
var _9={};
if(c>="a"&&c<="z"){
switch(c){
case this.SPAN:
_9.type="span";
break;
case this.STRONG:
_9.type="strong";
break;
}
id=id.substring(1);
if(id.length>0){
_9.id=id;
}
}else{
_9.type="a";
_9.id=id;
}
return _9;
},getStringBaseTextDir:function(_a,_b){
if(!_b){
_b="ltr";
}
if(!_a){
return _b;
}
var _c=_a.length;
for(var i=0;i<_c;i++){
var _d=_a.charCodeAt(i);
if(this._isBidiChar(_d)){
return "rtl";
}else{
if(this._isLatinChar(_d)){
return "ltr";
}
}
}
return _b;
},getElementBaseTextDir:function(_e,_f){
var _10=!!_f?_10:"ltr";
if(!_e||!_e.innerHTML){
return _10;
}
var _11=_e.innerHTML.replace(/<[^<]*>/g,"");
if(!!_11&&_11.length>0){
return _12.getStringBaseTextDir(_11);
}
return _10;
},getDefaultAlignment:function(dir){
if(dir=="rtl"){
return {current:"right",opposite:"left"};
}else{
return {current:"left",opposite:"right"};
}
},getSegmentSeparator:function(dir){
if(dir=="rtl"){
return _12.RLM;
}else{
return _12.LRM;
}
},removeAllMarks:function(_13){
return _13.replace(/[\u200e\u200f\u202a\u202b\u202c]/g,"");
},setElementBaseTextDir:function(_14,_15,_16,_17,_18){
var dir=_15;
var _19=dojo.style(dojo.body(),"direction");
if(!!_16){
dojo.addClass(_14,_16);
}
var _1a=_14.innerHTML.replace(/<[^<]*>/g,"");
if(!_1a){
return _19;
}
var _1b=_14.firstChild;
while(_1b){
if(_1b.nodeType==3){
break;
}
if(_1b.firstChild){
_1b=_1b.firstChild;
continue;
}
if(_1b.nextSibling){
_1b=_1b.nextSibling;
continue;
}
if(_1b.parentNode!==_14&&_1b.parentNode.nextSibling){
_1b=_1b.parentNode.nextSibling;
continue;
}
break;
}
var _1c=-1,_1d=-1;
if(!!_17&&_17.length>0){
_1c=_1a.replace(/[\u202a\u202b\u202c]/g,"").indexOf(_17);
if(_1c>=0){
_1c+=_17.length;
}
}
if(!!_18&&_18.length>0){
_1d=_1a.replace(/[\u202a\u202b\u202c]/g,"").indexOf(_18);
}
if(_1c>=0||(_1d>=0&&_1d>=_1c)){
if(_1c==_1d){
_1d=-1;
}
_1a=_1a.replace(/[\u202a\u202b\u202c]/g,"");
if(dir!="none"){
var _1e=_1c>0?_1c:0;
var end=_1d>0?_1d:_1a.length;
var _1f=_1a.substring(_1e,end);
if(dir=="auto"){
dir=this.getStringBaseTextDir(_1f,_19);
}
var _20=dir=="rtl"?this.RLE:this.LRE;
_1a=_1a.substring(0,_1e)+_20+_1f+this.PDF+(_1d>0?_1a.substring(end):"");
}
if(_1b&&_1b.nodeValue){
_1b.nodeValue=_1a;
}
dir=_19;
}else{
if(dir=="auto"){
dir=this.getStringBaseTextDir(_1a,_19);
}
}
if(dir!="none"){
dojo.style(_14,"direction",dir);
dojo.style(_14,"unicodeBidi","embed");
}
return dir;
},getDirectionAndHighlightSegment:function(_21,_22){
if(!_21||!_21.nodeValue){
return _22;
}
var _23=dojo.style(dojo.body(),"direction");
var _24=_22;
var _25=_21.nodeValue;
var sep=_12.getSegmentSeparator(_23);
if(_25.indexOf(sep)>=0){
_24=_23;
_25=_25.replace(/[\u202a\u202b\u202c]/g,"");
if(_22!="none"){
var _26=_22;
if(_26=="auto"){
_26=_12.getStringBaseTextDir(_25);
}
var _27=_25.substring(0,_25.indexOf(sep)+1);
var _28=_25.substring(_25.indexOf(sep)+1);
var _29="";
var _2a=_26=="rtl"?_12.RLE:_12.LRE;
if(_28.indexOf(sep)>=0){
_29=_28.substring(_28.indexOf(sep)+1);
_28=_28.substring(0,_28.indexOf(sep));
}
_21.nodeValue=_27+_2a+_28+_12.PDF+sep+_29;
}
}
return _24;
}};
function _2b(c){
if(c>=1488&&c<=1535||c>=1536&&c<=1631||c>=1786&&c<=2047||c>=64336&&c<=65023||c>=65136&&c<=65276){
return true;
}else{
return false;
}
};
function _2c(c){
if((c>64&&c<91)||(c>96&&c<123)){
return true;
}else{
return false;
}
};
var _12=jazz.util.i18n;
})();


;dojo.provide("jazz.ui.ModalUnderlay");
(function(){
var _1="jazz-ui-modalunderlay-root";
var _2="jazz-ui-modalunderlay-modal";
var _3="front-modal";
var _4="front";
var _5="back";
var _6="is-visible";
jazz.ui.ModalUnderlay={ZINDEX_FRONT:999,ZINDEX_INTERVAL:4,underlayRoot:null,underlayModal:null,openDialogs:[],underlayRootTransitionEndListener:null,underlayModalTransitionEndListener:null,dialogOffset:32,dialogOffsetCount:0,_onClickRootEvent:null,_onClickModalEvent:null,_onEscModalEvent:null,_visible:null,createUnderlayRoot:function(){
if(!this.underlayRoot){
this.underlayRoot=dojo.create("div",{"class":_1},document.body);
}
},createUnderlayModal:function(){
if(!this.underlayModal){
this.underlayModal=dojo.create("div",{"class":_2,"tabindex":0},this.underlayRoot);
this._onClickModalEvent=dojo.connect(this.underlayModal,"onclick",this,this._onClickModal);
this._onEscModalEvent=dojo.connect(this.underlayModal,"onkeydown",this,this._onEscModal);
}
},notifyOpenDialog:function(_7){
this.createUnderlayRoot();
if(_7.modal){
this.createUnderlayModal();
}
this.underlayRoot.appendChild(_7.domNode);
if(!_7.setInitialOffset(this.dialogOffsetCount++*this.dialogOffset)){
this.dialogOffsetCount=1;
}
this.openDialogs.push(_7);
this.updateUnderlays();
},notifyCloseDialogStart:function(_8){
this.openDialogs.splice(dojo.indexOf(this.openDialogs,_8),1);
if(this.openDialogs.length==0){
this.dialogOffsetCount=0;
this.setNodeVisibility(_8.domNode,false,false);
}else{
this.dialogOffsetCount--;
if(this.dialogOffsetCount<0){
this.dialogOffsetCount=0;
}
this.setNodeVisibility(_8.domNode,false);
}
this.updateUnderlays();
},notifyCloseDialogFinish:function(){
if(this.underlayModal){
if(!this.underlayModal.classList.contains(_6)){
dojo.destroy(this.underlayModal);
this.underlayModal=null;
}
}
if(this.underlayRoot){
if(!this.underlayRoot.firstChild){
dojo.destroy(this.underlayRoot);
this.underlayRoot=null;
}
}
},updateUnderlays:function(){
var _9=this.openDialogs.length;
if(_9>0){
var _a=this.openDialogs[this.openDialogs.length-1];
var _b=-1;
for(var i=this.openDialogs.length-1;i>-1;i--){
if(this.openDialogs[i].modal){
_b=i;
break;
}
}
var _c=_b>-1;
var _d=this.ZINDEX_FRONT-((_9+(_c?1:0))*this.ZINDEX_INTERVAL);
this.underlayRoot.style.zIndex=_d;
_d+=this.ZINDEX_INTERVAL;
if(_b>-1){
for(var i=0;i<_b;i++){
this.openDialogs[i].domNode.style.zIndex=_d;
this.openDialogs[i].domNode.classList.remove(_3,_4);
this.openDialogs[i].domNode.classList.add(_5);
_d+=this.ZINDEX_INTERVAL;
}
this.underlayModal.style.zIndex=_d;
_d+=this.ZINDEX_INTERVAL;
for(var i=_b;i<this.openDialogs.length;i++){
this.openDialogs[i].domNode.style.zIndex=_d;
this.openDialogs[i].domNode.classList.remove(_3,_5);
this.openDialogs[i].domNode.classList.add(_4);
_d+=this.ZINDEX_INTERVAL;
}
this.openDialogs[_b].domNode.classList.add(_3);
this._showUnderlayRoot();
this._showUnderlayModal();
}else{
this._hideUnderlayModal();
for(var i=0;i<_9;i++){
this.openDialogs[i].domNode.style.zIndex=_d;
this.openDialogs[i].domNode.classList.remove(_3,_5);
this.openDialogs[i].domNode.classList.add(_4);
_d+=this.ZINDEX_INTERVAL;
}
this._showUnderlayRoot();
}
}else{
this._hideUnderlays();
}
},setNodeVisibility:function(_e,_f,_10){
if(!_e){
return;
}
if(typeof _10==="undefined"){
_10=true;
}
if(_f){
if(!_e.classList.contains(_6)){
if(_10){
var x=_e.getBoundingClientRect();
}
_e.classList.add(_6);
}
}else{
if(_e.classList.contains(_6)){
if(_10){
var x=_e.getBoundingClientRect();
}
_e.classList.remove(_6);
}
}
},_showUnderlayModal:function(){
if(this.underlayModal){
this.setNodeVisibility(this.underlayModal,true);
}
},_hideUnderlayModal:function(){
if(this.underlayModal){
this.setNodeVisibility(this.underlayModal,false);
}
},_showUnderlayRoot:function(){
if(this.underlayRoot){
this.setNodeVisibility(this.underlayRoot,true);
}
},_hideUnderlayRoot:function(){
if(this.underlayRoot){
this.setNodeVisibility(this.underlayRoot,false);
}
},_hideUnderlays:function(){
this._hideUnderlayModal();
this._hideUnderlayRoot();
},_onClickModal:function(_11){
if(_11.target===this.underlayModal&&this.openDialogs.length>0){
dojo.stopEvent(_11);
if(this.openDialogs[this.openDialogs.length-1].closeOnBlur){
this.openDialogs[this.openDialogs.length-1]._closeOnBlur();
}
}
},_onEscModal:function(_12){
if(_12.target===this.underlayModal&&this.openDialogs.length>0&&_12.keyCode==dojo.keys.ESCAPE){
dojo.stopEvent(_12);
if(this.openDialogs[this.openDialogs.length-1].closeOnEsc){
this.openDialogs[this.openDialogs.length-1]._checkForEsc(_12);
}
}
}};
})();


;define("dijit/_BidiSupport",["dojo/has","./_WidgetBase","./_BidiMixin"],function(_1,_2,_3){
_2.extend(_3);
_1.add("dojo-bidi",true);
return _2;
});


;define("dojo/fx/Toggler",["../_base/lang","../_base/declare","../_base/fx","../aspect"],function(_1,_2,_3,_4){
return _2("dojo.fx.Toggler",null,{node:null,showFunc:_3.fadeIn,hideFunc:_3.fadeOut,showDuration:200,hideDuration:200,constructor:function(_5){
var _6=this;
_1.mixin(_6,_5);
_6.node=_5.node;
_6._showArgs=_1.mixin({},_5);
_6._showArgs.node=_6.node;
_6._showArgs.duration=_6.showDuration;
_6.showAnim=_6.showFunc(_6._showArgs);
_6._hideArgs=_1.mixin({},_5);
_6._hideArgs.node=_6.node;
_6._hideArgs.duration=_6.hideDuration;
_6.hideAnim=_6.hideFunc(_6._hideArgs);
_4.after(_6.showAnim,"beforeBegin",_1.hitch(_6.hideAnim,"stop",true),true);
_4.after(_6.hideAnim,"beforeBegin",_1.hitch(_6.showAnim,"stop",true),true);
},show:function(_7){
return this.showAnim.play(_7||0);
},hide:function(_8){
return this.hideAnim.play(_8||0);
}});
});


;define("dojo/fx",["./_base/lang","./Evented","./_base/kernel","./_base/array","./aspect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require","./fx/Toggler"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){
var _c=_3.fx={};
var _d={_fire:function(_e,_f){
if(this[_e]){
this[_e].apply(this,_f||[]);
}
return this;
}};
var _10=function(_11){
this._index=-1;
this._animations=_11||[];
this._current=this._onAnimateCtx=this._onEndCtx=null;
this.duration=0;
_4.forEach(this._animations,function(a){
if(a){
if(typeof a.duration!="undefined"){
this.duration+=a.duration;
}
if(a.delay){
this.duration+=a.delay;
}
}
},this);
};
_10.prototype=new _2();
_1.extend(_10,{_onAnimate:function(){
this._fire("onAnimate",arguments);
},_onEnd:function(){
this._onAnimateCtx.remove();
this._onEndCtx.remove();
this._onAnimateCtx=this._onEndCtx=null;
if(this._index+1==this._animations.length){
this._fire("onEnd");
}else{
this._current=this._animations[++this._index];
this._onAnimateCtx=_5.after(this._current,"onAnimate",_1.hitch(this,"_onAnimate"),true);
this._onEndCtx=_5.after(this._current,"onEnd",_1.hitch(this,"_onEnd"),true);
this._current.play(0,true);
}
},play:function(_12,_13){
if(!this._current){
this._current=this._animations[this._index=0];
}
if(!_13&&this._current.status()=="playing"){
return this;
}
var _14=_5.after(this._current,"beforeBegin",_1.hitch(this,function(){
this._fire("beforeBegin");
}),true),_15=_5.after(this._current,"onBegin",_1.hitch(this,function(arg){
this._fire("onBegin",arguments);
}),true),_16=_5.after(this._current,"onPlay",_1.hitch(this,function(arg){
this._fire("onPlay",arguments);
_14.remove();
_15.remove();
_16.remove();
}));
if(this._onAnimateCtx){
this._onAnimateCtx.remove();
}
this._onAnimateCtx=_5.after(this._current,"onAnimate",_1.hitch(this,"_onAnimate"),true);
if(this._onEndCtx){
this._onEndCtx.remove();
}
this._onEndCtx=_5.after(this._current,"onEnd",_1.hitch(this,"_onEnd"),true);
this._current.play.apply(this._current,arguments);
return this;
},pause:function(){
if(this._current){
var e=_5.after(this._current,"onPause",_1.hitch(this,function(arg){
this._fire("onPause",arguments);
e.remove();
}),true);
this._current.pause();
}
return this;
},gotoPercent:function(_17,_18){
this.pause();
var _19=this.duration*_17;
this._current=null;
_4.some(this._animations,function(a,_1a){
if(_19<=a.duration){
this._current=a;
this._index=_1a;
return true;
}
_19-=a.duration;
return false;
},this);
if(this._current){
this._current.gotoPercent(_19/this._current.duration);
}
if(_18){
this.play();
}
return this;
},stop:function(_1b){
if(this._current){
if(_1b){
for(;this._index+1<this._animations.length;++this._index){
this._animations[this._index].stop(true);
}
this._current=this._animations[this._index];
}
var e=_5.after(this._current,"onStop",_1.hitch(this,function(arg){
this._fire("onStop",arguments);
e.remove();
}),true);
this._current.stop();
}
return this;
},status:function(){
return this._current?this._current.status():"stopped";
},destroy:function(){
this.stop();
if(this._onAnimateCtx){
this._onAnimateCtx.remove();
}
if(this._onEndCtx){
this._onEndCtx.remove();
}
}});
_1.extend(_10,_d);
_c.chain=function(_1c){
return new _10(_1.isArray(_1c)?_1c:Array.prototype.slice.call(_1c,0));
};
var _1d=function(_1e){
this._animations=_1e||[];
this._connects=[];
this._finished=0;
this.duration=0;
_4.forEach(_1e,function(a){
var _1f=a.duration;
if(a.delay){
_1f+=a.delay;
}
if(this.duration<_1f){
this.duration=_1f;
}
this._connects.push(_5.after(a,"onEnd",_1.hitch(this,"_onEnd"),true));
},this);
this._pseudoAnimation=new _6.Animation({curve:[0,1],duration:this.duration});
var _20=this;
_4.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){
_20._connects.push(_5.after(_20._pseudoAnimation,evt,function(){
_20._fire(evt,arguments);
},true));
});
};
_1.extend(_1d,{_doAction:function(_21,_22){
_4.forEach(this._animations,function(a){
a[_21].apply(a,_22);
});
return this;
},_onEnd:function(){
if(++this._finished>this._animations.length){
this._fire("onEnd");
}
},_call:function(_23,_24){
var t=this._pseudoAnimation;
t[_23].apply(t,_24);
},play:function(_25,_26){
this._finished=0;
this._doAction("play",arguments);
this._call("play",arguments);
return this;
},pause:function(){
this._doAction("pause",arguments);
this._call("pause",arguments);
return this;
},gotoPercent:function(_27,_28){
var ms=this.duration*_27;
_4.forEach(this._animations,function(a){
a.gotoPercent(a.duration<ms?1:(ms/a.duration),_28);
});
this._call("gotoPercent",arguments);
return this;
},stop:function(_29){
this._doAction("stop",arguments);
this._call("stop",arguments);
return this;
},status:function(){
return this._pseudoAnimation.status();
},destroy:function(){
this.stop();
_4.forEach(this._connects,function(_2a){
_2a.remove();
});
}});
_1.extend(_1d,_d);
_c.combine=function(_2b){
return new _1d(_1.isArray(_2b)?_2b:Array.prototype.slice.call(_2b,0));
};
_c.wipeIn=function(_2c){
var _2d=_2c.node=_7.byId(_2c.node),s=_2d.style,o;
var _2e=_6.animateProperty(_1.mixin({properties:{height:{start:function(){
o=s.overflow;
s.overflow="hidden";
if(s.visibility=="hidden"||s.display=="none"){
s.height="1px";
s.display="";
s.visibility="";
return 1;
}else{
var _2f=_8.get(_2d,"height");
return Math.max(_2f,1);
}
},end:function(){
return _2d.scrollHeight;
}}}},_2c));
var _30=function(){
s.height="auto";
s.overflow=o;
};
_5.after(_2e,"onStop",_30,true);
_5.after(_2e,"onEnd",_30,true);
return _2e;
};
_c.wipeOut=function(_31){
var _32=_31.node=_7.byId(_31.node),s=_32.style,o;
var _33=_6.animateProperty(_1.mixin({properties:{height:{end:1}}},_31));
_5.after(_33,"beforeBegin",function(){
o=s.overflow;
s.overflow="hidden";
s.display="";
},true);
var _34=function(){
s.overflow=o;
s.height="auto";
s.display="none";
};
_5.after(_33,"onStop",_34,true);
_5.after(_33,"onEnd",_34,true);
return _33;
};
_c.slideTo=function(_35){
var _36=_35.node=_7.byId(_35.node),top=null,_37=null;
var _38=(function(n){
return function(){
var cs=_8.getComputedStyle(n);
var pos=cs.position;
top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);
_37=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);
if(pos!="absolute"&&pos!="relative"){
var ret=_9.position(n,true);
top=ret.y;
_37=ret.x;
n.style.position="absolute";
n.style.top=top+"px";
n.style.left=_37+"px";
}
};
})(_36);
_38();
var _39=_6.animateProperty(_1.mixin({properties:{top:_35.top||0,left:_35.left||0}},_35));
_5.after(_39,"beforeBegin",_38,true);
return _39;
};
return _c;
});


;define("dojo/text!dijit/templates/Menu.html", '<table class="dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable" role="menu" tabIndex="${tabIndex}"	   cellspacing="0">	<tbody class="dijitReset" data-dojo-attach-point="containerNode"></tbody></table>');

;define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/domReady","dojo/touch","dojo/_base/window","./a11yclick","./registry"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9,_a,_b){
var _c=_2("dijit._CssStateMixin",[],{hovering:false,active:false,_applyAttributes:function(){
this.inherited(arguments);
_1.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(_d){
this.watch(_d,_6.hitch(this,"_setStateClass"));
},this);
for(var ap in this.cssStateNodes||{}){
this._trackMouseState(this[ap],this.cssStateNodes[ap]);
}
this._trackMouseState(this.domNode,this.baseClass);
this._setStateClass();
},_cssMouseEvent:function(_e){
if(!this.disabled){
switch(_e.type){
case "mouseover":
case "MSPointerOver":
case "pointerover":
this._set("hovering",true);
this._set("active",this._mouseDown);
break;
case "mouseout":
case "MSPointerOut":
case "pointerout":
this._set("hovering",false);
this._set("active",false);
break;
case "mousedown":
case "touchstart":
case "MSPointerDown":
case "pointerdown":
case "keydown":
this._set("active",true);
break;
case "mouseup":
case "dojotouchend":
case "MSPointerUp":
case "pointerup":
case "keyup":
this._set("active",false);
break;
}
}
},_setStateClass:function(){
var _f=this.baseClass.split(" ");
function _10(_11){
_f=_f.concat(_1.map(_f,function(c){
return c+_11;
}),"dijit"+_11);
};
if(!this.isLeftToRight()){
_10("Rtl");
}
var _12=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");
if(this.checked){
_10(_12);
}
if(this.state){
_10(this.state);
}
if(this.selected){
_10("Selected");
}
if(this._opened){
_10("Opened");
}
if(this.disabled){
_10("Disabled");
}else{
if(this.readOnly){
_10("ReadOnly");
}else{
if(this.active){
_10("Active");
}else{
if(this.hovering){
_10("Hover");
}
}
}
}
if(this.focused){
_10("Focused");
}
var tn=this.stateNode||this.domNode,_13={};
_1.forEach(tn.className.split(" "),function(c){
_13[c]=true;
});
if("_stateClasses" in this){
_1.forEach(this._stateClasses,function(c){
delete _13[c];
});
}
_1.forEach(_f,function(c){
_13[c]=true;
});
var _14=[];
for(var c in _13){
_14.push(c);
}
tn.className=_14.join(" ");
this._stateClasses=_f;
},_subnodeCssMouseEvent:function(_15,_16,evt){
if(this.disabled||this.readOnly){
return;
}
function _17(_18){
_4.toggle(_15,_16+"Hover",_18);
};
function _19(_1a){
_4.toggle(_15,_16+"Active",_1a);
};
function _1b(_1c){
_4.toggle(_15,_16+"Focused",_1c);
};
switch(evt.type){
case "mouseover":
case "MSPointerOver":
case "pointerover":
_17(true);
break;
case "mouseout":
case "MSPointerOut":
case "pointerout":
_17(false);
_19(false);
break;
case "mousedown":
case "touchstart":
case "MSPointerDown":
case "pointerdown":
case "keydown":
_19(true);
break;
case "mouseup":
case "MSPointerUp":
case "pointerup":
case "dojotouchend":
case "keyup":
_19(false);
break;
case "focus":
case "focusin":
_1b(true);
break;
case "blur":
case "focusout":
_1b(false);
break;
}
},_trackMouseState:function(_1d,_1e){
_1d._cssState=_1e;
}});
_7(function(){
function _1f(evt,_20,_21){
if(_21&&_3.isDescendant(_21,_20)){
return;
}
for(var _22=_20;_22&&_22!=_21;_22=_22.parentNode){
if(_22._cssState){
var _23=_b.getEnclosingWidget(_22);
if(_23){
if(_22==_23.domNode){
_23._cssMouseEvent(evt);
}else{
_23._subnodeCssMouseEvent(_22,_22._cssState,evt);
}
}
}
}
};
var _24=_9.body(),_25;
on(_24,_8.over,function(evt){
_1f(evt,evt.target,evt.relatedTarget);
});
on(_24,_8.out,function(evt){
_1f(evt,evt.target,evt.relatedTarget);
});
on(_24,_a.press,function(evt){
_25=evt.target;
_1f(evt,_25);
});
on(_24,_a.release,function(evt){
_1f(evt,_25);
_25=null;
});
on(_24,"focusin, focusout",function(evt){
var _26=evt.target;
if(_26._cssState&&!_26.getAttribute("widgetId")){
var _27=_b.getEnclosingWidget(_26);
if(_27){
_27._subnodeCssMouseEvent(_26,_26._cssState,evt);
}
}
});
});
return _c;
});


;define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/_base/kernel"],function(_1,_2,_3,_4){
return _2("dijit._Container",null,{buildRendering:function(){
this.inherited(arguments);
if(!this.containerNode){
this.containerNode=this.domNode;
}
},addChild:function(_5,_6){
var _7=this.containerNode;
if(_6>0){
_7=_7.firstChild;
while(_6>0){
if(_7.nodeType==1){
_6--;
}
_7=_7.nextSibling;
}
if(_7){
_6="before";
}else{
_7=this.containerNode;
_6="last";
}
}
_3.place(_5.domNode,_7,_6);
if(this._started&&!_5._started){
_5.startup();
}
},removeChild:function(_8){
if(typeof _8=="number"){
_8=this.getChildren()[_8];
}
if(_8){
var _9=_8.domNode;
if(_9&&_9.parentNode){
_9.parentNode.removeChild(_9);
}
}
},hasChildren:function(){
return this.getChildren().length>0;
},_getSiblingOfChild:function(_a,_b){
var _c=this.getChildren(),_d=_1.indexOf(_c,_a);
return _c[_d+_b];
},getIndexOfChild:function(_e){
return _1.indexOf(this.getChildren(),_e);
}});
});


;define("dijit/_KeyNavMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dijit/registry","dijit/_FocusMixin"],function(_1,_2,_3,_4,_5,on,_6,_7){
return _2("dijit._KeyNavMixin",_7,{tabIndex:"0",childSelector:null,postCreate:function(){
this.inherited(arguments);
_3.set(this.domNode,"tabIndex",this.tabIndex);
if(!this._keyNavCodes){
var _8=this._keyNavCodes={};
_8[_4.HOME]=_5.hitch(this,"focusFirstChild");
_8[_4.END]=_5.hitch(this,"focusLastChild");
_8[this.isLeftToRight()?_4.LEFT_ARROW:_4.RIGHT_ARROW]=_5.hitch(this,"_onLeftArrow");
_8[this.isLeftToRight()?_4.RIGHT_ARROW:_4.LEFT_ARROW]=_5.hitch(this,"_onRightArrow");
_8[_4.UP_ARROW]=_5.hitch(this,"_onUpArrow");
_8[_4.DOWN_ARROW]=_5.hitch(this,"_onDownArrow");
}
var _9=this,_a=typeof this.childSelector=="string"?this.childSelector:_5.hitch(this,"childSelector");
this.own(on(this.domNode,"keypress",_5.hitch(this,"_onContainerKeypress")),on(this.domNode,"keydown",_5.hitch(this,"_onContainerKeydown")),on(this.domNode,"focus",_5.hitch(this,"_onContainerFocus")),on(this.containerNode,on.selector(_a,"focusin"),function(_b){
_9._onChildFocus(_6.getEnclosingWidget(this),_b);
}));
},_onLeftArrow:function(){
},_onRightArrow:function(){
},_onUpArrow:function(){
},_onDownArrow:function(){
},focus:function(){
this.focusFirstChild();
},_getFirstFocusableChild:function(){
return this._getNextFocusableChild(null,1);
},_getLastFocusableChild:function(){
return this._getNextFocusableChild(null,-1);
},focusFirstChild:function(){
this.focusChild(this._getFirstFocusableChild());
},focusLastChild:function(){
this.focusChild(this._getLastFocusableChild());
},focusChild:function(_c,_d){
if(!_c){
return;
}
if(this.focusedChild&&_c!==this.focusedChild){
this._onChildBlur(this.focusedChild);
}
_c.set("tabIndex",this.tabIndex);
_c.focus(_d?"end":"start");
},_onContainerFocus:function(_e){
if(_e.target!==this.domNode||this.focusedChild){
return;
}
this.focus();
},_onFocus:function(){
_3.set(this.domNode,"tabIndex","-1");
this.inherited(arguments);
},_onBlur:function(_f){
_3.set(this.domNode,"tabIndex",this.tabIndex);
if(this.focusedChild){
this.focusedChild.set("tabIndex","-1");
this.lastFocusedChild=this.focusedChild;
this._set("focusedChild",null);
}
this.inherited(arguments);
},_onChildFocus:function(_10){
if(_10&&_10!=this.focusedChild){
if(this.focusedChild&&!this.focusedChild._destroyed){
this.focusedChild.set("tabIndex","-1");
}
_10.set("tabIndex",this.tabIndex);
this.lastFocused=_10;
this._set("focusedChild",_10);
}
},_searchString:"",multiCharSearchDuration:1000,onKeyboardSearch:function(_11,evt,_12,_13){
if(_11){
this.focusChild(_11);
}
},_keyboardSearchCompare:function(_14,_15){
var _16=_14.domNode,_17=_14.label||(_16.focusNode?_16.focusNode.label:"")||_16.innerText||_16.textContent||"",_18=_17.replace(/^\s+/,"").substr(0,_15.length).toLowerCase();
return (!!_15.length&&_18==_15)?-1:0;
},_onContainerKeydown:function(evt){
var _19=this._keyNavCodes[evt.keyCode];
if(_19){
_19(evt,this.focusedChild);
evt.stopPropagation();
evt.preventDefault();
this._searchString="";
}else{
if(evt.keyCode==_4.SPACE&&this._searchTimer&&!(evt.ctrlKey||evt.altKey||evt.metaKey)){
evt.stopImmediatePropagation();
evt.preventDefault();
this._keyboardSearch(evt," ");
}
}
},_onContainerKeypress:function(evt){
if(evt.charCode<=_4.SPACE||evt.ctrlKey||evt.altKey||evt.metaKey){
return;
}
evt.preventDefault();
evt.stopPropagation();
this._keyboardSearch(evt,String.fromCharCode(evt.charCode).toLowerCase());
},_keyboardSearch:function(evt,_1a){
var _1b=null,_1c,_1d=0,_1e=_5.hitch(this,function(){
if(this._searchTimer){
this._searchTimer.remove();
}
this._searchString+=_1a;
var _1f=/^(.)\1*$/.test(this._searchString);
var _20=_1f?1:this._searchString.length;
_1c=this._searchString.substr(0,_20);
this._searchTimer=this.defer(function(){
this._searchTimer=null;
this._searchString="";
},this.multiCharSearchDuration);
var _21=this.focusedChild||null;
if(_20==1||!_21){
_21=this._getNextFocusableChild(_21,1);
if(!_21){
return;
}
}
var _22=_21;
do{
var rc=this._keyboardSearchCompare(_21,_1c);
if(!!rc&&_1d++==0){
_1b=_21;
}
if(rc==-1){
_1d=-1;
break;
}
_21=this._getNextFocusableChild(_21,1);
}while(_21&&_21!=_22);
});
_1e();
this.onKeyboardSearch(_1b,evt,_1c,_1d);
},_onChildBlur:function(){
},_getNextFocusableChild:function(_23,dir){
var _24=_23;
do{
if(!_23){
_23=this[dir>0?"_getFirst":"_getLast"]();
if(!_23){
break;
}
}else{
_23=this._getNext(_23,dir);
}
if(_23!=null&&_23!=_24&&_23.isFocusable()){
return _23;
}
}while(_23!=_24);
return null;
},_getFirst:function(){
return null;
},_getLast:function(){
return null;
},_getNext:function(_25,dir){
if(_25){
_25=_25.domNode;
while(_25){
_25=_25[dir<0?"previousSibling":"nextSibling"];
if(_25&&"getAttribute" in _25){
var w=_6.byNode(_25);
if(w){
return w;
}
}
}
}
return null;
}});
});


;define("dijit/_KeyNavContainer",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/_base/kernel","dojo/keys","dojo/_base/lang","./registry","./_Container","./_FocusMixin","./_KeyNavMixin"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){
return _2("dijit._KeyNavContainer",[_9,_a,_8],{connectKeyNavHandlers:function(_b,_c){
var _d=(this._keyNavCodes={});
var _e=_6.hitch(this,"focusPrev");
var _f=_6.hitch(this,"focusNext");
_1.forEach(_b,function(_10){
_d[_10]=_e;
});
_1.forEach(_c,function(_11){
_d[_11]=_f;
});
_d[_5.HOME]=_6.hitch(this,"focusFirstChild");
_d[_5.END]=_6.hitch(this,"focusLastChild");
},startupKeyNavChildren:function(){
_4.deprecated("startupKeyNavChildren() call no longer needed","","2.0");
},startup:function(){
this.inherited(arguments);
_1.forEach(this.getChildren(),_6.hitch(this,"_startupChild"));
},addChild:function(_12,_13){
this.inherited(arguments);
this._startupChild(_12);
},_startupChild:function(_14){
_14.set("tabIndex","-1");
},_getFirst:function(){
var _15=this.getChildren();
return _15.length?_15[0]:null;
},_getLast:function(){
var _16=this.getChildren();
return _16.length?_16[_16.length-1]:null;
},focusNext:function(){
this.focusChild(this._getNextFocusableChild(this.focusedChild,1));
},focusPrev:function(){
this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);
},childSelector:function(_17){
var _17=_7.byNode(_17);
return _17&&_17.getParent()==this;
}});
});


;define("dijit/_MenuBase",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/lang","dojo/mouse","dojo/on","dojo/window","./a11yclick","./registry","./_Widget","./_CssStateMixin","./_KeyNavContainer","./_TemplatedMixin"],function(_1,_2,_3,_4,_5,_6,_7,on,_8,_9,_a,_b,_c,_d,_e){
return _2("dijit._MenuBase",[_b,_e,_d,_c],{selected:null,_setSelectedAttr:function(_f){
if(this.selected!=_f){
if(this.selected){
this.selected._setSelected(false);
this._onChildDeselect(this.selected);
}
if(_f){
_f._setSelected(true);
}
this._set("selected",_f);
}
},activated:false,_setActivatedAttr:function(val){
_5.toggle(this.domNode,"dijitMenuActive",val);
_5.toggle(this.domNode,"dijitMenuPassive",!val);
this._set("activated",val);
},parentMenu:null,popupDelay:500,passivePopupDelay:Infinity,autoFocus:false,childSelector:function(_10){
var _11=_a.byNode(_10);
return _10.parentNode==this.containerNode&&_11&&_11.focus;
},postCreate:function(){
var _12=this,_13=typeof this.childSelector=="string"?this.childSelector:_6.hitch(this,"childSelector");
this.own(on(this.containerNode,on.selector(_13,_7.enter),function(){
_12.onItemHover(_a.byNode(this));
}),on(this.containerNode,on.selector(_13,_7.leave),function(){
_12.onItemUnhover(_a.byNode(this));
}),on(this.containerNode,on.selector(_13,_9),function(evt){
_12.onItemClick(_a.byNode(this),evt);
evt.stopPropagation();
}),on(this.containerNode,on.selector(_13,"focusin"),function(){
_12._onItemFocus(_a.byNode(this));
}));
this.inherited(arguments);
},onKeyboardSearch:function(_14,evt,_15,_16){
this.inherited(arguments);
if(!!_14&&(_16==-1||(!!_14.popup&&_16==1))){
this.onItemClick(_14,evt);
}
},_keyboardSearchCompare:function(_17,_18){
if(!!_17.shortcutKey){
return _18==_17.shortcutKey.toLowerCase()?-1:0;
}
return this.inherited(arguments)?1:0;
},onExecute:function(){
},onCancel:function(){
},_moveToPopup:function(evt){
if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){
this.onItemClick(this.focusedChild,evt);
}else{
var _19=this._getTopMenu();
if(_19&&_19._isMenuBar){
_19.focusNext();
}
}
},_onPopupHover:function(){
this.set("selected",this.currentPopupItem);
this._stopPendingCloseTimer();
},onItemHover:function(_1a){
if(this.activated){
this.set("selected",_1a);
if(_1a.popup&&!_1a.disabled&&!this.hover_timer){
this.hover_timer=this.defer(function(){
this._openItemPopup(_1a);
},this.popupDelay);
}
}else{
if(this.passivePopupDelay<Infinity){
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
}
this.passive_hover_timer=this.defer(function(){
this.onItemClick(_1a,{type:"click"});
},this.passivePopupDelay);
}
}
this._hoveredChild=_1a;
_1a._set("hovering",true);
},_onChildDeselect:function(_1b){
this._stopPopupTimer();
if(this.currentPopupItem==_1b){
this._stopPendingCloseTimer();
this._pendingClose_timer=this.defer(function(){
this._pendingClose_timer=null;
this.currentPopupItem=null;
_1b._closePopup();
},this.popupDelay);
}
},onItemUnhover:function(_1c){
if(this._hoveredChild==_1c){
this._hoveredChild=null;
}
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
this.passive_hover_timer=null;
}
_1c._set("hovering",false);
},_stopPopupTimer:function(){
if(this.hover_timer){
this.hover_timer=this.hover_timer.remove();
}
},_stopPendingCloseTimer:function(){
if(this._pendingClose_timer){
this._pendingClose_timer=this._pendingClose_timer.remove();
}
},_getTopMenu:function(){
for(var top=this;top.parentMenu;top=top.parentMenu){
}
return top;
},onItemClick:function(_1d,evt){
if(this.passive_hover_timer){
this.passive_hover_timer.remove();
}
this.focusChild(_1d);
if(_1d.disabled){
return false;
}
if(_1d.popup){
this.set("selected",_1d);
this.set("activated",true);
var _1e=/^key/.test(evt._origType||evt.type)||(evt.clientX==0&&evt.clientY==0);
this._openItemPopup(_1d,_1e);
}else{
this.onExecute();
_1d._onClick?_1d._onClick(evt):_1d.onClick(evt);
}
},_openItemPopup:function(_1f,_20){
if(_1f==this.currentPopupItem){
return;
}
if(this.currentPopupItem){
this._stopPendingCloseTimer();
this.currentPopupItem._closePopup();
}
this._stopPopupTimer();
var _21=_1f.popup;
_21.parentMenu=this;
this.own(this._mouseoverHandle=on.once(_21.domNode,"mouseover",_6.hitch(this,"_onPopupHover")));
var _22=this;
_1f._openPopup({parent:this,orient:this._orient||["after","before"],onCancel:function(){
if(_20){
_22.focusChild(_1f);
}
_22._cleanUp();
},onExecute:_6.hitch(this,"_cleanUp",true),onClose:function(){
if(_22._mouseoverHandle){
_22._mouseoverHandle.remove();
delete _22._mouseoverHandle;
}
}},_20);
this.currentPopupItem=_1f;
},onOpen:function(){
this.isShowingNow=true;
this.set("activated",true);
},onClose:function(){
this.set("activated",false);
this.set("selected",null);
this.isShowingNow=false;
this.parentMenu=null;
},_closeChild:function(){
this._stopPopupTimer();
if(this.currentPopupItem){
if(this.focused){
_4.set(this.selected.focusNode,"tabIndex",this.tabIndex);
this.selected.focusNode.focus();
}
this.currentPopupItem._closePopup();
this.currentPopupItem=null;
}
},_onItemFocus:function(_23){
if(this._hoveredChild&&this._hoveredChild!=_23){
this.onItemUnhover(this._hoveredChild);
}
this.set("selected",_23);
},_onBlur:function(){
this._cleanUp(true);
this.inherited(arguments);
},_cleanUp:function(_24){
this._closeChild();
if(typeof this.isShowingNow=="undefined"){
this.set("activated",false);
}
if(_24){
this.set("selected",null);
}
}});
});


;define("dijit/DropDownMenu",["dojo/_base/declare","dojo/keys","dojo/text!./templates/Menu.html","./_MenuBase"],function(_1,_2,_3,_4){
return _1("dijit.DropDownMenu",_4,{templateString:_3,baseClass:"dijitMenu",_onUpArrow:function(){
this.focusPrev();
},_onDownArrow:function(){
this.focusNext();
},_onRightArrow:function(_5){
this._moveToPopup(_5);
_5.stopPropagation();
_5.preventDefault();
},_onLeftArrow:function(_6){
if(this.parentMenu){
if(this.parentMenu._isMenuBar){
this.parentMenu.focusPrev();
}else{
this.onCancel(false);
}
}else{
_6.stopPropagation();
_6.preventDefault();
}
}});
});


;define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_1,_2){
return _1("dijit._Contained",null,{_getSibling:function(_3){
var p=this.getParent();
return (p&&p._getSiblingOfChild&&p._getSiblingOfChild(this,_3=="previous"?-1:1))||null;
},getPreviousSibling:function(){
return this._getSibling("previous");
},getNextSibling:function(){
return this._getSibling("next");
},getIndexInParent:function(){
var p=this.getParent();
if(!p||!p.getIndexOfChild){
return -1;
}
return p.getIndexOfChild(this);
}});
});


;define("dojo/text!dijit/templates/MenuItem.html", '<tr class="dijitReset" data-dojo-attach-point="focusNode" role="menuitem" tabIndex="-1">	<td class="dijitReset dijitMenuItemIconCell" role="presentation">		<span role="presentation" class="dijitInline dijitIcon dijitMenuItemIcon" data-dojo-attach-point="iconNode"></span>	</td>	<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,textDirNode"		role="presentation"></td>	<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>	<td class="dijitReset dijitMenuArrowCell" role="presentation">		<span data-dojo-attach-point="arrowWrapper" style="visibility: hidden">			<span class="dijitInline dijitIcon dijitMenuExpand"></span>			<span class="dijitMenuExpandA11y">+</span>		</span>	</td></tr>');

;define("dijit/MenuItem",["dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/_base/kernel","dojo/sniff","dojo/_base/lang","./_Widget","./_TemplatedMixin","./_Contained","./_CssStateMixin","dojo/text!./templates/MenuItem.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c){
var _d=_1("dijit.MenuItem"+(_6("dojo-bidi")?"_NoBidi":""),[_8,_9,_a,_b],{templateString:_c,baseClass:"dijitMenuItem",label:"",_setLabelAttr:function(_e){
this._set("label",_e);
var _f="";
var _10;
var ndx=_e.search(/{\S}/);
if(ndx>=0){
_f=_e.charAt(ndx+1);
var _11=_e.substr(0,ndx);
var _12=_e.substr(ndx+3);
_10=_11+_f+_12;
_e=_11+"<span class=\"dijitMenuItemShortcutKey\">"+_f+"</span>"+_12;
}else{
_10=_e;
}
this.domNode.setAttribute("aria-label",_10+" "+this.accelKey);
this.containerNode.innerHTML=_e;
this._set("shortcutKey",_f);
},iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},accelKey:"",disabled:false,_fillContent:function(_13){
if(_13&&!("label" in this.params)){
this._set("label",_13.innerHTML);
}
},buildRendering:function(){
this.inherited(arguments);
var _14=this.id+"_text";
_3.set(this.containerNode,"id",_14);
if(this.accelKeyNode){
_3.set(this.accelKeyNode,"id",this.id+"_accel");
}
_2.setSelectable(this.domNode,false);
},onClick:function(){
},focus:function(){
try{
if(_6("ie")==8){
this.containerNode.focus();
}
this.focusNode.focus();
}
catch(e){
}
},_setSelected:function(_15){
_4.toggle(this.domNode,"dijitMenuItemSelected",_15);
},setLabel:function(_16){
_5.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");
this.set("label",_16);
},setDisabled:function(_17){
_5.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");
this.set("disabled",_17);
},_setDisabledAttr:function(_18){
this.focusNode.setAttribute("aria-disabled",_18?"true":"false");
this._set("disabled",_18);
},_setAccelKeyAttr:function(_19){
if(this.accelKeyNode){
this.accelKeyNode.style.display=_19?"":"none";
this.accelKeyNode.innerHTML=_19;
_3.set(this.containerNode,"colSpan",_19?"1":"2");
}
this._set("accelKey",_19);
}});
if(_6("dojo-bidi")){
_d=_1("dijit.MenuItem",_d,{_setLabelAttr:function(val){
this.inherited(arguments);
if(this.textDir==="auto"){
this.applyTextDir(this.textDirNode);
}
}});
}
return _d;
});


;define("dijit/PopupMenuItem",["dojo/_base/declare","dojo/dom-style","dojo/_base/lang","dojo/query","./popup","./registry","./MenuItem","./hccss"],function(_1,_2,_3,_4,pm,_5,_6){
return _1("dijit.PopupMenuItem",_6,{baseClass:"dijitMenuItem dijitPopupMenuItem",_fillContent:function(){
if(this.srcNodeRef){
var _7=_4("*",this.srcNodeRef);
this.inherited(arguments,[_7[0]]);
this.dropDownContainer=this.srcNodeRef;
}
},_openPopup:function(_8,_9){
var _a=this.popup;
pm.open(_3.delegate(_8,{popup:this.popup,around:this.domNode}));
if(_9&&_a.focus){
_a.focus();
}
},_closePopup:function(){
pm.close(this.popup);
this.popup.parentMenu=null;
},startup:function(){
if(this._started){
return;
}
this.inherited(arguments);
if(!this.popup){
var _b=_4("[widgetId]",this.dropDownContainer)[0];
this.popup=_5.byNode(_b);
}
this.ownerDocumentBody.appendChild(this.popup.domNode);
this.popup.domNode.setAttribute("aria-labelledby",this.containerNode.id);
this.popup.startup();
this.popup.domNode.style.display="none";
if(this.arrowWrapper){
_2.set(this.arrowWrapper,"visibility","");
}
this.focusNode.setAttribute("aria-haspopup","true");
},destroyDescendants:function(_c){
if(this.popup){
if(!this.popup._destroyed){
this.popup.destroyRecursive(_c);
}
delete this.popup;
}
this.inherited(arguments);
}});
});


;define("dojo/text!dijit/templates/CheckedMenuItem.html", '<tr class="dijitReset" data-dojo-attach-point="focusNode" role="${role}" tabIndex="-1" aria-checked="${checked}">	<td class="dijitReset dijitMenuItemIconCell" role="presentation">		<span class="dijitInline dijitIcon dijitMenuItemIcon dijitCheckedMenuItemIcon" data-dojo-attach-point="iconNode"></span>		<span class="dijitMenuItemIconChar dijitCheckedMenuItemIconChar">${!checkedChar}</span>	</td>	<td class="dijitReset dijitMenuItemLabel" colspan="2" data-dojo-attach-point="containerNode,labelNode,textDirNode"></td>	<td class="dijitReset dijitMenuItemAccelKey" style="display: none" data-dojo-attach-point="accelKeyNode"></td>	<td class="dijitReset dijitMenuArrowCell" role="presentation">&#160;</td></tr>');

;define("dijit/CheckedMenuItem",["dojo/_base/declare","dojo/dom-class","./MenuItem","dojo/text!./templates/CheckedMenuItem.html","./hccss"],function(_1,_2,_3,_4){
return _1("dijit.CheckedMenuItem",_3,{baseClass:"dijitMenuItem dijitCheckedMenuItem",templateString:_4,checked:false,_setCheckedAttr:function(_5){
this.domNode.setAttribute("aria-checked",_5?"true":"false");
this._set("checked",_5);
},iconClass:"",role:"menuitemcheckbox",checkedChar:"&#10003;",onChange:function(){
},_onClick:function(_6){
if(!this.disabled){
this.set("checked",!this.checked);
this.onChange(this.checked);
}
this.onClick(_6);
}});
});


;define("dojo/text!dijit/templates/MenuSeparator.html", '<tr class="dijitMenuSeparator" role="separator">	<td class="dijitMenuSeparatorIconCell">		<div class="dijitMenuSeparatorTop"></div>		<div class="dijitMenuSeparatorBottom"></div>	</td>	<td colspan="3" class="dijitMenuSeparatorLabelCell">		<div class="dijitMenuSeparatorTop dijitMenuSeparatorLabel"></div>		<div class="dijitMenuSeparatorBottom"></div>	</td></tr>');

;define("dijit/MenuSeparator",["dojo/_base/declare","dojo/dom","./_WidgetBase","./_TemplatedMixin","./_Contained","dojo/text!./templates/MenuSeparator.html"],function(_1,_2,_3,_4,_5,_6){
return _1("dijit.MenuSeparator",[_3,_4,_5],{templateString:_6,buildRendering:function(){
this.inherited(arguments);
_2.setSelectable(this.domNode,false);
},isFocusable:function(){
return false;
}});
});


;define("dijit/Menu",["require","dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window","dojo/window","./popup","./DropDownMenu","dojo/ready","./MenuItem","./PopupMenuItem","./CheckedMenuItem","./MenuSeparator"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,on,_a,_b,_c,pm,_d,_e){
return _3("dijit.Menu",_d,{constructor:function(){
this._bindings=[];
},targetNodeIds:[],selector:"",contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){
if(this.contextMenuForWindow){
this.bindDomNode(this.ownerDocumentBody);
}else{
_2.forEach(this.targetNodeIds,this.bindDomNode,this);
}
this.inherited(arguments);
},_iframeContentWindow:function(_f){
return _c.get(this._iframeContentDocument(_f))||this._iframeContentDocument(_f)["__parent__"]||(_f.name&&document.frames[_f.name])||null;
},_iframeContentDocument:function(_10){
return _10.contentDocument||(_10.contentWindow&&_10.contentWindow.document)||(_10.name&&document.frames[_10.name]&&document.frames[_10.name].document)||null;
},bindDomNode:function(_11){
_11=_4.byId(_11,this.ownerDocument);
var cn;
if(_11.tagName.toLowerCase()=="iframe"){
var _12=_11,_13=this._iframeContentWindow(_12);
cn=_b.body(_13.document);
}else{
cn=(_11==_b.body(this.ownerDocument)?this.ownerDocument.documentElement:_11);
}
var _14={node:_11,iframe:_12};
_5.set(_11,"_dijitMenu"+this.id,this._bindings.push(_14));
var _15=_9.hitch(this,function(cn){
var _16=this.selector,_17=_16?function(_18){
return on.selector(_16,_18);
}:function(_19){
return _19;
},_1a=this;
return [on(cn,_17(this.leftClickToOpen?"click":"contextmenu"),function(evt){
evt.stopPropagation();
evt.preventDefault();
if((new Date()).getTime()<_1a._lastKeyDown+500){
return;
}
_1a._scheduleOpen(this,_12,{x:evt.pageX,y:evt.pageY},evt.target);
}),on(cn,_17("keydown"),function(evt){
if(evt.keyCode==93||(evt.shiftKey&&evt.keyCode==_8.F10)||(_1a.leftClickToOpen&&evt.keyCode==_8.SPACE)){
evt.stopPropagation();
evt.preventDefault();
_1a._scheduleOpen(this,_12,null,evt.target);
_1a._lastKeyDown=(new Date()).getTime();
}
})];
});
_14.connects=cn?_15(cn):[];
if(_12){
_14.onloadHandler=_9.hitch(this,function(){
var _1b=this._iframeContentWindow(_12),cn=_b.body(_1b.document);
_14.connects=_15(cn);
});
if(_12.addEventListener){
_12.addEventListener("load",_14.onloadHandler,false);
}else{
_12.attachEvent("onload",_14.onloadHandler);
}
}
},unBindDomNode:function(_1c){
var _1d;
try{
_1d=_4.byId(_1c,this.ownerDocument);
}
catch(e){
return;
}
var _1e="_dijitMenu"+this.id;
if(_1d&&_5.has(_1d,_1e)){
var bid=_5.get(_1d,_1e)-1,b=this._bindings[bid],h;
while((h=b.connects.pop())){
h.remove();
}
var _1f=b.iframe;
if(_1f){
if(_1f.removeEventListener){
_1f.removeEventListener("load",b.onloadHandler,false);
}else{
_1f.detachEvent("onload",b.onloadHandler);
}
}
_5.remove(_1d,_1e);
delete this._bindings[bid];
}
},_scheduleOpen:function(_20,_21,_22,_23){
if(!this._openTimer){
this._openTimer=this.defer(function(){
delete this._openTimer;
this._openMyself({target:_23,delegatedTarget:_20,iframe:_21,coords:_22});
},1);
}
},_openMyself:function(_24){
var _25=_24.target,_26=_24.iframe,_27=_24.coords,_28=!_27;
this.currentTarget=_24.delegatedTarget;
if(_27){
if(_26){
var ifc=_6.position(_26,true),_29=this._iframeContentWindow(_26),_2a=_6.docScroll(_29.document);
var cs=_7.getComputedStyle(_26),tp=_7.toPixelValue,_2b=(_a("ie")&&_a("quirks")?0:tp(_26,cs.paddingLeft))+(_a("ie")&&_a("quirks")?tp(_26,cs.borderLeftWidth):0),top=(_a("ie")&&_a("quirks")?0:tp(_26,cs.paddingTop))+(_a("ie")&&_a("quirks")?tp(_26,cs.borderTopWidth):0);
_27.x+=ifc.x+_2b-_2a.x;
_27.y+=ifc.y+top-_2a.y;
}
}else{
_27=_6.position(_25,true);
_27.x+=10;
_27.y+=10;
}
var _2c=this;
var _2d=this._focusManager.get("prevNode");
var _2e=this._focusManager.get("curNode");
var _2f=!_2e||(_4.isDescendant(_2e,this.domNode))?_2d:_2e;
function _30(){
if(_2c.refocus&&_2f){
_2f.focus();
}
pm.close(_2c);
};
pm.open({popup:this,x:_27.x,y:_27.y,onExecute:_30,onCancel:_30,orient:this.isLeftToRight()?"L":"R"});
this.focus();
if(!_28){
this.defer(function(){
this._cleanUp(true);
});
}
this._onBlur=function(){
this.inherited("_onBlur",arguments);
pm.close(this);
};
},destroy:function(){
_2.forEach(this._bindings,function(b){
if(b){
this.unBindDomNode(b.node);
}
},this);
this.inherited(arguments);
}});
});


;dojo.provide("jazz.ui.Menu");
(function(){


dojo.declare("jazz.ui.Menu",dijit.Menu,{baseClass:"jazz-ui-Menu dijitMenu",templateString:"<table class=\"jazz-ui-Menu\"><tr><td><div class=\"jazz-ui-Menu-border\"><div class=\"wrapper\" dojoAttachPoint=\"_wrapper\"><table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" waiRole=\"menu\" role=\"menu\" tabIndex=\"${tabIndex}\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table></div></div></td></tr></table>\n",onItemUnhover:function(_1){
_1._setSelected(false);
this.inherited(arguments);
},selectable:false,setSelected:function(_2){
if(!this._selected){
this._selected=[];
}
var _3;
while(this._selected.length>0){
_3=this._selected.pop();
if(_3.domNode){
if(typeof _3.selected!="undefined"){
_3.set("selected",false);
}else{
dojo.removeClass(_3.domNode,"selected");
}
}
}
if(!_2){
return;
}
if(dojo.isArray(_2)){
for(var k=0;k<_2.length;k++){
if(typeof _2[k]=="number"){
_2[k]=this.getChildren()[_2[k]];
}
}
this._selected=_2;
}else{
if(typeof _2=="number"){
this._selected=[this.getChildren()[_2]];
}else{
if(_2.domNode){
this._selected=[_2];
}
}
}
for(var i=0;i<this._selected.length;i++){
var x=this._selected[i];
if(x.domNode){
if(typeof x.selected!="undefined"){
x.set("selected",true);
}else{
dojo.addClass(x.domNode,"selected");
dijit.setWaiState(x.domNode,"checked",true);
}
}
}
},_setSelectableAttr:function(_4){
dojo.toggleClass(this.domNode,"selectable",_4);
this.selectable=_4;
}});
})();


;(function(){
dojo.provide("jazz.util.moduleResource");
jazz.util.moduleResource=function(_1){
if(typeof (_1)!="string"){
return _1;
}
var _2=_1.indexOf("/");
if(_2<=0){
return _1;
}
var _3=_1.substr(0,_2);
if(_3.indexOf(".")<0||!dojo.exists(_3)){
return _1;
}
return dojo.moduleUrl(_3,_1.substr(_2+1,_1.length)).toString();
};
})();


;dojo.cache("jazz.ui", "menu/templates/MenuItem.html", "<tr class=\"jazz-ui-menu-MenuItem dijitReset dijitMenuItem\" data-dojo-attach-point=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\">	<td class=\"dijitReset dijitMenuItemLabel\" data-dojo-attach-point=\"_td\" colspan=\"3\">		<span class=\"MenuItemContent\" data-dojo-attach-point=\"_wrapper\">			<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon ${iconClass}\" data-dojo-attach-point=\"iconNode\"/>	         <span data-dojo-attach-point=\"containerNode\"></span>		</span>	</td>	<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" data-dojo-attach-point=\"accelKeyNode\"></td>	<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">		<div data-dojo-attach-point=\"arrowWrapper\" style=\"visibility: hidden\">			<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>			<span class=\"dijitMenuExpandA11y\">+</span>		</div>	</td></tr>");

;dojo.provide("jazz.ui.menu.MenuItem");






(function(){
dojo.declare("jazz.ui.menu.MenuItem",dijit.MenuItem,{icon:"",iconClass:"",href:"",selected:false,templateString:null,templatePath:dojo.moduleUrl("jazz.ui","menu/templates/MenuItem.html"),postCreate:function(){
this.inherited(arguments);
this.focusNode.style.cursor="pointer";
if(this.href){
var a=dojo.create("a",{"class":"itemHref",tabIndex:"-1",href:this.href});
this.connect(a,"onclick",this._onClick);
dojo.place(this._wrapper,a);
dojo.place(a,this._td);
}
},_setIconAttr:function(_1){
_1=jazz.util.moduleResource(_1);
this.icon=_1;
this.iconNode.src=_1;
},_setSelectedAttr:function(_2){
if(_2){
if(!this._bullet){
this._bullet=dojo.create("span",{"class":"bullet"},this._td,"first");
}
}else{
if(this._bullet){
this._td.removeChild(this._bullet);
delete this._bullet;
}
}
dijit.setWaiRole(this.domNode,"menuitemcheckbox");
dijit.setWaiState(this.domNode,"checked",_2);
dojo.toggleClass(this.domNode,"selected",_2);
this.selected=_2;
},_onClick:function(_3){
if(this.disabled){
dojo.stopEvent(_3);
return;
}
if(this.href){
if(_3.altKey||_3.ctrlKey||_3.shiftKey||_3.metaKey){
if(dojo.isFF<22){
try{
_3.stopPropagation=function(){
};
_3.preventDefault=function(){
};
}
catch(e){
}
}
_3.stopPropagation();
return;
}
if(_3.button===dojo.mouseButtons.MIDDLE){
try{
_3.stopPropagation=function(){
};
_3.preventDefault=function(){
};
}
catch(e){
}
}else{
_3.stopPropagation();
var _4=dojo.getObject("net.jazz.ajax.ui.PlatformUI");
if(_4){
var wb=_4.getWorkbench();
if(wb){
if(!wb.shouldVetoNavigation(this.href)){
if(dojo.isFF){
_3.preventDefault();
}
location.href=this.href;
}else{
dojo.stopEvent(_3);
}
}
}
}
var _5=this.getParent();
setTimeout(dojo.hitch(_5,_5.onExecute),0);
}else{
if(this.onClick){
this.onClick(_3);
}
}
},_setStateClass:function(){
if(!this.domNode){
return;
}
var _6=this.selected;
this.selected=false;
this.inherited(arguments);
this.selected=_6;
}});
})();


;dojo.provide("jazz.ui.SimpleToolbar");
dojo.deprecated("jazz.ui.SimpleToolbar is deprecated","Use jazz.ui.Toolbar and jazz.ui.toolbar.Button|MenuButton|TwoStateButton instead. See JAF adoption item 153814.");




(function(){
dojo.setObject("jazz.ui.simpleToolbar.hoverStyles",{BLUE_BORDER:"DEPRECATED blue-border",BLUE:"DEPRECATED blue",ORANGE:"DEPRECATED orange",ORANGE_BORDER:"DEPRECATED orange-border",GRAY:"DEPRECATED gray",NONE:"DEPRECATED none"});
dojo.setObject("jazz.ui.simpleToolbar.buttonType",{SIMPLE:"DEPRECATED simple",TWO_STATE:"DEPRECATED twoState"});
var _1={BLUE_BORDER:"blue-border",BLUE:"blue",ORANGE:"orange",ORANGE_BORDER:"orange-border",GRAY:"gray",NONE:"none"};
var _2={SIMPLE:"simple",TWO_STATE:"twoState"};
var _3="jazz-ui-SimpleToolbar";
dojo.declare("jazz.ui.SimpleToolbar",[dijit._Widget,dijit._Templated],{hoverStyle:_1.ORANGE_BORDER,templateString:"<div class='"+_3+"'></div>",postCreate:function(){
var hs=this.hoverStyle;
if(typeof hs==="string"&&hs.indexOf("DEPRECATED ")===0){
dojo.deprecated("jazz.ui.simpleToolbar.hoverStyles","Use jazz.ui.SimpleToolbar.HoverStyles instead");
hs=hs.substring(11);
}
dojo.addClass(this.domNode,_3+"-"+hs);
this.items=new Array();
dijit.setWaiRole(this.domNode,"toolbar");
dojo.attr(this.domNode,"aria-labelledby",this.domNode.id);
},addButton:function(_4,_5,_6){
if(!_6||(!_6.imgSrc&&!_6.className)){
console.error("Toolbar: Invalid arguments. Skipping.");
return;
}
if(typeof _6.buttonType==="string"&&_6.buttonType.indexOf("DEPRECATED ")===0){
dojo.deprecated("jazz.ui.simpleToolbar.buttonType","Use jazz.ui.SimpleToolbar.ButtonTypes instead");
_6.buttonType=_6.buttonType.substring(11);
}
if(_6.buttonType==_2.TWO_STATE&&!_6.imgSrcPressed){
_6.imgSrcPressed=_6.imgSrc;
}
var _7=dojo.create("a",{className:_3+"-button",href:_6.href||"#",title:_6.label});
dijit.setWaiRole(_7,"button");
if(_6.className){
dojo.addClass(_7,_6.className);
}
var _8=dojo.create("img",{src:""+(_6.imgSrc||this._blankGif),alt:_6.label},_7);
_6._img=_8;
if(_6.label){
if(_6.showLabel){
var _9=dojo.create("span",{"class":_3+"-label","id":dijit.registry.getUniqueId(_6.label+"-label")},_7);
_9.appendChild(document.createTextNode(_6.label));
dojo.attr(_7,"aria-labelledby",_9.id);
}else{
dojo.attr(_7,"aria-label",_6.label);
}
}
if(_5){
this.connect(_7,"onclick",function(_a){
if(dojo.hasClass(_a.currentTarget,_3+"-button-disabled")){
dojo.stopEvent(_a);
return;
}
if(_6.buttonType==_2.TWO_STATE){
if(dojo.hasClass(_7,_3+"-button-pressed")){
_8.src=_6.imgSrc;
dojo.removeClass(_7,_3+"-button-pressed");
_a.pressed=false;
}else{
_8.src=_6.imgSrcPressed;
dojo.addClass(_7,_3+"-button-pressed");
_a.pressed=true;
}
}
if(!_6.href){
_a.preventDefault();
}
dojo.hitch(_4,_5)(_a);
});
this.connect(_7,"onkeyup",function(_b){
if(_b&&(_b.keyCode===dojo.keys.SPACE)){
_7.click();
}
});
}
return this._insert({domNode:_7,_isButton:true,args:_6},_6.index);
},addSeparator:function(_c){
return this._insert({domNode:dojo.create("div",{className:_3+"-separator"})},_c);
},addWidget:function(_d,_e){
if(!_e){
_e={};
}
var _f=_d.domNode;
if(_e.isButton===true){
dojo.addClass(_d.domNode,_3+"-button");
}
return this._insert(_d,_e.index);
},getIndex:function(_10){
for(var i=0;i<this.items.length;i++){
if(this.items[i]===_10){
return i;
}
}
return -1;
},getItem:function(_11){
return this.items[_11]||null;
},removeItem:function(_12){
var _13=-1;
if(typeof _12=="number"){
_13=_12;
_12=this.getItem(_13);
}else{
_13=this.getIndex(_12);
}
if(_13>=0&&_12&&_12.domNode){
_12.domNode.parentNode.parentNode.removeChild(_12.domNode.parentNode);
return this.items.splice(_13,1);
}
return null;
},hideItem:function(_14){
if(typeof _14=="number"){
_14=this.getItem(_14);
}
if(_14&&_14.domNode&&_14.domNode.parentNode){
_14.domNode.parentNode.style.display="none";
}
},showItem:function(_15){
if(typeof _15=="number"){
_15=this.getItem(_15);
}
if(_15&&_15.domNode&&_15.domNode.parentNode){
_15.domNode.parentNode.style.display="";
}
},enableButton:function(_16){
if(typeof _16=="number"){
_16=this.getItem(_16);
}
if(_16&&dojo.hasClass(_16.domNode,_3+"-button")){
dojo.removeClass(_16.domNode,_3+"-button-disabled");
if(_16._isButton){
dijit.setWaiState(_16.domNode,"disabled",false);
_16.domNode.href="#";
}
}
},isPressed:function(_17){
if(typeof _17=="number"){
_17=this.getItem(_17);
}
return dojo.hasClass(_17.domNode,_3+"-button-pressed");
},setPressed:function(_18,_19){
var _1a=this.isPressed(_18);
if((_1a&&_19)||(!(_1a||_19))){
return;
}
if(typeof _18=="number"){
_18=this.getItem(_18);
}
if(_19){
dojo.addClass(_18.domNode,_3+"-button-pressed");
if(_18.args&&_18.args._img&&_18.args.imgSrcPressed){
_18.args._img.src=_18.args.imgSrcPressed;
}
}else{
dojo.removeClass(_18.domNode,_3+"-button-pressed");
if(_18.args&&_18.args._img&&_18.args.imgSrc){
_18.args._img.src=_18.args.imgSrc;
}
}
},disableButton:function(_1b){
if(typeof _1b=="number"){
_1b=this.getItem(_1b);
}
if(_1b&&dojo.hasClass(_1b.domNode,_3+"-button")){
dojo.addClass(_1b.domNode,_3+"-button-disabled");
if(_1b._isButton){
dijit.setWaiState(_1b.domNode,"disabled",true);
_1b.domNode.removeAttribute("href");
}
}
},updateButton:function(_1c,_1d){
if(_1c&&_1c.domNode&&_1c.domNode.firstChild&&_1c.domNode.firstChild.nodeName.toUpperCase()=="IMG"){
var img=_1c.domNode.firstChild;
if(_1d.label||_1d.label===""){
img.alt=_1d.label;
_1c.domNode.title=_1d.label;
}
if(_1d.imgSrc){
img.src=_1d.imgSrc;
}
if(_1d.className){
_1c.domNode.className=_3+"-button "+_1d.className;
}
}
},_insert:function(_1e,_1f){
if(!_1e){
return null;
}
var div=dojo.create("div",{className:_3+"-item"});
div.appendChild(_1e.domNode);
if(_1f!=null&&_1f<this.items.length){
this.domNode.insertBefore(div,this.items[_1f].domNode.parentNode);
this.items.splice(_1f,0,_1e);
}else{
this.domNode.appendChild(div);
this.items.push(_1e);
}
return _1e;
},uninitialize:function(){
dojo.forEach(this.items,function(_20){
if(_20.destroyRecursive&&!_20._beingDestroyed){
_20.destroyRecursive();
}else{
if(_20.destroy&&!_20._beingDestroyed){
_20.destroy();
}else{
if(_20.domNode){
if(_20.args&&_20.args._img){
dojo.destroy(_20.args._img);
delete _20.args._img;
}
dojo.destroy(_20.domNode);
delete _20.domNode;
}
}
}
});
this.inherited(arguments);
}});
jazz.ui.SimpleToolbar.HoverStyles=_1;
jazz.ui.SimpleToolbar.ButtonTypes=_2;
})();


;(function(){
dojo.provide("jazz.ui.menu.NodeMenuItem");


dojo.declare("jazz.ui.menu.NodeMenuItem",[dijit.MenuItem,dijit._Container],{label:"",focusable:false,isTitle:false,isInfo:false,templateString:"<tr class=\"jazz-ui-menu-NodeMenuItem dijitMenuItem\" waiRole=\"menuitem\" dojoAttachEvent=\"onclick: _onClick\"><td colspan=\"4\"><div dojoAttachPoint=\"containerNode, focusNode\" tabIndex=\"-1\"></div></td></tr>",readOnly:true,postCreate:function(){
this.inherited(arguments);
if(!this.focusable){
dojo.setSelectable(this.domNode,false);
this.focusNode.removeAttribute("tabIndex");
}
},focus:function(){
if(!this.domNode||!this.focusable){
return;
}
this.inherited(arguments);
},isFocusable:function(){
return !!this.focusable;
},_onClick:function(_1){
if(!this.focusable){
dojo.stopEvent(_1);
}
},_setIconClassAttr:function(){
},_setIsTitleAttr:function(_2){
dojo.toggleClass(this.containerNode,"menu-title",_2);
this.isTitle=_2;
},_setIsInfoAttr:function(_3){
dojo.toggleClass(this.containerNode,"menu-info",_3);
this.isInfo=_3;
},_setSelected:function(){
if(this.focusable){
this.inherited(arguments);
}
}});
})();


;define("dojo/date",["./has","./_base/lang"],function(_1,_2){
var _3={};
_3.getDaysInMonth=function(_4){
var _5=_4.getMonth();
var _6=[31,28,31,30,31,30,31,31,30,31,30,31];
if(_5==1&&_3.isLeapYear(_4)){
return 29;
}
return _6[_5];
};
_3.isLeapYear=function(_7){
var _8=_7.getFullYear();
return !(_8%400)||(!(_8%4)&&!!(_8%100));
};
_3.getTimezoneName=function(_9){
var _a=_9.toString();
var tz="";
var _b;
var _c=_a.indexOf("(");
if(_c>-1){
tz=_a.substring(++_c,_a.indexOf(")"));
}else{
var _d=/([A-Z\/]+) \d{4}$/;
if((_b=_a.match(_d))){
tz=_b[1];
}else{
_a=_9.toLocaleString();
_d=/ ([A-Z\/]+)$/;
if((_b=_a.match(_d))){
tz=_b[1];
}
}
}
return (tz=="AM"||tz=="PM")?"":tz;
};
_3.compare=function(_e,_f,_10){
_e=new Date(+_e);
_f=new Date(+(_f||new Date()));
if(_10=="date"){
_e.setHours(0,0,0,0);
_f.setHours(0,0,0,0);
}else{
if(_10=="time"){
_e.setFullYear(0,0,0);
_f.setFullYear(0,0,0);
}
}
if(_e>_f){
return 1;
}
if(_e<_f){
return -1;
}
return 0;
};
_3.add=function(_11,_12,_13){
var sum=new Date(+_11);
var _14=false;
var _15="Date";
switch(_12){
case "day":
break;
case "weekday":
var _16,_17;
var mod=_13%5;
if(!mod){
_16=(_13>0)?5:-5;
_17=(_13>0)?((_13-5)/5):((_13+5)/5);
}else{
_16=mod;
_17=parseInt(_13/5);
}
var _18=_11.getDay();
var adj=0;
if(_18==6&&_13>0){
adj=1;
}else{
if(_18==0&&_13<0){
adj=-1;
}
}
var _19=_18+_16;
if(_19==0||_19==6){
adj=(_13>0)?2:-2;
}
_13=(7*_17)+_16+adj;
break;
case "year":
_15="FullYear";
_14=true;
break;
case "week":
_13*=7;
break;
case "quarter":
_13*=3;
case "month":
_14=true;
_15="Month";
break;
default:
_15="UTC"+_12.charAt(0).toUpperCase()+_12.substring(1)+"s";
}
if(_15){
sum["set"+_15](sum["get"+_15]()+_13);
}
if(_14&&(sum.getDate()<_11.getDate())){
sum.setDate(0);
}
return sum;
};
_3.difference=function(_1a,_1b,_1c){
_1b=_1b||new Date();
_1c=_1c||"day";
var _1d=_1b.getFullYear()-_1a.getFullYear();
var _1e=1;
switch(_1c){
case "quarter":
var m1=_1a.getMonth();
var m2=_1b.getMonth();
var q1=Math.floor(m1/3)+1;
var q2=Math.floor(m2/3)+1;
q2+=(_1d*4);
_1e=q2-q1;
break;
case "weekday":
var _1f=Math.round(_3.difference(_1a,_1b,"day"));
var _20=parseInt(_3.difference(_1a,_1b,"week"));
var mod=_1f%7;
if(mod==0){
_1f=_20*5;
}else{
var adj=0;
var _21=_1a.getDay();
var _22=_1b.getDay();
_20=parseInt(_1f/7);
mod=_1f%7;
var _23=new Date(_1a);
_23.setDate(_23.getDate()+(_20*7));
var _24=_23.getDay();
if(_1f>0){
switch(true){
case _21==6:
adj=-1;
break;
case _21==0:
adj=0;
break;
case _22==6:
adj=-1;
break;
case _22==0:
adj=-2;
break;
case (_24+mod)>5:
adj=-2;
}
}else{
if(_1f<0){
switch(true){
case _21==6:
adj=0;
break;
case _21==0:
adj=1;
break;
case _22==6:
adj=2;
break;
case _22==0:
adj=1;
break;
case (_24+mod)<0:
adj=2;
}
}
}
_1f+=adj;
_1f-=(_20*2);
}
_1e=_1f;
break;
case "year":
_1e=_1d;
break;
case "month":
_1e=(_1b.getMonth()-_1a.getMonth())+(_1d*12);
break;
case "week":
_1e=parseInt(_3.difference(_1a,_1b,"day")/7);
break;
case "day":
_1e/=24;
case "hour":
_1e/=60;
case "minute":
_1e/=60;
case "second":
_1e/=1000;
case "millisecond":
_1e*=_1b.getTime()-_1a.getTime();
}
return Math.round(_1e);
};
_1("extend-dojo")&&_2.mixin(_2.getObject("dojo.date",true),_3);
return _3;
});


;define("dojo/cldr/supplemental",["../_base/lang","../i18n"],function(_1,_2){
var _3={};
_1.setObject("dojo.cldr.supplemental",_3);
_3.getFirstDayOfWeek=function(_4){
var _5={bd:5,mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,iq:6,ir:6,jo:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,sy:6,ye:6,ag:0,ar:0,as:0,au:0,br:0,bs:0,bt:0,bw:0,by:0,bz:0,ca:0,cn:0,co:0,dm:0,"do":0,et:0,gt:0,gu:0,hk:0,hn:0,id:0,ie:0,il:0,"in":0,jm:0,jp:0,ke:0,kh:0,kr:0,la:0,mh:0,mm:0,mo:0,mt:0,mx:0,mz:0,ni:0,np:0,nz:0,pa:0,pe:0,ph:0,pk:0,pr:0,py:0,sg:0,sv:0,th:0,tn:0,tt:0,tw:0,um:0,us:0,ve:0,vi:0,ws:0,za:0,zw:0};
var _6=_3._region(_4);
var _7=_5[_6];
return (_7===undefined)?1:_7;
};
_3._region=function(_8){
_8=_2.normalizeLocale(_8);
var _9=_8.split("-");
var _a=_9[1];
if(!_a){
_a={aa:"et",ab:"ge",af:"za",ak:"gh",am:"et",ar:"eg",as:"in",av:"ru",ay:"bo",az:"az",ba:"ru",be:"by",bg:"bg",bi:"vu",bm:"ml",bn:"bd",bo:"cn",br:"fr",bs:"ba",ca:"es",ce:"ru",ch:"gu",co:"fr",cr:"ca",cs:"cz",cv:"ru",cy:"gb",da:"dk",de:"de",dv:"mv",dz:"bt",ee:"gh",el:"gr",en:"us",es:"es",et:"ee",eu:"es",fa:"ir",ff:"sn",fi:"fi",fj:"fj",fo:"fo",fr:"fr",fy:"nl",ga:"ie",gd:"gb",gl:"es",gn:"py",gu:"in",gv:"gb",ha:"ng",he:"il",hi:"in",ho:"pg",hr:"hr",ht:"ht",hu:"hu",hy:"am",ia:"fr",id:"id",ig:"ng",ii:"cn",ik:"us","in":"id",is:"is",it:"it",iu:"ca",iw:"il",ja:"jp",ji:"ua",jv:"id",jw:"id",ka:"ge",kg:"cd",ki:"ke",kj:"na",kk:"kz",kl:"gl",km:"kh",kn:"in",ko:"kr",ks:"in",ku:"tr",kv:"ru",kw:"gb",ky:"kg",la:"va",lb:"lu",lg:"ug",li:"nl",ln:"cd",lo:"la",lt:"lt",lu:"cd",lv:"lv",mg:"mg",mh:"mh",mi:"nz",mk:"mk",ml:"in",mn:"mn",mo:"ro",mr:"in",ms:"my",mt:"mt",my:"mm",na:"nr",nb:"no",nd:"zw",ne:"np",ng:"na",nl:"nl",nn:"no",no:"no",nr:"za",nv:"us",ny:"mw",oc:"fr",om:"et",or:"in",os:"ge",pa:"in",pl:"pl",ps:"af",pt:"br",qu:"pe",rm:"ch",rn:"bi",ro:"ro",ru:"ru",rw:"rw",sa:"in",sd:"in",se:"no",sg:"cf",si:"lk",sk:"sk",sl:"si",sm:"ws",sn:"zw",so:"so",sq:"al",sr:"rs",ss:"za",st:"za",su:"id",sv:"se",sw:"tz",ta:"in",te:"in",tg:"tj",th:"th",ti:"et",tk:"tm",tl:"ph",tn:"za",to:"to",tr:"tr",ts:"za",tt:"ru",ty:"pf",ug:"cn",uk:"ua",ur:"pk",uz:"uz",ve:"za",vi:"vn",wa:"be",wo:"sn",xh:"za",yi:"il",yo:"ng",za:"cn",zh:"cn",zu:"za",ace:"id",ady:"ru",agq:"cm",alt:"ru",amo:"ng",asa:"tz",ast:"es",awa:"in",bal:"pk",ban:"id",bas:"cm",bax:"cm",bbc:"id",bem:"zm",bez:"tz",bfq:"in",bft:"pk",bfy:"in",bhb:"in",bho:"in",bik:"ph",bin:"ng",bjj:"in",bku:"ph",bqv:"ci",bra:"in",brx:"in",bss:"cm",btv:"pk",bua:"ru",buc:"yt",bug:"id",bya:"id",byn:"er",cch:"ng",ccp:"in",ceb:"ph",cgg:"ug",chk:"fm",chm:"ru",chp:"ca",chr:"us",cja:"kh",cjm:"vn",ckb:"iq",crk:"ca",csb:"pl",dar:"ru",dav:"ke",den:"ca",dgr:"ca",dje:"ne",doi:"in",dsb:"de",dua:"cm",dyo:"sn",dyu:"bf",ebu:"ke",efi:"ng",ewo:"cm",fan:"gq",fil:"ph",fon:"bj",fur:"it",gaa:"gh",gag:"md",gbm:"in",gcr:"gf",gez:"et",gil:"ki",gon:"in",gor:"id",grt:"in",gsw:"ch",guz:"ke",gwi:"ca",haw:"us",hil:"ph",hne:"in",hnn:"ph",hoc:"in",hoj:"in",ibb:"ng",ilo:"ph",inh:"ru",jgo:"cm",jmc:"tz",kaa:"uz",kab:"dz",kaj:"ng",kam:"ke",kbd:"ru",kcg:"ng",kde:"tz",kdt:"th",kea:"cv",ken:"cm",kfo:"ci",kfr:"in",kha:"in",khb:"cn",khq:"ml",kht:"in",kkj:"cm",kln:"ke",kmb:"ao",koi:"ru",kok:"in",kos:"fm",kpe:"lr",krc:"ru",kri:"sl",krl:"ru",kru:"in",ksb:"tz",ksf:"cm",ksh:"de",kum:"ru",lag:"tz",lah:"pk",lbe:"ru",lcp:"cn",lep:"in",lez:"ru",lif:"np",lis:"cn",lki:"ir",lmn:"in",lol:"cd",lua:"cd",luo:"ke",luy:"ke",lwl:"th",mad:"id",mag:"in",mai:"in",mak:"id",man:"gn",mas:"ke",mdf:"ru",mdh:"ph",mdr:"id",men:"sl",mer:"ke",mfe:"mu",mgh:"mz",mgo:"cm",min:"id",mni:"in",mnk:"gm",mnw:"mm",mos:"bf",mua:"cm",mwr:"in",myv:"ru",nap:"it",naq:"na",nds:"de","new":"np",niu:"nu",nmg:"cm",nnh:"cm",nod:"th",nso:"za",nus:"sd",nym:"tz",nyn:"ug",pag:"ph",pam:"ph",pap:"bq",pau:"pw",pon:"fm",prd:"ir",raj:"in",rcf:"re",rej:"id",rjs:"np",rkt:"in",rof:"tz",rwk:"tz",saf:"gh",sah:"ru",saq:"ke",sas:"id",sat:"in",saz:"in",sbp:"tz",scn:"it",sco:"gb",sdh:"ir",seh:"mz",ses:"ml",shi:"ma",shn:"mm",sid:"et",sma:"se",smj:"se",smn:"fi",sms:"fi",snk:"ml",srn:"sr",srr:"sn",ssy:"er",suk:"tz",sus:"gn",swb:"yt",swc:"cd",syl:"bd",syr:"sy",tbw:"ph",tcy:"in",tdd:"cn",tem:"sl",teo:"ug",tet:"tl",tig:"er",tiv:"ng",tkl:"tk",tmh:"ne",tpi:"pg",trv:"tw",tsg:"ph",tts:"th",tum:"mw",tvl:"tv",twq:"ne",tyv:"ru",tzm:"ma",udm:"ru",uli:"fm",umb:"ao",unr:"in",unx:"in",vai:"lr",vun:"tz",wae:"ch",wal:"et",war:"ph",xog:"ug",xsr:"np",yao:"mz",yap:"fm",yav:"cm",zza:"tr"}[_9[0]];
}else{
if(_a.length==4){
_a=_9[2];
}
}
return _a;
};
_3.getWeekend=function(_b){
var _c={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5},_d={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6},_e=_3._region(_b),_f=_c[_e],end=_d[_e];
if(_f===undefined){
_f=6;
}
if(end===undefined){
end=0;
}
return {start:_f,end:end};
};
return _3;
});


;define("dojo/i18n!dojo/cldr/nls/gregorian", {"dayPeriods-format-narrow-noon":"n","dayPeriods-format-wide-noon":"noon","field-second-relative+0":"now","eraNames":["Before Christ","Anno Domini"],"dateTimeFormat-short":"{1}, {0}","field-mon-relative+0":"this Monday","dayPeriods-format-abbr-noon":"noon","dayPeriods-format-wide-am":"AM","field-mon-relative+1":"next Monday","field-thu-relative+0":"this Thursday","field-thu-relative+1":"next Thursday","dateFormatItem-M":"L","field-day-relative+-1":"yesterday","dateFormatItem-EHm":"E HH:mm","months-standAlone-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"days-format-narrow":["S","M","T","W","T","F","S"],"field-day":"Day","dateFormatItem-H":"HH","quarters-format-narrow":["1","2","3","4"],"dateFormat-short":"M/d/yy","quarters-format-abbr":["Q1","Q2","Q3","Q4"],"dateTimeFormats-appendItem-Day":"{0} ({2}: {1})","days-standAlone-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"field-fri-relative+-1":"last Friday","dateFormatItem-hm":"h:mm a","months-format-wide":["January","February","March","April","May","June","July","August","September","October","November","December"],"dateTimeFormat-long":"{1} \'at\' {0}","dateFormatItem-Ehms":"E h:mm:ss a","field-zone":"Time Zone","dateFormatItem-yM":"M/y","dateFormatItem-GyMMMEd":"E, MMM d, y G","field-day-relative+0":"today","days-standAlone-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"field-year-relative+-1":"last year","field-week-relative+1":"next week","field-thu-relative+-1":"last Thursday","quarters-standAlone-abbr":["Q1","Q2","Q3","Q4"],"field-dayperiod":"am/pm","field-day-relative+1":"tomorrow","dateFormatItem-GyMMMd":"MMM d, y G","field-week":"Week","dateTimeFormat-medium":"{1}, {0}","days-standAlone-narrow":["S","M","T","W","T","F","S"],"dateFormatItem-y":"y","dateFormatItem-yMMMEd":"E, MMM d, y","days-format-wide":["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],"field-hour":"Hour","dateFormat-medium":"MMM d, y","field-week-relative+0":"this week","dateFormatItem-yQQQ":"QQQ y","timeFormat-full":"h:mm:ss a zzzz","dateFormatItem-ms":"mm:ss","field-sat-relative+0":"this Saturday","months-standAlone-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"timeFormat-short":"h:mm a","dateFormatItem-EHms":"E HH:mm:ss","field-era":"Era","field-sun-relative+-1":"last Sunday","field-sat-relative+1":"next Saturday","field-wed-relative+1":"next Wednesday","months-format-abbr":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"dateFormatItem-Hms":"HH:mm:ss","dateFormatItem-yMd":"M/d/y","timeFormat-long":"h:mm:ss a z","field-tue-relative+-1":"last Tuesday","dayPeriods-format-abbr-am":"AM","dateTimeFormats-appendItem-Hour":"{0} ({2}: {1})","field-wed-relative+0":"this Wednesday","days-format-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"field-tue-relative+0":"this Tuesday","dateFormatItem-Ed":"d E","dateFormatItem-GyMMM":"MMM y G","dateFormatItem-MMMd":"MMM d","dateFormatItem-d":"d","field-tue-relative+1":"next Tuesday","dateFormatItem-MMMEd":"E, MMM d","field-second":"Second","dateFormatItem-Ehm":"E h:mm a","eraAbbr":["BC","AD"],"dateFormatItem-Md":"M/d","dateFormatItem-hms":"h:mm:ss a","field-week-relative+-1":"last week","dateTimeFormats-appendItem-Minute":"{0} ({2}: {1})","dateFormatItem-h":"h a","field-sun-relative+1":"next Sunday","field-sun-relative+0":"this Sunday","quarters-format-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dayPeriods-format-abbr-pm":"PM","field-month-relative+-1":"last month","field-minute":"Minute","field-year":"Year","dateTimeFormats-appendItem-Month":"{0} ({2}: {1})","dateTimeFormats-appendItem-Quarter":"{0} ({2}: {1})","dateFormatItem-MMM":"LLL","dayPeriods-format-narrow-pm":"p","dateTimeFormats-appendItem-Week":"{0} ({2}: {1})","quarters-standAlone-narrow":["1","2","3","4"],"dateFormatItem-MEd":"E, M/d","dateTimeFormats-appendItem-Day-Of-Week":"{0} {1}","days-standAlone-short":["Su","Mo","Tu","We","Th","Fr","Sa"],"field-month":"Month","dateTimeFormat-full":"{1} \'at\' {0}","dateFormatItem-yMMM":"MMM y","dayPeriods-format-narrow-am":"a","field-mon-relative+-1":"last Monday","dateFormat-long":"MMMM d, y","dateFormatItem-Hm":"HH:mm","field-year-relative+0":"this year","field-year-relative+1":"next year","dayPeriods-format-wide-pm":"PM","dateFormat-full":"EEEE, MMMM d, y","field-month-relative+0":"this month","dateFormatItem-Gy":"y G","field-month-relative+1":"next month","field-wed-relative+-1":"last Wednesday","dateTimeFormats-appendItem-Second":"{0} ({2}: {1})","field-fri-relative+1":"next Friday","field-fri-relative+0":"this Friday","months-format-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"timeFormat-medium":"h:mm:ss a","months-standAlone-narrow":["J","F","M","A","M","J","J","A","S","O","N","D"],"eraNarrow":["B","A"],"dateFormatItem-yMMMd":"MMM d, y","dateFormatItem-yMEd":"E, M/d/y","field-weekday":"Day of the Week","dateTimeFormats-appendItem-Era":"{0} {1}","quarters-standAlone-wide":["1st quarter","2nd quarter","3rd quarter","4th quarter"],"dateFormatItem-yQQQQ":"QQQQ y","days-format-abbr":["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],"field-sat-relative+-1":"last Saturday","dateTimeFormats-appendItem-Timezone":"{0} {1}","dateTimeFormats-appendItem-Year":"{0} {1}"});

;define("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9){
var _a={};
_1.setObject(_9.id.replace(/\//g,"."),_a);
function _b(_c,_d,_e,_f){
return _f.replace(/([a-z])\1*/ig,function(_10){
var s,pad,c=_10.charAt(0),l=_10.length,_11=["abbr","wide","narrow"];
switch(c){
case "G":
s=_d[(l<4)?"eraAbbr":"eraNames"][_c.getFullYear()<0?0:1];
break;
case "y":
s=_c.getFullYear();
switch(l){
case 1:
break;
case 2:
if(!_e.fullYear){
s=String(s);
s=s.substr(s.length-2);
break;
}
default:
pad=true;
}
break;
case "Q":
case "q":
s=Math.ceil((_c.getMonth()+1)/3);
pad=true;
break;
case "M":
case "L":
var m=_c.getMonth();
if(l<3){
s=m+1;
pad=true;
}else{
var _12=["months",c=="L"?"standAlone":"format",_11[l-3]].join("-");
s=_d[_12][m];
}
break;
case "w":
var _13=0;
s=_a._getWeekOfYear(_c,_13);
pad=true;
break;
case "d":
s=_c.getDate();
pad=true;
break;
case "D":
s=_a._getDayOfYear(_c);
pad=true;
break;
case "e":
case "c":
var d=_c.getDay();
if(l<2){
s=(d-_4.getFirstDayOfWeek(_e.locale)+8)%7;
break;
}
case "E":
d=_c.getDay();
if(l<3){
s=d+1;
pad=true;
}else{
var _14=["days",c=="c"?"standAlone":"format",_11[l-3]].join("-");
s=_d[_14][d];
}
break;
case "a":
var _15=_c.getHours()<12?"am":"pm";
s=_e[_15]||_d["dayPeriods-format-wide-"+_15];
break;
case "h":
case "H":
case "K":
case "k":
var h=_c.getHours();
switch(c){
case "h":
s=(h%12)||12;
break;
case "H":
s=h;
break;
case "K":
s=(h%12);
break;
case "k":
s=h||24;
break;
}
pad=true;
break;
case "m":
s=_c.getMinutes();
pad=true;
break;
case "s":
s=_c.getSeconds();
pad=true;
break;
case "S":
s=Math.round(_c.getMilliseconds()*Math.pow(10,l-3));
pad=true;
break;
case "v":
case "z":
s=_a._getZone(_c,true,_e);
if(s){
break;
}
l=4;
case "Z":
var _16=_a._getZone(_c,false,_e);
var tz=[(_16<=0?"+":"-"),_7.pad(Math.floor(Math.abs(_16)/60),2),_7.pad(Math.abs(_16)%60,2)];
if(l==4){
tz.splice(0,0,"GMT");
tz.splice(3,0,":");
}
s=tz.join("");
break;
default:
throw new Error("dojo.date.locale.format: invalid pattern char: "+_f);
}
if(pad){
s=_7.pad(s,l);
}
return s;
});
};
_a._getZone=function(_17,_18,_19){
if(_18){
return _3.getTimezoneName(_17);
}else{
return _17.getTimezoneOffset();
}
};
_a.format=function(_1a,_1b){
_1b=_1b||{};
var _1c=_5.normalizeLocale(_1b.locale),_1d=_1b.formatLength||"short",_1e=_a._getGregorianBundle(_1c),str=[],_1f=_1.hitch(this,_b,_1a,_1e,_1b);
if(_1b.selector=="year"){
return _20(_1e["dateFormatItem-yyyy"]||"yyyy",_1f);
}
var _21;
if(_1b.selector!="date"){
_21=_1b.timePattern||_1e["timeFormat-"+_1d];
if(_21){
str.push(_20(_21,_1f));
}
}
if(_1b.selector!="time"){
_21=_1b.datePattern||_1e["dateFormat-"+_1d];
if(_21){
str.push(_20(_21,_1f));
}
}
return str.length==1?str[0]:_1e["dateTimeFormat-"+_1d].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(_22,key){
return str[key];
});
};
_a.regexp=function(_23){
return _a._parseInfo(_23).regexp;
};
_a._parseInfo=function(_24){
_24=_24||{};
var _25=_5.normalizeLocale(_24.locale),_26=_a._getGregorianBundle(_25),_27=_24.formatLength||"short",_28=_24.datePattern||_26["dateFormat-"+_27],_29=_24.timePattern||_26["timeFormat-"+_27],_2a;
if(_24.selector=="date"){
_2a=_28;
}else{
if(_24.selector=="time"){
_2a=_29;
}else{
_2a=_26["dateTimeFormat-"+_27].replace(/\{(\d+)\}/g,function(_2b,key){
return [_29,_28][key];
});
}
}
var _2c=[],re=_20(_2a,_1.hitch(this,_2d,_2c,_26,_24));
return {regexp:re,tokens:_2c,bundle:_26};
};
_a.parse=function(_2e,_2f){
var _30=/[\u200E\u200F\u202A\u202E]/g,_31=_a._parseInfo(_2f),_32=_31.tokens,_33=_31.bundle,re=new RegExp("^"+_31.regexp.replace(_30,"")+"$",_31.strict?"":"i"),_34=re.exec(_2e&&_2e.replace(_30,""));
if(!_34){
return null;
}
var _35=["abbr","wide","narrow"],_36=[1970,0,1,0,0,0,0],_37="",_38=_2.every(_34,function(v,i){
if(!i){
return true;
}
var _39=_32[i-1],l=_39.length,c=_39.charAt(0);
switch(c){
case "y":
if(l!=2&&_2f.strict){
_36[0]=v;
}else{
if(v<100){
v=Number(v);
var _3a=""+new Date().getFullYear(),_3b=_3a.substring(0,2)*100,_3c=Math.min(Number(_3a.substring(2,4))+20,99);
_36[0]=(v<_3c)?_3b+v:_3b-100+v;
}else{
if(_2f.strict){
return false;
}
_36[0]=v;
}
}
break;
case "M":
case "L":
if(l>2){
var _3d=_33["months-"+(c=="L"?"standAlone":"format")+"-"+_35[l-3]].concat();
if(!_2f.strict){
v=v.replace(".","").toLowerCase();
_3d=_2.map(_3d,function(s){
return s.replace(".","").toLowerCase();
});
}
v=_2.indexOf(_3d,v);
if(v==-1){
return false;
}
}else{
v--;
}
_36[1]=v;
break;
case "E":
case "e":
case "c":
var _3e=_33["days-"+(c=="c"?"standAlone":"format")+"-"+_35[l-3]].concat();
if(!_2f.strict){
v=v.toLowerCase();
_3e=_2.map(_3e,function(d){
return d.toLowerCase();
});
}
v=_2.indexOf(_3e,v);
if(v==-1){
return false;
}
break;
case "D":
_36[1]=0;
case "d":
_36[2]=v;
break;
case "a":
var am=_2f.am||_33["dayPeriods-format-wide-am"],pm=_2f.pm||_33["dayPeriods-format-wide-pm"];
if(!_2f.strict){
var _3f=/\./g;
v=v.replace(_3f,"").toLowerCase();
am=am.replace(_3f,"").toLowerCase();
pm=pm.replace(_3f,"").toLowerCase();
}
if(_2f.strict&&v!=am&&v!=pm){
return false;
}
_37=(v==pm)?"p":(v==am)?"a":"";
break;
case "K":
if(v==24){
v=0;
}
case "h":
case "H":
case "k":
if(v>23){
return false;
}
_36[3]=v;
break;
case "m":
_36[4]=v;
break;
case "s":
_36[5]=v;
break;
case "S":
_36[6]=v;
}
return true;
});
var _40=+_36[3];
if(_37==="p"&&_40<12){
_36[3]=_40+12;
}else{
if(_37==="a"&&_40==12){
_36[3]=0;
}
}
var _41=new Date(_36[0],_36[1],_36[2],_36[3],_36[4],_36[5],_36[6]);
if(_2f.strict){
_41.setFullYear(_36[0]);
}
var _42=_32.join(""),_43=_42.indexOf("d")!=-1,_44=_42.indexOf("M")!=-1;
if(!_38||(_44&&_41.getMonth()>_36[1])||(_43&&_41.getDate()>_36[2])){
return null;
}
if((_44&&_41.getMonth()<_36[1])||(_43&&_41.getDate()<_36[2])){
_41=_3.add(_41,"hour",1);
}
return _41;
};
function _20(_45,_46,_47,_48){
var _49=function(x){
return x;
};
_46=_46||_49;
_47=_47||_49;
_48=_48||_49;
var _4a=_45.match(/(''|[^'])+/g),_4b=_45.charAt(0)=="'";
_2.forEach(_4a,function(_4c,i){
if(!_4c){
_4a[i]="";
}else{
_4a[i]=(_4b?_47:_46)(_4c.replace(/''/g,"'"));
_4b=!_4b;
}
});
return _48(_4a.join(""));
};
var _4d=["abbr","wide","narrow"];
function _2d(_4e,_4f,_50,_51){
_51=_6.escapeString(_51);
if(!_50.strict){
_51=_51.replace(" a"," ?a");
}
return _51.replace(/([a-z])\1*/ig,function(_52){
var s,c=_52.charAt(0),l=_52.length,p2="",p3="";
if(_50.strict){
if(l>1){
p2="0"+"{"+(l-1)+"}";
}
if(l>2){
p3="0"+"{"+(l-2)+"}";
}
}else{
p2="0?";
p3="0{0,2}";
}
switch(c){
case "y":
s="\\d{2,4}";
break;
case "M":
case "L":
if(l>2){
var _53=_4f["months-"+(c=="L"?"standAlone":"format")+"-"+_4d[l-3]].slice(0);
s=_53.join("|");
if(!_50.strict){
s=s.replace(/\./g,"");
s="(?:"+s+")\\.?";
}
}else{
s="1[0-2]|"+p2+"[1-9]";
}
break;
case "D":
s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p2+"[1-9][0-9]|"+p3+"[1-9]";
break;
case "d":
s="3[01]|[12]\\d|"+p2+"[1-9]";
break;
case "w":
s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";
break;
case "E":
case "e":
case "c":
s=".+?";
break;
case "h":
s="1[0-2]|"+p2+"[1-9]";
break;
case "k":
s="1[01]|"+p2+"\\d";
break;
case "H":
s="1\\d|2[0-3]|"+p2+"\\d";
break;
case "K":
s="1\\d|2[0-4]|"+p2+"[1-9]";
break;
case "m":
case "s":
s="[0-5]\\d";
break;
case "S":
s="\\d{"+l+"}";
break;
case "a":
var am=_50.am||_4f["dayPeriods-format-wide-am"],pm=_50.pm||_4f["dayPeriods-format-wide-pm"];
s=am+"|"+pm;
if(!_50.strict){
if(am!=am.toLowerCase()){
s+="|"+am.toLowerCase();
}
if(pm!=pm.toLowerCase()){
s+="|"+pm.toLowerCase();
}
if(s.indexOf(".")!=-1){
s+="|"+s.replace(/\./g,"");
}
}
s=s.replace(/\./g,"\\.");
break;
default:
s=".*";
}
if(_4e){
_4e.push(_52);
}
return "("+s+")";
}).replace(/[\xa0 ]/g,"[\\s\\xa0]");
};
var _54=[];
var _55={};
_a.addCustomFormats=function(_56,_57){
_54.push({pkg:_56,name:_57});
_55={};
};
_a._getGregorianBundle=function(_58){
if(_55[_58]){
return _55[_58];
}
var _59={};
_2.forEach(_54,function(_5a){
var _5b=_5.getLocalization(_5a.pkg,_5a.name,_58);
_59=_1.mixin(_59,_5b);
},this);
return _55[_58]=_59;
};
_a.addCustomFormats(_9.id.replace(/\/date\/locale$/,".cldr"),"gregorian");
_a.getNames=function(_5c,_5d,_5e,_5f){
var _60,_61=_a._getGregorianBundle(_5f),_62=[_5c,_5e,_5d];
if(_5e=="standAlone"){
var key=_62.join("-");
_60=_61[key];
if(_60[0]==1){
_60=undefined;
}
}
_62[1]="format";
return (_60||_61[_62.join("-")]).concat();
};
_a.isWeekend=function(_63,_64){
var _65=_4.getWeekend(_64),day=(_63||new Date()).getDay();
if(_65.end<_65.start){
_65.end+=7;
if(day<_65.start){
day+=7;
}
}
return day>=_65.start&&day<=_65.end;
};
_a._getDayOfYear=function(_66){
return _3.difference(new Date(_66.getFullYear(),0,1,_66.getHours()),_66)+1;
};
_a._getWeekOfYear=function(_67,_68){
if(arguments.length==1){
_68=0;
}
var _69=new Date(_67.getFullYear(),0,1).getDay(),adj=(_69-_68+7)%7,_6a=Math.floor((_a._getDayOfYear(_67)+adj-1)/7);
if(_69==_68){
_6a++;
}
return _6a;
};
return _a;
});


;dojo.provide("jazz.app.i18n");
(function(){






jazz.app.i18n={isBidiEnabled:function(){
if(!window.localStorage){
return false;
}
var _1=localStorage.getItem(_2);
if(_1&&_1=="true"){
return true;
}
return false;
},setBidiEnabled:function(_3){
if(!window.localStorage){
return;
}
var _4=localStorage.getItem(_2);
if(_4!=(_3?"true":"false")){
localStorage.setItem(_2,_3?"true":"false");
if(!_3){
localStorage.removeItem(_5);
}
dojo.publish(_6,[(_3?"ltr":"none")]);
}
},getBaseTextDir:function(){
if(!window.localStorage){
return false;
}
var _7=localStorage.getItem(_5);
if(!_7){
return "ltr";
}
return _7;
},setBaseTextDir:function(_8){
if(!window.localStorage){
return;
}
var _9=localStorage.getItem(_5);
if(_9!=_8){
localStorage.setItem(_5,_8.toLowerCase());
dojo.publish(_6,[_8]);
}
},getWidgetBaseTextDir:function(){
if(!window.localStorage){
return null;
}
var _a=localStorage.getItem(_2);
if(!_a||_a!="true"){
return "none";
}
var _b=localStorage.getItem(_5);
if(!_b){
return "ltr";
}
return _b;
},getPreferredBaseTextDir:function(){
if(window.localStorage&&localStorage.getItem(_2)=="true"){
return localStorage.getItem(_5)||"ltr";
}
return "";
},getCalendar:function(){
if(window.localStorage){
var _c=localStorage.getItem(_d);
}
return _c||"gregorian";
},setCalendar:function(_e){
if(!window.localStorage){
return;
}
localStorage.setItem(_d,_e.toLowerCase());
},applySTSupport:function(_f){
var _10={};
_10.HEBREW_CHAR=new RegExp("[\\u05be\\u05c0\\u05c3\\u05c6\\u05d0-\\u05f4"+_10.RLM+"\\ufb1d\\ufb1f-\\ufb28\\ufb2a-\\ufb4f]");
_10.ARABIC_CHAR=new RegExp("[\\u061b\\u0621-\\u064a\\u066d-\\u066f\\u0671-\\u06d5"+"\\u06dd\\u06e5\\u06e6\\u06ee\\u06ef\\u06fa-\\u070d\\u0710\\u0712-\\u072f"+"\\u074d-\\u07a5\\u07b1\\ufb50-\\ufd3d\\ufd50-\\ufdfc\\ufe70-\\ufefc]");
var _11=true;
var _12=_f;
for(var i=0;i<_12.length;i++){
c=_12.charAt(i);
if((c.match(_10.ARABIC_CHAR)||c.match(_10.HEBREW_CHAR))==true){
_11=true;
}else{
_11=false;
}
}
if(_11==false){
_12=_12+"\u200e";
}
return _12;
}};
var _13="jazz.app.i18n.preferences.",_2=_13+"bidiOn",_5=_13+"baseTextDirection",_d=_13+"calType",_6="bidiStorageChanged";
function _14(){
var _15=jazz.app.i18n,_16=_15.getCalendar(),_17=(_16=="gregorian");
_15.date=dojo.date;
_15.datePackage="";
_15.Date=Date;
if(!_17){
dojo.ready(function(){
jazz.core.loader.batch_load_async(["dojox.date."+_16,"dojox.date."+_16+".locale"],function(){
_15.date=dojox.date[_16];
_15.datePackage="dojox.date."+_16;
_15.Date=dojox.date[_16].Date;
var _18=_15.date.locale.format;
_15.date.locale.format=function(d,o){
return _18(new dojox.date[_16].Date(d),o);
};
});
});
}
};
_14();
})();

dojo.provide("jazz.ui.nls.FilterBoxMessages")._built=true;
dojo.provide("jazz.ui.nls.FilterBoxMessages.en_us");
jazz.ui.nls.FilterBoxMessages.en_us={"clear":"Clear","defaultText":"Search...","label":"Search text"};

;dojo.cache("jazz.ui", "templates/FilterBox.html", "<div class=\"jazz-ui-FilterBox\">	<div class=\"input-wrapper\">		<input type=\"text\" class=\"filterText helpMessage\" aria-label=\"${messages.label}\" dojoAttachEvent=\"onfocus: _focus, onblur: _blur, onkeyup: _keyup, onpaste: _copyPaste, oncut: _copyPaste, oninput: _keyup\" dojoAttachPoint=\"_box\" maxlength=\"500\" name=\"filter-box\" autocomplete=\"off\"></input>	</div>	<a href=\"#\" dojoAttachEvent=\"onclick: _clear\" class=\"clearFilter hidden\" title=\"${_clearTooltip}\" dojoAttachPoint=\"_clearLink\"></a></div>");

;dojo.provide("jazz.ui.FilterBox");










dojo.requireLocalization("jazz.ui","FilterBoxMessages");
(function(){
var _1;
var _2=dojo.isIE||!!window.navigator.userAgent.match(/Trident\/7\./);
dojo.declare("jazz.ui.FilterBox",[dijit._Widget,dijit._Templated],{value:"",onChange:function(_3){
},onEnter:function(_4){
},enabled:true,defaultText:"",defaultTextIsPlaceholder:false,dwellTime:0,setEnabled:function(_5){
this._box.disabled=_5?false:true;
this.enabled=_5;
},setValue:function(_6){
if(!_6){
this.clear();
return;
}
dojo.removeClass(this._box,"helpMessage");
dojo.removeClass(this._clearLink,"hidden");
this._box.value=_6;
this.value=_6;
},clear:function(){
if(document.activeElement===this._box){
this._box.value="";
}else{
dojo.addClass(this._box,"helpMessage");
if(this.defaultTextIsPlaceholder){
this._box.value="";
}else{
this._box.value=this.defaultText;
}
}
dojo.addClass(this._clearLink,"hidden");
this._handleChange("");
},focus:function(){
this._box.focus();
},blur:function(){
this._box.blur();
},_clearTooltip:"",templatePath:dojo.moduleUrl("jazz.ui","templates/FilterBox.html"),constructor:function(){
if(!_1){
_1=dojo.i18n.getLocalization("jazz.ui","FilterBoxMessages");
}
this.messages=_1;
},postMixInProperties:function(){
if(!this.defaultText){
this.defaultText=_1.defaultText;
}
if(!this._clearTooltip){
this._clearTooltip=_1.clear;
}
this.inherited(arguments);
},postCreate:function(){
if(this.defaultTextIsPlaceholder){
this._box.placeholder=this.defaultText;
}else{
this._box.value=this.defaultText;
}
if(this.value){
this.setValue(this.value);
}
if(!this.enabled){
this._box.disabled=true;
}
if(!this.textDir){
this.textDir=jazz.app.i18n.getPreferredBaseTextDir();
}
this.applyTextDir(this.domNode,this._box.value);
this.connect(this._box,"onkeypress",dojo.hitch(this,this._handleKeyPress));
},_focus:function(_7){
if(dojo.hasClass(this._box,"helpMessage")){
this._box.value="";
dojo.removeClass(this._box,"helpMessage");
if(this.value!==""){
dojo.removeClass(this._clearLink,"hidden");
}
}
if(_2){
this._box.select();
}
},_blur:function(_8){
if(this._box.value.length==0){
this.clear();
}
},_copyPaste:function(){
if(this._copyPasteTimeout){
return;
}
this._copyPasteTimeout=setTimeout(dojo.hitch(this,function(){
delete this._copyPasteTimeout;
this._handleChange(this._box.value);
}),0);
},_keyup:function(_9){
this._handleChange(this._box.value);
if(this.textDir=="auto"){
this.applyTextDir(this.domNode,this._box.value);
}
},_handleChange:function(_a){
if(_a===""){
dojo.addClass(this._clearLink,"hidden");
}else{
dojo.removeClass(this._clearLink,"hidden");
}
if(this.onChange){
if(_a!==this.value){
this.value=this._maintainCase?_a:_a.toLowerCase();
if(this.dwellTime===0){
this._fireOnChange(_a);
}else{
this._clearOnChangeTimeout();
this._onChangeTimeout=setTimeout(dojo.hitch(this,this._fireOnChange),this.dwellTime);
}
}
}
},_clearOnChangeTimeout:function(){
if(this._onChangeTimeout){
clearTimeout(this._onChangeTimeout);
delete this._onChangeTimeout;
}
},_fireOnChange:function(){
this._clearOnChangeTimeout();
this.onChange(this.value);
},_clear:function(_b){
if(_b){
_b.preventDefault();
}
this.clear();
},_handleKeyPress:function(_c){
if(!this.onEnter){
return;
}
if(_c.keyCode===dojo.keys.ENTER){
this.onEnter(this.value);
}
}});
})();


;dojo.cache("jazz.ui", "toolbar/templates/Button.html", "<span class=\"jazz-ui-toolbar-Button\"><a class=\"button\" dojoAttachPoint=\"titleNode,focusNode\" href=\"${href}\" dojoAttachEvent=\"onclick:_onClick,onkeypress:_onKeyPress\" role=\"button\"><span class=\"button-label\" dojoAttachPoint=\"_label\" style=\"display:none\">${label}</span></a></span>");

;dojo.provide("jazz.ui.toolbar.Button");








(function(){
var _1="jazz-ui-toolbar-Button";
dojo.declare("jazz.ui.toolbar.Button",[dijit._Widget,dijit._Templated],{"class":"",enabled:true,href:"#",imgClass:"",imgSrc:"",label:"",onClick:function(){
},title:"",isFocusable:function(){
return this.get("enabled")&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");
},focus:function(){
dijit.focus(this.focusNode);
},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{tabIndex:["focusNode","titleNode"],href:"focusNode",title:"focusNode"}),templatePath:dojo.moduleUrl("jazz.ui","toolbar/templates/Button.html"),_onClick:function(_2){
if(!this.get("enabled")){
dojo.stopEvent(_2);
return;
}
if(this.href=="#"){
_2.preventDefault();
}
this.onClick(_2);
},_onKeyPress:function(e){
var k=dojo.keys;
switch(e.keyCode){
case k.SPACE:
this._onClick(e);
if(this.href&&this.href!="#"){
var _3=dojo.getObject("net.jazz.ajax.ui.PlatformUI");
if(!_3||!_3.getWorkbench().shouldVetoNavigation(this.href)){
location.href=this.href;
}
}
}
},_setVisibleAttr:function(_4){
this.domNode.style.display=_4?"":"none";
},_setEnabledAttr:function(_5){
dojo.toggleClass(this.focusNode,_1+"-disabled",!_5);
dijit.setWaiState(this.focusNode,"disabled",!_5);
if(_5){
this.focusNode.href=this.href;
}else{
this.focusNode.removeAttribute("href");
}
this.enabled=_5;
},_setImgClassAttr:function(_6){
if(!this._img||this._created){
this._updateImage(this.imgSrc,_6);
}
this.imgClass=_6;
},_setImgSrcAttr:function(_7){
_7=jazz.util.moduleResource(_7);
this._updateImage(_7,this.imgClass);
this.imgSrc=_7;
},_updateImage:function(_8,_9){
if(_8||_9){
if(!_8&&_9){
_8=this._blankGif;
}
if(this._img){
this._img.src=_8;
this._img.className="button-img"+(_9?" "+_9:"");
if(!this._img.parentNode||this._img.parentNode!==this.focusNode){
dojo.place(this._img,this.focusNode,"first");
}
}else{
this._img=dojo.create("img",{src:_8,"class":"button-img"+(_9?" "+_9:""),alt:this.label?"":this.title},this.focusNode,"first");
}
}else{
this._img&&this._img.parentNode&&this._img.parentNode.removeChild(this._img);
}
},_setLabelAttr:function(_a){
this.label=_a;
this._updateLabel(_a);
},_updateLabel:function(_b){
if(_b){
if(this._img){
this._img.alt="";
}
this.focusNode.title=this.title||"";
}else{
if(this._img){
this._img.alt=this.title;
}
this.focusNode.title=_b||this.title;
}
this._label.style.display=_b?"inline":"none";
this._label.innerHTML=jazz.util.html.escape(_b);
dojo.toggleClass(this.domNode,"has-icon",_b&&!!(this.imgSrc||this.imgClass));
}});
})();

dojo.provide("jazz.ui.nls.PaginationControlMessages")._built=true;
dojo.provide("jazz.ui.nls.PaginationControlMessages.en_us");
jazz.ui.nls.PaginationControlMessages.en_us={"next":"Next","previous":"Previous","last":"Last","first":"First","of":"of"};

;dojo.cache("jazz.ui", "templates/PaginationControl.html", "<div class=\"jazz-ui-PaginationControl\">	<span dojoattachpoint=\"_firstLink\" dojotype=\"jazz.ui.toolbar.Button\" title=\"${msg.first}\" imgClass=\"first-button j-mirror\" class=\"jumpToPageButton\" dojoattachevent=\"onClick: _onFirstPageClick\"></span><span dojoattachpoint=\"_previous\" dojotype=\"jazz.ui.toolbar.Button\" label=\"${msg.previous}\" enabled=\"false\" dojoattachevent=\"onClick: _onPreviousClick\"></span><span class=\"vertical-bar\"></span><span class=\"number\"><span dojoattachpoint=\"_pgStart\"></span> - <span dojoattachpoint=\"_pgEnd\"></span></span><span>&nbsp;${msg.of}&nbsp;</span><span class=\"number\" dojoAttachPoint=\"_total\"></span><span class=\"vertical-bar\"></span><span dojoattachpoint=\"_next\" dojotype=\"jazz.ui.toolbar.Button\" label=\"${msg.next}\" dojoattachevent=\"onClick: _onNextClick\"></span><span dojoattachpoint=\"_lastLink\" dojotype=\"jazz.ui.toolbar.Button\" title=\"${msg.last}\" imgClass=\"last-button j-mirror\" class=\"jumpToPageButton\" dojoattachevent=\"onClick: _onLastPageClick\"></span></div>");

;dojo.provide("jazz.ui.PaginationControl");








dojo.requireLocalization("jazz.ui","PaginationControlMessages");
(function(){
var _1="/jazz/ui/PaginationControl/",_2=2,_3=1,_4=-1,_5=-2;
dojo.declare("jazz.ui.PaginationControl",[dijit._Widget,dijit._Templated],{total:0,increment:0,pageSize:0,startPage:0,onNextClick:null,onPreviousClick:null,getNextHref:null,getPreviousHref:null,name:null,setEnabled:function(_6){
if(_6){
this._togglePreviousLinks(this._start>1);
this._toggleNextLinks(this._end!==this.total);
if(this._hrefNavigation){
var _7=this._getPageSize();
var _8=this.getNextHref(this,this._start,this._end);
this._setHref(this._next,_8);
var _9=this.getPreviousHref(this,this._start,this._end);
this._setHref(this._previous,_9);
this._firstPageHref=this.getPreviousHref(this,1+this.increment,1+this.increment+_7);
this._setHref(this._firstLink,this._firstPageHref);
var s=this.increment*(Math.ceil((this.total-_7)/this.increment)-1);
this._lastPageHref=this.getNextHref(this,s+1,s+_7);
this._setHref(this._lastLink,this._lastPageHref);
}
}else{
this._toggleNextLinks(false);
this._togglePreviousLinks(false);
if(this._hrefNavigation){
this._setHref(this._next,null);
this._setHref(this._previous,null);
}
}
},setTotal:function(_a){
this.total=_a;
this._initWidget();
},_hrefNavigation:false,_processEventDelay:0,widgetsInTemplate:true,templatePath:dojo.moduleUrl("jazz.ui","templates/PaginationControl.html"),constructor:function(_b){
this.msg=dojo.i18n.getLocalization("jazz.ui","PaginationControlMessages");
},postCreate:function(){
this._initWidget();
dojo.addClass(this._firstLink.titleNode,"_firstLink");
dojo.addClass(this._next.titleNode,"_next");
dojo.addClass(this._previous.titleNode,"_previous");
dojo.addClass(this._lastLink.titleNode,"_lastLink");
},_initWidget:function(){
if(this.getNextHref&&this.getPreviousHref){
this._hrefNavigation=true;
}
this._updateWidget();
if(!this._initialized&&this.total>0){
if(this._hrefNavigation){
this._processEventDelay=10;
}
this._addSubscriptions();
this._initialized=true;
}
},_updateWidget:function(){
var _c=this.startPage*this.increment+1;
var _d=this.startPage*this.increment+this._getPageSize();
this._start=_c>this.total?this.total:_c;
this._end=_d>this.total?this.total:_d;
this.setEnabled(true);
this._setNodeNumber(this._pgStart,this._start);
this._setNodeNumber(this._pgEnd,this._end);
this._setNodeNumber(this._total,this.total);
},_setHref:function(_e,_f){
if(_f&&_e.enabled){
_e.set("href",_f);
}
},_setNodeNumber:function(_10,_11){
dojo.place(document.createTextNode(_11),_10,"only");
},_toggleNextLinks:function(_12){
this._setLinkEnablement(this._next,_12);
this._setLinkEnablement(this._lastLink,_12);
},_togglePreviousLinks:function(_13){
this._setLinkEnablement(this._previous,_13);
this._setLinkEnablement(this._firstLink,_13);
},_updateButtonEnablement:function(_14,_15){
this._togglePreviousLinks(_14);
this._toggleNextLinks(_15);
},_setLinkEnablement:function(_16,_17){
var _18=document.activeElement===_16.focusNode&&!_17;
if(_16){
_16.set("enabled",_17);
}
if(_18){
if(_16===this._next||_16===this._lastLink){
this._previous.focus();
}else{
if(_16===this._previous||_16===this._firstLink){
this._next.focus();
}
}
}
},_processNextClickEvent:function(){
if(!this.domNode){
return;
}
delete this._timeout;
var _19,_1a;
this._updateButtonEnablement(true,this._end!==this.total);
if(this._hrefNavigation){
_19=this.getPreviousHref(this,this._start,this._end);
this._setHref(this._previous,_19);
_1a=this.getNextHref(this,this._start,this._end);
this._setHref(this._next,_1a);
}else{
if(this.onNextClick){
this.onNextClick(this,this._start,this._end);
}
}
this._firePublishEvent(_3,_19,_1a);
},_processNextEvent:function(){
if(!this._next.enabled){
return false;
}
this._start=this._start+this.increment;
this._end=this._start+this._getPageSize()-1;
if(this._end>this.total){
this._end=this.total;
}
this._setNodeNumber(this._pgStart,this._start);
this._setNodeNumber(this._pgEnd,this._end);
return true;
},_onNextClick:function(_1b){
if(!this._hrefNavigation&&_1b){
dojo.stopEvent(_1b);
}
if(!this._timeout&&this._processNextEvent()){
this._timeout=setTimeout(dojo.hitch(this,this._processNextClickEvent),this._processEventDelay);
}
return true;
},_processPreviousClickEvent:function(){
if(!this.domNode){
return;
}
delete this._timeout;
var _1c,_1d;
this._updateButtonEnablement(this._start!==1,true);
if(this._hrefNavigation){
_1c=this.getPreviousHref(this,this._start,this._end);
this._setHref(this._previous,_1c);
_1d=this.getNextHref(this,this._start,this._end);
this._setHref(this._next,_1d);
}else{
if(this.onPreviousClick){
this.onPreviousClick(this,this._start,this._end);
}
}
this._firePublishEvent(_4,_1c,_1d);
},_processPreviousEvent:function(){
if(!this._previous.enabled){
return false;
}
this._start=this._start-this.increment;
if(this._start<1){
this._start=1;
}
this._end=this._start+this._getPageSize()-1;
this._setNodeNumber(this._pgStart,this._start);
this._setNodeNumber(this._pgEnd,this._end);
return true;
},_onPreviousClick:function(_1e){
if(!this._hrefNavigation&&_1e){
dojo.stopEvent(_1e);
}
if(!this._timeout&&this._processPreviousEvent()){
this._timeout=setTimeout(dojo.hitch(this,this._processPreviousClickEvent),this._processEventDelay);
}
return true;
},_processFirstClickEvent:function(){
if(!this.domNode){
return;
}
delete this._timeout;
var _1f;
this._updateButtonEnablement(false,true);
if(this._hrefNavigation){
_1f=this.getNextHref(this,this._start,this._end);
this._setHref(this._next,_1f);
}else{
if(this.onPreviousClick){
this.onPreviousClick(this,this._start,this._end);
}
}
this._firePublishEvent(_5,undefined,_1f);
},_processFirstLinkEvent:function(){
if(!this._firstLink.enabled){
return false;
}
this._start=1;
this._end=this._getPageSize();
this._setNodeNumber(this._pgStart,this._start);
this._setNodeNumber(this._pgEnd,this._end);
return true;
},_onFirstPageClick:function(_20){
if(!this._hrefNavigation&&_20){
dojo.stopEvent(_20);
}
if(!this._timeout&&this._processFirstLinkEvent()){
this._timeout=setTimeout(dojo.hitch(this,this._processFirstClickEvent),this._processEventDelay);
}
return true;
},_processLastClickEvent:function(){
if(!this.domNode){
return;
}
delete this._timeout;
var _21;
this._updateButtonEnablement(true,false);
if(this._hrefNavigation){
_21=this.getPreviousHref(this,this._start,this._end);
this._setHref(this._previous,_21);
}
if(this.onNextClick){
this.onNextClick(this,this._start,this._end);
}
this._firePublishEvent(_2,_21,undefined);
},_processLastLinkEvent:function(){
if(!this._lastLink.enabled){
return false;
}
var _22=this.total%this.increment;
this._end=this.total;
this._start=this._end-(_22>0?_22-1:this._getPageSize()-1);
this._setNodeNumber(this._pgStart,this._start);
this._setNodeNumber(this._pgEnd,this._end);
return true;
},_onLastPageClick:function(_23){
if(!this._hrefNavigation&&_23){
dojo.stopEvent(_23);
}
if(!this._timeout&&this._processLastLinkEvent()){
setTimeout(dojo.hitch(this,this._processLastClickEvent),this._processEventDelay);
}
return true;
},_addSubscriptions:function(){
if(!this.name){
return;
}
var _24=_1+this.name;
this.subscribe(_24,function(_25){
if(!_25){
return;
}else{
if(this.id===_25.sourceID){
return;
}else{
if(_25.type===_3){
this._processNextEvent();
this._updateButtonEnablement(true,this._end!==this.total);
}else{
if(_25.type===_4){
this._processPreviousEvent();
this._updateButtonEnablement(this._start!==1,true);
}else{
if(_25.type===_2){
this._processLastLinkEvent();
this._updateButtonEnablement(true,false);
}else{
if(_25.type===_5){
this._processFirstLinkEvent();
this._updateButtonEnablement(false,true);
}
}
}
}
}
}
if(_25.previousHref){
this._setHref(this._previous,_25.previousHref);
}
if(_25.nextHref){
this._setHref(this._next,_25.nextHref);
}
});
},_firePublishEvent:function(_26,_27,_28){
if(!this.name){
return;
}
var _29=_1+this.name;
var _2a={type:_26,sourceID:this.id};
if(_27){
_2a.previousHref=_27;
}
if(_28){
_2a.nextHref=_28;
}
dojo.publish(_29,[_2a]);
},_getPageSize:function(){
return this.pageSize||this.increment;
}});
})();


;dojo.cache("jazz.ui", "templates/MegaMenu.html", "<div class=\"jazz-ui-MegaMenu\" dojoattachevent=\"onkeydown:_filterKeyDown\">	<div class=\"filter\" dojoattachpoint=\"_filterArea\" style=\"display: none\">		<div class=\"filter-area\">			<div class=\"first-column\">				<div class=\"contribution-area\" dojoattachpoint=\"_contributionArea\"></div>				<div class=\"filter-wrapper\"> 					<div dojotype=\"jazz.ui.FilterBox\" dojoattachpoint=\"_filterBox\" dojoattachevent=\"onKeyPress:_filterKeyPress,onChange:filter\"></div>				</div>			</div>		</div>		<div class=\"filter-border\"><div class=\"inner\"></div></div>	</div>	<div class=\"menu-wrapper\" dojoattachpoint=\"_wrapper\" dojoattachevent=\"onscroll:_repaginate\">		<table class=\"menus\" dojoattachpoint=\"_table\">			<tr dojoattachpoint=\"_content\"></tr>		</table>		<div class=\"pagination\" dojoattachpoint=\"_pageWrapper\" style=\"display: none\"></div>	</div></div>   ");

;dojo.provide("jazz.ui.MegaMenu");




















(function(){
dojo.declare("jazz.ui.MegaMenu",[dijit._Widget,dijit._Templated,dijit._Container,dijit._Contained],{showFilter:false,align:"left",columnWidth:277,addItemByArgs:function(_1,_2){
return this.add(new jazz.ui.menu.MenuItem(_1),{insertIndex:_2,wrapHint:_1.wrapHint});
},addTitle:function(_3,_4){
if(typeof _4=="number"){
_4={insertIndex:_4};
}
var _5=new jazz.ui.menu.NodeMenuItem({label:_3,isTitle:true,focusable:_4&&_4.focusable});
this.addChild(_5,_4);
return _5;
},add:function(_6,_7){
if(_7==null){
_7={};
}else{
var _8=_7;
if(typeof _8=="number"||typeof _8=="string"){
_7={};
_7.insertIndex=_8;
}
}
if(_6&&_6.nodeType||dojo.isString(_6)){
var _9=_6;
if(_7.iconIndent===false){
_6=new jazz.ui.menu.NodeMenuItem();
}else{
_6=new jazz.ui.menu.NodeMenuItem({className:"menu-text"});
}
if(!_7.wrapHint){
_7.wrapHint=_a.NO_WRAP;
}
if(_9.nodeType){
dojo.place(_9,_6.containerNode,"only");
}else{
_6.set("label",_9);
}
}else{
if(_6&&_6 instanceof dijit._WidgetBase){
_7.wrapHint=_6.wrapHint;
}else{
console.error("[ComponentMenu] Error adding item.  Invalid type.");
}
}
if(this._getIndexOfChild(_6)>=0){
this.removeChild(_6);
}
this.addChild(_6,_7);
return _6;
},addSeparator:function(_b){
return this.add(new dijit.MenuSeparator(),_b);
},addChild:function(_c,_d){
if(_d==null){
_d={};
}
var wh=_d.wrapHint||_a.AUTO_WRAP;
_c.wrapHint=wh;
if(this._getIndexOfChild(_c)>=0){
this.removeChild(_c);
}
if(typeof _d=="number"||typeof _d=="string"){
var _e=_d;
}else{
if(typeof _d.insertIndex=="number"){
_e=_d.insertIndex;
}
}
if(_e===null){
_e=this._items.length;
}
var _f;
if(typeof _e=="number"){
this._items.splice(_e,0,_c);
var _10=0;
for(var i=0;i<this._menus.length;i++){
var _11=this._menus[i].getChildren().length;
if(_e<=_10+_11){
_e-=_10;
_f=this._menus[i];
break;
}else{
_10+=_11;
}
}
}else{
switch(_e){
case "first":
this._items.splice(0,0,_c);
_f=this._menus[0];
break;
default:
this._items.push(_c);
}
}
if(!_f){
_f=this._menus[this._menus.length-1];
}
_f.addChild(_c,_e);
if(this._items.length>1&&wh==_a.FORCE_WRAP||_e!=null){
this._queueReflow(true);
}
},removeChild:function(_12){
var _13=(typeof _12=="number")?_12:this._getIndexOfChild(_12);
if(_13>=0){
var _14=this._items.splice(_13,1)[0];
try{
var _15=_14.getParent();
if(_15&&_15.focusedChild==_14){
delete _15.focusedChild;
}
}
catch(e){
}
if(_14&&_14.domNode){
_14.domNode.parentNode.removeChild(_14.domNode);
}
this._queueReflow(true);
return _14;
}
},setSelected:function(_16){
if(!this._selected){
this._selected=[];
}
while(this._selected.length>0){
var sel=this._selected.pop();
if(sel.domNode){
if(typeof sel.selected!="undefined"){
sel.set("selected",false);
}else{
dojo.removeClass(sel.domNode,"selected");
}
}
}
if(!_16){
return;
}
if(dojo.isArray(_16)){
for(var k=0;k<_16.length;k++){
if(typeof _16[k]=="number"){
_16[k]=this.getChildren()[_16[k]];
}
}
this._selected=_16;
}else{
if(typeof _16=="number"){
this._selected=[this.getChildren()[_16]];
}else{
if(_16.domNode){
this._selected=[_16];
}
}
}
for(var i=0;i<this._selected.length;i++){
var x=this._selected[i];
if(x.domNode){
if(typeof x.selected!="undefined"){
x.set("selected",true);
}else{
dojo.addClass(x.domNode,"selected");
dijit.setWaiState(x.domNode,"checked",true);
}
}
}
},getSelected:function(){
return this._selected;
},getChildren:function(){
return this._items||[];
},hasChildren:function(){
return this._items.length>0;
},focus:function(dir){
if(this.showFilter){
this._filterBox.focus();
}else{
this._focus(dir);
}
},_focus:function(dir){
if(!this._noMatches){
var _17=(dir=="end")?this._menus[this._menus.length-1]:this._menus[0];
var fc=_17._getNextFocusableChild(null,(dir=="end")?-1:1);
if(this._hidden){
var _18=(dir=="end")?"previousSibling":"nextSibling";
while(dojo.indexOf(this._hidden,fc)>=0&&fc.domNode[_18]){
fc=dijit.byNode(fc.domNode[_18]);
}
}
fc&&_17.focusChild(fc);
this._pageTo(0);
}
},filter:function(_19){
if(_19==this._filterValue){
return;
}
var _1a,_1b,_1c=[],_1d=[],_1e=this._items;
if(this._noMatches){
this.removeChild(this._noMatches).destroy();
this._noMatches=null;
}
for(var i=0;i<_1e.length;i++){
var _1f=_1e[i];
if(_1f.isTitle){
if(_1a){
if(_1e[i-1].isTitle){
_1b=true;
}
if(!_1b){
_1c.push(_1a);
}
_1a.domNode.style.display=_1b?"":"none";
}
_1a=_1f;
_1b=false;
continue;
}
var _20=_1f.label;
var _21=_20?_20.toLowerCase().indexOf(_19.toLowerCase())<0:_19?true:false;
if(_21){
_1c.push(_1f);
}else{
_1b=true;
}
var _22=(dojo.isIE==7)?"block":"table-row";
_1f.domNode.style.display=_21?"none":_19.length?_22:"";
}
if(_1a&&!_1e[_1e.length-1].isTitle){
_1a.domNode.style.display=_1b?"":"none";
if(!_1b){
_1c.push(_1a);
}
}
if(_1c.length==_1e.length){
if(!this._noMatches){
this._noMatches=this.addTitle("No matches.");
}
}
this._hidden=_1c;
this._reflow();
this._filterValue=_19;
},canDismiss:function(){
if(!this.showFilter){
return true;
}
try{
if(this._filterBox._box.value.length>0){
return false;
}
}
catch(e){
}
return true;
},onOpen:function(){
if(this.showFilter){
this._filterBox.focus();
}
if(!this._resizeHandle){
this._resizeHandle=jazz.util.ResizeNotifier.register({context:this,callback:this._onResize,force:true,publishEvents:false});
}
this._onResize();
},onClose:function(){
if(this.showFilter){
this._filterBox.clear();
}
if(this._resizeHandle){
jazz.util.ResizeNotifier.unregister(this._resizeHandle);
this._resizeHandle=null;
}
},destroyDescendants:function(_23){
this.inherited(arguments);
while(this._menus.length>1){
this._removeMenu();
}
var _24=this._menus[0];
if(_24&&_24.focusedChild){
delete _24.focusedChild;
}
this._selected=null;
this._breakpoints=null;
this._items=[];
},uninitialize:function(){
while(this._menus.length>0){
this._menus.pop().destroy();
}
},baseClass:"jazz-ui-MegaMenu",_items:null,_menus:null,_columnMaxItems:null,_maxColumns:4,_hidden:null,_selected:null,templatePath:dojo.moduleUrl("jazz.ui","templates/MegaMenu.html"),widgetsInTemplate:true,postMixInProperties:function(){
this.containerNode=dojo.create("div");
},postCreate:function(){
this._items=[];
this._menus=[];
this._hidden=[];
this._addMenu();
},onExecute:function(){
},onCancel:function(_25){
},onReflow:function(){
},_addMenu:function(){
var _26=this._menus;
if(_26.length>0){
var _27=_26[_26.length-1];
if(_27.domNode&&_27.domNode.parentNode){
dojo.removeClass(_27.domNode.parentNode,"column-last");
}
}
var td=dojo.create("td",{"class":"column column-last"});
var _28=this;
var _29=new jazz.ui.Menu({selectable:true,focusFirstChild:function(){
var _2a=this._getFirstFocusableChild();
if(_2a){
_2a.focusNode.tabIndex=0;
this.focusChild(_2a);
_2a.focusNode.tabIndex=-1;
_2a.className=_2a.className;
}
},focusNext:function(){
var _2b=this._getNextFocusableChild(this.focusedChild,1);
if(!_2b){
_2b=this.focusedChild;
}
if(_2b&&this.focusedChild&&_2b.getIndexInParent()<=this.focusedChild.getIndexInParent()){
var _2c=(_26.length>this.__index+1)?this.__index+1:0,_2d=_26[_2c];
}
_2b.focusNode.tabIndex=0;
if(_2d){
_28._pageTo(_2c);
var _2e=_2d._getFirstFocusableChild();
if(_28._hidden){
while(dojo.indexOf(_28._hidden,_2e)>=0&&_2e.domNode.nextSibling){
_2e=dijit.byNode(_2e.domNode.nextSibling);
}
}
_2d.focusChild(_2e);
}else{
this.focusChild(_2b);
}
_2b.focusNode.tabIndex=-1;
_2b.className=_2b.className;
},focusPrev:function(){
var _2f=this._getNextFocusableChild(this.focusedChild,-1);
if(!_2f){
_2f=this.focusedChild;
}
if(_2f&&this.focusedChild&&_2f.getIndexInParent()>=this.focusedChild.getIndexInParent()){
var _30=(this.__index>0)?this.__index-1:_26.length-1,_31=_26[_30];
}
_2f.focusNode.tabIndex=0;
if(_31){
_28._pageTo(_30);
var _32=_31._getNextFocusableChild(_31.getChildren[0],-1);
if(_28._hidden){
while(dojo.indexOf(_28._hidden,_32)>=0&&_32.domNode.previousSibling){
_32=dijit.byNode(_32.domNode.previousSibling);
}
}
_31.focusChild(_32,true);
}else{
this.focusChild(_2f,true);
}
_2f.focusNode.tabIndex=-1;
_2f.className=_2f.className;
}});
_29.domNode.style.width=this.columnWidth+"px";
_29.__index=_26.length;
_29.getIndexOfChild=dojo.hitch(this,this._getIndexOfChild);
var _33=dojo.hitch(this,function(){
this.onExecute();
});
dojo.connect(_29,"onExecute",_33);
dojo.connect(_29,"onCancel",_33);
_29.connect(_29.domNode,"onmouseenter",dojo.hitch(this,this._hideFocus));
_26.push(_29);
_29.placeAt(td);
if(this.domNode.classList.contains("jazz-ui-MegaMenuRtl")){
this._content.insertBefore(td,this._content.firstChild);
}else{
this._content.appendChild(td);
}
if(this._started){
_29.startup();
}
},_hideFocus:function(){
for(var i=0;i<this._menus.length;i++){
var _34=this._menus[i];
if(_34.focusedChild){
_34.focusedChild._setSelected(false);
}
}
},startup:function(){
if(!this._started){
dojo.query("> [widgetId]",this.containerNode).map(dijit.byNode).forEach(function(_35){
this.addChild(_35);
},this);
for(var i=0;i<this._menus.length;i++){
this._menus[i].startup();
}
this.inherited(arguments);
}
},_removeMenu:function(){
var _36=this._menus.pop(),pn=_36.domNode.parentNode;
_36.destroy();
if(pn){
if(pn.previousSibling){
dojo.addClass(pn.previousSibling,"column-last");
}
pn.parentNode.removeChild(pn);
}
},_updateMaxCols:function(){
var _37=dijit.getViewport(),_38=dojo.position(this.domNode);
var max;
if(this.align=="right"){
max=Math.max(1,Math.floor((_38.x+_38.w)/this.columnWidth));
}else{
max=Math.max(1,Math.floor((_37.w-_38.x)/this.columnWidth));
}
if(max!==this._maxColumns){
this._breakpoints=null;
this._maxColumns=max;
}
},_onResize:function(){
this._updateMaxCols();
this._queueReflow();
},_queueReflow:function(_39){
if(_39){
this._breakpoints=null;
}
if(!this._reflowQueue){
this._reflowQueue=setTimeout(dojo.hitch(this,this._reflow),0);
}
},_reflow:function(){
if(!this.domNode){
return;
}
if(!this._maxColumns){
this._updateMaxCols();
}
var _3a=this._menus,_3b=dijit.getViewport().h-20,_3c=!this._breakpoints,_3d=this._items;
for(var i=0;i<_3a.length;i++){
var _3e=_3a[i];
if(_3e.focusedChild){
var _3f=_3e.focusedChild;
}
if(!_3c){
var _40=dojo.position(_3e.domNode);
var _41=_40.y+_40.h;
if(_41>_3b||_41+130<_3b){
_3c=true;
}
}
}
clearTimeout(this._reflowQueue);
this._reflowQueue=null;
if(!_3c){
this.onReflow();
return;
}
var _42=dojo.position(this._table).y;
this._wrapper.removeChild(this._table);
var mc=_3a[0].containerNode;
for(i=0;i<_3d.length;i++){
mc.appendChild(_3d[i].domNode);
}
dojo.place(this._table,this._wrapper,"first");
var _43=[];
for(i=0;i<_3d.length;i++){
_43.push(dojo.position(_3d[i].domNode));
}
this._wrapper.removeChild(this._table);
var _44=[],_45=0,_46,_47,_48=0;
for(i=2;i<_3d.length;i++){
var _49=_3d[i];
if(this._hidden&&dojo.indexOf(this._hidden,_49)>=0){
continue;
}
var _4a=_43[i];
if(_49.wrapHint!=_a.NO_WRAP){
_46=i;
_47=_4a;
}
var _4b=(_4a.y+_4a.h-_45>=_3b-10);
if(!_4b&&_49.wrapHint!=_a.FORCE_WRAP){
continue;
}
if(_46!=null){
_44.push(_46);
_48=_46;
_45=_47.y-_42;
_46=null;
}
}
this._updateBreakpoints(_44);
this._updatePagination(_44);
dojo.place(this._table,this._wrapper,"first");
if(_3f&&_3f.domNode){
var _4c=_3f.getParent();
if(_4c){
_4c.focusChild(_3f);
}
}else{
this.focus("start");
}
this.onReflow();
},_repaginate:function(_4d){
var _4e=this._menus;
for(var i=0;i<_4e.length;i++){
if(_4e[i].focusedChild){
this._pageTo(i);
}
}
},_pageTo:function(_4f){
var _50=this._pagination;
if(_50){
if(_4f>_50._end-1){
var _51=Math.max(_4f-_50.pageSize+1,0);
}else{
if(_4f<_50._start-1){
_51=Math.min(_4f,_50.total-_50.pageSize+1);
}else{
return;
}
}
_50.startPage=_51;
_50._updateWidget();
this._table.style.marginRight=-(this.columnWidth*(_50.total-_50.pageSize-_51))+"px";
this._table.style.marginLeft=-(this.columnWidth*_51)+"px";
}
},_updatePagination:function(_52){
var _53=0;
if(this._pagination){
_53=Math.min(this._pagination._start-1,_52.length+1-this._maxColumns);
this._pagination.destroy();
delete this._pagination;
}
var _54=this._content.childNodes;
if(_52.length>=this._maxColumns){
var _55=dojo.hitch(this,function(_56,_57,end){
if(this._anim&&this._anim.status()=="playing"){
this._anim.stop();
this._table.style.marginLeft=this._anim.properties.marginLeft+"px";
}
this._anim=dojo.animateProperty({node:this._table,duration:200,properties:{marginLeft:{end:-(this.columnWidth*(_57-1)),unit:"px"}},onEnd:dojo.hitch(this,function(){
this._table.style.marginRight=-(this.columnWidth*(_56.total-end))+"px";
this._wrapper.style.width="";
})}).play();
this._wrapper.style.width=this._wrapper.clientWidth+"px";
});
this._pagination=new jazz.ui.PaginationControl({"class":"jazz-ui-MegaMenu-pagination",total:_52.length+1,pageSize:this._maxColumns,increment:1,onNextClick:_55,onPreviousClick:_55,startPage:_53||0}).placeAt(this._pageWrapper);
this._pageWrapper.style.display="block";
this._table.style.marginRight=-(this.columnWidth*(_52.length+1-this._maxColumns-_53))+"px";
this._table.style.marginLeft=_53?-(this.columnWidth*_53)+"px":"";
}else{
this._pageWrapper.style.display="none";
this._table.style.marginRight="";
this._table.style.marginLeft="";
}
},_updateBreakpoints:function(_58){
var _59=this._menus,_5a=this._items,_5b=0,_5c=0;
this._breakpoints=_58;
while(_59.length>_58.length+1){
this._removeMenu();
}
while(_59.length<_58.length+1){
this._addMenu();
}
for(var i=0;i<_5a.length;i++){
var cb=_58[_5b];
if(cb&&i==cb){
_5c++;
_5b++;
}
var _5d=_5b>0?i-_58[_5b]:i;
if(_5a[i].getParent()!=_59[_5c]||_5a[i].getIndexInParent()!=_5d){
_59[_5c].addChild(_5a[i],"last");
}
}
},_getIndexOfChild:function(_5e){
var _5f=this._items;
for(var i=0;i<_5f.length;i++){
if(_5f[i]==_5e){
return i;
}
}
return -1;
},_filterKeyPress:function(_60){
var kc=_60.keyCode;
var _61=(kc==dojo.keys.UP_ARROW);
if(kc==dojo.keys.DOWN_ARROW||_61){
_60.preventDefault();
this._focus(_61?"end":"start");
}
},_filterKeyDown:function(_62){
if(!this.showFilter){
return;
}
var _63=dojo.keys;
switch(_62.keyCode){
case _63.DOWN_ARROW:
case _63.UP_ARROW:
case _63.LEFT_ARROW:
case _63.RIGHT_ARROW:
case _63.ENTER:
case _63.SPACE:
case _63.ESCAPE:
case _63.SHIFT:
case _63.CTRL:
case _63.META:
case _63.TAB:
return;
}
this._filterBox.focus();
},_setShowFilterAttr:function(_64){
this.showFilter=_64;
dojo.toggleClass(this.domNode,"showFilter",_64);
},_setColumnWidth:function(_65){
this.columnWidth=_65;
for(var i=0;i<this._menus.length;i++){
this._menus[i].domNode.style.width=this.columnWidth+"px";
}
}});
var _a={NO_WRAP:1,FORCE_WRAP:2,AUTO_WRAP:3};
dojo.mixin(jazz.ui.MegaMenu,{WrapHints:_a});
})();

dojo.provide("jazz.ui.nls.MenuPopupMessages")._built=true;
dojo.provide("jazz.ui.nls.MenuPopupMessages.en_us");
jazz.ui.nls.MenuPopupMessages.en_us={"unsaved":"You Have Unsaved Items","dropDownMenu":" Drop-Down Menu"};

;(function(){
dojo.provide("jazz.ui.MenuPopup");








dojo.requireLocalization("jazz.ui","MenuPopupMessages");
var _1,_2=null,_3=null,_4=null;
dojo.declare("jazz.ui.MenuPopup",[dijit._Widget],{align:"left",around:null,cacheMenu:false,caretSrc:"",caretSrcDirty:"",caretClass:"jazz-ui-MenuPopup-caret",caretClassDirty:"jazz-ui-MenuPopup-dirtyCaret",destroyOnClose:false,closeOnExecute:true,group:"",injectCaret:false,label:"",menuClass:"",menuProvider:null,openClass:"menu-open",openOnHover:false,openOnCaretClick:false,openDelay:300,closeDelay:800,closeBufferPx:5,_menuOpen:false,constructor:function(){
if(!_1){
_1=dojo.i18n.getLocalization("jazz.ui","MenuPopupMessages");
}
},postCreate:function(){
dojo.addClass(this.domNode,"jazz-ui-MenuPopup");
if(this.group||this.openOnHover){
this.connect(this.domNode,"onmouseover",this._onMouseOver);
}
this.connect(this.domNode,"onclick",this._onClickHandler);
this.connect(this.domNode,"onkeypress",this._handleKeypress);
this.connect(dijit.popup,"open",function(_5){
if(_5.popup===this._currentMenu){
this._popupArgs=_5;
}
});
if(this.injectCaret&&(this.caretSrc||this.caretClass)){
this._caret=dojo.create("span",{"class":"caret"},this.focusNode||this.domNode);
if(dojo.hasClass(document.body,"dijit_a11y")){
dojo.create("span",{innerHTML:"V"},this._caret).setAttribute("aria-hidden",true);
}else{
if(this.caretSrc){
dojo.create("img",{src:jazz.util.moduleResource(this.caretSrc),alt:""},this._caret);
}else{
dojo.addClass(this._caret,(this.caretClass?" "+this.caretClass:""));
}
}
if(this.openOnCaretClick){
this.connect(this._caret,"onclick",this._onCaretClick);
}
}
if(!this.around){
this.around=this.domNode;
}
dijit.setWaiState(this.focusNode||this.domNode,"haspopup","true");
dijit.setWaiState(this.focusNode||this.domNode,"label",(this.label||this.domNode.title||"")+_1.dropDownMenu);
},open:function(){
if(_2){
if(_2==this){
if(!this.openOnHover){
this.close(false);
}
return;
}else{
_2.close(false);
}
}
_3=this;
if(this._mouseMoveEvent){
this.disconnect(this._mouseMoveEvent);
this._mouseMoveEvent=null;
}
if(this._menuOpen){
this._currentMenu.onOpen();
return;
}
if(_4){
_4.cancel();
}
if(this.cacheMenu&&this._currentMenu){
var _6=this._currentMenu;
}else{
try{
_6=this.menuProvider(this);
if(_6 instanceof jazz.ui.MegaMenu){
_6.align=this.align;
}
if(_6 instanceof dojo.Deferred){
_6.addCallback(dojo.hitch(this,this._deferredOpen));
this._deferred=_4=_6;
this.domNode.style.cursor="progress";
return;
}
}
catch(e){
console.error(e);
}
if(!_6){
return;
}
this._currentMenu=_6;
dojo.addClass(_6.domNode,"jazz-ui-MenuPopup-menu");
dojo.addClass(_6.domNode,this.menuClass);
dijit.setWaiState(_6.domNode,"labelledby",this.id);
dijit.setWaiRole(_6.domNode,"menu");
}
var _7=dojo.hitch(this,this.close);
this.domNode.focus();
dijit.popup.open({popup:_6,parent:this,around:this.around,orient:(this.align=="left")?["below","above"]:["below-alt","above-alt"],onExecute:this.closeOnExecute?_7:null,onCancel:_7});
_6.focus();
if(_6.onReflow){
this._reflow=this.connect(_6,"onReflow",this._onResize);
}
if(!this._resizeHandlers){
this._resizeHandlers=[this.connect(window,"onresize",this._onResize),this.connect(window,"onscroll",this._onResize)];
}
this._menuOpen=true;
_2=this;
dojo.addClass(this.around,this.openClass);
if(_6.startup){
_6.startup();
}
dijit.setWaiState(this.focusNode||this.domNode,"expanded","true");
},destroy:function(){
this.close(false);
delete this.around;
this.inherited(arguments);
},_onBlur:function(){
this.close(false);
this.inherited(arguments);
},close:function(_8){
var _9=this._currentMenu;
if(_9&&this._menuOpen){
if(_8!==false){
dijit.focus(this.focusNode||this.domNode);
}
if(_9.domNode){
dijit.popup.close(_9);
}
if(this._resizeHandlers){
while(this._resizeHandlers.length){
this.disconnect(this._resizeHandlers.pop());
}
delete this._resizeHandlers;
}
dijit.setWaiState(this.focusNode||this.domNode,"expanded","false");
this._menuOpen=false;
if(this.destroyOnClose){
if(_9.domNode&&_9.destroyRecursive){
_9.destroyRecursive();
}
this._currentMenu=null;
}
dojo.removeClass(this.around,this.openClass);
this._mouseMoveEvent&&this.disconnect(this._mouseMoveEvent);
this._reflow&&this.disconnect(this._reflow);
clearTimeout(this._closeTimeout);
clearTimeout(this._overTimeout);
this._mouseMoveEvent=null;
this._closeTimeout=null;
this._overTimeout=null;
this._reflow=null;
_2=null;
}
},setDirty:function(_a){
if(!this.injectCaret){
console.warn("[MenuPopup] setDirty not supported when injectCaret is false");
return;
}
if(_a&&!this._caretWrapper){
this._caretWrapper=dojo.create("span",{"class":"caret-wrapper j-mirror",title:_1.unsaved},this.domNode);
dojo.place(this._caret,this._caretWrapper);
this._caret.src=jazz.util.moduleResource(this.caretSrcDirty)||this._blankGif;
this._caret.className="caret"+(this.caretClassDirty?" "+this.caretClassDirty:"");
}else{
if(!_a&&this._caretWrapper){
this._caret.src=jazz.util.moduleResource(this.caretSrc)||this._blankGif;
this._caret.className="caret"+(this.caretClass?" "+this.caretClass:"");
dojo.place(this._caret,this.focusNode||this.domNode);
this.domNode.removeChild(this._caretWrapper);
delete this._caretWrapper;
}
}
},_onMouseOver:function(_b){
dojo.stopEvent(_b);
if(_2){
if(_2==this||_2.group!==this.group){
return;
}
_2.close(false);
this.open();
this._preventClose=true;
setTimeout(dojo.hitch(this,function(){
delete this._preventClose;
}),500);
}else{
if(this.openOnHover&&!this._overTimeout){
_3=this;
this._overTimeout=setTimeout(dojo.hitch(this,this._deferredOpen),this.openDelay);
}
}
if(this.openOnHover){
if(!this._mouseMoveEvent){
this._mouseMoveEvent=this.connect(dojo.doc,"onmousemove",this._mouseMove);
}
}
},_mouseMove:function(_c){
var _d=false;
if(this._menuOpen){
var pc=dojo.position(this._currentMenu.domNode),_e=_c.clientX,_f=_c.clientY,_10=this.closeBufferPx;
if(pc.x-_10<=_e&&pc.x+pc.w+_10>=_e&&pc.y-_10<=_f&&pc.y+pc.h+_10>=_f){
_d=true;
}
}
if((this._menuOpen&&_d)||dojo.isDescendant(_c.target,this.around)){
clearTimeout(this._closeTimeout);
this._closeTimeout=null;
return;
}else{
if(this._menuOpen){
if(dojo.isFunction(this._currentMenu.canDismiss)){
if(this._currentMenu.canDismiss()===false){
return;
}
}
if(!this._closeTimeout){
this._closeTimeout=setTimeout(dojo.hitch(this,this._deferredKill),this.closeDelay);
}
}else{
this.disconnect(this._mouseMoveEvent);
this._mouseMoveEvent=null;
clearTimeout(this._overTimeout);
this._overTimeout=null;
}
}
},_deferredKill:function(){
this.disconnect(this._mouseMoveEvent);
this._mouseMoveEvent=null;
this.close();
},_onCaretClick:function(_11){
this._onClickHandler(_11,true);
},_onClickHandler:function(_12,_13){
if(!this.openOnCaretClick||_13){
if(_12){
dojo.stopEvent(_12);
}
if(this._preventClose){
return;
}
this.open();
}else{
if(this._preventClose){
return;
}
this.close(false);
clearTimeout(this._overTimeout);
this._overTimeout=null;
}
},_deferredOpen:function(_14){
clearTimeout(this._overTimeout);
this._overTimeout=null;
this.domNode.style.cursor="";
if(_3&&_3!=this){
if(_4&&_4==this._deferred){
_4=null;
}
_3.open();
}else{
this.open();
}
_3=null;
},_handleKeypress:function(e){
var k=dojo.keys;
switch(e.keyCode){
case k.UP_ARROW:
case k.DOWN_ARROW:
case k.ENTER:
case k.SPACE:
if(!this._menuOpen){
this.open();
}else{
if(e.keyCode==k.ENTER||e.keyCode==k.SPACE){
this.close();
}
}
dojo.stopEvent(e);
break;
}
switch(e.keyCode){
case k.UP_ARROW:
this._currentMenu.focus("end");
break;
case k.DOWN_ARROW:
this._currentMenu.focus("start");
break;
case k.TAB:
if(this._menuOpen){
this._currentMenu.focus();
e.preventDefault();
}
break;
case k.ESCAPE:
case k.LEFT_ARROW:
case k.RIGHT_ARROW:
if(this._menuOpen){
this.close();
dojo.stopEvent(e);
}
break;
}
},_onResize:function(e){
var _15=this._currentMenu;
if(_15&&_15.domNode&&this._menuOpen){
var _16=this._popupArgs;
_15.focus();
dijit.placeOnScreenAroundElement(_16.popup.domNode.parentNode,_16.around,_16.orient,_15.orient?dojo.hitch(_15,_15.orient):null);
}
}});
jazz.ui.MenuPopup.closeAll=function(){
if(_2){
_2.close();
}
};
})();

dojo.provide("jazz.ui.nls.StyledBoxMessages")._built=true;
dojo.provide("jazz.ui.nls.StyledBoxMessages.en_us");
jazz.ui.nls.StyledBoxMessages.en_us={"expand":"Expand","hideHeader":"Hide Header","showHeader":"Show Header","menu":"Menu","close":"Close","collapse":"Collapse"};

;dojo.cache("jazz.ui", "templates/StyledBox.html", "<div class=\"jazz-ui-StyledBox\" role=\"region\" aria-labelledby=\"${id}_label\">	<div class=\"border\">	 	<div class=\"top left corner\"></div> 		<div class=\"top right corner\"></div>		<div class=\"bottom left corner\"></div>		<div class=\"bottom right corner\"></div>		<div class=\"dock-north horizontal\">			<div class=\"top center\"></div>		</div>		<div class=\"dock-south horizontal\">			<div class=\"bottom center\"><div class=\"line\"></div></div>		</div>		<div class=\"shift down vertical horizontal\">			<div class=\"shift up vertical horizontal\">				<div class=\"left side vertical\"></div>				<div class=\"right side vertical\"><div class=\"vertical line\"></div></div>			</div>		</div>	</div>		<div class=\"background\" dojoAttachEvent=\"mouseover:_onMouseOver,mouseout:_onMouseOut\">		<div class=\"jazz-ui-StyledBox-header\" dojoAttachPoint=\"_header\" dojoAttachEvent=\"mouseout:_onHeaderMouseOut,mouseover:_onHeaderMouseOver,dblclick:_toggleCollapse\">			<img dojoattachpoint=\"_iconImage\" src=\"${_blankGif}\" class=\"icon j-hide\" alt=\"\"/>			<div class=\"jazz-ui-StyledBox-buttons\" dojoType=\"jazz.ui.SimpleToolbar\" hoverStyle=\"none\" dojoAttachPoint=\"toolbar\"></div>			<div class=\"header-text ${truncateTitle}\" dojoattachpoint=\"_headerText\" aria-labelledby=\"${id}_label\" role=\"heading\" tabindex=\"0\">				<div>					<div class=\"header-primary\" dojoAttachPoint=\"_primaryHeaderText\" id=\"${id}_label\"><span dojoAttachPoint=\"_headerPrimarySpan\"></span><a class=\"j-hide\" dojoAttachPoint=\"_headerPrimaryAnchor\"></a></div>					<div class=\"header-secondary\" dojoAttachPoint=\"_headerSecondary\"></div>				</div>			</div>		</div>		<div dojoattachpoint=\"_collapsible\" class=\"collapsible\">			<div class=\"separator\" dojoAttachPoint=\"_separator\"></div>			<div class=\"jazz-ui-StyledBox-toggleHeader j-hide\" dojoattachpoint=\"_toggleHeader\" dojoattachevent=\"click:_toggleTrimlessHeader\">				<a class=\"showHeader\" href=\"#\" title=\"${_messages.showHeader}\">${_messages.showHeader}</a>				<a class=\"j-hide hideHeader\" href=\"#\" title=\"${_messages.hideHeader}\">${_messages.hideHeader}</a>			</div>			<div class=\"content\" dojoattachpoint=\"containerNode\"></div>		</div>		<div class=\"bottom\"></div>	</div></div>");

;dojo.provide("jazz.ui.StyledBox");
























dojo.requireLocalization("jazz.ui","StyledBoxMessages");
(function(){
var _1=jazz.ui.menu.MenuItem;
var _2={BLUE:"sbBlue sbLight shadow",BLUE_ALPHA_SHADOW:"sbBlue sbDark shadow",FLAT_BLUE_ALPHA_SHADOW:"sbFlatBlue sbDark shadow no-separator",GRAY:"sbGray sbLight shadow",GOLD:"sbGold sbLight shadow",GREEN:"sbGreen sbLight shadow",TEAL:"sbTeal sbLight shadow",PURPLE:"sbPurple sbLight shadow",ORANGE:"sbOrange sbLight shadow",TRIMLESS:"sbTrimless",WIZARD:"wizard sbDark shadow no-separator",EDITOR:"sbEditor sbLight shadow no-separator",EDITOR_FOCUS:"sbEditor editor-focus sbLight shadow tweak-border no-separator",EDITOR_YELLOW:"sbYellow sbEditor sbLight shadow tweak-border no-separator",LOGIN:"login sbDark border"};
var _3;
dojo.declare("jazz.ui.StyledBox",[dijit._Widget,dijit._Templated,dijit._Container],{templatePath:dojo.moduleUrl("jazz.ui","templates/StyledBox.html"),widgetsInTemplate:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{primaryTitle:[{node:"_headerPrimarySpan",type:"innerText"},{node:"_headerPrimaryAnchor",type:"innerText"}]}),contentNode:null,width:"",height:"",primaryTitle:"",secondaryTitle:"",truncateTitle:true,titleURL:"",trim:_2.TRIMLESS,headerHoverState:true,headerDefaultToHoverState:false,showBackground:false,iconClass:"",iconPath:"",menuItems:null,menuProvider:null,closable:true,collapsible:false,collapsed:false,headerless:false,destroyContents:false,contentScrollable:true,onClose:null,onOpen:null,onCollapse:null,onExpand:null,constructor:function(_4){
this._messages=_3=dojo.i18n.getLocalization("jazz.ui","StyledBoxMessages");
if(_4.trim==_2.WIZARD){
_4.truncateTitle=false;
}
},postCreate:function(){
if(!this.serverTemplated){
this.setWidth();
this.setHeight();
if(!this.contentNode&&this.getChildren().length===0){
this.contentNode=document.createElement("div");
}
if(!this.contentScrollable){
dojo.addClass(this.domNode,"jazz-ui-Dialog-isNotContentScrollable");
}
this.containerNode.appendChild(this.contentNode);
this.setTrim(this.trim);
this.setBackground(this.showBackground);
if(this.menuItems||this.menuProvider){
this._createMenuButton();
}
this._updateCollapsedState();
this.setClosable(this.closable);
if(dojo.isFunction(this.onOpen)){
this.onOpen();
}
}
},setCollapsed:function(_5,_6){
if(this.collapsed!=_5){
this._toggleCollapse(null,_6);
}
},setClosable:function(_7){
if(_7&&!this._closeButton){
this._closeButton=this.toolbar.addButton(this,this.close,{label:_3.close,className:"close"});
}else{
this.toolbar.removeItem(this._closeButton);
delete this._closeButton;
}
this.closable=_7;
},_toggleCollapse:function(_8,_9){
if(_8){
if(!this.collapsible){
return;
}
dojo.stopEvent(_8);
}
if(this._collapseAnimation){
return;
}
_9=_9!==false;
var _a={node:this._collapsible,onEnd:dojo.hitch(this,this._onCollapseAnimationEnd),duration:200};
if(this.collapsed){
if(dojo.isFunction(this.onExpand)&&this.onExpand()===false){
return;
}
if(_9){
this._collapseAnimation=dojo.fx.wipeIn(_a).play();
}
}else{
if(dojo.isFunction(this.onCollapse)&&this.onCollapse()===false){
return;
}
if(_9){
this._collapseAnimation=dojo.fx.wipeOut(_a).play();
}
}
if(!_9){
this._onCollapseAnimationEnd();
}
},_refreshStyles:function(){
this._applyClass("hover",(this.headerHoverState&&this._headerMouseOver||this._menuShowing)||this._headerVisible||this.headerDefaultToHoverState,this._header);
this._applyClass("j-hide",!this.collapsed&&(this.headerless||this.trim==_2.TRIMLESS)&&!this._headerVisible,this._header,this._separator);
this._applyClass("j-hide",this.trim!=_2.TRIMLESS||!this._mouseOver,this._toggleHeader);
},_onCollapseAnimationEnd:function(){
this.collapsed=!this.collapsed;
this._updateCollapsedState();
delete this._collapseAnimation;
},_updateCollapsedState:function(){
var _b=this.collapsed;
if(this._expandCollapseButton){
var _c=this.toolbar.getIndex(this._expandCollapseButton);
this.toolbar.removeItem(this._expandCollapseButton);
}
dijit.setWaiState(this._headerText,"expanded",!_b);
this._collapsible.style.display=this.collapsed?"none":"";
if(this.collapsible){
this._expandCollapseButton=this.toolbar.addButton(this,this._toggleCollapse,{className:_b?"expand":"collapse",label:_b?_3.expand:_3.collapse,index:_c==null?1:_c});
}
},addMenuItem:function(_d){
if(this.menuProvider){
console.error("Cannot use addMenuItem when using a menuProvider.");
return;
}
if(!this.menuItems){
this.menuItems=[];
this._createMenuButton();
}
if(typeof _d.index=="number"){
this.menuItems.splice(_d.index,0,_d);
}else{
this.menuItems.push(_d);
}
if(this._menu){
if(typeof _d.index=="number"){
this._menu.addChild(new _1(_d),_d.index);
}else{
this._menu.addChild(new _1(_d));
}
}
},_createMenuButton:function(){
if(!this._openMenuButton){
var _e=this._openMenuButton=this.toolbar.addButton(null,null,{label:_3.menu,className:"menu",index:0});
this._menuPopup=new jazz.ui.MenuPopup({align:"right",menuProvider:dojo.hitch(this,this._createMenu)},_e.domNode);
}
},bustOutHandler:function(_f){
dojo[_f?"addClass":"removeClass"](this.domNode,"busted-out");
},close:function(_10){
if(_10){
dojo.stopEvent(_10);
}
if(dojo.isFunction(this.onClose)&&this.onClose(this)===false){
return false;
}
if(dojo.isIE==7){
this._onClose();
}else{
this._fadeOutAnim=dojo.fadeOut({node:this.domNode,duration:200,onEnd:dojo.hitch(this,this._onClose)});
this._fadeOutAnim.play();
}
},setIcon:function(_11){
this.set("iconPath",_11);
},_setIconPathAttr:function(_12){
this.iconPath=_12;
this._applyClass("j-hide",!_12,this._iconImage);
if(_12){
this._iconImage.src=_12;
}
},_setIconClassAttr:function(_13){
if(_13){
dojo.addClass(this._iconImage,_13);
this.set("iconPath",this._blankGif);
}else{
if(_13!=this.iconClass){
dojo.removeClass(this._iconImage,this.iconClass);
this.set("iconPath",null);
}
}
this.iconClass=_13;
},setHeight:function(_14){
if(_14){
this.containerNode.style.height=_14;
this.height=_14;
}else{
if(this.height){
this.containerNode.style.height=this.height;
}else{
this.containerNode.style.height="";
}
}
},setWidth:function(_15){
if(_15){
this.domNode.style.width=_15;
this.width=_15;
}else{
if(this.width){
this.domNode.style.width=this.width;
}else{
this.domNode.style.width="";
}
}
},setTitle:function(_16){
this.set("primaryTitle",_16);
this.applyTextDir(this._headerPrimarySpan,_16);
this.applyTextDir(this._headerPrimaryAnchor,_16);
},setSecondaryTitle:function(_17){
this._setSecondaryTitleAttr(_17);
},_setSecondaryTitleAttr:function(_18){
if(dojo.isString(_18)&&_18.length){
_18="&nbsp;"+_18;
}
this._headerSecondary.innerHTML=_18;
this.secondaryTitle=_18;
},startup:function(){
if(!dojo.isDescendant(this.domNode,document.body)){
console.log("ERROR: Startup was called prematurely on widget "+this.id);
return;
}
this.inherited(arguments);
},setTitleURL:function(url){
this.set("titleURL",url);
},_setTitleURLAttr:function(url){
this.titleURL=url?url:"";
this._headerPrimaryAnchor.href=url;
if(url){
dojo.addClass(this._headerPrimarySpan,"j-hide");
dojo.removeClass(this._headerPrimaryAnchor,"j-hide");
}else{
dojo.addClass(this._headerPrimaryAnchor,"j-hide");
dojo.removeClass(this._headerPrimarySpan,"j-hide");
}
},setTrim:function(_19){
if(this.trim!=null&&this.trim!==_19){
dojo.removeClass(this.domNode,this.trim);
}
this.trim=_19;
dojo.addClass(this.domNode,_19);
this._refreshStyles();
},setBackground:function(_1a){
this._applyClass("showBackground",_1a,this.domNode);
},_toggleTrimlessHeader:function(_1b){
if(_1b){
_1b.preventDefault();
}
this._headerVisible=!this._headerVisible;
this._applyClass("headerVisible",this._headerVisible,this._toggleHeader);
this._refreshStyles();
},_createMenu:function(){
if(this._menu&&!this._menu._destroyed){
return this._menu;
}
var _1c;
if(this.menuProvider){
_1c=this.menuProvider();
}else{
_1c=new jazz.ui.Menu();
if(this.menuItems){
for(var i=0;i<this.menuItems.length;i++){
if(this.menuItems[i].separator){
_1c.addChild(new dijit.MenuSeparator());
continue;
}
if(!this.menuItems[i].label){
console.error("Error creating menu:  Menu item at index "+i+" is missing a label.");
continue;
}
_1c.addChild(new _1(this.menuItems[i]));
}
}
}
if(_1c instanceof dijit._WidgetBase){
dojo.addClass(_1c.domNode,"jazz-ui-StyledBox-menu");
_1c.own(dojo.connect(_1c,"onOpen",this,this._onMenuOpen),dojo.connect(_1c,"onClose",this,this._onMenuClose));
return this._menu=_1c;
}else{
throw new Error("Error creating menu.");
}
},_onMenuOpen:function(_1d){
this._menuShowing=true;
this._refreshStyles();
},_onMenuClose:function(_1e){
this._menuShowing=false;
this._refreshStyles();
},_onMouseOver:function(){
this._mouseOver=true;
this._refreshStyles();
},_onMouseOut:function(){
this._mouseOver=false;
this._refreshStyles();
},_onHeaderMouseOver:function(){
this._headerMouseOver=true;
this._refreshStyles();
var _1f=this._primaryHeaderText;
if(_1f.scrollWidth>=_1f.clientWidth){
_1f.title=this.primaryTitle;
}else{
_1f.title="";
}
this._headerSecondary.title=this.primaryTitle;
},_onHeaderMouseOut:function(){
this._headerMouseOver=false;
this._refreshStyles();
},_applyClass:function(_20,_21,_22){
for(var i=2;i<arguments.length;i++){
if(_21){
dojo.addClass(arguments[i],_20);
}else{
dojo.removeClass(arguments[i],_20);
}
}
},_onClose:function(){
if(this._closed){
return;
}
this._closed=true;
if(this._fadeOutAnim){
this._fadeOutAnim.stop();
delete this._fadeOutAnim;
}
var _23=dijit.byId(this.contentNode.id);
if(_23){
if(this.destroyContents){
if(dojo.isFunction(_23.destroyRecursive)){
_23.destroyRecursive();
}
}else{
var dom=_23.domNode;
dom&&dom.parentNode&&dom.parentNode.removeChild(dom);
}
}
this.destroy();
},destroy:function(){
if(this._collapseAnimation){
this._collapseAnimation.stop();
}
if(this._menuPopup){
this._menuPopup.destroy();
delete this._menuPopup;
}
if(this._menu){
this._menu.destroy();
delete this._menu;
}
this.inherited(arguments);
}});
jazz.ui.StyledBox.TrimStyles=_2;
})();


;dojo.cache("jazz.ui", "templates/Dialog.html", "<div class=\"jazz-ui-Dialog\" dojoAttachPoint=\"dialogNode\" role=\"dialog\" aria-labelledby=\"${id}_heading\" tabindex=\"-1\">	<div class=\"jazz-ui-Dialog-header\" dojoAttachPoint=\"headerContainerNode\">		<button class=\"jazz-ui-Dialog-close-button\" dojoAttachPoint=\"closeButton\" aria-label=\"close\">			<div class=\"jazz-ui-Dialog-close-button-icon\"></div>		</button>	</div>	<div class=\"jazz-ui-Dialog-content\" dojoattachpoint=\"containerNode\"></div>	<div class=\"jazz-ui-Dialog-footer\" dojoattachpoint=\"footerContainerNode\"></div></div>");

;dojo.provide("jazz.ui.Dialog");










(function(){
var _1=80;
var _2="jazz-ui-Dialog-heading";
var _3="jazz-ui-Dialog-label";
var _4="jazz-ui-Dialog-moveCursor";
var _5="jazz-ui-Dialog-content-padding-full";
var _6="jazz-ui-Dialog-content-padding-sides";
var _7="jazz-ui-Dialog-content-padding-none";
var _8="jazz-ui-Dialog-progress";
var _9="jazz-ui-Dialog-spinner";
var _a="jazz-ui-Dialog-progressText";
var _b="is-visible";
var _c="modal";
var _d="modeless";
var _e=jazz.ui.ModalUnderlay;
var _f={FULL:_5,SIDES:_6,NONE:_7};
dojo.declare("jazz.ui.Dialog",[dijit._WidgetBase,dijit._Templated],{templatePath:dojo.moduleUrl("jazz.ui","templates/Dialog.html"),contentNode:null,contentPadding:_f.FULL,footerNode:null,focusNode:null,width:"40%",height:"",heading:"",label:"",modal:true,moveable:true,closeOnEsc:true,showCloseButton:true,closeOnBlur:false,destroyContents:false,onFinishClose:null,onClose:null,onCancel:null,onOpen:null,close:function(_10){
if(this._isClosed){
return;
}
if(_10){
dojo.stopEvent(_10);
}
if(dojo.isFunction(this.onClose)&&this.onClose(this)===false){
return false;
}
this._handlers.push(this.connect(this.domNode,"transitionend",this._onTransitionEnd));
this._handlers.push(this.connect(this.domNode,"transitioncancel",this._onTransitionEnd));
_e.notifyCloseDialogStart(this);
this._isClosed=true;
},setFooterNode:function(_11){
if(_11){
while(this.footerContainerNode.firstChild){
this.footerContainerNode.removeChild(this.footerContainerNode.firstChild);
}
dojo.place(_11,this.footerContainerNode,"first");
}
},beginProgress:function(){
if(!this._progressNode){
this._progressNode=dojo.create("div",{"class":_8});
dojo.place(this._progressNode,this.containerNode,"after");
this._spinnerNode=dojo.create("div",{"class":_9},this._progressNode);
this._progressText=dojo.create("div",{"class":_a},this._progressNode);
}
this._progressNode.classList.add(_b);
this._progressNode.style.zIndex=this.getZIndex()+_e.ZINDEX_INTERVAL-1;
var _12=dojo.query("> button.j-button-primary",this.footerNode);
if(_12&&_12[0]){
_12[0].disabled=true;
}
},updateProgressText:function(_13){
if(!this._progressNode){
return;
}
if(this._progressText){
this._progressText.textContent=_13;
}
},endProgress:function(){
if(!this._progressNode){
return;
}
this._progressNode.classList.remove(_b);
var _14=dojo.query("> button.j-button-primary",this.footerNode);
if(_14&&_14[0]){
_14[0].disabled=false;
}
dojo.destroy(this._progressNode);
this._progressNode=null;
},setHeight:function(_15){
if(_15){
this.containerNode.style.height=_15;
this.height=_15;
}else{
if(this.height){
this.containerNode.style.height=this.height;
}else{
this.containerNode.style.height="";
}
}
},setWidth:function(_16){
if(_16){
this.domNode.style.width=_16;
this.width=_16;
}else{
if(this.width){
this.domNode.style.width=this.width;
}else{
this.domNode.style.width="";
}
}
},getZIndex:function(){
try{
return parseInt(this.domNode.style.zIndex);
}
catch(e){
return 0;
}
},setInitialOffset:function(_17){
var de=window.document.documentElement,_18=window.innerHeight||de.clientHeight,_19=window.innerWidth||de.clientWidth,_1a=dojo.marginBox(this.domNode);
_1a.l+=_17;
_1a.t+=_17;
if((_1a.l+_1a.w>_19)||(_1a.t+_1a.h>_18)){
return false;
}
this._customPosition={l:_17,t:_17};
this.domNode.style.top=_17+"px";
this.domNode.style.left=_17+"px";
return true;
},constructor:function(_1b){
this._handlers=[];
if(!_1b.heading&&_1b.primaryTitle){
this._deprecated("jazz.ui.Dialog.primaryTitle","Use jazz.ui.Dialog.heading instead","7.0.1");
_1b.heading=_1b.primaryTitle;
}
if(!_1b.label&&_1b.secondaryTitle){
this._deprecated("jazz.ui.Dialog.secondaryTitle","Use jazz.ui.Dialog.label instead","7.0.1");
_1b.label=_1b.secondaryTitle;
}
if(!_1b.showCloseButton&&typeof _1b.closable!=="undefined"){
this._deprecated("jazz.ui.Dialog.closable","Use jazz.ui.Dialog.showCloseButton instead","7.0.1");
_1b.showCloseButton=_1b.closable;
}
},postCreate:function(){
this._lastFocus=dijit.getFocus(this);
if(!this.contentNode){
this.contentNode=dojo.create("div");
}
if(this.showCloseButton){
this._handlers.push(this.connect(this.closeButton,"onclick",this._onCloseButton));
}else{
this.closeButton.style.visibility="hidden";
}
if(this.closeOnEsc){
this._handlers.push(this.connect(this.domNode,"onkeydown",this._checkForEsc));
}
this._handlers.push(this.connect(this.domNode,"onkeydown",this._blockEnterKey));
this._onOpen=dojo.hitch(this,this._onOpen,this.onOpen);
this.onOpen=null;
this.containerNode.appendChild(this.contentNode);
if(this.footerNode){
this.setFooterNode(this.footerNode);
}
this.setWidth();
this.setHeight();
if(this.moveable){
this._handlers.push(this.connect(this.headerContainerNode,"ondragstart",this.dragStopEvent));
this._handlers.push(this.connect(this.headerContainerNode,"onselectstart",this.dragStopEvent));
this._handlers.push(this.connect(document.body,"ondragstart",this.dragStopEvent));
this._handlers.push(this.connect(document.body,"onselectstart",this.dragStopEvent));
this._clickEvent=this.connect(this.headerContainerNode,"onmousedown",this._onMouseDown);
this._isDragging=false;
this.headerContainerNode.style.cursor="move";
}
if(this.modal){
var _1c=function(e){
if(dijit._curFocus==dijit.getLastInTabbingOrder(this.domNode)){
if(dijit._getTabNavigable(this.headerContainerNode).first==undefined){
dijit._getTabNavigable(this.containerNode).first.focus();
}else{
dijit._getTabNavigable(this.headerContainerNode).first.focus();
}
}
if(dijit._curFocus==dijit.getFirstInTabbingOrder(this.domNode)){
dijit._getTabNavigable(this.containerNode).last.focus();
}
};
this._handlers.push(this.connect(dojo.create("span",{tabIndex:0},this.domNode),"onfocus",_1c));
this._handlers.push(this.connect(dojo.create("span",{tabIndex:0},this.domNode,"first"),"onfocus",_1c));
dojo.addClass(this.domNode,_c);
}else{
dojo.addClass(this.domNode,_d);
}
this._registerUpdateEvents();
_e.notifyOpenDialog(this);
this.startup();
this._onOpen();
},_finishClose:function(){
if(this._closed){
return;
}
this._closed=true;
if(this._lastFocus&&this._lastFocus.node&&dojo.isDescendant(this._lastFocus.node,document.body)){
dijit.focus(this._lastFocus);
}
var _1d=dijit.byId(this.contentNode.id);
if(_1d){
if(this.destroyContents){
if(dojo.isFunction(_1d.destroyRecursive)){
_1d.destroyRecursive();
}
}else{
var dom=_1d.domNode;
dom&&dom.parentNode&&dom.parentNode.removeChild(dom);
while(this.footerContainerNode.firstChild){
this.footerContainerNode.removeChild(this.footerContainerNode.firstChild);
}
}
}
this.destroy();
_e.notifyCloseDialogFinish(this);
if(dojo.isFunction(this.onFinishClose)){
this.onFinishClose();
}
},_onOpen:function(_1e){
_e.setNodeVisibility(this.domNode,true);
var _1f=this.focusNode||this.closeButton;
if(_1f.nodeName=="INPUT"&&dijit.selectInputText){
dijit.selectInputText(_1f);
}else{
dijit.focus(_1f);
}
if(_1e&&typeof _1e=="function"){
_1e();
}
},_setHeadingAttr:function(_20){
if(!this._heading){
this._heading=dojo.create("div",{"class":_2,id:this.dialogNode.id+"_heading"});
dojo.place(this._heading,this.closeButton,"before");
}
this._heading.textContent=_20;
},_setLabelAttr:function(_21){
if(!this._label){
this._label=dojo.create("div",{"class":_3});
dojo.place(this._label,this.headerContainerNode,"first");
}
this._label.textContent=_21;
},_setContentPaddingAttr:function(_22){
if(_22!==_f.FULL&&_22!==_f.SIDES&&_22!==_f.NONE){
if(_22==="none"){
_22=_f.NONE;
}else{
if(_22==="sides"){
_22=_f.SIDES;
}else{
_22=_f.FULL;
}
}
}
for(padding in _f){
this.containerNode.classList.remove(_f[padding]);
}
this.containerNode.classList.add(_22);
},_blockEnterKey:function(_23){
if(dojo.isIE&&_23.keyCode==13&&dojo.isDescendant(_23.target,this.domNode)){
_23.cancelBubble=true;
}
},_onCloseButton:function(_24){
if(dojo.isFunction(this.onCancel)&&this.onCancel(this)===false){
return false;
}
this.close();
},_closeOnBlur:function(_25){
if(dojo.isFunction(this.onCancel)&&this.onCancel(this)===false){
return false;
}
this.close();
},_checkForEsc:function(_26){
if(_26.keyCode==dojo.keys.ESCAPE){
dojo.stopEvent(_26);
if(dojo.isFunction(this.onCancel)&&this.onCancel(this)===false){
return false;
}
this.close();
}
},_onTransitionEnd:function(_27){
if(_27.propertyName==="visibility"&&_27.target===this.domNode){
this._finishClose();
}
},dragStopEvent:function(_28){
if(_28&&(this._isDragging||this._initialMouseCoords)){
dojo.stopEvent(_28);
}
},_onMouseDown:function(_29){
this.disconnect(this._clickEvent);
this._unregisterUpdateEvents();
this._clickEvent=this.connect(document.body,"onmouseup",this._onMouseUp);
var _2a=dojo.position(this.domNode,true);
if(!this._customPosition){
this._customPosition={l:0,t:0};
}
this._initialMouseCoords={x:_29.pageX,y:_29.pageY,customPositionX:this._customPosition.l,customPositionY:this._customPosition.t};
dojo.addClass(document.body,_4);
this._moveEvent=this.connect(dojo.doc,"onmousemove",this._onMouseMoveInitial);
this.dragStopEvent(_29);
},_onMouseMoveInitial:function(e){
var _2b=Math.abs(e.pageX-this._initialMouseCoords.x);
var _2c=Math.abs(e.pageY-this._initialMouseCoords.y);
if(!this._isDragging&&(_2b>=3||_2c>=3)){
this._isDragging=true;
this.disconnect(this._moveEvent);
this._moveEvent=this.connect(dojo.doc,"onmousemove",this._onMouseMove);
this._onMouseMove(e);
}else{
this.dragStopEvent(e);
}
},_onMouseMove:function(e){
this.dragStopEvent(e);
var x=e.pageX-this._initialMouseCoords.x+this._initialMouseCoords.customPositionX;
var y=e.pageY-this._initialMouseCoords.y+this._initialMouseCoords.customPositionY;
this._customPosition={l:x,t:y};
this.domNode.style.top=y+"px";
this.domNode.style.left=x+"px";
},_onMouseUp:function(_2d){
this._isDragging=false;
dojo.removeClass(document.body,_4);
this.disconnect(this._clickEvent);
this.disconnect(this._moveEvent);
this._clickEvent=this.connect(this.headerContainerNode,"onmousedown",this._onMouseDown);
this._registerUpdateEvents();
this._initialMouseCoords=null;
},_registerUpdateEvents:function(){
if(!this._onResizeEvent){
this._onResizeEvent=jazz.util.ResizeNotifier.register({context:this,force:true,callback:this._handleResize});
}
},_unregisterUpdateEvents:function(){
if(this._onResizeEvent){
jazz.util.ResizeNotifier.unregister(this._onResizeEvent);
delete this._onResizeEvent;
}
},_handleResize:function(_2e){
if(this._isClosed){
return;
}
if(!this._customPosition){
this._customPosition={l:0,t:0};
}
var de=window.document.documentElement,_2f=window.innerHeight||de.clientHeight,_30=window.innerWidth||de.clientWidth,_31=dojo.marginBox(this.domNode);
if(_31.l+_31.w>_30||_31.l<0){
if(Math.abs(this._customPosition.l)>100){
this._customPosition.l=this._customPosition.l/2;
}else{
this._customPosition.l=0;
}
this.domNode.style.left=this._customPosition.l+"px";
}
if(_31.t+_31.h>_2f||_31.t<0){
if(Math.abs(this._customPosition.t)>100){
this._customPosition.t=this._customPosition.t/2;
}else{
this._customPosition.t=0;
}
this.domNode.style.top=this._customPosition.t+"px";
}
},destroy:function(){
dojo.forEach(this._handlers,dojo.disconnect);
this._handlers=[];
this.inherited(arguments);
this._unregisterUpdateEvents();
},skipNextAnimateUpdatePosition:function(){
this._deprecated("jazz.ui.Dialog.skipNextAnimateUpdatePosition()","Animations are handled by CSS now","7.0.1");
},updatePosition:function(){
this._deprecated("jazz.ui.Dialog.updatePosition()","Dialogs are always centered now, no need to call updatePosition","7.0.1");
},_cancelBubble:function(){
this._deprecated("jazz.ui.Dialog._cancelBubble()","no more toolbar in header so don't need this function","7.0.1");
},_deprecated:function(_32,_33,_34){
var _35=this;
setTimeout(function(){
dojo.deprecated(_32,"    Dialog id:"+_35.contentNode.id+".   "+_33,_34);
},500);
}});
jazz.ui.Dialog.DialogContentPadding=_f;
})();

dojo.provide("jazz.ui.nls.ListBoxMessages")._built=true;
dojo.provide("jazz.ui.nls.ListBoxMessages.en_us");
jazz.ui.nls.ListBoxMessages.en_us={"msgIcon":"[icon]","msgLoading":"Loading..."};

;dojo.cache("jazz.ui", "templates/ListBox.html", "<div role=\"listbox\" class=\"jazz-ui-ListBox\" dojoattachevent=\"onselectstart: _cancelEvent, ondragstart: _cancelEvent\">	<div class=\"message-area\" dojoAttachPoint=\"_messageArea\">${msgLoading}</div>	<div class=\"content-area\" dojoAttachPoint=\"_contentArea\" dojoattachevent=\"onkeydown: _handleEventOnKeyDown, onmousedown: _handleEventOnMouseDown, onclick: _cancelEvent\"></div></div>");

;dojo.provide("jazz.ui.ListBox");










dojo.requireLocalization("jazz.ui","ListBoxMessages");
(function(){
var _1;
var _2=0;
var _3=1;
var _4=2;
dojo.declare("jazz.ui.ListBox",[dijit._Widget,dijit._Templated],{width:"",height:"250px",margin:"5px",sortField:"label",sortOrder:0,ondblClick:null,onClick:null,onChange:function(_5){
},allowMultipleSelections:true,iconMap:[],templatePath:dojo.moduleUrl("jazz.ui","templates/ListBox.html"),widgetsInTemplate:true,constructor:function(_6){
if(!_1){
_1=dojo.i18n.getLocalization("jazz.ui","ListBoxMessages");
}
this.messages=_1;
this.msgLoading=this.messages.msgLoading;
},postCreate:function(){
this.inherited(arguments);
this._domMap={};
this._dataMap={};
this._dataArray=[];
this._selected={};
this._entryCount=0;
this._loadingFlag=false;
this._lastSelectedEntryID=null;
this._focusNode=null;
if(this.height){
this.domNode.style.height=this.height;
}
if(this.width){
this.domNode.style.width=this.width;
}
if(this.margin){
this.domNode.style.margin=this.margin;
}
if(this.ondblClick){
this.connect(this._contentArea,"ondblclick",this._handleEventDoubleClickEntry);
}
if(this.onClick){
dojo.deprecated(this.id,"Use 'onChange' instead of 'onClick'.");
}
if(this.allowMultipleSelections){
dijit.setWaiState(this.domNode,"multiselectable","true");
}
},_setFocus:function(_7,_8){
if(!this._nodeExists(_7)){
return;
}
if(_8){
dijit.focus(_7);
}
if(this._isFocused(_7)){
return;
}
if(this._nodeExists(this._focusNode)){
dojo.attr(this._focusNode,"tabindex",-1);
}
dojo.removeAttr(_7,"tabindex");
this._focusNode=_7;
},_nodeExists:function(_9){
if(!_9){
return false;
}
var _a=dojo.attr(_9,"entryid");
if(this._domMap.hasOwnProperty(_a)){
return true;
}
return false;
},_isFocused:function(_b){
if(this._focusNode===_b){
return true;
}
return false;
},_getFirstEntryNode:function(){
if(this._entryCount===0){
return null;
}
var _c=this._dataArray[0];
return this._getEntryNode(_c);
},_getEntryNode:function(_d){
if(!_d){
return null;
}
var id=_d.id;
if(!this._domMap.hasOwnProperty(id)){
return null;
}
return this._domMap[id];
},addEntry:function(_e){
if(!this.domNode){
return;
}
var id=_e.id;
if(this._isObjectDefined(this._dataMap[id])){
return;
}
var _f=document.createElement("a");
_f.href="#";
dojo.style(_f,"display","block");
_f.setAttribute("entryid",id);
dojo.attr(_f,"tabindex",-1);
dojo.addClass(_f,"entry");
dijit.setWaiRole(_f,"option");
dijit.setWaiState(_f,"label",_e.label);
dijit.setWaiState(_f,"selected","false");
this._addIcon(_f,this.iconMap[_e.type]);
this._addLabel(_f,_e.label);
this._dataMap[id]=_e;
this._domMap[id]=_f;
this._addNode(this._contentArea,_f,_e);
this._selected[id]=false;
this._entryCount++;
if((this._lastSelectedEntryID===null)&&(id===this._dataArray[0].id)){
this._setFocus(_f,false);
}
},sort:function(_10){
this.sortOrder=_4;
this._dataArray.sort(_10);
this.domNode.removeChild(this._contentArea);
for(var i=0;i<this._dataArray.length;i++){
this._contentArea.appendChild(this._domMap[this._dataArray[i].id]);
}
this.domNode.appendChild(this._contentArea);
},_addIcon:function(_11,_12){
if(!_12){
return;
}
var _13=document.createElement("span");
dojo.addClass(_13,"entry-icon");
var _14=document.createElement("img");
dojo.addClass(_14,"entry-image");
_14.src=_12;
_14.alt=this.messages.msgIcon;
_13.appendChild(_14);
_11.appendChild(_13);
},_addLabel:function(_15,_16){
var _17=document.createElement("span");
dojo.addClass(_17,"entry-label");
_17.innerHTML=_16;
this.applyTextDir(_17,_16);
_15.appendChild(_17);
},_addNode:function(_18,_19,_1a){
if(_18.childNodes.length===0){
_18.appendChild(_19);
this._dataArray.push(_1a);
}else{
if(this.sortOrder===_2){
this._addNodeInOrder(_18,_19,_1a,this._ascendingCompareFunction);
}else{
if(this.sortOrder===_3){
this._addNodeInOrder(_18,_19,_1a,this._descendingCompareFunction);
}else{
_18.appendChild(_19);
this._dataArray.push(_1a);
}
}
}
},_addNodeInOrder:function(_1b,_1c,_1d,_1e){
var _1f=_1b.childNodes;
var low=0;
var _20=_1f.length;
while(low<_20){
var mid=Math.floor((low+_20)/2);
var _21=_1f[mid];
var _22=this._dataMap[dojo.attr(_21,"entryid")];
if(_1e(this,_22,_1d)){
low=mid+1;
}else{
_20=mid;
}
}
if(this._isObjectDefined(_1f[low])){
_1b.insertBefore(_1c,_1f[low]);
this._dataArray.splice(low,0,_1d);
}else{
_1b.appendChild(_1c);
this._dataArray.push(_1d);
}
},_ascendingCompareFunction:function(_23,_24,_25){
if(_24[_23.sortField]<_25[_23.sortField]){
return true;
}
return false;
},_descendingCompareFunction:function(_26,_27,_28){
if(_27[_26.sortField]>_28[_26.sortField]){
return true;
}
return false;
},_selectEntry:function(_29,_2a,_2b){
var _2c=true;
if(this._isSelected(_29)){
_2c=false;
}
if(!this.allowMultipleSelections||!_2a){
this._removeAllSelections();
}
this._setSelected(_29,_2c);
if(this.allowMultipleSelections&&_2b){
this._doMultiSelectShiftKey(_29.id);
}else{
this._lastSelectedEntryID=_29.id;
}
this._fireSelectionEvent();
},_doMultiSelectShiftKey:function(_2d){
var _2e=this._contentArea.childNodes;
if(_2e.length<=1){
return;
}
if(this.getEntry(this._lastSelectedEntryID)===null){
this._lastSelectedEntryID=_2e[0].entryid;
}
if(this._lastSelectedEntryID===_2d){
this._setSelected(this.getEntry(_2d),true);
return;
}
var _2f=false;
var _30=false;
var _31=false;
for(var _32=0;_32<_2e.length;_32++){
var _33=dojo.attr(_2e[_32],"entryid");
if(_33===this._lastSelectedEntryID){
_2f=true;
this._setSelected(this.getEntry(_33),true);
_31=true;
if(_30){
break;
}
}else{
if(_33===_2d){
_30=true;
this._setSelected(this.getEntry(_33),true);
_31=true;
if(_2f){
break;
}
}else{
if(_31){
var _34=this._domMap[_33];
if(_34.style.display=="block"){
this._setSelected(this.getEntry(_33),true);
}
}
}
}
}
},_handleEventDoubleClickEntry:function(_35){
if(!_35){
return false;
}
dojo.stopEvent(_35);
var _36=this._getOriginalTargetEntryNode(_35);
if(!_36){
return false;
}
var _37=this._getEntry(_36);
if(!_37){
return false;
}
this.ondblClick(_37);
return true;
},_handleEventOnMouseDown:function(_38){
if(!_38){
return false;
}
dojo.stopEvent(_38);
var _39=this._getOriginalTargetEntryNode(_38);
if(!_39){
return false;
}
var _3a=this._getEntry(_39);
if(!_3a){
return false;
}
this._selectEntry(_3a,dojo.isMac?_38.metaKey:_38.ctrlKey,_38.shiftKey);
this._setFocus(_39,true);
if(this.onClick){
this.onClick(_3a);
}
return true;
},_handleEventOnKeyDown:function(_3b){
if(!_3b){
return false;
}
var _3c=_3b.keyCode;
var _3d=dojo.keys;
var _3e;
var _3f=this._getOriginalTargetEntryNode(_3b);
if(!_3f){
return false;
}
if(_3c===_3d.UP_ARROW){
dojo.stopEvent(_3b);
_3f=_3f.previousSibling;
if(!_3f){
return true;
}
_3e=this._getEntry(_3f);
if(!_3e){
return false;
}
if(!(dojo.isMac?_3b.metaKey:_3b.ctrlKey)){
this._selectEntry(_3e,false,_3b.shiftKey);
}
this._setFocus(_3f,true);
}else{
if(_3c===_3d.DOWN_ARROW){
dojo.stopEvent(_3b);
_3f=_3f.nextSibling;
if(!_3f){
return true;
}
_3e=this._getEntry(_3f);
if(!_3e){
return false;
}
if(!(dojo.isMac?_3b.metaKey:_3b.ctrlKey)){
this._selectEntry(_3e,false,_3b.shiftKey);
}
this._setFocus(_3f,true);
}else{
if(_3c===_3d.SPACE){
dojo.stopEvent(_3b);
_3e=this._getEntry(_3f);
if(!_3e){
return false;
}
this._selectEntry(_3e,_3b.ctrlKey,_3b.shiftKey);
}
}
}
return true;
},_getOriginalTargetEntryNode:function(_40){
var _41=_40.target;
while(_41){
if(_41===this._contentArea){
return null;
}
if(this._isEntryNode(_41)){
return _41;
}
_41=_41.parentNode;
}
return null;
},_isEntryNode:function(_42){
return dojo.hasClass(_42,"entry");
},_getCurrentTargetEntryNode:function(_43){
var _44=_43.currentTarget;
if(!_44){
return null;
}
return _44;
},_getEntry:function(_45){
var id=dojo.attr(_45,"entryid");
var _46=this._dataMap[id];
return _46;
},_cancelEvent:function(_47){
if(_47){
dojo.stopEvent(_47);
}
return false;
},addEntries:function(_48){
for(var _49=0;_49<_48.length;_49++){
this.addEntry(_48[_49]);
}
},removeEntry:function(_4a){
if(!this.domNode){
return;
}
var id=_4a.id;
if(this._isObjectDefined(this._dataMap[id])===false){
return;
}
for(var i=0;i<this._dataArray.length;i++){
if(this._dataArray[i].id===id){
this._dataArray.splice(i,1);
break;
}
}
var _4b=this._domMap[id];
this._contentArea.removeChild(_4b);
this._dataMap[id]=undefined;
delete this._dataMap[id];
this._domMap[id]=undefined;
delete this._domMap[id];
this._selected[id]=undefined;
delete this._selected[id];
this._entryCount--;
if(this._lastSelectedEntryID===id){
if(this.allowMultipleSelections){
this._lastSelectedEntryID=this._getNextSelectedEntryID();
}else{
this._lastSelectedEntryID=null;
}
}
if(this._isFocused(_4b)){
var _4c=this._getFirstEntryNode();
this._setFocus(_4c,false);
}
},removeEntries:function(_4d){
for(var _4e=0;_4e<_4d.length;_4e++){
this.removeEntry(_4d[_4e]);
}
},removeAllEntries:function(){
for(var id in this._dataMap){
this.removeEntry(this._dataMap[id]);
}
},showEntry:function(_4f,_50){
if(this._isObjectDefined(this.domNode)===false){
return;
}
var id=_4f.id;
if(this._isObjectDefined(this._dataMap[id])===false){
return;
}
var _51=this._domMap[id];
this._updateVisibility(_51,_50);
},getEntryCount:function(){
return this._entryCount;
},getEntry:function(id){
if(this._dataMap.hasOwnProperty(id)&&this._dataMap[id]){
return this._dataMap[id];
}
return null;
},getEntriesByIndices:function(_52){
var _53=[];
var _54=this._dataArray.length-1;
for(var i=0;i<_52.length;i++){
var _55=_52[i];
if(isNaN(_55)||(_55<0)||(_55>_54)){
console.error("[ERROR]: "+this.id+"#getEntriesByIndices: "+"Index out of bounds: "+_55);
return [];
}
var _56=this._dataArray[_55];
_53.push(_56);
}
return _53;
},getAllEntries:function(){
return this._dataArray.slice(0);
},getSelection:function(){
var _57=[];
for(var _58=0;_58<this._dataArray.length;_58++){
var _59=this._dataArray[_58];
if(_59&&this._selected.hasOwnProperty(_59.id)&&this._selected[_59.id]){
_57.push(_59);
}
}
return _57;
},getSelectionIndices:function(){
var _5a=[];
for(var _5b=0;_5b<this._dataArray.length;_5b++){
var _5c=this._dataArray[_5b];
if(_5c&&this._selected.hasOwnProperty(_5c.id)&&this._selected[_5c.id]){
_5a.push(_5b);
}
}
return _5a;
},setSelection:function(_5d,_5e){
if(!this.allowMultipleSelections&&(_5d.length>1)){
return;
}
this._removeAllSelections();
for(var _5f=0;_5f<_5d.length;_5f++){
this._setSelected(_5d[_5f],_5e);
}
this._lastSelectedEntryID=this._getNextSelectedEntryID();
},_fireSelectionEvent:function(){
var _60=new jazz.ui.ListBox.SelectionEvent({widget:this});
this.onChange(_60);
},_setSelected:function(_61,_62){
var id=_61.id;
if(this._isObjectDefined(this._dataMap[id])===false){
return;
}
if(this._selected[id]==_62){
return;
}
this._selected[id]=_62;
var _63=this._domMap[id];
if(_62){
dojo.addClass(_63,"selected");
}else{
dojo.removeClass(_63,"selected");
}
dijit.setWaiState(_63,"selected",String(_62));
},_getNextSelectedEntryID:function(){
for(var id in this._selected){
if(!this._selected.hasOwnProperty(id)){
continue;
}
if(this._selected[id]){
return id;
}
}
return null;
},_isSelected:function(_64){
if(this._selected[_64.id]){
return true;
}
return false;
},removeAllSelections:function(){
this._removeAllSelections();
this._lastSelectedEntryID=null;
},_removeAllSelections:function(){
for(var id in this._selected){
if(!this._selected.hasOwnProperty(id)){
continue;
}
if(this._selected[id]){
var _65=this._dataMap[id];
this._setSelected(_65,false);
}
}
},showLoading:function(_66){
if(this._isObjectDefined(this.domNode)===false){
return;
}else{
if(this._loadingFlag===_66){
return;
}else{
if(_66){
this._showMessageArea();
}else{
this._showContentArea();
}
}
}
this._loadingFlag=_66;
},_showMessageArea:function(){
this._updateVisibility(this._contentArea,false);
this._updateVisibility(this._messageArea,true);
},_showContentArea:function(){
this._updateVisibility(this._messageArea,false);
this._updateVisibility(this._contentArea,true);
},_updateVisibility:function(_67,_68){
if(_68){
if(_67.style.display!="block"){
_67.style.display="block";
}
}else{
if(_67.style.display!="none"){
_67.style.display="none";
}
}
},_isObjectDefined:function(_69){
if(typeof (_69)!="object"){
return false;
}else{
if(_69===null){
return false;
}
}
return true;
},destroy:function(){
this.inherited(arguments);
}});
dojo.declare("jazz.ui.ListBox.SelectionEvent",null,{widget:null,constructor:function(_6a){
this.widget=_6a.widget;
}});
})();

dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.nls.StatisticsMessages")._built=true;
dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.nls.StatisticsMessages.en_us");
com.ibm.team.workitem.viewlets.web.ui.internal.nls.StatisticsMessages.en_us={"msgNoWorkItemsFoundGrouping":"No work items found using this query contain values for the grouping parameter: \'${0}\'.","msgUnknownPresentationVal":"CRRDV5020E The work item query results cannot be displayed.","msgIcon":"icon","msgWorkItemDTOProblem_useraction":"To find more details about this issue, open the JavaScript console of your browser by pressing F12, refresh the widget, and check the JavaScript console for any resulting errors.","msgWorkItemAttributesFailure":"CRRDV5021E The parameter preference values could not be loaded in the widget settings area because the work item grouping parameters could not be retrieved from the server.","msgOther":"Other","msgNoValuesFound":"No values found","msgWorkItemQueryPermissionDenied":"CRRDV5025E The work item query cannot be shown because permission to read the work item query is missing.","msgNoFilterValueForLabel":"CRRDV5019E The work items in the web client cannot be shown because data is missing.","msgWorkItemDTOProblem_explanation":"The widget could not parse the response of the server, which contains the work item query, because the format of the response is invalid.","msgError":"[Error] ${0}","msgWorkItemDTOProblem":"CRRDV5023E The work item query cannot be read.","msgButtonOK":"OK","msgErrorGetValues_useraction":"To find more details about this issue, open the JavaScript console of your browser by pressing F12, reopen the Color Palette dialog, and check the JavaScript console for any resulting errors.","msgLoading":"Loading...","msgLabel":"Group Label","msgVariableIsZeroLength":"Variable is zero length: ${0}","msgWorkItemDTOParseFailed_useraction":"To find more details about this issue, open the JavaScript console of your browser by pressing F12, refresh the widget, and check the JavaScript console for any resulting errors.","msgDrillChartParamsUndef_useraction":"Refresh the widget and try again.","msgUnknownPresentationVal_useraction":"Refresh the widget. If you have widget editing permissions, open the widget settings area and specify a different presentation value. Otherwise, contact the contributor or team that owns the widget.","msgWorkItemDTOParseFailed_explanation":"The widget could not parse the response of the server, which contains the work item query results, because the format of the response is invalid.","msgMissingProjectArea_explanation":"The project area item ID is undefined.","msgSelectQuery":"No parameters available","msgNoFilterValueForLabel_useraction":"Ask an administrator for the project area to review the process specification to verify that the work item attribute has an associated internal filter value.","msgNoWorkItemQueryDef":"No work item query defined.","msgUndefined":"Undefined","msgChartParamGenFailure_explanation":"The widget could not generate the chart parameters that render the work item query results for the selected presentation.","msgWorkItemQueryNotExistAction":"The work item query does not exist. Please \x3c0\x3eselect a new query\x3c/0\x3e.","msgMetagroupDesc2":"Use normal text or regular expressions to define the values.","msgDrillChartParamsUndef_explanation":"The computed chart parameters that are based on the widget preferences are undefined.","msgMetagroupDesc":"Use custom groups to combine results by related values. Grouping precedence is determined by the order that the groups are added.","msgButtonCancel":"Cancel","msgSelectQueryFirst":"Please select a work item query first.","msgVariableIsNotANumber":"Variable is not a number: ${0}","msgWorkItemQueryPermissionDenied_explanation":"The server cannot retrieve the work item query due to insufficient privileges (HTTP Status Code: 403).","msgErrorGetValues_explanation":"The server encountered an unexpected error that prevented it from retrieving the work item attribute values.","msgMetagroups":"Custom Groups","msgWorkItemAttributesFailure_useraction":"To find more details about this issue, open the JavaScript console of your browser by pressing F12, try to open the widget settings area again, and check the JavaScript console for any resulting errors.","msgNoMetagroupsDefined":"No group filters defined","msgNoWorkItemsFound":"No work items found using this query.","msgWorkItemQueryFailure":"CRRDV5024E The work item query could not be retrieved from the server.","msgVariableIsNull":"Variable is null: ${0}","msgPreferenceFailure":"Preference loading failure","msgDrillChartParamsUndef":"CRRDV5015E The work items in the web client cannot be shown because data is missing.","msgWorkItemQueryFailure_useraction":"To find more details about this issue, open the JavaScript console of your browser by pressing F12, refresh the widget, and check the JavaScript console for any resulting errors.","msgNoFilterValueForLabel_explanation":"A work item internal filter value that corresponds to the work item attribute label: \'${0}\' was not found.","msgWorkItemAttributesFailure_explanation":"The server encountered an unexpected error that prevented it from retrieving the work item grouping parameters to populate the parameter list in the widget settings area.","msgVariableIsNotAnArray":"Variable is not an array: ${0}","msgMissingProjectArea_useraction":"Refresh the widget. If you have widget editing permissions, open the widget settings area and select a different work item query. Otherwise, contact the contributor or team that owns the widget.","msgChartParamGenFailure":"CRRDV5014E The work item query results cannot be displayed.","msgPattern":"Values Included","msgMissingParameter":"No grouping parameter defined.","msgAdd":"Add","msgSelectParameterName":"Select Parameter Name","msgWorkItemQueryPermissionDenied_useraction":"Contact an administrator for the project area that contains the work item query, and request read access to the query.","msgColourChooserTitle":"Color Palette","msgWorkItemDTOParseFailed":"CRRDV5022E The work item query results cannot be read.","msgNoWorkItemQueryDefAction":"No work item query defined. Please \x3c0\x3eselect a query\x3c/0\x3e.","msgPropertyDoesNotExist":"Property does not exist: ${0}.${1}","msgWorkItemQueryFailure_explanation":"The server encountered an unexpected error that prevented it from retrieving the work item query.","msgNotValidObjectType":"Variable is not a valid object type: ${0}","msgNoColoursChosen":"No color palette defined","msgUnknownPresentationVal_explanation":"The widget encountered an unrecognized presentation: \'${0}\'.","msgRemove":"Remove","msgCount":"Count","msgErrorGetValues":"CRRDV5016E The parameter values cannot be displayed because the work item attribute values could not be retrieved from the server.","msgChartParamGenFailure_useraction":"To find more details about this issue, open the JavaScript console of your browser by pressing F12, refresh the widget, and check the JavaScript console for any resulting errors.","msgVariableIsNotAString":"Variable is not a string: ${0}","msgWorkItemQueryNotExist":"The work item query does not exist.","msgMissingProjectArea":"CRRDV5018E The widget could not be refreshed because data is missing."};

;dojo.cache("com.ibm.team.workitem.viewlets.web", "ui/internal/templates/utils/ParameterNameChooserDialog.html", "<div class=\"com-ibm-team-workitem-viewlets-web-ui-internal-utils-ParameterNameChooserDialog\">			<!-- Content Site -->		<div dojoAttachPoint=\"_contentSite\"></div>			<!-- Button Site -->    <div class=\"j-buttonGroup-bleed-two\" dojoAttachPoint=\"ftFooterNode\">		<button class=\"j-button-secondary\" dojoAttachPoint=\"_cancelButton\">${messages.msgButtonCancel}</button>				<button class=\"j-button-primary\" dojoAttachPoint=\"_okButton\">${messages.msgButtonOK}</button>	</div></div>");

;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.ParameterNameChooserDialog");










dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
var Dialog=jazz.ui.Dialog;
var ListBox=jazz.ui.ListBox;
(function(){
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.ParameterNameChooserDialog",[dijit._Widget,dijit._Templated],{parameterNames:[],parameterValues:[],queryItemID:null,parameterID:null,onOK:null,onCancel:null,iconProvider:null,_static:function(){
},templatePath:dojo.moduleUrl("com.ibm.team.workitem.viewlets.web","ui/internal/templates/utils/ParameterNameChooserDialog.html"),constructor:function(_1){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
},postCreate:function(){
this.inherited(arguments);
this._initializeStaticConstants();
this._dialog=null;
this._listBox=null;
this._selectedParameterName=null;
this._selectedParameterValue=null;
this._doIt=false;
this._createDialogContents();
this._connectDialogHandlers();
},destroy:function(){
this._disconnectDialogHandlers();
if(this._listBox){
this._listBox.destroy();
delete this._listBox;
}
if(this._dialog){
this._dialog.destroy();
delete this._dialog;
}
this.inherited(arguments);
},show:function(){
this._dialog=new Dialog({contentNode:this.domNode,primaryTitle:this.messages.msgSelectParameterName,width:"330px",footerNode:this.ftFooterNode,onClose:dojo.hitch(this,this._handleEventDialogClosed)});
},hide:function(){
if(this._dialog){
this._dialog.close();
}
},_handleEventDialogClosed:function(){
if(this._doIt&&this.onOK){
this.onOK(this);
}else{
if(this.onCancel){
this.onCancel(this);
}
}
var _2=this;
setTimeout(function(){
_2.destroy();
},1000);
return true;
},getSelection:function(){
var _3={name:this._selectedParameterName,value:this._selectedParameterValue};
return _3;
},_createDialogContents:function(){
this._createUIListBox();
},_createUIListBox:function(){
this._listBox=new ListBox({allowMultipleSelections:false,height:this._getListBoxHeight(),width:"300px",margin:"10px",sortField:"type",iconMap:this._getIconMap(),ondblClick:dojo.hitch(this,this._handleEventEntryDoubleClicked)});
for(var _4=0;_4<this.parameterNames.length;_4++){
var _5=this.parameterNames[_4];
var _6=this.parameterValues[_4];
var _7="<span title=\""+_6+"\">"+_5+"</span>"+"<span style=\"color:#AAAAAA\"> ("+_6+")</span>";
var _8={label:_7,value:_6,id:this._getListBoxID(_5,_6),type:_5};
this._listBox.addEntry(_8);
}
this._contentSite.appendChild(this._listBox.domNode);
},_getListBoxID:function(_9,_a){
return _9+this._static._SEPARATOR+_a;
},_getIconMap:function(){
var _b={};
if(!this.iconProvider){
return _b;
}
for(var _c=0;_c<this.parameterNames.length;_c++){
var _d=this.parameterNames[_c];
_b[_d]=this.iconProvider(this.parameterID,_d);
}
return _b;
},_getListBoxHeight:function(){
var _e;
if(this.parameterNames.length<this._static._MIN_LIST_SIZE){
_e=this._static._MIN_LIST_SIZE;
}else{
if(this.parameterNames.length>this._static._MAX_LIST_SIZE){
_e=this._static._MAX_LIST_SIZE;
}else{
_e=this.parameterNames.length;
}
}
var _f=_e*this._static._LIST_ENTRY_HEIGHT;
return new String(_f)+"px";
},_connectDialogHandlers:function(){
this._clickOKHandler=this.connect(this._okButton,"onclick",this._handleEventOKButtonClicked);
this._clickCancelHandler=this.connect(this._cancelButton,"onclick",this._handleEventCancelButtonClicked);
},_disconnectDialogHandlers:function(){
if(this._clickOKHandler){
this.disconnect(this._clickOKHandler);
delete this._clickOKHandler;
}
if(this._clickCancelHandler){
this.disconnect(this._clickCancelHandler);
delete this._clickCancelHandler;
}
},_handleEventEntryDoubleClicked:function(_10){
this._handleEventOKButtonClicked(null);
},_handleEventOKButtonClicked:function(_11){
if(_11){
dojo.stopEvent(_11);
}
var _12=this._listBox.getSelection();
if(_12.length===1){
this._doIt=true;
this._selectedParameterName=_12[0].type;
this._selectedParameterValue=_12[0].value;
}else{
this._doIt=false;
}
this.hide();
return true;
},_handleEventCancelButtonClicked:function(_13){
dojo.stopEvent(_13);
this._doIt=false;
this.hide();
return true;
},_initializeStaticConstants:function(){
if(this._static._instanceCount){
this._static._instanceCount++;
return;
}
this._static._instanceCount=1;
this._static._SEPARATOR="~";
this._static._MIN_LIST_SIZE=3;
this._static._MAX_LIST_SIZE=15;
this._static._LIST_ENTRY_HEIGHT=20;
}});
})();


;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.UUIDUtility");
(function(){
com.ibm.team.workitem.viewlets.web.ui.internal.utils.UUIDUtility={UUID_LENGTH:23,_UUID_FIRST_CHARACTER:"_",isValidUUID:function(_1){
if(!_1){
return false;
}else{
if(_1.length!=this.UUID_LENGTH){
return false;
}else{
if(_1.charAt(0)!=this._UUID_FIRST_CHARACTER){
return false;
}
}
}
return true;
}};
})();


;dojo.provide("com.ibm.jdojo.lang.Runtime");


(function(){
var _1=jazz.core.loader;
dojo.mixin(com.ibm.jdojo.lang.Runtime,{newInstance:function(_2){
var _3=dojo.filter(arguments,function(_4,_5){
return _5>0;
});
return this.newInstanceWithArrayArgs(_2,_3);
},newInstanceWithArrayArgs:function(_6,_7){
var _8=null;
if(dojo.isString(_6)){
_8=dojo.getObject(_6);
}else{
if(dojo.isFunction(_6)){
_8=_6;
}else{
throw new Error("type argument is expected to be a type name or constructor");
}
}
if(_8==null){
throw new Error("Unknown type "+_6);
}
function _9(_a){
_8.apply(this,_a);
};
_9.prototype=_8.prototype;
return new _9(_7);
},newInstanceByName:function(_b,_c){
if(!dojo.isString(_b)){
throw new Error("type argument is expected to be a type name");
}
var _d=this;
var _e=_c;
var _f=dojo.filter(arguments,function(val,idx){
return idx!=1;
});
_1.load_async(_b,function(_10){
var obj=_d.newInstance.apply(_d,_f);
_e(obj);
});
},implementsInterface:function(_11,_12){
if(!_11){
return false;
}
var _13=_11.constructor.prototype;
while(_13){
if(_13.$interfaces!==undefined&&_13.$interfaces[_12]===true){
return true;
}
_13=_13.constructor.superclass;
}
return false;
},declareInterface:function(_14,_15){
var _16=dojo.declare(_14,null,{constructor:function(){
throw new Error("Can't instantiate interface type");
},$isInterface:true});
if(_15!=null){
dojo.mixin(_16,_15);
}
return _16;
},isInstance:function(_17,_18){
if(_18.prototype.$isInterface){
return this.implementsInterface(_17,_18.prototype.declaredClass);
}else{
return _17 instanceof _18;
}
},getProperties:function(_19){
var _1a=[];
for(var _1b in _19){
_1a.push(_1b);
}
return _1a;
},getValues:function(_1c){
var _1d=[];
for(var _1e in _1c){
_1d.push(_1c[_1e]);
}
return _1d;
}});
})();


;dojo.provide("com.ibm.team.workitem.api.common.WorkItemAttributes");


(function(){
var _1=com.ibm.jdojo.lang.Runtime;
_1.declareInterface("com.ibm.team.workitem.api.common.WorkItemAttributes",{SEVERITY:"internalSeverity",PRIORITY:"internalPriority",FOUND_IN:"foundIn",ID:"id",TYPE:"workItemType",PROJECT_AREA:"projectArea",SUMMARY:"summary",STATE:"internalState",CREATOR:"creator",OWNER:"owner",DESCRIPTION:"description",CREATION_DATE:"creationDate",RESOLUTION:"internalResolution",DUE_DATE:"dueDate",ESTIMATE:"duration",CORRECTED_ESTIMATE:"correctedEstimate",TIME_SPENT:"timeSpent",FILED_AGAINST:"category",PLANNED_FOR:"target",RESOLVER:"resolver",RESOLUTION_DATE:"resolutionDate",TAGS:"internalTags",MODIFIED:"modified",MODIFIED_BY:"modifiedBy"});
})();

dojo.provide("com.ibm.team.workitem.web.client.internal.query.nls.Messages")._built=true;
dojo.provide("com.ibm.team.workitem.web.client.internal.query.nls.Messages.en_us");
com.ibm.team.workitem.web.client.internal.query.nls.Messages.en_us={"WARN_DISCARD_CHANGES":"Warning: Proceeding with the \'${0}\' action will discard unsaved changes to query \'${1}\'","RENAME_TAG_LABEL":"Rename tag","DELETE_TAG_LABEL":"Delete tag","ADD_TAGS_LABEL":"Add tags","RUN_QUERY_EXTERNAL_LABEL":"Open query in new tab","PREDEFINED_QUERIES":"Predefined","LIFECYCLE_QUERIES":"Lifecycle queries","UNTAGGED_QUERIES":"Untagged queries","OPERATOR_AND":"AND","REMOVE_TAG_LABEL":"Remove tag \'${0}\'","REMOVE_TAG_PLACEHOLDER_LABEL":"Remove tag","ACTIONS_LABEL":"Actions","OPERATOR_OR":"OR"};

;dojo.provide("com.ibm.team.workitem.web.client.internal.query.Operator");


dojo.requireLocalization("com.ibm.team.workitem.web.client.internal.query","Messages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.client.internal.query","Messages");
var _2=dojo.declare("com.ibm.team.workitem.web.client.internal.query.Operator",null,{"-chains-":{constructor:"manual"},_arity:0,constructor:function(id,_3){
this._id=id;
this._label=_3;
},getId:function(){
return this._id;
},getLabel:function(){
return this._label;
},setArity:function(_4){
this._arity=_4;
},getArity:function(){
return this._arity;
},createDTO:function(){
var _5={};
if(this._id!=null){
_5.id=this._id;
}
if(this._label!=null){
_5.label=this._label;
}
_5.arity=this._arity;
return _5;
}});
_2.IS_OPERATOR="is";
_2.IS_NOT_OPERATOR="is not";
_2.OR=new _2("OR",_1.OPERATOR_OR);
_2.AND=new _2("AND",_1.OPERATOR_AND);
_2.createFromDTO=function(_6){
var _7=new _2(_6.id,_6.label);
_7._arity=_6.arity;
return _7;
};
_2.createFromId=function(_8){
if((_2.OR.getId()===_8)){
return _2.OR;
}
if((_2.AND.getId()===_8)){
return _2.AND;
}
return new _2(_8,_8);
};
_2.createDTOs=function(_9){
if(_9==null){
return null;
}
var _a=new Array(_9.length);
for(var i=0;i<_a.length;i++){
_a[i]=_9[i].createDTO();
}
return _a;
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.UIItem");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.client.internal.query.UIItem",null,{"-chains-":{constructor:"manual"},constructor:function(id,_2,_3){
this._id=id;
this._label=_2!==undefined?_2:null;
this._arguments=_3!==undefined?_3:null;
},getId:function(){
return this._id;
},getArguments:function(){
return this._arguments;
},setName:function(_4){
this._name=_4;
},getName:function(){
return this._name;
},setItemType:function(_5){
this._itemType=_5;
},getItemType:function(){
return this._itemType;
},setLabel:function(_6){
this._label=_6;
},getLabel:function(){
return this._label;
},createDTO:function(){
var _7={};
if(this._id!=null){
_7.id=this._id;
}
if(this._name!=null){
_7.name=this._name;
}
if(this._label!=null){
_7.label=this._label;
}
if(this._arguments!=null){
_7.arguments=this._arguments;
}
if(this._itemType!=null){
_7.itemType=this._itemType;
}
return _7;
}});
_1.createFromDTO=function(_8){
if(_8==null){
return null;
}
var _9=new _1(_8.id,_8.label,_8.arguments);
_9._name=_8.name;
_9._itemType=_8.itemType;
return _9;
};
_1.createFromIds=function(_a){
var _b=[];
if(_a!=null){
var _c=_a;
var _d=_c.length;
for(var _e=0;_e<_d;_e++){
var _f=_c[_e];
_b.push(new _1(_f));
}
}
return _b;
};
_1.createDTOs=function(_10){
var _11=[];
if(_10!=null&&_10.length>0){
var _12=_10;
var _13=_12.length;
for(var _14=0;_14<_13;_14++){
var cur=_12[_14];
_11.push(cur.createDTO());
}
}
return _11;
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.Variable");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.client.internal.query.Variable",null,{"-chains-":{constructor:"manual"},constructor:function(id,_2,_3){
this._id=id;
this._arguments=_2;
this._name=_3===undefined?null:_3==null?null:_3;
},getId:function(){
return this._id;
},getName:function(){
return this._name;
},setArguments:function(_4){
this._arguments=_4;
},getArguments:function(){
return this._arguments;
},setLabel:function(_5){
this._label=_5;
},getLabel:function(){
return this._label;
},serialize:function(_6){
return dojo.toJson(this._createData(_6),false);
},accept:function(_7){
_7.visitVariable(this);
},createDTO:function(){
var _8={};
if(this._id!=null){
_8.id=this._id;
}
if(this._arguments!=null){
_8.arguments=this._arguments;
}
if(this._name!=null){
_8.name=this._name;
}
if(this._label!=null){
_8.label=this._label;
}
return _8;
},_createData:function(_9){
var _a={};
if(this._id!=null){
_a.id=this._id;
}
if(this._arguments!=null){
_a.arguments=this._arguments;
}
if(this._name!=null){
_a.name=this._name;
}
return _a;
}});
_1.PARAMETER_VARIABLE_ID="parameterVariable";
_1.VARIABLE_ID="variable";
_1._knownVariableNames=[];
_1.createFromDTO=function(_b){
if(_b==null){
return null;
}
var _c=(_b["name"]!=null&&_b.name!=null)?_b.name:null;
if(_c!=null){
_1._knownVariableNames.push(_c);
}
var _d=new _1(_b.id,_b.arguments,_c);
_d._label=_b.label;
return _d;
};
_1.createNamedVariable=function(id,_e){
if(_e!=null){
_1._knownVariableNames.push(_e);
}
var _f=new _1(id,null,_e);
return _f;
};
_1.createNewNamedVariable=function(id,_10){
var _11=_1._createUniqueName(_10);
var _12=new _1(id,null,_11);
return _12;
};
_1.createDTOs=function(_13){
var _14=[];
if(_13!=null&&_13.length>0){
var _15=_13;
var _16=_15.length;
for(var _17=0;_17<_16;_17++){
var cur=_15[_17];
_14.push(cur.createDTO());
}
}
return _14;
};
_1._createFromData=function(_18){
if(_18==null){
return null;
}
var _19;
var id=_18["id"];
var _1a=_18["name"];
var _1b=_18["attributeId"];
var _1c=_18["arguments"];
if(_1a!=null){
_19=_1.createNamedVariable(id,_1a);
_19.setArguments(_1c);
}else{
_19=new _1(id,_1c);
}
return _19;
};
_1._createUniqueName=function(_1d){
var _1e=_1d+_1._knownVariableNames.length+1;
_1._knownVariableNames.push(_1e);
return _1e;
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.AttributeExpression");






(function(){
var _1=com.ibm.team.workitem.web.client.internal.query;
var _2=_1.Operator;
var _3=_1.UIItem;
var _4=_1.Variable;
var _5=dojo.declare("com.ibm.team.workitem.web.client.internal.query.AttributeExpression",null,{"-chains-":{constructor:"manual"},constructor:function(_6,_7,_8){
this._attributeId=_6;
this._operator=_7;
this._values=_8!=null?_8:[];
this._variables=[];
},serialize:function(_9){
return dojo.toJson(this._createData(_9),false);
},getOperator:function(){
return this._operator;
},getAttributeId:function(){
return this._attributeId;
},getValues:function(){
return this._values;
},setValues:function(_a){
this._values=_a;
},getVariables:function(_b){
if(_b){
return this._variables;
}else{
var _c=[];
var _d=this._variables;
var _e=_d.length;
for(var _f=0;_f<_e;_f++){
var _10=_d[_f];
if(!(_4.PARAMETER_VARIABLE_ID===_10.getId())){
_c.push(_10);
}
}
return _c;
}
},setVariables:function(_11){
if(_11!=null){
for(var idx=0;idx<_11.length;idx++){
this._variables.push(_11[idx]);
}
}
},accept:function(_12){
_12.visitAttributeExpression(this);
},createDTO:function(){
var _13={};
_13.id=this._attributeId;
var _14={};
_14.attribute=_13;
if(this._operator!=null){
_14.operator=this._operator.createDTO();
}
if(this._values!=null){
_14.values=this._createValueDTOs(this._values);
}
if(this._variables!=null){
_14.variables=this._createVariableDTOs(this._variables);
}
return _14;
},createExpressionDTO:function(){
var _15={};
if(this._attributeId!=null){
_15.attribute=new _3(this._attributeId).createDTO();
}
if(this._operator!=null){
var op=new _3(this._operator.getId());
op.setLabel(this._operator.getLabel());
_15.operator=op.createDTO();
}
if(this._values!=null){
_15.values=[];
var _16=this._values;
var _17=_16.length;
for(var _18=0;_18<_17;_18++){
var _19=_16[_18];
_15.values.push(_19.createDTO());
}
}
if(this._variables!=null){
if(_15.values==null){
_15.values=[];
}
var _1a=this._variables;
var _1b=_1a.length;
for(var _1c=0;_1c<_1b;_1c++){
var _1d=_1a[_1c];
var _1e=new _3(_1d.getId(),null,_1d.getArguments());
_1e.setName(_1d.getName());
_1e.setItemType(_4.VARIABLE_ID);
_15.values.push(_1e.createDTO());
}
}
return _15;
},_createData:function(_1f){
var _20={};
if(this._attributeId!=null){
_20.attributeId=this._attributeId;
}
if(this._operator!=null){
_20.operator=this._operator.getId();
}
if(this._values!=null&&(this._values.length>0||!_1f)){
_20.values=this._createValues(this._values);
}
if(this._variables!=null&&(this._variables.length>0||!_1f)){
_20.variables=[];
for(var idx=0;idx<this._variables.length;idx++){
var cur=this._variables[idx];
_20.variables.push(cur._createData(_1f));
}
}
return _20;
},_createValues:function(_21){
var _22=[];
var _23=_21;
var _24=_23.length;
for(var _25=0;_25<_24;_25++){
var cur=_23[_25];
_22.push(cur.getId());
}
return _22;
},_createVariableDTOs:function(_26){
var _27=new Array(_26.length);
for(var idx=0;idx<_26.length;idx++){
_27[idx]=_26[idx].createDTO();
}
return _27;
},_createValueDTOs:function(_28){
var _29=[];
for(var idx=0;idx<_28.length;idx++){
_29.push(_28[idx].createDTO());
}
return _29;
}});
_5.createFromDTO=function(_2a){
if(_2a==null){
return null;
}
var _2b=null;
var _2c=null;
if(_2a.values!=null){
_2b=[];
var _2d=_2a.values;
var _2e=_2d.length;
for(var _2f=0;_2f<_2e;_2f++){
var _30=_2d[_2f];
_2b.push(_3.createFromDTO(_30));
}
}
if(_2a.variables!=null){
_2c=[];
var _31=_2a.variables;
var _32=_31.length;
for(var _33=0;_33<_32;_33++){
var _34=_31[_33];
var _35=_4.createFromDTO(_34);
_35.setArguments(_34.arguments);
_2c.push(_35);
}
}
var _36=new _5(_2a.attribute.id,_2a.operator!=null?_2.createFromDTO(_2a.operator):null,_2b);
_36.setVariables(_2c);
return _36;
};
_5.createFromExpressionDTO=function(_37){
if(_37==null){
return null;
}
var _38=[];
var _39=[];
if(_37.values!=null){
var _3a=_37.values;
var _3b=_3a.length;
for(var _3c=0;_3c<_3b;_3c++){
var cur=_3a[_3c];
if((_4.VARIABLE_ID===cur.itemType)){
var _3d=(cur["name"]!=null&&cur.name!=null)?cur.name:null;
var _3e;
if(_3d!=null){
_3e=_4.createNamedVariable(cur.id,_3d);
}else{
_3e=new _4(cur.id,null);
}
_3e.setArguments(cur.arguments);
_3e.setLabel(cur.label);
_39.push(_3e);
}else{
_38.push(_3.createFromDTO(cur));
}
}
}
var _3f=new _5(_37.attribute.id,new _2(_37.operator.id,_37.operator.label),_38);
_3f.setVariables(_39);
return _3f;
};
_5._createFromData=function(_40){
if(_40==null){
return null;
}
var _41=null;
if(_40.values!=null){
_41=[];
var _42=_40.values;
var _43=_42.length;
for(var _44=0;_44<_43;_44++){
var _45=_42[_44];
_41.push(new _3(_45));
}
}
var _46=null;
if(_40.variables!=null){
_46=[];
var _47=_40.variables;
var _48=_47.length;
for(var _49=0;_49<_48;_49++){
var _4a=_47[_49];
_46.push(_4._createFromData(_4a));
}
}
var _4b=new _5(_40.attributeId,_2.createFromId(_40.operator),_41);
_4b.setVariables(_46);
return _4b;
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.SimilarityExpression");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.client.internal.query.SimilarityExpression",null,{"-chains-":{constructor:"manual"},constructor:function(){
this._summary="";
this._content="";
},setWorkItem:function(_2){
this._itemId=_2!=null?_2:"";
},setContent:function(_3,_4){
this._summary=_3!=null?_3:"";
this._content=_4!=null?_4:"";
},serialize:function(_5){
return dojo.toJson(this._createData(_5),false);
},accept:function(_6){
_6.visitSimilarityExpression(this);
},_createData:function(_7){
var _8={};
if(this._content!=null){
_8.content=this._content;
}
if(this._summary!=null){
_8.summary=this._summary;
}
if(this._itemId!=null){
_8.itemId=this._itemId;
}
return _8;
},createDTO:function(){
var _9={};
if(this._content!=null){
_9.content=this._content;
}
if(this._summary!=null){
_9.summary=this._summary;
}
if(this._itemId!=null){
_9.itemId=this._itemId;
}
return _9;
},getItemId:function(){
return this._itemId;
}});
_1.createFromDTO=function(_a){
if(_a==null){
return null;
}
var _b=new _1();
_b._itemId=_a["itemId"];
_b._summary=_a["summary"];
_b._content=_a["content"];
return _b;
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.ExpressionVisitor");
(function(){
dojo.declare("com.ibm.team.workitem.web.client.internal.query.ExpressionVisitor",null,{"-chains-":{constructor:"manual"},visitAttributeExpression:function(_1){
return true;
},visitSimilarityExpression:function(_2){
return true;
},visitTerm:function(_3){
return true;
},visitVariable:function(_4){
return true;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.ParameterVariableCollector");






(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.team.workitem.web.client.internal.query;
var _3=_2.ExpressionVisitor;
var _4=_2.Variable;
dojo.declare("com.ibm.team.workitem.web.client.internal.query.ParameterVariableCollector",_3,{constructor:function(){
this.inherited(arguments,[]);
this._result={};
},getParameterVariables:function(){
return this._result;
},hasParameterVariables:function(){
return _1.getProperties(this._result).length>0;
},visitTerm:function(_5){
var _6=_5.getTerms();
var _7=_5.getAttributeExpressions();
if(_6!=null){
for(var _8=0;_8<_6.length;_8++){
_6[_8].accept(this);
}
}
if(_7!=null){
for(var _8=0;_8<_7.length;_8++){
_7[_8].accept(this);
}
}
return this.inherited("visitTerm",arguments,[_5]);
},visitAttributeExpression:function(_9){
var _a=_9.getVariables(true);
if(_a!=null){
for(var _b=0;_b<_a.length;_b++){
var _c=_a[_b];
if((_4.PARAMETER_VARIABLE_ID===_c.getId())){
this._result[_c.getName()]=_9;
}
}
}
return this.inherited("visitAttributeExpression",arguments,[_9]);
}});
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.SortCriteria");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.client.internal.query.SortCriteria",null,{"-chains-":{constructor:"manual"},createSortCriteriaDTO:function(){
var _2={};
_2.attributeId=this._attributeId;
_2.attributeLabel=this._attributeLabel;
_2.isAscending=this._isAscending;
return _2;
},isAscending:function(){
return this._isAscending;
},setIsAscending:function(_3){
this._isAscending=_3;
},getAttributeId:function(){
return this._attributeId;
},setAttributeLabel:function(_4){
this._attributeLabel=_4;
},getAttributeLabel:function(){
return this._attributeLabel;
},getDirection:function(){
return this.isAscending()?_1.ASCENDING:_1.DESCENDING;
}});
_1.ASCENDING="ascending";
_1.DESCENDING="descending";
_1.create=function(_5,_6){
var _7=new _1();
_7._attributeId=_5;
_7._isAscending=_6;
return _7;
};
_1.createWithLabel=function(_8,_9,_a){
var _b=_1.create(_8,_9);
_b._attributeLabel=_a;
return _b;
};
_1.createFromDto=function(_c){
var _d=new _1();
_d._attributeId=_c.attributeId;
_d._attributeLabel=_c.attributeLabel;
_d._isAscending=_c.isAscending;
return _d;
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.Term");






(function(){
var _1=com.ibm.team.workitem.web.client.internal.query;
var _2=_1.AttributeExpression;
var _3=_1.Operator;
var _4=_1.SimilarityExpression;
var _5=dojo.declare("com.ibm.team.workitem.web.client.internal.query.Term",null,{"-chains-":{constructor:"manual"},constructor:function(_6){
this._attributeExpressions=[];
this._termExpressions=[];
this._similarityExpressions=[];
this.setOperator(_6);
},serialize:function(_7){
return dojo.toJson(this._createData(_7),false);
},setOperator:function(_8){
this._operator=_8;
},getOperator:function(){
return this._operator;
},addTerm:function(_9){
this._termExpressions.push(_9);
},getTerms:function(){
return this._termExpressions;
},addAttributeExpression:function(_a){
this._attributeExpressions.push(_a);
},getAttributeExpressions:function(){
return this._attributeExpressions;
},addSimilarityExpression:function(_b){
this._similarityExpressions.push(_b);
},getFirstSimilarityExpression:function(){
if(this._similarityExpressions==null||this._similarityExpressions.length===0){
return null;
}
return this._similarityExpressions[0];
},accept:function(_c){
_c.visitTerm(this);
},createDTO:function(){
var _d={};
_d.operator=this._operator.getId();
if(this._attributeExpressions!=null){
_d.attributeExpressions=[];
var _e=this._attributeExpressions;
var _f=_e.length;
for(var _10=0;_10<_f;_10++){
var _11=_e[_10];
_d.attributeExpressions.push(_11.createDTO());
}
}
if(this._similarityExpressions!=null){
_d.similarityExpressions=[];
var _12=this._similarityExpressions;
var _13=_12.length;
for(var _14=0;_14<_13;_14++){
var _11=_12[_14];
_d.similarityExpressions.push(_11.createDTO());
}
}
if(this._termExpressions!=null){
_d.termExpressions=[];
var _15=this._termExpressions;
var _16=_15.length;
for(var _17=0;_17<_16;_17++){
var _18=_15[_17];
_d.termExpressions.push(_18.createDTO());
}
}
return _d;
},createExpressionDTOs:function(){
var _19=[];
if(this._attributeExpressions!=null){
var _1a=this._attributeExpressions;
var _1b=_1a.length;
for(var _1c=0;_1c<_1b;_1c++){
var _1d=_1a[_1c];
_19.push(_1d.createExpressionDTO());
}
}
if(this._termExpressions!=null){
var _1e=this._termExpressions;
var _1f=_1e.length;
for(var _20=0;_20<_1f;_20++){
var _21=_1e[_20];
_19.push(_21._createExpressionDTO());
}
}
return _19;
},_createExpressionDTO:function(){
return null;
},_createData:function(_22){
var _23={};
_23.operator=this._operator.getId();
if(this._attributeExpressions!=null&&(this._attributeExpressions.length>0||!_22)){
_23.attributeExpressions=[];
for(var idx=0;idx<this._attributeExpressions.length;idx++){
_23.attributeExpressions.push(this._attributeExpressions[idx]._createData(_22));
}
}
if(this._termExpressions!=null&&(this._termExpressions.length>0||!_22)){
_23.termExpressions=[];
for(var idx=0;idx<this._termExpressions.length;idx++){
_23.termExpressions.push(this._termExpressions[idx]._createData(_22));
}
}
if(this._similarityExpressions!=null&&(this._similarityExpressions.length>0||!_22)){
_23.similarityExpressions=[];
for(var idx=0;idx<this._similarityExpressions.length;idx++){
_23.similarityExpressions.push(this._similarityExpressions[idx]._createData(_22));
}
}
return _23;
}});
_5.AND="AND";
_5.OR="OR";
_5.createFromDTO=function(dto){
var _24=null;
if(dto!=null){
_24=_5.createFromOperator(dto.operator);
if(dto.attributeExpressions!=null){
_24._attributeExpressions=[];
var _25=dto.attributeExpressions;
var _26=_25.length;
for(var _27=0;_27<_26;_27++){
var _28=_25[_27];
_24._attributeExpressions.push(_2.createFromDTO(_28));
}
}
if(dto.similarityExpressions!=null){
_24._similarityExpressions=[];
var _29=dto.similarityExpressions;
var _2a=_29.length;
for(var _2b=0;_2b<_2a;_2b++){
var _28=_29[_2b];
_24._similarityExpressions.push(_4.createFromDTO(_28));
}
}
if(dto.termExpressions!=null){
_24._termExpressions=[];
var _2c=dto.termExpressions;
var _2d=_2c.length;
for(var _2e=0;_2e<_2d;_2e++){
var _2f=_2c[_2e];
_24._termExpressions.push(_5.createFromDTO(_2f));
}
}
}
return _24;
};
_5.createFromExpressionDTOs=function(_30){
var _31=new _5(_3.AND);
var _32=_30;
var _33=_32.length;
for(var _34=0;_34<_33;_34++){
var cur=_32[_34];
if(cur.attribute!=null){
_31.addAttributeExpression(_2.createFromExpressionDTO(cur));
}
}
return _31;
};
_5.createFromOperator=function(_35){
var _36=(_3.OR.getId()===_35)?_3.OR:_3.AND;
return new _5(_36);
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.QueryDescriptor");










(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.team.workitem.web.client.internal.query;
var _3=_2.ParameterVariableCollector;
var _4=_2.SortCriteria;
var _5=_2.Term;
var _6=_2.UIItem;
var _7=dojo.declare("com.ibm.team.workitem.web.client.internal.query.QueryDescriptor",null,{"-chains-":{constructor:"manual"},constructor:function(){
this._currentCount=1;
},setItemId:function(_8){
this._itemId=_8;
},getDefinedItemId:function(){
return this._itemId;
},getItemId:function(){
if(this._itemId==null||this._itemId===""){
if(this._term!=null){
var _9=this._term.getFirstSimilarityExpression();
if(_9!=null){
return _9.getItemId();
}else{
var _a=this._term.getAttributeExpressions();
if(_a!=null&&_a.length>0&&_a[0].getAttributeId()==="all"){
var _b=_a[0].getValues();
if(_b!=null&&_b.length>0){
var id=_b[0].getId();
if(id!=null){
return "Search:"+id;
}
}
}
if(this.getCacheItemId()!=null){
return this.getCacheItemId();
}
if(this.getName()!=null){
return this.getName();
}
}
}
}
return this._itemId;
},setName:function(_c){
this._name=_c;
},getName:function(){
return this._name;
},getTags:function(){
return this._tags;
},getPersonalTags:function(){
return this._personalTags;
},getSharedTags:function(){
return this._sharedTags;
},getOutputFormatting:function(){
return this._outputFormatting;
},setOutputFormatting:function(_d){
this._outputFormatting=_d;
},getDescription:function(){
return this._description;
},setStateId:function(_e){
this._stateId=_e;
},getStateId:function(){
return this._stateId;
},isEditable:function(){
return this._isEditable;
},setTerm:function(_f){
this._term=_f;
},getTerm:function(){
return this._term;
},getOwner:function(){
return this._owner;
},setProjectArea:function(_10){
this._projectAreaId=_10;
},getProjectArea:function(){
return this._projectAreaId;
},supportsCsvExport:function(){
return this._csvExportLink!=null;
},supportsHtmlExport:function(){
return this._htmlExportLink!=null;
},getCsvExportLink:function(_11){
return this.addParametersToUrl(this._csvExportLink,_11);
},getHtmlExportLink:function(_12){
return this.addParametersToUrl(this._htmlExportLink,_12);
},getUserAssociations:function(){
return this._userAssociations;
},getTeamAreaAssociations:function(){
return this._teamAreaAssociations;
},getSorting:function(){
return this._sorting;
},getSortCriterias:function(){
return this._sortCriterias;
},setSortCriterias:function(_13){
this._sortCriterias=_13;
},hasSortCriteria:function(){
var _14=this.getSortCriterias();
return (_14!=null&&_14.length>0);
},getColumns:function(){
return this._columns;
},getCurrentCount:function(){
return this._currentCount;
},addParametersToUrl:function(url,run){
if(url==null){
return null;
}
if(this._parameterValues!=null){
var _15=encodeURIComponent(this._parameterValues.serialize(true));
url+="&"+_7.PARAMETER_VALUES_PROPERTY+"="+_15;
}
if(run!=null&&run.getFilterAttribute()!=null&&run.getFilterValue()!=null){
url+=("&filterAttribute="+encodeURIComponent(run.getFilterAttribute())+"&filterValue="+encodeURIComponent(run.getFilterValue()));
}
return url;
},createQueryDTO:function(){
var _16={};
if(this._name!=null){
_16.name=this._name;
}
if(this._description!=null){
_16.description=this._description;
}
if(this._itemId!=null){
_16.itemId=this._itemId;
}
if(this._term!=null){
_16.expression=this._term.createExpressionDTOs();
}
if(this._owner!=null){
_16.owner=this._owner.createDTO();
}
if(this._csvExportLink!=null){
_16.csvExportLink=this._csvExportLink;
}
if(this._htmlExportLink!=null){
_16.htmlExportLink=this._htmlExportLink;
}
if(this._currentCount!==-1){
_16.currentCount=this._currentCount;
}
_16.isEditable=this._isEditable;
if(this._projectAreaId!=null){
_16.projectAreaItemId=this._projectAreaId;
}
if(this._sharedTags!=null){
_16.sharedTags=this._sharedTags;
}
if(this._personalTags!=null){
_16.personalTags=this._personalTags;
}
if(this._outputFormatting!=null){
_16.outputFormatting=this._outputFormatting;
}
if(this._tags!=null){
_16.tags=this._tags;
}
dojo.mixin(_16,{hasParameters:this.hasParameterVariables()});
return _16;
},createEditableQueryDTO:function(){
var _17={};
if(this._name!=null){
_17.name=this._name;
}
if(this._description!=null){
_17.description=this._description;
}
if(this._itemId!=null){
_17.itemId=this._itemId;
}
if(this._stateId!=null){
_17.stateId=this._stateId;
}
if(this._term!=null){
_17.expression=this._term.createDTO();
}
if(this._owner!=null){
_17.creator=this._owner.createDTO();
}
if(this._stateId!=null){
_17.stateId=this._stateId;
}
if(this._columns!=null){
_17.columns=this._columns;
}
if(this._sorting!=null){
_17.sorting=this._sorting;
}
if(this._teamAreaAssociations!=null){
_17.teamAreaAssociations=this._teamAreaAssociations;
}
if(this._userAssociations!=null){
_17.userAssociations=this._userAssociations;
}
if(this._csvExportLink!=null){
_17.csvExportLink=this._csvExportLink;
}
if(this._htmlExportLink!=null){
_17.htmlExportLink=this._htmlExportLink;
}
if(this._projectAreaId!=null){
_17.projectAreaItemId=this._projectAreaId;
}
if(this._sharedTags!=null){
_17.sharedTags=this._sharedTags;
}
if(this._personalTags!=null){
_17.personalTags=this._personalTags;
}
if(this._outputFormatting!=null){
_17.outputFormatting=this._outputFormatting;
}
if(this._tags!=null){
_17.tags=this._tags;
}
return _17;
},hasParameterVariables:function(){
return _1.getProperties(this._findParameterVariables(true)).length>0;
},setParameterValues:function(_18){
this._parameterValues=_18;
},getParameterValues:function(){
return this._parameterValues;
},hasUnresolvedVariables:function(){
return _1.getProperties(this._findParameterVariables(false)).length>0;
},getUnresolvedVariables:function(){
return this._findParameterVariables(false);
},serialize:function(){
var dto=this.createEditableQueryDTO();
dto._cacheItemId=this._cacheItemId;
return dojo.toJson(dto,false);
},_findParameterVariables:function(_19){
if(this._term!=null){
var _1a=new _3();
_1a.visitTerm(this._term);
var _1b;
if(_19||this._parameterValues==null){
_1b=_1a.getParameterVariables();
}else{
_1b={};
var _1c=_1a.getParameterVariables();
var _1d=_1.getProperties(_1c);
var _1e=_1d.length;
for(var _1f=0;_1f<_1e;_1f++){
var _20=_1d[_1f];
if(!this._parameterValues.hasVariableValue(_20)){
_1b[_20]=_1c[_20];
}
}
}
return _1b;
}
return {};
},getCacheItemId:function(){
if(this._cacheItemId!=null){
return this._cacheItemId;
}
return this._itemId;
},setCacheItemId:function(_21){
this._cacheItemId=_21;
},getIsNew:function(){
return this.isNew;
},setNew:function(_22){
this.isNew=_22;
},isSearch:function(){
return this._isSearchQuery;
},getQueryRunURL:function(){
return this._queryRunUrl;
}});
_7.PARAMETER_VALUES_PROPERTY="jsonParameterValues";
_7.createFromQueryDTO=function(dto){
if(dto==null){
return null;
}
var _23=new _7();
_23._itemId=dto.itemId;
_23._name=dto.name;
_23._description=dto.description;
_23._isEditable=dto.isEditable;
_23._sharedTags=dto.sharedTags;
_23._personalTags=dto.personalTags;
_23._outputFormatting=dto.outputFormatting;
_23._tags=dto.tags;
if(dto.csvExportLink!=null){
_23._csvExportLink=dto.csvExportLink;
}
if(dto.htmlExportLink!=null){
_23._htmlExportLink=dto.htmlExportLink;
}
if(dto.expression!=null){
_23._term=_5.createFromExpressionDTOs(dto.expression);
}
if(dto.owner!=null){
_23._owner=_6.createFromDTO(dto.owner);
}
if(dto["currentCount"]!=null){
_23._currentCount=dto.currentCount;
}
if(dto.projectAreaItemId!=null){
_23._projectAreaId=dto.projectAreaItemId;
}
if(dto.sortCriterias!=null){
var _24=[];
var _25=dto.sortCriterias;
var _26=_25.length;
for(var _27=0;_27<_26;_27++){
var _28=_25[_27];
_24.push(_4.createFromDto(_28));
}
_23._sortCriterias=_24;
}
return _23;
};
_7.createFromEditableQueryDTO=function(dto){
if(dto==null){
return null;
}
var _29=new _7();
_29._itemId=dto.itemId;
_29._name=dto.name;
_29._description=dto.description;
_29._isEditable=true;
if(dto.stateId!=null){
_29._stateId=dto.stateId;
}
if(dto.expression!=null){
_29._term=_5.createFromDTO(dto.expression);
}
if(dto.creator!=null){
_29._owner=_6.createFromDTO(dto.creator);
}
if(dto.columns!=null){
_29._columns=dto.columns;
}
if(dto.teamAreaAssociations!=null){
_29._teamAreaAssociations=dto.teamAreaAssociations;
}
if(dto.userAssociations!=null){
_29._userAssociations=dto.userAssociations;
}
if(dto.csvExportLink!=null){
_29._csvExportLink=dto.csvExportLink;
}
if(dto.htmlExportLink!=null){
_29._htmlExportLink=dto.htmlExportLink;
}
if(dto.projectAreaItemId!=null){
_29._projectAreaId=dto.projectAreaItemId;
}
if(dto.tags!=null){
_29._tags=dto.tags;
}
if(dto.personalTags!=null){
_29._personalTags=dto.personalTags;
}
if(dto.sharedTags!=null){
_29._sharedTags=dto.sharedTags;
}
if(dto.outputFormatting!=null){
_29._outputFormatting=dto.outputFormatting;
}
if(dto.sorting!=null){
_29._sorting=dto.sorting;
var _2a=[];
var _2b=dto.sorting;
var _2c=_2b.length;
for(var _2d=0;_2d<_2c;_2d++){
var _2e=_2b[_2d];
_2a.push(_4.createWithLabel(_2e.id,_2e.ascending,_2e.label));
}
_29._sortCriterias=_2a;
}
return _29;
};
_7.createFromTerm=function(_2f){
if(_2f==null){
return null;
}
var _30=new _7();
_30._term=_2f;
return _30;
};
_7.deserialize=function(_31){
var dto=eval("("+_31+")");
var _32=_7.createFromEditableQueryDTO(dto);
_32._cacheItemId=dto._cacheItemId;
return _32;
};
})();


;(function ClientConstants(){
var _1=dojo.provide("com.ibm.team.workitem.web.client.internal.ClientConstants");
_1.CACHE_CONTROL="cache-control";
_1.NO_CACHE="no-cache, no-store, max-age=0, private";
_1.CACHE_CONTROL_HEADERS={};
_1.CACHE_CONTROL_HEADERS[_1.CACHE_CONTROL]=_1.NO_CACHE;
})();


;dojo.provide("com.ibm.jdojo.lang.Exception");
(function(){
dojo.declare("com.ibm.jdojo.lang.Exception",null,{"-chains-":{constructor:"manual"},constructor:function(_1,_2){
this.message=_1;
this.cause=_2;
},message:null,cause:null,getMessage:function(){
return this.message;
},getCause:function(){
return this.cause;
}});
})();


;dojo.provide("com.ibm.jdojo.lang.RuntimeException");


(function(){
dojo.declare("com.ibm.jdojo.lang.RuntimeException",com.ibm.jdojo.lang.Exception,{constructor:function(_1,_2){
this.inherited(arguments);
}});
})();


;dojo.provide("com.ibm.jdojo.lang.JavaScriptException");


(function(){
dojo.declare("com.ibm.jdojo.lang.JavaScriptException",com.ibm.jdojo.lang.RuntimeException,{thrownValue:null,constructor:function(_1){
this.inherited(arguments,[String(_1 instanceof Error?_1.message:_1)]);
this.thrownValue=_1;
},getThrown:function(){
return this.thrownValue;
}});
})();


;define("dojox/collections/_base",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array"],function(_1,_2,_3){
var _4=_2.getObject("dojox.collections",true);
_4.DictionaryEntry=function(k,v){
this.key=k;
this.value=v;
this.valueOf=function(){
return this.value;
};
this.toString=function(){
return String(this.value);
};
};
_4.Iterator=function(a){
var _5=0;
this.element=a[_5]||null;
this.atEnd=function(){
return (_5>=a.length);
};
this.get=function(){
if(this.atEnd()){
return null;
}
this.element=a[_5++];
return this.element;
};
this.map=function(fn,_6){
return _3.map(a,fn,_6);
};
this.reset=function(){
_5=0;
this.element=a[_5];
};
};
_4.DictionaryIterator=function(_7){
var a=[];
var _8={};
for(var p in _7){
if(!_8[p]){
a.push(_7[p]);
}
}
var _9=0;
this.element=a[_9]||null;
this.atEnd=function(){
return (_9>=a.length);
};
this.get=function(){
if(this.atEnd()){
return null;
}
this.element=a[_9++];
return this.element;
};
this.map=function(fn,_a){
return _3.map(a,fn,_a);
};
this.reset=function(){
_9=0;
this.element=a[_9];
};
};
return _4;
});


;define("dojox/collections/Dictionary",["dojo/_base/kernel","dojo/_base/array","./_base"],function(_1,_2,_3){
_3.Dictionary=function(_4){
var _5={};
this.count=0;
var _6={};
this.add=function(k,v){
var b=(k in _5);
_5[k]=new _3.DictionaryEntry(k,v);
if(!b){
this.count++;
}
};
this.clear=function(){
_5={};
this.count=0;
};
this.clone=function(){
return new _3.Dictionary(this);
};
this.contains=this.containsKey=function(k){
if(_6[k]){
return false;
}
return (_5[k]!=null);
};
this.containsValue=function(v){
var e=this.getIterator();
while(e.get()){
if(e.element.value==v){
return true;
}
}
return false;
};
this.entry=function(k){
return _5[k];
};
this.forEach=function(fn,_7){
var a=[];
for(var p in _5){
if(!_6[p]){
a.push(_5[p]);
}
}
_1.forEach(a,fn,_7);
};
this.getKeyList=function(){
return (this.getIterator()).map(function(_8){
return _8.key;
});
};
this.getValueList=function(){
return (this.getIterator()).map(function(_9){
return _9.value;
});
};
this.item=function(k){
if(k in _5){
return _5[k].valueOf();
}
return undefined;
};
this.getIterator=function(){
return new _3.DictionaryIterator(_5);
};
this.remove=function(k){
if(k in _5&&!_6[k]){
delete _5[k];
this.count--;
return true;
}
return false;
};
if(_4){
var e=_4.getIterator();
while(e.get()){
this.add(e.element.key,e.element.value);
}
}
};
return _3.Dictionary;
});


;dojo.provide("com.ibm.team.repository.web.client.init.InitializationData");


(function(){
var _1={_initDataGraph:new dojox.collections.Dictionary()};
for(var _2 in _1){
com.ibm.team.repository.web.client.init.InitializationData[_2]=_1[_2];
}
com.ibm.team.repository.web.client.init.InitializationData._load=function(_3){
for(var _4 in _3){
this._initDataGraph.add(_4,_3[_4]);
}
};
com.ibm.team.repository.web.client.init.InitializationData.get=function(_5){
var _6=this._initDataGraph.item(_5);
return _6;
};
})();

net.jazz.ajax._extensionRegistryData = {"extensionPoints":[{"extensions":[{"configurationElements":[{"children":[],"name":"page","attributes":{"teamAreaEditor":"true","widget":"com.ibm.team.process.authoring.web.frontingapp.ui.internal.editors.ProcessDescriptionEditorContainer","uaKeyForTeamAreaEditor":"com.ibm.team.process.web.tab_process_description","id":"com.ibm.team.process.authoring.jfs.web.ProcessDescriptionEditor","title":"Process Description","uaKey":"com.ibm.team.process.web.tab_process_description"},"value":null}],"namespaceIdentifier":"com.ibm.team.process.authoring.web.frontingapp","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"description","attributes":{},"value":"Use this page to create and manage link types."}],"name":"page","attributes":{"widget":"com.ibm.team.rtc.web.ui.internal.linktypes.LinkTypePage","id":"com.ibm.team.rtc.web.LinkTypePage","title":"Link Types","uaKey":"com.ibm.team.rtc.web.LinkTypePage_ua"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"description","attributes":{},"value":"Define the releases of the project for which work items can be reported. Each release can be configured to be visible to members of the team only (Restrict Visibility)."}],"name":"page","attributes":{"widget":"com.ibm.team.workitem.web.ui.internal.page.ReleasesPage","id":"com.ibm.team.workitem.web.ReleasesPage","title":"Releases","uaKey":"com.ibm.team.workitem.web.ReleasesPage_ua"},"value":null},{"children":[],"name":"page","attributes":{"widget":"com.ibm.team.workitem.web.ui.internal.page.CategoriesPage","id":"com.ibm.team.workitem.web.CategoriesPage","title":"Categories","uaKey":"com.ibm.team.workitem.web.CategoriesPage_ua"},"value":null},{"children":[],"name":"page","attributes":{"widget":"com.ibm.team.workitem.web.ui.internal.page.MailTemplatesPage","id":"com.ibm.team.workitem.web.MailTemplatesPage","title":"Mail Templates","uaKey":"com.ibm.team.workitem.web.MailTemplatesPage_ua"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"page","attributes":{"widget":"com.ibm.team.workitem.web.process.ui.internal.page.WorkItemProcessPage","id":"com.ibm.team.workitem.web.process","title":"Work Items"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web.process","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":"com.ibm.team.process.web.projectAreaEditorPages"},{"extensions":[{"configurationElements":[{"children":[],"name":"action","attributes":{"handler":"com.ibm.team.process.authoring.web.frontingapp.ui.internal.editors.TemplateButtonHandler","widget":"com.ibm.team.process.authoring.web.frontingapp.ui.internal.editors.TemplateDescriptionEditor","module":"com.ibm.team.process.authoring.web.frontingapp","icon":"graphics/icons/edit_process_description.gif","tooltip":"Edit Process Description","id":"com.ibm.team.process.authoring.manageTemplateDescription"},"value":null}],"namespaceIdentifier":"com.ibm.team.process.authoring.web.frontingapp","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":"com.ibm.team.process.web.processTemplateActions"},{"extensions":[{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.process.service.configurationData.teamInvitation"},"value":null},{"children":[],"name":"description","attributes":{},"value":"In this template, type the subject and body of the email that is sent to users to invite them to join a project or team. Explain where and how users can join the project or team. This template supports a few provided variables with which you can tailor the message to a specific user, project, and team. The variables are substituted for actual system values when the invitation is sent."}],"name":"editor","attributes":{"widget":"com.ibm.team.process.web.ui.internal.admin.projects.TeamInvitationEditor","id":"com.ibm.team.process.web.configurationDataEditor.teamInvitationEditor","label":"Email Template","categoryId":"com.ibm.team.process.category.teamInvitation","uaKey":"com.ibm.team.process.web.tab_team_invitation_email_template"},"value":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"description","attributes":{},"value":"Use this page to configure Architecture Management capabilities of this project."},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.rmm.process.settings"},"value":null}],"name":"editor","attributes":{"widget":"com.ibm.team.rmm.web.ui.internal.widgets.projectArea.ExtendedSettingsTabWidget","id":"com.ibm.team.rmm.web.SettingsPage","label":"Settings","categoryId":"com.ibm.team.rmm.category"},"value":null}],"namespaceIdentifier":"com.ibm.team.rmm.web.ui","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.rmm.process.settings"},"value":null}],"name":"editor","attributes":{"widget":"com.ibm.team.rmm.web.ui.internal.widgets.projectArea.ConfigurationManagementDataEditor","id":"com.ibm.team.rmm.web.ConfigurationManagementPage","label":"Configuration Management","categoryId":"com.ibm.team.rmm.category"},"value":null}],"namespaceIdentifier":"com.ibm.team.rmm.web.ui","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.tpt.timetracking"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.workItemProgressMode"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.workResourcesSpecification"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.topLevelPlanWorkItemBinding"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.tpt.configuration"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.attributes"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.workitem.configuration.workItemTypes"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.planConfigurationElement"},"value":null}],"name":"editor","attributes":{"widget":"com.ibm.team.apt.web.process.ui.internal.page.PlanConfigurationPage","id":"com.ibm.team.apt.process.planconfigurationpage","label":"General","categoryId":"com.ibm.team.apt.category","uaKey":"com.ibm.team.apt.web.process.PlanConfigurationPage"},"value":null}],"namespaceIdentifier":"com.ibm.team.apt.web.process","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.planmodes"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.plantypes"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.planConfigurationElement"},"value":null}],"name":"editor","attributes":{"widget":"com.ibm.team.apt.web.process.ui.internal.page.PlanTypesConfigurationPage","id":"com.ibm.team.apt.process.plantypesconfigurationpage","label":"Plan Types and Views","categoryId":"com.ibm.team.apt.category","uaKey":"com.ibm.team.apt.web.process.PlanTypesConfigurationPage"},"value":null}],"namespaceIdentifier":"com.ibm.team.apt.web.process","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.apt.configuration.DefaultStateGroupsAndStates"},"value":null},{"children":[],"name":"description","attributes":{},"value":"Use this page to configure the default states and state groups in the Taskboard and Kanban Board plan views of the project. If you select or clear a state and state group in a plan view, that selection overrides the default configuration. You can also override the default state and state group in the process configuration source."}],"name":"editor","attributes":{"widget":"com.ibm.team.apt.web.process.ui.internal.page.DefaultStateGroupsAndStatesPage","id":"com.ibm.team.apt.process.DefaultStateGroupsAndStatesPage","label":"Default State Groups & States","categoryId":"com.ibm.team.apt.category","uaKey":"com.ibm.team.apt.web.process.DefaultStateGroupsAndStatesPage"},"value":null}],"namespaceIdentifier":"com.ibm.team.apt.web.process","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.scm.service.extendedAttributeDefinition"},"value":null},{"children":[],"name":"description","attributes":{},"value":"Use this page to create and manage custom attributes."}],"name":"editor","attributes":{"widget":"com.ibm.team.scm.web.ui.internal.process.attributedefinition.ScmExtendedAttributePage","id":"com.ibm.team.scm.web.ScmExtendedAttributePage","label":"Attribute Definition","categoryId":"com.ibm.team.scm.category","uaKey":"com.ibm.team.scm.web.scmextendedattributepage"},"value":null}],"namespaceIdentifier":"com.ibm.team.scm.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.scm.service.newWorkspaceConfigurationData"},"value":null},{"children":[],"name":"description","attributes":{},"value":"Use this page to configure the default name and visibility when creating new workspaces from streams in this project area."}],"name":"editor","attributes":{"widget":"com.ibm.team.scm.web.ui.internal.process.data.NewWorkspaceConfigurationDataPage","id":"com.ibm.team.scm.web.NewWorkspaceConfigurationDataPage","label":"New Workspace Configuration","categoryId":"com.ibm.team.scm.category","uaKey":"com.ibm.team.scm.web.newworkspaceconfigurationdatapage"},"value":null}],"namespaceIdentifier":"com.ibm.team.scm.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.scm.service.useWorkspaceParentFolder"},"value":null},{"children":[],"name":"description","attributes":{},"value":"Use this page to configure the default usage of loading component files into sandbox subfolder when loading repository workspaces that flows to streams in this project area."}],"name":"editor","attributes":{"widget":"com.ibm.team.scm.web.ui.internal.process.parentfolder.WorkspaceParentFolderPage","id":"com.ibm.team.scm.web.WorkspaceParentFolderPage","label":"Sandbox Subfolder","categoryId":"com.ibm.team.scm.category","uaKey":"com.ibm.team.scm.web.workspaceparentfolderdatapage"},"value":null}],"namespaceIdentifier":"com.ibm.team.scm.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.filesystem.reviews.service.codeReviewIssueTagDefinition"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.filesystem.reviews.service.codeReviewIssueResolutionDefinition"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.filesystem.reviews.service.codeReviewIssueTypeDefinition"},"value":null},{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.filesystem.reviews.service.codeReviewPreferences"},"value":null},{"children":[],"name":"description","attributes":{},"value":"Use this page to configure code review."}],"name":"editor","attributes":{"widget":"com.ibm.team.filesystem.reviews.service.web.ui.internal.process.codereviewmanagement.ScmCodeReviewManagementPage","id":"com.ibm.team.filesystem.reviews.service.web.ScmCodeReviewManagementPage","label":"Code Review","categoryId":"com.ibm.team.scm.category","uaKey":"com.ibm.team.filesystem.reviews.service.web.scmcodereviewmanagementpage"},"value":null}],"namespaceIdentifier":"com.ibm.team.filesystem.reviews.service.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"configurationData","attributes":{"id":"com.ibm.team.ple.config.workitems.linktoattributemapping"},"value":null},{"children":[],"name":"description","attributes":{},"value":"Use this page to map OSLC link types to work item attributes of type deliverable.  This mapping is necessary if your Change and Configuration Management project area is associated with project areas in other applications, such as Quality Management or Requirements Management, and one or more of those project areas stores its artifacts in configurations that belong to global configurations.  The deliverable type attribute corresponds to the releases that you define on the Releases page. Use the Global Configuration application to associate releases with global configurations."}],"name":"editor","attributes":{"widget":"com.ibm.team.workitem.web.process.ui.internal.pleconfig.WorkItemsPLEMappingPage","id":"com.ibm.team.workitem.web.pleattributemapping","label":"OSLC Link/Attribute Mapping","categoryId":"com.ibm.team.rtc.ple.category","uaKey":"com.ibm.team.workitem.web.pleattributemapping_ua"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web.process","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":"com.ibm.team.process.web.configurationDataEditor"},{"extensions":[],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":"com.ibm.team.process.web.suppressedProjectAreaEditors"},{"extensions":[{"configurationElements":[{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.deliver.server.deltaRequireWorkItem","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RequireWorkItemEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.deliver.server.requireWorkItem","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RequireWorkItemEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.scm.server.protectClosedChangeSetsAdvisor","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.ProtectClosedChangeSetsEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.disinterestedApproverChangeSetLinkAdvisor","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.DisinterestedApproverChangeSetLinkEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.disinterestedApproverWorkItemSaveAdvisor","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.DisinterestedApproverWorkItemSaveEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.scm.server.protectClosedChangeSetsParticipant","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.AddCommentChangeSetsEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.deliver.server.deltaRequireWorkItemApproval","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RequireWorkItemApprovalEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.deliver.server.requireWorkItemApproval","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RequireWorkItemApprovalEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.disallowIncomingChanges","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.DisallowIncomingChangeEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.componentPermissions","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.StreamComponentsPermissionEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.scm.server.workItemsMatchQueryDeliverAdvisor","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.WorkItemsMatchQueryDeliverEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.scm.server.changesClosedOnLinkAdvisor","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.ChangesClosedOnLinkEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.scm.server.preventLinkToApprovedWorkItem","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.PreventLinkToApprovedWorkItemEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.deltaRequiredContent","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RequiredContentEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.requiredContent","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RequiredContentEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.scm.service.ProtectVersionableAdvisor","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.ProtectVersionableEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.deltaProtectFileType","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.ProtectFileTypeEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.restrictMimeTypeAndEncoding","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RestrictMimeTypeAndEncodingAdvisorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.restrictFileSizeCheckin","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RestrictFileSizeCheckinEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.restrictChangeSetSizeCheckin","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.RestrictChangeSetSizeCheckinEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.scm.service.UniqueComponentNameAdvisor","widget":"com.ibm.team.scm.web.ui.internal.process.operationbehavior.UniqueComponentNameEditor"},"value":null}],"namespaceIdentifier":"com.ibm.team.scm.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.build.server.CheckContributorCancelingPendingRequest","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.build.server.CheckContributorRequestingBuild","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.build.server.CheckNumberOfBuilds","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.build.server.CheckContributorAbandoningBuild","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.promotion.advisors.requireWorkItemStatesAdvisor","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.promotion.participants.modifyWorkItemStateParticipant","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.promotion.participants.addWorkItemCommentParticipant","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.promotion.participants.addWorkItemTagsParticipant","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.packaging.advisors.requireWorkItemStatesAdvisor","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.packaging.participants.modifyWorkItemStateParticipant","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.packaging.participants.addWorkItemCommentParticipant","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.enterprise.internal.process.packaging.participants.addWorkItemTagsParticipant","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.process.definitions.server.createInvitationWorkItems","widget":"com.ibm.team.process.web.ui.operationbehavior.UnimplementedOperationBehaviorEditor"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.apt.advisor.requiredEstimates","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.RequiredEstimatesEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.eSignature","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.ESignatureEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.readOnlyAttributesByTypeAndState","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.ReadOnlyByTypeAndStateEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.impliedProperties","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.ImpliedPropertiesEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.impliedAttributes","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.ImpliedAttributesEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.readOnlyAttributes","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.ReadOnlyByConditionEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.requiredApprovals","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.RequiredApprovalsEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.requiredAttributes","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.RequiredByConditionEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.requiredProperties","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.RequiredByTypeAndStateEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.workitem.advisor.stateBasedModification","widget":"com.ibm.team.workitem.web.process.ui.internal.operationbehavior.StateBasedModificationEditor"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web.process","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.git.service.operationadvisor.PreventAssociationToWiOutsideProjectarea","widget":"com.ibm.team.git.web.ui.internal.process.operationbehavior.TeamareaAssociationEditor"},"value":null},{"children":[],"name":"editor","attributes":{"operationBehaviorId":"com.ibm.team.git.service.operationadvisor.RequireWorkItemToMatchQueryValidator","widget":"com.ibm.team.git.web.ui.internal.process.operationbehavior.WorkItemToMatchQueryEditor"},"value":null}],"namespaceIdentifier":"com.ibm.team.git.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":"com.ibm.team.process.web.operationBehaviorEditors"},{"extensions":[{"configurationElements":[{"children":[],"name":"page","attributes":{"widget":"com.ibm.team.apt.web.ui.internal.users.ScheduledAbsencesEditorPage","targetId":"com.ibm.team.repository.users","id":"com.ibm.team.apt.user.resources.absences","title":"Scheduled Absences"},"value":null},{"children":[],"name":"page","attributes":{"widget":"com.ibm.team.apt.web.ui.internal.users.WorkEnvironmentEditorPage","targetId":"com.ibm.team.repository.users","id":"com.ibm.team.apt.user.resources.workEnvironment","title":"Work Environment"},"value":null}],"namespaceIdentifier":"com.ibm.team.apt.web.ui","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"page","attributes":{"widget":"com.ibm.team.workitem.web.ui.internal.page.WorkItemMailConfigPageView","targetId":"com.ibm.team.repository.users","id":"com.ibm.team.workitem.web.MailConfig","title":"Mail Configuration"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":"com.ibm.team.repository.web.profileEditorPages"},{"extensions":[],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":"com.ibm.team.repository.web.createLocalComponentSteps"},{"extensions":[],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":"com.ibm.team.repository.web.localComponentWebUiParticipant"},{"extensions":[{"configurationElements":[{"children":[],"name":"pageLayout","attributes":{"aboveBanner":"false","leftBanner":"false","footer":"false","licenseExpireInfo":"false","homeLink":"false","miniDashboard":"false","id":"contentOnly","jsModule":"com.ibm.team.workitem.web.ui.internal.view.editor.ContentOnlyPageTemplate","homeMenuProvider":"false","rightBanner":"false"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":null}],"namespaceIdentifier":"net.jazz.web.app","uniqueIdentifier":"net.jazz.web.app.applicationLayout"},{"extensions":[{"configurationElements":[{"children":[{"children":[{"children":[{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.internal.counters.ICounterService"},"value":null}],"name":"prerequisites","attributes":{},"value":null}],"name":"extensionService","attributes":{"componentId":"com.ibm.team.repository.debug","implementationClass":"com.ibm.team.repository.debug.snapshot.impl.CountersSnapshotProvider"},"value":null}],"name":"snapshotProvider","attributes":{},"value":null},{"children":[{"children":[],"name":"extensionService","attributes":{"componentId":"com.ibm.team.repository.debug","implementationClass":"com.ibm.team.repository.debug.snapshot.impl.MemoryMXBeanSnapshotProvider"},"value":null}],"name":"snapshotProvider","attributes":{},"value":null}],"namespaceIdentifier":"com.ibm.team.repository.debug","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.repository.debug","uniqueIdentifier":"com.ibm.team.repository.debug.snapshotProvider"},{"extensions":[{"configurationElements":[{"children":[],"name":"buildContributionProvider","attributes":{"name":"Activities","id":"com.ibm.team.build.web.ui.internal.editors.result.activity.ActivitiesProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.activity.ActivitiesProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Compilation","id":"com.ibm.team.build.web.ui.internal.editors.result.compilation.CompilationProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.compilation.CompilationProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Tests","id":"com.ibm.team.build.web.ui.internal.editors.result.test.TestProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.junit.JUnitProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Downloads","id":"com.ibm.team.build.web.ui.internal.editors.result.download.DownloadsProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.download.DownloadsProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"External Links","id":"com.ibm.team.build.web.ui.internal.editors.result.link.LinksProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.link.LinksProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Logs","id":"com.ibm.team.build.web.ui.internal.editors.result.log.LogsProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.log.LogsProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Work Items","id":"com.ibm.team.build.web.ui.internal.editors.result.workitem.WorkItemsProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.workitem.WorkItemsProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Properties","id":"com.ibm.team.build.web.ui.internal.editors.result.properties.PropertiesProvider","class":"com.ibm.team.build.web.ui.internal.editors.result.properties.PropertiesProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Changes","id":"com.ibm.team.build.web.ui.internal.scm.ChangeContributionProvider","class":"com.ibm.team.build.web.ui.internal.scm.ChangeContributionProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Workspace","id":"com.ibm.team.build.web.ui.internal.scm.WorkspaceContributionProvider","class":"com.ibm.team.build.web.ui.internal.scm.WorkspaceContributionProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Post-build Deliver Target","id":"com.ibm.team.build.web.ui.internal.scm.AutoDeliverTargetContributionProvider","class":"com.ibm.team.build.web.ui.internal.scm.AutoDeliverTargetContributionProvider"},"value":null},{"children":[],"name":"buildContributionProvider","attributes":{"name":"Snapshot","id":"com.ibm.team.build.web.ui.internal.scm.SnapshotContributionProvider","class":"com.ibm.team.build.web.ui.internal.scm.SnapshotContributionProvider"},"value":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":"com.ibm.team.build.web.buildContributionProviders"},{"extensions":[{"configurationElements":[{"children":[],"name":"buildPropertyEditor","attributes":{"name":"Repository Workspace","id":"com.ibm.team.scm.property.workspace","class":"com.ibm.team.build.web.ui.internal.properties.workspace.WorkspacePropertyEditor"},"value":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":"com.ibm.team.build.web.buildPropertyEditors"},{"extensions":[{"configurationElements":[{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Schedule","configurationElementId":"com.ibm.team.build.schedule","class":"com.ibm.team.build.web.ui.internal.editors.definition.schedule.ScheduleConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Ant","configurationElementId":"com.ibm.team.build.ant","class":"com.ibm.team.build.web.ui.internal.editors.definition.ant.AntConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Jazz Source Control","configurationElementId":"com.ibm.team.build.jazzscm","class":"com.ibm.team.build.web.ui.internal.editors.definition.jazzscm.JazzScmConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Properties","configurationElementId":"com.ibm.team.build.properties","class":"com.ibm.team.build.web.ui.internal.editors.definition.properties.PropertiesConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Microsoft Build","configurationElementId":"com.ibm.team.build.msbuild","class":"com.ibm.team.build.web.ui.internal.editors.definition.msBuild.MicrosoftBuildConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"NUnit Configuration","configurationElementId":"com.ibm.team.build.nunit.config","class":"com.ibm.team.build.web.ui.internal.editors.definition.nUnit.NUnitConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"MSTest Configuration","configurationElementId":"com.ibm.team.build.mstest.config","class":"com.ibm.team.build.web.ui.internal.editors.definition.msTest.MSTestConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"VSTest Configuration","configurationElementId":"com.ibm.team.build.vstest.config","class":"com.ibm.team.build.web.ui.internal.editors.definition.vsTest.VSTestConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Build Forge","configurationElementId":"com.ibm.rational.connector.buildforge","class":"com.ibm.team.build.web.ui.internal.editors.definition.bfConnector.BuildForgeConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Maven","configurationElementId":"com.ibm.team.build.maven","class":"com.ibm.team.build.web.ui.internal.editors.definition.maven.MavenConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Pre-Build Command Line","configurationElementId":"com.ibm.rational.buildforge.buildagent.precmdline","class":"com.ibm.team.build.web.ui.internal.editors.definition.preBuildCmdLine.HighPerformanceAgentPreCommandLineConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Build Command Line","configurationElementId":"com.ibm.rational.buildforge.buildagent.cmdline","class":"com.ibm.team.build.web.ui.internal.editors.definition.buildCmdLine.HighPerformanceAgentCommandLineConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Post-Build Command Line","configurationElementId":"com.ibm.rational.buildforge.buildagent.postcmdline","class":"com.ibm.team.build.web.ui.internal.editors.definition.postBuildCmdLine.HighPerformanceAgentPostCommandLineConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Command Line","configurationElementId":"com.ibm.team.build.cmdline","class":"com.ibm.team.build.web.ui.internal.editors.definition.cmdLine.CommandLineConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"ECJ Publishing","configurationElementId":"com.ibm.team.build.jdt.publishing","class":"com.ibm.team.build.web.ui.internal.editors.definition.ecjPublishing.JdtPublishingConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"JUnit Publishing","configurationElementId":"com.ibm.team.build.junit.publishing","class":"com.ibm.team.build.web.ui.internal.editors.definition.junitPublishing.JUnitPublishingConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Email Notification","configurationElementId":"com.ibm.team.build.email","class":"com.ibm.team.build.web.ui.internal.editors.definition.emailNotification.NotificationConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Post-build Deliver","configurationElementId":"com.ibm.team.build.autoDeliver","class":"com.ibm.team.build.web.ui.internal.editors.definition.postBuildDeliver.AutoDeliverConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Hudson/Jenkins","configurationElementId":"com.ibm.rational.connector.hudson","class":"com.ibm.team.build.web.ui.internal.editors.definition.hudson.HudsonConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Post-build Deploy","configurationElementId":"com.ibm.team.build.udeploy","class":"com.ibm.team.build.web.ui.internal.editors.definition.postBuildDeploy.UDeployConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildDefinitionConfigurationElementEditorProvider","attributes":{"name":"Overview","configurationElementId":"com.ibm.team.build.general","class":"com.ibm.team.build.web.ui.internal.editors.definition.overview.GeneralConfigurationEditorProvider"},"value":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":"com.ibm.team.build.web.buildDefinitionConfigurationElementEditorProviders"},{"extensions":[{"configurationElements":[{"children":[],"name":"buildEngineConfigurationElementEditorProvider","attributes":{"name":"Build Agent","configurationElementId":"com.ibm.rational.buildforge.buildagent","class":"com.ibm.team.build.web.ui.internal.editors.engine.buildagent.HighPerformanceAgentConfigurationEditorProvider"},"value":null},{"children":[],"name":"buildEngineConfigurationElementEditorProvider","attributes":{"name":"Build Forge","configurationElementId":"com.ibm.rational.connector.buildforge.engine","class":"com.ibm.team.build.web.ui.internal.editors.engine.buildforge.BuildForgeEngineConfigurationElementEditorProvider"},"value":null},{"children":[],"name":"buildEngineConfigurationElementEditorProvider","attributes":{"name":"Hudson/Jenkins","configurationElementId":"com.ibm.rational.connector.hudson.engine","class":"com.ibm.team.build.web.ui.internal.editors.engine.hudson.HudsonEngineConfigurationElementEditorProvider"},"value":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":"com.ibm.team.build.web.buildEngineConfigurationElementEditorProviders"},{"extensions":[{"configurationElements":[{"children":[{"children":[{"children":[],"name":"action","attributes":{"implementation":"com.ibm.team.tpt.web.ui.impex.internal.plan.actions.ImportXMLAction","name":"Import Microsoft Project XML file","id":"planmode.importXML","iconUrl":"impex/internal/plan/images/mspimport.gif"},"value":null},{"children":[],"name":"action","attributes":{"implementation":"com.ibm.team.tpt.web.ui.impex.internal.plan.actions.ExportPlanAction","name":"Export Plan to XML file","id":"planmode.exportXML","iconUrl":"impex/internal/plan/images/mspexport.gif"},"value":null},{"children":[],"name":"separator","attributes":{"id":"com.ibm.team.tpt.web.ui.xmlIntegration.end"},"value":null}],"name":"actionGroup","attributes":{"path":""},"value":null}],"name":"toolBarContribution","attributes":{"toolBarId":"com.ibm.team.apt.web.ui.internal.planEditor","name":"Adds actions to import and export XML plan definitions","id":"com.ibm.team.tpt.web.ui.impex.xmlIntegration"},"value":null}],"namespaceIdentifier":"com.ibm.team.tpt.web.ui","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.rtc.foundation.web.ui","uniqueIdentifier":"com.ibm.team.rtc.foundation.web.ui.toolBars"},{"extensions":[],"namespaceIdentifier":"com.ibm.team.rtc.foundation.web.ui","uniqueIdentifier":"com.ibm.team.rtc.foundation.web.ui.clientSideAttribute"},{"extensions":[{"configurationElements":[{"children":[],"name":"application","attributes":{"statusHandler":"com.ibm.team.repository.web.internal.resource.RedirectStatusHandler","jsclass":"com.ibm.team.repository.web.ui.internal.admin.AdminApplication","icon":"/jazz.ico","alias":"/WEB-INF/admin","id":"com.ibm.team.repository.web.admin"},"value":null}],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"application","attributes":{"statusHandler":"net.jazz.web.app.internal.LoginPageStatusHandler","jsclass":"jazz.app.internal.LoginApplication","alias":"/auth/authrequired","id":"net.jazz.web.app.authrequired"},"value":null},{"children":[],"name":"application","attributes":{"statusHandler":"net.jazz.web.app.internal.LoginPageStatusHandler","jsclass":"jazz.app.internal.LoginApplication","alias":"/auth/authfailed","id":"net.jazz.web.app.authfailed"},"value":null},{"children":[],"name":"application","attributes":{"jsclass":"jazz.app.internal.LoginPopupApplication","alias":"/web/login","id":"net.jazz.web.app.loginPopup"},"value":null}],"namespaceIdentifier":"net.jazz.web.app","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"application","attributes":{"jsclass":"com.ibm.team.lpa.app.ui.internal.LifecycleProjectAdminUI","icon":"/ui/graphics/JazzFoundation/JazzIcon.ico","alias":"/WEB-INF/lpa","id":"com.ibm.team.lpa.web"},"value":null}],"namespaceIdentifier":"com.ibm.team.lpa.app","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"application","attributes":{"statusHandler":"com.ibm.team.repository.web.internal.resource.RedirectStatusHandler","internalPriority":"1","jsclass":"com.ibm.team.app.web.internal.AdminApplication","icon":"/graphics/AdminApplication/icons/jazz.ico","alias":"/WEB-INF/admin","id":"com.ibm.team.app.web.admin"},"value":null}],"namespaceIdentifier":"com.ibm.team.app.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"application","attributes":{"jsclass":"com.ibm.team.rtc.web.ui.internal.RTCApplication","icon":"/ui/graphics/UICustomizations/RationalTeamConcert.ico","alias":"/WEB-INF/web","id":"com.ibm.team.rtc.web.rationalTeamConcertWeb"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"application","attributes":{"jsclass":"com.ibm.team.rtc.web.ui.internal.RTCApplication","icon":"/ui/graphics/UICustomizations/RationalTeamConcert.ico","alias":"/WEB-INF/web/projects","id":"com.ibm.team.rtc.web.rationalTeamConcert"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null}],"namespaceIdentifier":"net.jazz.ajax","uniqueIdentifier":"net.jazz.ajax.applications"},{"extensions":[{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository._defaultAction"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.manageUsers"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.searchUsers"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.manageArchivedUsers"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.searchArchivedUsers"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.editUser"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.editUserGroup"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.editArchivedUser"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.manageUserCALs"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.activeFloatingLicenses"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.manageUserGroups"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository._initAdminUI"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.repository.web.ui.internal.admin.users.UsersPage","defaultAction":"com.ibm.team.repository._defaultAction","searchProvider":"com.ibm.team.repository.web.ui.internal.admin.users.SearchProvider","name":"Users","id":"com.ibm.team.repository.users","removalPropertyId":"com.ibm.team.repository.admin.suppressPage","componentMenuWidget":"com.ibm.team.repository.web.ui.internal.admin.users.UsersComponentMenu"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.viewUserProfile"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.repository.web.ui.internal.admin.users.UserProfilePage","defaultAction":"com.ibm.team.repository.viewUserProfile","name":"User Profile","id":"com.ibm.team.repository.UserProfile"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.localversioning.ConfigurationExplorer"},"value":null},{"children":[],"name":"action","attributes":{"id":"lcm.configurations"},"value":null},{"children":[],"name":"action","attributes":{"id":"lcm.components"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.repository.web.configurationManagement.explorer.CmExplorerPage","defaultAction":"com.ibm.team.localversioning.ConfigurationExplorer","name":"Configuration Explorer","id":"com.ibm.team.repository.localVersioning.ConfigurationExplorer"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.localversioning.editStream"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.repository.web.configurationManagement.editors.CmStreamEditor","defaultAction":"com.ibm.team.localversioning.editStream","name":"Stream Editor","id":"com.ibm.team.localversioning.editStream"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.localversioning.editBaseline"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.repository.web.configurationManagement.editors.CmBaselineEditor","defaultAction":"com.ibm.team.localversioning.editBaseline","name":"Baseline Editor","id":"com.ibm.team.localversioning.editBaseline"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.localversioning.editChangeSet"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.repository.web.configurationManagement.editors.CmChangeSetEditor","defaultAction":"com.ibm.team.localversioning.editChangeSet","name":"Change Set Editor","id":"com.ibm.team.localversioning.editChangeSet"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.reports.diagnostics._defaultAction"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.repository.reports.diagnostics._defaultAction","widget":"com.ibm.team.repository.web.ui.internal.admin.report.ReportDiagnosticsPage","name":"TRS Feed Diagnostics","id":"com.ibm.team.repository.reports.diagnostics","removalPropertyId":"com.ibm.team.repository.service.hideReportDiagnosticPage"},"value":null}],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.adminHome"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.repository.admin.adminHome","widget":"com.ibm.team.repository.web.ui.internal.admin.server.AdminHome","name":"Home","id":"com.ibm.team.repository.home","removalPropertyId":"com.ibm.team.repository.service.hidePagesWebUIInitializationDataService"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin._defaultAction"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.viewCounters"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.componentStatus"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.activeServices"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.floatingLicenseUsage"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.floatingLicenseReports"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.serverStatus"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.statistics"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.configureMailSettings"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.configureDatabaseConnection"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.configureFeedSettings"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.configureTheming"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.configureAdvanced"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.liveUpdate"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.configureOAuth"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.friends"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.manageLicenses"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.reloadLoggingSettings"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.provisionStatus"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.flushCaches"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.serverReset"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.manageTokens"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.registeredApplications"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.proxyConfiguration"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.serverDiagnostics"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.clusterNodes"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.systemAlerts"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.toggleDevMode"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.toggleWebUIDevMode"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.repository.admin.serviceability"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.repository.web.ui.internal.admin.server.ServerPage","defaultAction":"com.ibm.team.repository.admin._defaultAction","name":"Server","id":"com.ibm.team.repository.server","removalPropertyId":"com.ibm.team.repository.admin.suppressPage"},"value":null}],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.web._listProjects"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.process.web.ui.internal.ProjectAreaListPage","defaultAction":"com.ibm.team.process.web._listProjects","name":"Project Areas","id":"com.ibm.team.process.projectAreaList"},"value":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process._projectAreasDefaultAction"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.manageProjectAreas"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.manageArchivedProjectAreas"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.editProjectArea"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.editArchivedProjectArea"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.editTeamArea"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.usersInProjectArea"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.splitProjectAreas"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.serverSplitResults"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.process._projectAreasDefaultAction","widget":"com.ibm.team.process.web.ui.internal.admin.projects.ProjectAreaManagementPage","name":"Project Areas","id":"com.ibm.team.process.ProjectAreaManagement","removalPropertyId":"com.ibm.team.process.service.hidePagesWebUIInitializationDataService","componentMenuWidget":"com.ibm.team.process.web.ui.internal.admin.projects.ProjectAreaManagementMenu"},"value":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process._processTemplatesDefaultAction"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.manageTemplates"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.templateAction"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.process._processTemplatesDefaultAction","widget":"com.ibm.team.process.web.ui.internal.admin.process_templates.ProcessTemplateManagementPage","name":"Templates","id":"com.ibm.team.process.ProcessTemplateManagement","removalPropertyId":"com.ibm.team.process.service.hidePagesWebUIInitializationDataService"},"value":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.process.manageAccessGroups"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.process.manageAccessGroups","widget":"com.ibm.team.process.web.ui.internal.admin.accessgroup.AccessGroupManagementPage","name":"Access Groups","id":"com.ibm.team.process.AccessGroupManagement","removalPropertyId":"com.ibm.team.process.service.hideAccessGroupManagement"},"value":null}],"namespaceIdentifier":"com.ibm.team.process.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"resourcePattern","attributes":{"pattern":"/dashboards"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.dashboard.viewDefaultPersonalDashboard"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.dashboard.viewDefaultPersonalDashboard","widget":"com.ibm.team.dashboard.web.ui.internal.PersonalDashboardPage","searchProvider":"com.ibm.team.dashboard.web.ui.internal.PersonalSearchProvider","name":"Personal Dashboards","id":"com.ibm.team.dashboard.personal","componentMenuWidget":"com.ibm.team.dashboard.web.ui.internal.PersonalDashboardComponentMenu"},"value":null},{"children":[{"children":[],"name":"resourcePattern","attributes":{"pattern":"/dashboards/all"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.dashboard.viewAllShared"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.dashboard.viewAllShared","widget":"com.ibm.team.dashboard.web.ui.internal.AllSharedPage","name":"All Shared","id":"com.ibm.team.dashboard.AllShared"},"value":null}],"namespaceIdentifier":"com.ibm.team.dashboard.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.defaultAction"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.showAdditionalTasks"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.reportStudio"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.queryStudio"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.viewQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.viewReport"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.getMyQueries"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.getSharedQueries"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.admin"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.viewWorkItems"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.newReport"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.editTemplate"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.editCustomTemplate"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.editFolder"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.editReport"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.deployNewTemplates"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.viewAllReports"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.viewAllReportTemplates"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.authorCustomReport"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reports.viewRunningReports"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.reports.web.ui.internal.ReportsView","defaultAction":"com.ibm.team.reports.defaultAction","name":"Reports","id":"com.ibm.team.reports","componentMenuWidget":"com.ibm.team.reports.web.ui.internal.ReportsComponentMenu"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reportsManagement._defaultAction"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reportsManagement.etlConfig"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reportsManagement.reportDownloads"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reportsManagement.configureDataWarehouseConnection"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reportsManagement.diagnostics"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reportsManagement.configureCustomReportsConnection"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.reportsManagement.runningReports"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.reportsManagement._defaultAction","widget":"com.ibm.team.reports.web.ui.internal.ReportsManagementPage","name":"Reports","id":"com.ibm.team.reports.reportsManagementPage","removalPropertyId":"com.ibm.team.repository.admin.suppressPage"},"value":null}],"namespaceIdentifier":"com.ibm.team.reports.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.app.viewWelcome"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.app.projectAction"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.app.web.internal.welcome.WelcomePage","defaultAction":"com.ibm.team.app.viewWelcome","name":"Welcome Page","id":"com.ibm.team.app.Welcome"},"value":null}],"namespaceIdentifier":"com.ibm.team.app.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.rmm.designs._default"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.rmm.designs.welcome"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.rmm.designs.explorer"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.rmm.designs.viewResource"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.rmm.designs.viewDiagram"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.rmm.designs.search"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.rmm.designs.queries"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.rmm.designs.welcome","widget":"com.ibm.team.rmm.web.ui.internal.pages.MainDesignsPage","name":"Designs","id":"com.ibm.team.rmm.designs","removalPropertyId":"com.ibm.team.rmm.services.hideAMWebPages","componentMenuWidget":"com.ibm.team.rmm.web.ui.internal.pages.DesignsMenu"},"value":null}],"namespaceIdentifier":"com.ibm.team.rmm.web.ui","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.apt._showDefaultView"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.apt.welcome"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.apt.search"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.apt.createPlan"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.apt.viewPlan"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.apt.web.ui.internal.page.PlanningPageMain","defaultAction":"com.ibm.team.apt._showDefaultView","searchProvider":"com.ibm.team.apt.web.ui.internal.page.PlanningSearchProvider","name":"Plans","id":"com.ibm.team.apt","componentMenuWidget":"com.ibm.team.apt.web.ui.internal.page.LazyPlanningComponentMenu"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.apt.showQp"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.apt.web.ui.internal.page.QpPage","defaultAction":"com.ibm.team.apt.showQp","name":"Quick Planner","id":"com.ibm.team.qpNext"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.apt.showProgramBoard"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.apt.web.ui.internal.page.DependencyBoardPage","defaultAction":"com.ibm.team.apt.showProgramBoard","name":"Program Board","id":"com.ibm.team.dependencyBoard"},"value":null}],"namespaceIdentifier":"com.ibm.team.apt.web.ui","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.viewDefault"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.viewDefinitionList"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.viewDefinition"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.viewResult"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.viewBuildQueue"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.viewBuildEngines"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.requestBuild"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.newBuildDefinition"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.newBuildEngine"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.viewEngineResults"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.editDefinition"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.build.editEngine"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.build.viewDefault","widget":"com.ibm.team.build.web.ui.internal.BuildPage","name":"Builds","id":"com.ibm.team.build","componentMenuWidget":"com.ibm.team.build.web.ui.internal.BuildComponentMenu"},"value":null}],"namespaceIdentifier":"com.ibm.team.build.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.welcome"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.showStreams"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.showWorkspaces"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.showLocks"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.advancedSearch"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.locateChangeSet"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.runSearch"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.browseStream"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.browseWorkspace"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.browseSnapshot"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.browseBaseline"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.showTeamChanges"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.browseElement"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.createStream"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.createWorkspace"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.viewComponent"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.viewComponentHistory"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.viewItemHistory"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.viewChangeSet"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.viewChangeSetItem"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.compareContexts"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.openCodeReview"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.scm.test"},"value":null},{"children":[],"name":"applicationScope","attributes":{"id":"com.ibm.team.process.web.projectArea"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.scm.welcome","widget":"com.ibm.team.scm.web.ui.internal.page.ScmPageView","searchProvider":"com.ibm.team.scm.web.ui.internal.view.search.ScmSearchProvider","name":"Source Control","id":"com.ibm.team.scm","componentMenuWidget":"com.ibm.team.scm.web.ui.internal.navigation.ScmComponentMenu"},"value":null}],"namespaceIdentifier":"com.ibm.team.scm.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.dashboard.viewDashboard"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.dashboard.viewAllDashboards"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.dashboard.viewDefaultDashboard"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.dashboard.viewDashboard","widget":"com.ibm.team.dashboard.web.ui.ProjectDashboardPage","searchProvider":"com.ibm.team.dashboard.web.ui.ProjectDashboardSearchProvider","name":"Project Dashboards","id":"com.ibm.team.dashboard.rtc","componentMenuWidget":"com.ibm.team.dashboard.web.ui.ProjectDashboardComponentMenu"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"applicationScope","attributes":{"id":"com.ibm.team.process.web.projectArea"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem._showDefaultView"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.search"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.simpleQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.similarityQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.runSavedQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.runNewQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.newQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.editQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.runDefaultQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.showTemplateQuery"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.newWorkItem"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.newWorkItemSet"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.viewQueries"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.viewWorkItem"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.viewWelcome"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.workitem.viewImporter"},"value":null}],"name":"page","attributes":{"widget":"com.ibm.team.workitem.web.ui.internal.page.WorkItemPageView","defaultAction":"com.ibm.team.workitem._showDefaultView","searchProvider":"com.ibm.team.workitem.web.ui.internal.page.SearchProvider","name":"Work Items","id":"com.ibm.team.workitem","componentMenuWidget":"com.ibm.team.workitem.web.ui.internal.page.LazyWorkItemsComponentMenu"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"applicationScope","attributes":{"id":"com.ibm.team.process.web.projectArea"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.git.web.ui.action.view_welcome"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.git.web.ui.action.show_git_repository_editor"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.git.web.ui.action.show_git_ref_editor"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.git.web.ui.action.browse_registered_git_repositories"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.git.web.ui.action.authorize_git_repository"},"value":null},{"children":[],"name":"action","attributes":{"id":"com.ibm.team.git.web.ui.action.show_git_commit_details"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.git.web.ui.action.view_welcome","widget":"com.ibm.team.git.web.ui.internal.page.GitPageView","name":"","id":"com.ibm.team.git"},"value":null},{"children":[{"children":[],"name":"action","attributes":{"id":"com.ibm.team.git.admin.diagnostics.action._defaultAction"},"value":null}],"name":"page","attributes":{"defaultAction":"com.ibm.team.git.admin.diagnostics.action._defaultAction","widget":"com.ibm.team.git.web.ui.internal.page.view.GitDiagnosticsPageView","name":"Git Integration Diagnostics","id":"com.ibm.team.git.admin.diagnostics","removalPropertyId":"com.ibm.team.repository.projectAreaAdmin.suppressPage"},"value":null}],"namespaceIdentifier":"com.ibm.team.git.web","uniqueIdentifier":null}],"namespaceIdentifier":"net.jazz.ajax","uniqueIdentifier":"net.jazz.ajax.pages"},{"extensions":[{"configurationElements":[{"children":[{"children":[],"name":"page","attributes":{"id":"com.ibm.team.repository.home"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.repository.server"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.repository.users"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.ProjectAreaManagement"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.ProcessTemplateManagement"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.CrossAppEventManagement"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.reports.reportsManagementPage"},"value":null}],"name":"application","attributes":{"id":"com.ibm.team.repository.web.admin"},"value":null}],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"page","attributes":{"id":"com.ibm.team.repository.home"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.repository.server"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.repository.users"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.ProjectAreaManagement"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.ProcessTemplateManagement"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.AccessGroupManagement"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.CrossAppEventManagement"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.reports.reportsManagementPage"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.repository.reports.diagnostics"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.rqm.admin.manageSkippedResources"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.rdm.fronting.server.web.trs.diagnostics"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.rdm.fronting.server.web.Debug"},"value":null}],"name":"application","attributes":{"id":"com.ibm.team.app.web.admin"},"value":null}],"namespaceIdentifier":"com.ibm.team.app.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"page","attributes":{"defaultSearchScope":"ID_ALL","defaultSearch":"true","id":"com.ibm.team.rmm.designs"},"value":null}],"name":"application","attributes":{"id":"com.ibm.team.rmm.web.product"},"value":null}],"namespaceIdentifier":"com.ibm.team.rmm.web.ui","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"page","attributes":{"id":"com.ibm.team.process.projectAreaList"},"value":null}],"name":"application","attributes":{"id":"com.ibm.team.rtc.web.rationalTeamConcertWeb"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"page","attributes":{"id":"com.ibm.team.dashboard.rtc"},"value":null},{"children":[],"name":"page","attributes":{"defaultSearch":"true","id":"com.ibm.team.workitem"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.apt"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.scm"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.build"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.reports"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.rational.cm"},"value":null},{"children":[],"name":"page","attributes":{"id":"com.ibm.team.rmm.designs"},"value":null}],"name":"application","attributes":{"id":"com.ibm.team.rtc.web.rationalTeamConcert"},"value":null}],"namespaceIdentifier":"com.ibm.team.rtc.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"page","attributes":{"id":"com.ibm.team.git.admin.diagnostics"},"value":null}],"name":"application","attributes":{"id":"com.ibm.team.app.web.admin"},"value":null}],"namespaceIdentifier":"com.ibm.team.git.web","uniqueIdentifier":null}],"namespaceIdentifier":"net.jazz.ajax","uniqueIdentifier":"net.jazz.ajax.applicationPageBindings"},{"extensions":[{"configurationElements":[{"children":[],"name":"bootstrapProperties","attributes":{"id":"com.ibm.team.repository.web.bootstrapProperties","class":"com.ibm.team.repository.web.internal.discovery.WebUIBootstrapProperties"},"value":null}],"namespaceIdentifier":"com.ibm.team.repository.web","uniqueIdentifier":"com.ibm.team.repository.web.bootstrapProperties"},{"configurationElements":[{"children":[],"name":"bootstrapProperties","attributes":{"id":"com.ibm.team.rtc.bootstrapProperties","priority":"10","class":"com.ibm.team.calm.foundation.server.internal.RTCWebUIBootstrapProperties"},"value":null}],"namespaceIdentifier":"com.ibm.team.jfs.discovery","uniqueIdentifier":"com.ibm.team.jfs.discovery.bootstrapProperties"}],"namespaceIdentifier":"net.jazz.ajax","uniqueIdentifier":"net.jazz.ajax.bootstrapProperties"},{"extensions":[],"namespaceIdentifier":"net.jazz.ajax","uniqueIdentifier":"net.jazz.ajax.ajaxModuleAliases"},{"extensions":[],"namespaceIdentifier":"net.jazz.web.ensemble","uniqueIdentifier":"net.jazz.web.ensemble.catalogEntries"},{"extensions":[{"configurationElements":[{"children":[],"name":"widgetSystem","attributes":{"widgetFactory":"com.ibm.team.dashboard.web.ui.internal.ViewletAdapterFactory","type":"com.ibm.team.dashboard.viewlet"},"value":null},{"children":[],"name":"widgetSystem","attributes":{"widgetFactory":"com.ibm.team.dashboard.web.ui.internal.GadgetAdapterFactory","type":"org.opensocial.gadget"},"value":null},{"children":[],"name":"widgetSystem","attributes":{"widgetCatalogClass":"com.ibm.team.dashboard.internal.web.ViewletCatalog","type":"com.ibm.team.dashboard.viewlet"},"value":null}],"namespaceIdentifier":"com.ibm.team.dashboard.web","uniqueIdentifier":null}],"namespaceIdentifier":"net.jazz.web.ensemble","uniqueIdentifier":"net.jazz.web.ensemble.widgetSystems"},{"extensions":[{"configurationElements":[{"children":[{"children":[],"name":"gadget","attributes":{"location":"resources/gadgets/ContextTester.xml"},"value":null}],"name":"application","attributes":{"url":"/web/jazz.configurationSDK/ContextTester.xml"},"value":null}],"namespaceIdentifier":"com.ibm.team.configuration.web","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"gadget","attributes":{"location":"resources/ui/internal/WorkItemsGadget.xml"},"value":null}],"name":"application","attributes":{"url":"/gadgets/com.ibm.team.workitem/WorkItemList.xml"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.viewlets.web","uniqueIdentifier":null}],"namespaceIdentifier":"net.jazz.web.opensocial","uniqueIdentifier":"net.jazz.web.opensocial.gadgets"},{"extensions":[{"configurationElements":[{"children":[{"children":[],"name":"javascript","attributes":{"path":"features/configurationContext.js","scope":"gadget"},"value":null}],"name":"feature","attributes":{"id":"configurationContext"},"value":null}],"namespaceIdentifier":"com.ibm.team.configuration.web","uniqueIdentifier":null}],"namespaceIdentifier":"net.jazz.web.opensocial","uniqueIdentifier":"net.jazz.web.opensocial.features"},{"extensions":[{"configurationElements":[{"children":[],"name":"iterationPlanTab","attributes":{"widgetId":"com.ibm.team.reports.apt.web.ui.internal.TabCharts","name":"Charts","id":"com.ibm.team.reports.web.charts"},"value":null}],"namespaceIdentifier":"com.ibm.team.reports.apt.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.apt.web.ui","uniqueIdentifier":"com.ibm.team.apt.web.ui.iterationPlanTab"},{"extensions":[{"configurationElements":[{"children":[{"children":[{"children":[{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IRepositoryItemService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.enterprise.packaging.common.emf.IPackageEMFService"},"value":null}],"name":"prerequisites","attributes":{},"value":null}],"name":"extensionService","attributes":{"componentId":"com.ibm.team.enterprise.packaging","implementationClass":"com.ibm.team.enterprise.packaging.service.MarkPackageDeletedParticipant"},"value":null}],"name":"buildResultDeleteParticipant","attributes":{"id":"com.ibm.team.enterprise.packaging.service.buildResultDeleteParticipant"},"value":null}],"namespaceIdentifier":"com.ibm.team.enterprise.packaging.service","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[{"children":[{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IRepositoryItemService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IServerQueryService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IContentService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.enterprise.build.buildmap.compatability.maintenance.IBuildMapMaintenanceService"},"value":null}],"name":"prerequisites","attributes":{},"value":null}],"name":"extensionService","attributes":{"componentId":"com.ibm.team.enterprise.build.buildmap","implementationClass":"com.ibm.team.enterprise.build.buildmap.compatability.maintenance.BuildMapBuildResultDeleteParticipant"},"value":null}],"name":"buildResultDeleteParticipant","attributes":{"id":"com.ibm.team.enterprise.build.buildmap.maintenance.BuildMapBuildResultDeleteParticipant"},"value":null}],"namespaceIdentifier":"com.ibm.team.enterprise.build.buildmap.compatibility","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[{"children":[{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IRepositoryItemService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IServerQueryService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IDistributedOperationService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.jfs.app.distributed.IMqttService"},"value":null}],"name":"prerequisites","attributes":{},"value":null}],"name":"extensionService","attributes":{"componentId":"com.ibm.team.build","implementationClass":"com.ibm.team.build.internal.service.delete.participants.CompileContributionDeleteParticipant"},"value":null}],"name":"buildResultDeleteParticipant","attributes":{"id":"com.ibm.team.build.internal.service.delete.participants.CompileContributionDeleteParticipant"},"value":null},{"children":[{"children":[{"children":[{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IRepositoryItemService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.repository.service.IDistributedOperationService"},"value":null},{"children":[],"name":"requiredService","attributes":{"interface":"com.ibm.team.jfs.app.distributed.IMqttService"},"value":null}],"name":"prerequisites","attributes":{},"value":null}],"name":"extensionService","attributes":{"componentId":"com.ibm.team.build","implementationClass":"com.ibm.team.build.internal.service.delete.participants.JUnitTestSuiteContributionDeleteParticipant"},"value":null}],"name":"buildResultDeleteParticipant","attributes":{"id":"com.ibm.team.build.internal.service.delete.participants.JUnitTestSuiteContributionDeleteParticipant"},"value":null}],"namespaceIdentifier":"com.ibm.team.build.service","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.build.service","uniqueIdentifier":"com.ibm.team.build.service.buildResultDeleteParticipants"},{"extensions":[{"configurationElements":[{"children":[],"name":"action","attributes":{"iconDisabledUri":"ui/internal/view/editor/images/print_disabled.gif","iconContext":"com.ibm.team.workitem.web","action":"com.ibm.team.workitem.web.ui.internal.view.editor.PrintWorkItemAction","id":"com.ibm.team.workitem.web.PrintAction","label":"Print","iconUri":"ui/internal/view/editor/images/print.gif"},"value":null},{"children":[],"name":"action","attributes":{"iconDisabledUri":"ui/internal/view/common/images/delete_disabled.gif","iconContext":"com.ibm.team.workitem.web","action":"com.ibm.team.workitem.web.ui2.internal.action.DeleteWorkItemsAction","id":"com.ibm.team.workitem.web.DeleteWorkItemAction","label":"Delete Work Item","iconUri":"ui/internal/view/common/images/delete.gif"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":"com.ibm.team.workitem.web.editorToolbarAction"},{"extensions":[{"configurationElements":[{"children":[{"children":[],"name":"parameter","attributes":{"value":"com.ibm.team.apt.web.ui.tab_plan_items_web","key":"uaKey"},"value":null},{"children":[],"name":"parameter","attributes":{"value":"true","key":"planModel.prefetch"},"value":null}],"name":"staticTab","attributes":{"implementation":"com.ibm.team.apt.web.ui.internal.editor.items.PlannedItemsTab","name":"Planned Items","id":"com.ibm.team.apt.web.ui.plannedItems","priority":"10"},"value":null}],"namespaceIdentifier":"com.ibm.team.apt.web.ui","uniqueIdentifier":null},{"configurationElements":[{"children":[{"children":[],"name":"parameter","attributes":{"value":"com.ibm.team.apt.web.ui.tab_plan_links_web","key":"uaKey"},"value":null}],"name":"staticTab","attributes":{"implementation":"com.ibm.team.apt.web.ui.internal.editor.items.PlanLinksTab","name":"Links","id":"com.ibm.team.apt.web.ui.planlinks","priority":"20"},"value":null},{"children":[{"children":[],"name":"parameter","attributes":{"value":"com.ibm.team.apt.web.ui.tab_plan_snapshots_web","key":"uaKey"},"value":null}],"name":"staticTab","attributes":{"implementation":"com.ibm.team.apt.web.ui.internal.editor.items.SnapshotsTab","name":"Snapshots","id":"com.ibm.team.apt.web.ui.snapshots","priority":"30"},"value":null},{"children":[{"children":[],"name":"parameter","attributes":{"value":"com.ibm.team.apt.web.ui.tab_plan_plandashboard_web","key":"uaKey"},"value":null}],"name":"staticTab","attributes":{"implementation":"com.ibm.team.apt.web.ui.internal.editor.items.PlanDashboardTab","name":"Dashboard","id":"com.ibm.team.apt.web.ui.plandashboard","priority":"50"},"value":null}],"namespaceIdentifier":"com.ibm.team.apt.web.ui","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.apt.web.ui","uniqueIdentifier":"com.ibm.team.apt.web.ui.planEditorTab"},{"extensions":[],"namespaceIdentifier":"com.ibm.team.build.service","uniqueIdentifier":"com.ibm.team.build.service.oslcResourceRepresentations"},{"extensions":[{"configurationElements":[{"children":[],"name":"itemPicker","attributes":{"itemType":"com.ibm.team.workitem.Category","displayName":"Category","id":"com.ibm.team.workitem.web.ui.internal.editor.itempicker.CategoryItemPicker","class":"com.ibm.team.workitem.web.ui.internal.view.editor.itempicker.PickerDelegate"},"value":null},{"children":[],"name":"itemPicker","attributes":{"itemType":"com.ibm.team.repository.Contributor","displayName":"Contributor","id":"com.ibm.team.workitem.web.ui.internal.editor.itempicker.ContributorPicker","class":"com.ibm.team.workitem.web.ui.internal.view.editor.itempicker.PickerDelegate"},"value":null},{"children":[],"name":"itemPicker","attributes":{"itemType":"com.ibm.team.process.ProcessArea","displayName":"Process Area","id":"com.ibm.team.workitem.web.ui.internal.editor.itempicker.ProcessAreaItemPicker","class":"com.ibm.team.workitem.web.ui.internal.view.editor.itempicker.PickerDelegate"},"value":null},{"children":[],"name":"itemPicker","attributes":{"itemType":"com.ibm.team.process.TeamArea","displayName":"Team Area","id":"com.ibm.team.workitem.web.ui.internal.editor.itempicker.TeamAreaItemPicker","class":"com.ibm.team.workitem.web.ui.internal.view.editor.itempicker.PickerDelegate"},"value":null},{"children":[],"name":"itemPicker","attributes":{"itemType":"com.ibm.team.workitem.WorkItem","displayName":"Work Item","id":"com.ibm.team.workitem.web.ui.internal.editor.itempicker.SelectWorkitemPicker","class":"com.ibm.team.workitem.web.ui.internal.view.editor.itempicker.PickerDelegate"},"value":null},{"children":[],"name":"itemPicker","attributes":{"itemType":"com.ibm.team.process.Iteration","displayName":"Iteration","id":"com.ibm.team.workitem.web.ui.internal.editor.itempicker.TargetPicker","class":"com.ibm.team.workitem.web.ui.internal.view.editor.itempicker.PickerDelegate"},"value":null},{"children":[],"name":"itemPicker","attributes":{"itemType":"com.ibm.team.process.ProjectArea","displayName":"Project Area","id":"com.ibm.team.workitem.web.ui.internal.editor.itempicker.ProjectAreaPicker","class":"com.ibm.team.workitem.web.ui.internal.view.editor.itempicker.PickerDelegate"},"value":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.workitem.web","uniqueIdentifier":"com.ibm.team.workitem.web.itemPickers"},{"extensions":[{"configurationElements":[{"children":[{"children":[],"name":"extensionService","attributes":{"componentId":"com.ibm.team.enterprise.build.preprocess","implementationClass":"com.ibm.team.enterprise.internal.build.preprocess.service.EnterpriseBuildResultPruningParticipant"},"value":null}],"name":"buildResultPruningParticipant","attributes":{"id":"com.ibm.team.enterprise.build.preprocess.service.EnterpriseBuildResultPruningParticipant"},"value":null}],"namespaceIdentifier":"com.ibm.team.enterprise.build.preprocess.service","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.build.service","uniqueIdentifier":"com.ibm.team.build.service.buildResultPruningParticipants"},{"extensions":[{"configurationElements":[{"children":[],"name":"adminPage","attributes":{"visibility":"protected","widgetId":"com.ibm.team.reports.web.ui.internal.AdminViewer","name":"Administer Data Warehouse","id":"com.ibm.team.reports.admin.datawarehouse"},"value":null}],"namespaceIdentifier":"com.ibm.team.reports.web","uniqueIdentifier":null},{"configurationElements":[{"children":[],"name":"adminPage","attributes":{"visibility":"public","widgetId":"com.ibm.team.reports.scm.web.ui.internal.AdminViewer","name":"Administer SCM Snapshot ","id":"com.ibm.team.reports.admin.datawarehouse.scm"},"value":null}],"namespaceIdentifier":"com.ibm.team.reports.scm.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.reports.web","uniqueIdentifier":"com.ibm.team.reports.web.adminPage"},{"extensions":[{"configurationElements":[{"children":[],"name":"parameter","attributes":{"parameterType":"workItem","default":"false","widgetId":"com.ibm.team.reports.workitem.web.ui.internal.ReportParamWorkItem","id":"com.ibm.team.reports.parameter.workItem"},"value":null}],"namespaceIdentifier":"com.ibm.team.reports.workitem.web","uniqueIdentifier":null}],"namespaceIdentifier":"com.ibm.team.reports.web","uniqueIdentifier":"com.ibm.team.reports.web.parameter"}]};
net.jazz.ajax._translationVarData = {};

;dojo.provide("jazz.core.ConfigurationElement");
dojo.declare("jazz.core.ConfigurationElement",null,{getAttribute:function(_1){
var _2=this._attributes[_1];
if(typeof _2=="undefined"){
return null;
}
return _2;
},getAttributeNames:function(){
var _3=[];
for(var _4 in this._attributes){
_3.push(_4);
}
return _3;
},getChildren:function(){
return this._children;
},getName:function(){
return this._name;
},getValue:function(){
return this._value;
},toString:function(){
var _5="{";
var _6=this.getAttributeNames();
for(var i=0;i<_6.length;i++){
_5+=_6[i]+": "+this.getAttribute(_6[i]);
if(i<_6.length-1){
_5+=", ";
}
}
_5+="}";
var _7="[";
var _8=this.getChildren();
for(i=0;i<_8.length;i++){
_7+="{"+_8[i].toString()+"}";
if(i<_8.length-1){
_7+=", ";
}
}
_7+="]";
return "name: "+this.getName()+", value: "+this.getValue()+", attributes: "+_5+", children: "+_7;
},constructor:function(_9,_a,_b,_c,_d){
this._name=_9;
this._value=_a;
this._attributes=_b;
this._children=_c;
this._namespaceIdentifier=_d;
}});


;dojo.provide("jazz.core.Extension");
dojo.declare("jazz.core.Extension",null,{getConfigurationElements:function(){
return this._configElements;
},getNamespace:function(){
return this._namespaceIdentifier;
},getUniqueIdentifier:function(){
return this._uniqueIdentifier;
},toString:function(){
var _1="[";
var _2=this.getConfigurationElements();
for(var i=0;i<_2.length;i++){
_1+=_2[i].toString();
if(i<_2.length-1){
_1+=", ";
}
}
_1+="]";
return "namespace: "+this.getNamespace()+", uniqueIdentifier: "+this.getUniqueIdentifier()+", configurationElements: "+_1;
},constructor:function(_3,_4,_5){
this._uniqueIdentifier=_3;
this._namespaceIdentifier=_4;
this._configElements=_5;
}});


;dojo.provide("jazz.core.ExtensionPoint");
dojo.declare("jazz.core.ExtensionPoint",null,{getConfigurationElements:function(){
var _1=this.getExtensions();
var _2=[];
for(var i=0;i<_1.length;i++){
var _3=_1[i].getConfigurationElements;
for(var j=0;j<_3.length;j++){
_2.push(_3[j]);
}
}
return _2;
},getExtensions:function(){
return this._extensions;
},getNamespaceIdentifier:function(){
return this._namespaceIdentifier;
},getUniqueIdentifier:function(){
return this._uniqueIdentifier;
},toString:function(){
var _4="{";
var _5=this.getExtensions();
for(var i=0;i<_5.length;i++){
_4+=_5.toString();
if(i<_5.length-1){
_4+=", ";
}
}
_4+="}";
return "uniqueIdentifier: "+this.getUniqueIdentifier()+", namespaceIdentifier: "+this.getNamespaceIdentifier()+", extensions: "+_4;
},constructor:function(_6,_7,_8){
this._namespaceIdentifier=_6;
this._uniqueIdentifier=_7;
this._extensions=_8;
}});


;dojo.provide("jazz.core.ExtensionRegistry");








dojo.declare("jazz.core.ExtensionRegistry",null,{getExtensionPoint:function(_1){
return (this._extPtDictionary.containsKey(_1))?this._extPtDictionary.entry(_1).value:null;
},getExtensionPoints:function(){
return this._extPtDictionary.getValueList();
},toString:function(){
var _2=this.getExtensionPoints();
var _3="Extension Points: {";
for(var i=0;i<_2.length;i++){
_3+=_2[i].toString();
if(i!=(_2.length-1)){
_3+=", ";
}
}
return _3+"}";
},constructor:function(_4){
this._extPtDictionary=new dojox.collections.Dictionary();
var _5=jazz.core.ExtensionRegistryParser._parse(_4);
for(var i=0;i<_5.length;i++){
this._extPtDictionary.add(_5[i].getUniqueIdentifier(),_5[i]);
}
}});
jazz.core.ExtensionRegistryParser={_parse:function(_6){
var _7=_6.extensionPoints;
var _8=[];
for(var i=0;i<_7.length;i++){
_8.push(this._parseExtensionPoint(_7[i]));
}
return _8;
},_parseExtensionPoint:function(_9){
var _a=[];
var _b=_9.extensions;
for(var i=0;i<_b.length;i++){
_a.push(this._parseExtension(_b[i]));
}
return new jazz.core.ExtensionPoint(_9.namespaceIdentifier,_9.uniqueIdentifier,_a);
},_parseExtension:function(_c){
var _d=[];
var _e=_c.configurationElements;
for(var i=0;i<_e.length;i++){
_e[i].namespaceIdentifier=_c.namespaceIdentifier;
_d.push(this._parseConfigurationElement(_e[i]));
}
return new jazz.core.Extension(_c.uniqueIdentifier,_c.namespaceIdentifier,_d);
},_parseConfigurationElement:function(_f){
var _10=[];
for(var i=0;i<_f.children.length;i++){
_10.push(this._parseConfigurationElement(_f.children[i]));
}
return new jazz.core.ConfigurationElement(_f.name,_f.value,_f.attributes,_10,_f.namespaceIdentifier);
}};


;dojo.provide("jazz.core.RegistryFactory");




jazz.core.RegistryFactory={getRegistry:function(){
if(!this._theRegistry){
this.createRegistry();
}
return this._theRegistry;
},createRegistry:function(){
var _1=net.jazz.ajax._extensionRegistryData;
if(!_1){
throw new Error("Extension registry data not present");
}
this._theRegistry=new jazz.core.ExtensionRegistry(_1);
net.jazz.ajax._extensionRegistryData=null;
}};


;(function(){
dojo.provide("net.jazz.ajax.ui.internal.PageRegistry");




var _1=net.jazz.ajax.toolbox.lang.checkNotNull;
var _2,_3,_4;
var _5=net.jazz.ajax.ui.internal.PageRegistry={getPages:function(_6){
var _7=[];
var _8={};
if(_6){
dojo.forEach(_9(_4),function(_a){
_8[_a]=true;
});
}
dojo.forEach(_1e().getExtensions(),function(_b){
dojo.forEach(_b.getConfigurationElements(),function(_c){
if(_c.getName()!=="application"){
return;
}
var _d=_c.getAttribute("id");
if(_d==_4){
var _e=false,_f=false;
dojo.forEach(_c.getChildren(),function(_10){
if(_10.getName()!=="page"){
return;
}
var _11=_10.getAttribute("id");
var _12=_5.findPageWithId(_11);
if(_12!=null){
var _13=true;
if(_8[_11]){
_13=false;
}else{
if(_12.removalPropertyId!==null){
var _14=dojo.getObject(_12.removalPropertyId);
if(_14&&_14===true){
_13=false;
}
}
}
if(_13){
var _15=_10.getAttribute("default");
if(_15==="true"){
if(_e===true){
console.warn("A default page has already been set. Page with an id of ["+_11+"] will not be set as the default");
}else{
_e=true;
_12.isDefault=true;
}
}
var _16=_10.getAttribute("defaultSearch");
if(_16==="true"){
if(_f===true){
console.warn("A default search provider has already been set. The provider belonging to the page with an id of ["+_11+"] will not be set as the default.");
}else{
if(_12.searchProvider===null){
console.warn("The page with id ["+_11+"] has been marked as the default search provider, but it does not provider one. It will be ignored.");
}else{
_f=true;
_12.isDefaultSearch=true;
}
}
}
_12.defaultSearchScope=_10.getAttribute("defaultSearchScope");
_7.push(_12);
}
}
});
}
});
});
if(_2){
_7.sort(_2);
}
return _7;
},findPageWithId:function(id){
_1(id,"id");
var _17;
dojo.forEach(_18().getExtensions(),function(_19){
dojo.forEach(_19.getConfigurationElements(),function(_1a){
if(_1a.getAttribute("id")==id){
_17=_1b(_19,_1a);
}
});
});
return _17;
},isPageInCurrentApplication:function(_1c){
var _1d=false;
dojo.forEach(_1e().getExtensions(),function(_1f){
dojo.forEach(_1f.getConfigurationElements(),function(_20){
if(_1d||_20.getName()!=="application"){
return;
}
var _21=_20.getAttribute("id");
if(_21==_4){
dojo.forEach(_20.getChildren(),function(_22){
if(_22.getName()!=="page"){
return;
}
var id=_22.getAttribute("id");
if(id==_1c){
_1d=true;
return;
}
});
}
});
});
return _1d;
},getDefaultPage:function(){
if(_3){
var _23=_5.findPageWithId(_3);
if(_23){
return _23;
}
}
var _24=_5.getPages();
for(var i=0;i<_24.length;i++){
if(_24[i].isDefault===true){
return _24[i];
}
}
return _24[0];
},setDefaultPage:function(id){
_3=id;
},setApplicationId:function(id){
_4=id;
},setSortFunction:function(_25){
if(!dojo.isFunction(_25)){
throw new Error("PageRegistry#setSortFunction: argument is not a function");
}
_2=_25;
}};
var _26=jazz.core.RegistryFactory;
function _18(){
var _27=_26.getRegistry().getExtensionPoint("net.jazz.ajax.pages");
if(!_27){
throw new Error("Page extension point not found");
}
return _27;
};
function _1e(){
var _28=_26.getRegistry().getExtensionPoint("net.jazz.ajax.applicationPageBindings");
if(!_28){
throw new Error("Application Pages Binding extension point not found");
}
return _28;
};
function _9(_29){
if(!dojo.getObject("com.ibm.team.repository.web.suppressedPages")){
return [];
}
var sp=dojo.getObject("com.ibm.team.repository.web.suppressedPages");
var _2a=(typeof sp=="string")?dojo.fromJson(sp):sp;
var _2b="Invalid format for suppressed pages. Skipping";
if(!dojo.isObject(_2a)){
console.warn(_2b);
return [];
}
var _2c=_2a[_29];
if(!_2c){
return [];
}
var _2d=false;
if(!dojo.isArray(_2c)){
_2d=true;
}else{
for(var i=0;i<_2c.length;i++){
if(!dojo.isString(_2c[i])){
_2d=true;
break;
}
}
}
if(_2d){
console.warn(_2b);
return [];
}
return _2c;
};
function _1b(_2e,_2f){
_1(_2e,"extension");
_1(_2f,"configElement");
_1(_2e.getNamespace(),"extension namespace");
_1(_2f.getAttribute("id"),"page id");
_1(_2f.getAttribute("name"),"page name");
var _30={id:_2f.getAttribute("id"),name:_2f.getAttribute("name"),href:_2f.getAttribute("href"),widget:_2f.getAttribute("widget"),componentMenuWidget:_2f.getAttribute("componentMenuWidget"),defaultAction:_2f.getAttribute("defaultAction"),removalPropertyId:_2f.getAttribute("removalPropertyId"),searchProvider:_2f.getAttribute("searchProvider"),component:_2e.getNamespace(),getUri:function(){
return "#action=jazz.viewPage&id="+this.id;
},actions:[],isDefault:false,isDefaultSearch:false};
dojo.forEach(_2f.getChildren(),function(_31){
if(_2f.getName()!=="action"){
return;
}
_1(_31.id);
_1b.actions.push({});
});
return _30;
};
})();


;dojo.provide("com.ibm.team.repository.web.client.session.Session");






(function(){
var _1=net.jazz.ajax.toolbox.lang.checkNotNull;
var _2=net.jazz.ajax.toolbox.lang.checkNotEmpty;
var _3=com.ibm.team.repository.web.client.init.InitializationData;
function _4(){
_1(com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR,"com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR");
};
com.ibm.team.repository.web.client.session={init:function(_5){
_3._load(_5);
var _6=_3.get("com.ibm.team.repository.service.currentContributorInitializer");
dojo.setObject("com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR",_6?_6.currentContributor:false);
dojo.setObject("com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR_URI",_6?_6.currentContributorUri:false);
dojo.setObject("com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR_ROLES",_6?_6.currentContributorRoles:false);
var _7=_3.get("com.ibm.team.repository.service.configPropertyInitializer");
for(var _8 in _7){
var _9=_7[_8];
dojo.setObject(_8,_9);
}
var _a=_3.get("com.ibm.team.repository.service.serverInfoInitializer");
dojo.setObject("com.ibm.team.repository.server.mode",_a?_a.mode:false);
var _b=_3.get("com.ibm.team.repository.service.hideUserGroupAdminUIInitializationDataService");
if(_b){
_b.value=_b.value==="true"?true:false;
}
dojo.setObject("com.ibm.team.repository.hideUserGroupAdminUI",_b?_b.value:true);
var _c=_3.get("com.ibm.team.repository.service.securityOptionWebUIInitializer");
dojo.setObject("com.ibm.team.repository.service.isProjectAreaNameSecurityEnforced",_c?_c.projectAreaNameSecurityEnforced:true);
dojo.forEach(net.jazz.ajax.ui.internal.PageRegistry.getPages(),function(_d){
if(_d.removalPropertyId!=null){
var _e=_3.get(_d.removalPropertyId);
if(_e!=null&&_e.value!=null){
dojo.setObject(_d.removalPropertyId,_e.value);
}
}
});
},getAuthenticatedContributor:function(){
_4();
return com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR;
},getAuthenticatedContributorUri:function(){
return com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR_URI;
},isGuest:function(){
_4();
return com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR.itemId=="_OIi3MCDNEdu1A6FdF3RHyQ";
},isDefaultAdmin:function(){
_4();
return com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR.userId=="ADMIN";
},getAuthenticatedUserId:function(){
var _f=com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR;
if(_f){
return _f.userId;
}
var _10=com.ibm.team.repository.web.client.internal.AUTHENTICATED_USERID;
if(_10){
return _10;
}
return "UNKNOWN";
},getUserProfileLink:function(){
var _11=com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR;
if(!_11){
return null;
}
return "#action=com.ibm.team.repository.viewUserProfile&itemId="+_11.itemId;
}};
})();


;dojo.provide("com.ibm.jdojox.util.IllegalArgumentException");


(function(){
var _1=com.ibm.jdojo.lang.RuntimeException;
dojo.declare("com.ibm.jdojox.util.IllegalArgumentException",_1,{constructor:function(_2){
this.inherited(arguments,[_2]);
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.util.StorageException");


(function(){
var _1=com.ibm.jdojo.lang.RuntimeException;
dojo.declare("com.ibm.team.rtc.foundation.web.util.StorageException",_1,{constructor:function(){
this.inherited(arguments,[]);
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.util.JsonIO");


(function(){
var _1=dojo.json;
var _2=dojo.declare("com.ibm.team.rtc.foundation.web.util.JsonIO",null,{"-chains-":{constructor:"manual"}});
_2.parse=function(_3){
if(!!dojo.getObject("dojo.json")){
return _1.parse(_3);
}else{
if(!!JSON){
return JSON.parse(_3);
}
}
return dojo.fromJson(_3);
};
_2.stringify=function(_4){
if(!!dojo.getObject("dojo.json")){
return _1.stringify(_4);
}else{
if(!!JSON){
return JSON.stringify(_4);
}
}
return dojo.toJson(_4,false);
};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.util.Store");








(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.jdojox.util.IllegalArgumentException;
var _3=com.ibm.team.rtc.foundation.web.util;
var _4=_3.JsonIO;
var _5=_3.StorageException;
var _6=dojo.declare("com.ibm.team.rtc.foundation.web.util.Store",null,{"-chains-":{constructor:"manual"},constructor:function(_7,_8){
this._name=_7;
this._storage=_8?new _9():_6._getStorage();
},putEntry:function(id,_a){
this._checkId(id);
if(_a==null){
throw new _2("value must not be null");
}
try{
this._commit(id,_a);
}
catch(e){
if(e instanceof DOMException){
if(e.code===DOMException.QUOTA_EXCEEDED_ERR){
throw new _5();
}
}else{
throw e;
}
}
},getEntry:function(id){
this._checkId(id);
return this._read(id);
},clearEntry:function(id){
this._checkId(id);
this._storage.removeItem(this._getStorageId(id));
},clear:function(){
var _b=this._storage.keys();
var _c=_b;
var _d=_c.length;
for(var _e=0;_e<_d;_e++){
var _f=_c[_e];
if(_f.indexOf(this._getPrefix())===0){
this._storage.removeItem(_f);
}
}
},size:function(){
var _10=0;
if(this._storage.getItem(this._name)!=null){
_10+=this._storage.getItem(this._name).length;
}
var _11=this._storage.keys();
var _12=_11;
var _13=_12.length;
for(var _14=0;_14<_13;_14++){
var key=_12[_14];
if(key.indexOf(this._getPrefix())===0){
_10+=this._storage.getItem(key).length*2;
}
}
return _10/1024;
},_read:function(id){
return _4.parse(this._storage.getItem(this._getStorageId(id)));
},_commit:function(id,_15){
this._storage.setItem(this._getStorageId(id),_4.stringify(_15));
},_getStorageId:function(id){
if(id==null){
return this._name;
}
return this._getPrefix()+id;
},_getPrefix:function(){
return this._name+_6.SEPERATOR;
},_checkId:function(id){
if(id!=null&&id.indexOf(_6.SEPERATOR)>-1){
throw new _2("id cannot contain "+_6.SEPERATOR);
}
}});
_1.declareInterface("com.ibm.team.rtc.foundation.web.util.Store.IStorage");
var _16=dojo.declare("com.ibm.team.rtc.foundation.web.util.Store.LocalStorage",null,{"-chains-":{constructor:"manual"},setItem:function(key,_17){
window.localStorage.setItem(key,_17);
},removeItem:function(key){
window.localStorage.removeItem(key);
},getItem:function(key){
return window.localStorage.getItem(key);
},keys:function(){
var _18=[];
var _19=window.localStorage.length;
for(var i=0;i<_19;i++){
_18.push(window.localStorage.key(i));
}
return _18;
},$interfaces:{"com.ibm.team.rtc.foundation.web.util.Store.IStorage":true}});
var _9=dojo.declare("com.ibm.team.rtc.foundation.web.util.Store.FakeStorage",null,{"-chains-":{constructor:"manual"},constructor:function(){
if(_9._map==null){
_9._map={};
}
},setItem:function(key,_1a){
_9._map[key]=_1a;
},removeItem:function(key){
delete _9._map[key];
},getItem:function(key){
return _9._map[key];
},keys:function(){
return _1.getProperties(_9._map);
},$interfaces:{"com.ibm.team.rtc.foundation.web.util.Store.IStorage":true}});
_6.SEPERATOR="$";
_6._getStorage=function(){
if(window.localStorage!=null){
return new _16();
}
return new _9();
};
_9._map=null;
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.util.PersistentStorage");






(function(){
var _1=com.ibm.jdojox.util.IllegalArgumentException;
var _2=com.ibm.team.rtc.foundation.web.util;
var _3=_2.StorageException;
var _4=_2.Store;
var _5=dojo.declare("com.ibm.team.rtc.foundation.web.util.PersistentStorage",null,{"-chains-":{constructor:"manual"},_version:0,constructor:function(_6,_7){
if(_6==null){
throw new _1("name must not be null");
}
_6=_6+"@storage";
this._version=_7;
this._store=new _4(_6,false);
var _8=this._store.getEntry(_5.STORAGE_DETAILS);
if(_8==null||_8.version==null){
try{
this.clear();
}
catch(e){
if(e instanceof _3){
this._store=new _4(_5.STORAGE_DETAILS,true);
this.clear();
}else{
throw e;
}
}
}else{
if(_8.version!==this._version){
this.clear();
}
}
},putEntry:function(id,_9){
if(id==null){
throw new _1("id must not be null");
}
if(_9==null){
throw new _1("value must not be null");
}
this._store.putEntry(id,_9);
},getEntry:function(id){
if(id==null){
throw new _1("id must not be null");
}
return this._store.getEntry(id);
},clearEntry:function(id){
if(id==null){
throw new _1("id must not be null");
}
this._store.clearEntry(id);
},clear:function(){
this._store.clear();
this._store.putEntry(_5.STORAGE_DETAILS,{version:this._version});
},size:function(){
return this._store.size();
}});
_5.STORAGE_DETAILS=null;
})();


;(function CmEvents(){
dojo.provide("com.ibm.team.repository.web.configurationManagement.CmEvents");
com.ibm.team.repository.web.configurationManagement.CmEvents={USER_REQUESTED_CONTEXT_CHANGE:"com.ibm.team.repository.configurationManagementEvents.user_requested_context_change",SET_CONTEXT:"com.ibm.team.repository.configurationManagementEvents.set_context",DID_CREATE_STREAM:"lcm.didCreateStream",DID_CREATE_BASELINE:"lcm.didCreateBaseline",DID_CREATE_COMPONENT:"lcm.didCreateComponent",DID_UPDATE_COMPONENT:"lcm.didUpdateComponent"};
})();


;(function PrivateConstants(){
dojo.provide("com.ibm.team.repository.web.configurationManagement._utils.PrivateConstants");
var _1="http://www.w3.org/1999/02/22-rdf-syntax-ns#";
var _2="http://jazz.net/ns/vvc#";
var _3="http://purl.org/dc/terms/";
var _4="http://www.w3.org/2001/XMLSchema#";
var _5=com.ibm.team.repository.web.configurationManagement._utils.PrivateConstants;
com.ibm.team.repository.web.configurationManagement._utils.PrivateConstants={CM_URL_KEY:"com.ibm.team.repository.configurationManagement.cmUrl",CONFIGURATION_CACHE_KEY:"com.ibm.team.repository.configurationManagement.configurationsDataCache",CONFIGURATION_SPACE_CACHE_KEY:"com.ibm.team.repository.configurationManagement.configurationSpaceSessionCache",CHANGESET_CACHE_KEY:"com.ibm.team.repository.configurationManagement.changeSetSessionCache",VVC_URL_STORAGE_KEY:"com.ibm.team.repository.configurationManagement.vvcUrl",GLOBAL_CONFIGURATIONS_CACHE_KEY:"com.ibm.team.gc.globalConfigurationsDataCache",VIEW_CACHE:"com.ibm.team.repository.configurationManagement.configurationsViewCache",PAGED_VIEW_CACHE:"com.ibm.team.repository.configurationManagement.configurationsViewCache.pagedViewCache",CREATE_OPERATION:"operation=create",OPEN_OPERATION:"operation=open",CREATE_CHANGESET:"createNewChangeset",VIEW_CHANGESET:"viewChangeset",EDIT_CHANGESET:"editChangeSet",EXPLORE_CHANGESETS:"exploreChangesets",WORKSPACES_OVERVIEW_TAB:"overview",DIMENSIONS_TAB:"dimensions",DEPENDENCIES_TAB:"dependencies",CONTIRBUTIONS_TAB:"contributions",SNAPSHOTS_TAB:"snapshots",WORKSPACES_TAB:"workspaces",CHANGESETS_TAB:"changesets",RESOURCES_TAB:"resources",WORKITEMS_TAB:"workitems",CREATE_DIMENSION:"createNewDimension",VIEW_DIMENSION:"viewDimension",EDIT_DIMENSION:"editDimension",EDIT_DIMENSION_TYPE:"editDimensionType",EXPLORE_DIMENSIONS:"exploreDimensions",DEFAULT:"vvc",SHOW_EXPLORER:"exploreConfigurations",REFRESH_EXPLORER:"refreshConfigurationsExplorer",SHOW_HISTORY:"exploreHistory",EDIT_BASE_CONFIGURATION:"rebase",EDIT_DEPENDENCIES:"editDependencies",WORKSPACE_TYPE:"workspace",SNAPSHOT_TYPE:"snapshot",WORKSPACE_ICON_URI:dojo.moduleUrl("jazz.ui","graphics/stream.svg"),SNAPSHOT_ICON_URI:dojo.moduleUrl("jazz.ui","graphics/baseline.svg"),ERROR_CODE_EXISTS:"EXISTS",PRESERVE_EXPANSION_STATE_STORAGE_KEY:"com.ibm.team.vvc.explorer.expansionState",PRESERVE_SELECTION_STATE_STORAGE_KEY:"com.ibm.team.vvc.explorer.selectionState",SNAPSHOT:"snapshot",WORKSPACE:"workspace",PURPOSE_DIMENSION_URI:"http://jazz.net/ns/vvc/ootb#purpose",CHANGESET_DIMENSION_URI:"http://jazz.net/ns/vvc/ootb#changeSet",TIMEORDER_DIMENSION_URI:"http://jazz.net/ns/vvc#timeOrder",EVENTS_CHANGESET_CREATED:"vvc.changeset_created",EVENTS_CHANGESET_COMPLETED:"com.ibm.team.vvc.events.changesets.completed",EVENTS_CHANGESET_RENAMED:"com.ibm.team.vvc.events.changesets.renamed",EVENTS_CHANGESET_DISCARDED:"com.ibm.team.vvc.events.changesets.discarded",EVENTS_CHANGESET_SHARED:"com.ibm.team.vvc.events.changesets.shared",XMLS_BOOLEAN:_4+"boolean",TITLE:_3+"title",DESCRIPTION:_3+"description",MUTABLE:_2+"mutable",POINT:_2+"point",CONCEPT:_2+"concept",VERSION:_2+"version",CONTEXT:_2+"context",VALUE_TYPE:_2+"valueType",SPACE:_2+"space",SUBSPACE:_2+"subspace",DOMAIN:_2+"domain",PATH:_2+"path",SELECTS:_2+"selects",DEPENDENCY_RESOURCE:_2+"dependencyResource",DIMENSION:_2+"dimension",ONE_GREATER_THAN:_2+"oneGreaterThan",MAX_VALUE_OF_NEXT_LESSER_DIMENSION:_2+"maxValueOfNextLesserDimension",BASE:_2+"base",SPACE_MAP_DATA:_2+"jsondata",TIME_ORDER_DIMENSION_NAME:"TimeOrder",PURPOSE_DIMENSION_NAME:"Purpose",CREATED:"created",CREATOR:"creator",CHANGESET_CREATOR:_3+_5.CREATOR,CHANGESET_CREATED:_3+_5.CREATED,PARENT_NAME:"parentName",COMPLETION_TIME:_2+"completionTime",STATE:_2+"state",STATE_COMMITTED:"COMMITTED",STATE_COMPLETED:"COMPLETED",STATE_IN_PROGRESS:"IN_PROGRESS",COMMIT_CHANGE_SET:_2+"commitChangeSet",DELIVER_FRONT_SERVICE_PATH:"/deliver",DELIVER_UI_FRONT_SERVICE_PATH:"/deliverui",DELIVER_SESSION_STATE_UNINITIALIZED:"UNINITIALIZED",DELIVER_SESSION_STATE_PENDING:"PENDING",DELIVER_SESSION_STATE_FINISHED:"FINISHED",DELIVER_NAMESPACE:"http://jazz.net/ns/vvc/deliver#",DELIVER_SESSION:_5.DELIVER_NAMESPACE+"Session",DELIVER_STATE:_5.DELIVER_NAMESPACE+"state",DELIVER_APPLY_COMPLETED_CHANGESETS_ONLY:_5.DELIVER_NAMESPACE+"applyCompletedChangesetsOnly",DELIVER_OPERATION:_5.DELIVER_NAMESPACE+"operation",DELIVER_OPERATION_DELIVER:"deliver",DELIVER_OPERATION_COMPARE:"compare",DELIVER_OPERATION_REBASE:"rebase",DELIVER_EXPIRATION_DATE:_5.DELIVER_NAMESPACE+"expirationDate",DELIVER_CREATED_DATE:_5.DELIVER_NAMESPACE+"createdAt",DELIVER_REFERER:_5.DELIVER_NAMESPACE+"referer",DELIVER_SOURCE:_5.DELIVER_NAMESPACE+"source",DELIVER_TARGET:_5.DELIVER_NAMESPACE+"target",DELIVER_SELECTED_CHANGESETS:_5.DELIVER_NAMESPACE+"selectedChangesets",DELIVER_ACCEPTED_OUTGOING:_5.DELIVER_NAMESPACE+"acceptedOutgoing",DELIVER_RESOLVED_CONFLICTS:_5.DELIVER_NAMESPACE+"resolvedConflicts",DELIVER_GAP_DEPENDENT_CHANGESETS:_5.DELIVER_NAMESPACE+"gapDependentChangesets",DELIVER_DELIVERABLE_CHANGESETS:_5.DELIVER_NAMESPACE+"deliverableChangesets",DELIVER_ORDER:_5.DELIVER_NAMESPACE+"order",DELIVER_COMPARE_PROVIDER:_2+"compareProvider",DELIVER_COMPARE_PROVIDER_CAN_PROVIDE_WEB_FUNCTIONALITY:_2+"canProvideWebFunctionality",DELIVER_COMPARE_PROVIDER_COMPARE_WEB_URI:_2+"compareWebUri",DELIVER_COMPARE_PROVIDER_HAS_SEPARATE_MERGE_PROVIDER:_2+"hasSeparateMergeWebUri",DELIVER_COMPARE_PROVIDER_MERGE_WEB_URI:_2+"mergeWebUri",DELIVER_COMPARE_PROVIDER_URI:_2+"compareProviderUri",DELIVER_COMPARE_PROVIDER_ORDERING:_2+"compareProviderOrdering"};
})();


;(function CmConfig(){
dojo.provide("com.ibm.team.repository.web.configurationManagement.CmConfig");
com.ibm.team.repository.web.configurationManagement.CmConfig={workWithChangeSetConfigurations:false,assumeTargetForCompareOrDeliver:true};
})();


;define("dojo/DeferredList",["./_base/kernel","./_base/Deferred","./_base/array"],function(_1,_2,_3){
_1.DeferredList=function(_4,_5,_6,_7,_8){
var _9=[];
_2.call(this);
var _a=this;
if(_4.length===0&&!_5){
this.resolve([0,[]]);
}
var _b=0;
_3.forEach(_4,function(_c,i){
_c.then(function(_d){
if(_5){
_a.resolve([i,_d]);
}else{
_e(true,_d);
}
},function(_f){
if(_6){
_a.reject(_f);
}else{
_e(false,_f);
}
if(_7){
return null;
}
throw _f;
});
function _e(_10,_11){
_9[i]=[_10,_11];
_b++;
if(_b===_4.length){
_a.resolve(_9);
}
};
});
};
_1.DeferredList.prototype=new _2();
_1.DeferredList.prototype.gatherResults=function(_12){
var d=new _1.DeferredList(_12,false,true,false);
d.addCallback(function(_13){
var ret=[];
_3.forEach(_13,function(_14){
ret.push(_14[1]);
});
return ret;
});
return d;
};
return _1.DeferredList;
});


;(function(){
dojo.provide("jazz.util.dom");
jazz.util.dom={createElementNS:function(_1,_2,_3){
if(_1.createElementNS){
return _1.createElementNS(_2,_3);
}
return _1.createElement(_3);
},getAttributeNS:function(_4,_5,_6){
if(_4.getAttributeNS){
return _4.getAttributeNS(_5,_6)||"";
}
var _7=_8(_4,_5,_6);
return _7?_7.value:"";
},getAttributeNodeNS:function(_9,_a,_b){
if(_9.getAttributeNodeNS){
return _9.getAttributeNodeNS(_a,_b);
}
if(_a&&(_b!==_c||_a!==_d)){
var _e=_9.attributes;
var _f=_e.length;
for(var i=0;i<_f;++i){
var _10=_e[i];
if(_10.baseName===_b){
if(_10.namespaceURI===_a){
return _10;
}
var _11=_10.prefix;
if(_11&&_12(_9,_11)===_a){
return _10;
}
}
}
return null;
}
return _9.getAttributeNode(_b);
},lookupNamespaceURI:function(_13,_14){
if(_14===XML){
return _15;
}else{
if(_14===_c){
return _d;
}else{
if(_13.lookupNamespaceURI){
return _13.lookupNamespaceURI(_14)||null;
}
}
}
switch(_13.nodeType){
case 1:
return _16(_13,_14);
case 9:
return _16(_13.documentElement,_14);
case 6:
case 12:
case 10:
case 11:
return null;
default:
var _17=_13.parentNode;
if(_17){
return _16(_17,_14);
}
return null;
}
},lookupPrefix:function(_18,_19){
if(_19===_15){
return XML;
}else{
if(_19===_d){
return _c;
}else{
if(_18.lookupPrefix){
return _18.lookupPrefix(_19);
}
}
}
if(!_19){
return null;
}
switch(_18.nodeType){
case 1:
return _1a(_18,_19);
case 9:
return _1a(_18.documentElement,_19);
case 6:
case 12:
case 11:
case 10:
return null;
default:
var _1b=_18.parentNode;
if(_1b){
return _1a(_1b,_19);
}
return null;
}
},removeAttributeNS:function(_1c,_1d,_1e){
if(_1c.removeAttributeNS){
_1c.removeAttributeNS(_1d,_1e);
}else{
var _1f=_8(_1c,_1d,_1e);
if(_1f){
_1c.removeAttributeNode(_1f);
}
}
},setAttributeNS:function(_20,_21,_22,_23){
if(_20.setAttributeNS){
_20.setAttributeNS(_21,_22,_23);
}else{
_20.setAttribute(_22,_23);
}
}};
var dom=jazz.util.dom;
var _8=dom.getAttributeNodeNS;
var _12=dom.lookupNamespaceURI;
var _15="http://www.w3.org/XML/1998/namespace";
var _d="http://www.w3.org/2000/xmlns/";
var XML="xml";
var _c="xmlns";
function _16(_24,_25){
do{
var _26=_24.namespaceURI;
if(_26&&_24.prefix===_25){
return _26;
}
var _27=_24.attributes;
var len=_27.length;
for(var i=0;i<len;++i){
var _28=_27[i];
if((_28.prefix===_c&&_28.baseName===_25)||(_25===null&&_28.name===_c)){
return _28.value||null;
}
}
_24=_24.parentNode;
}while(_24&&_24.nodeType===1);
return null;
};
function _1a(_29,_2a){
do{
var _2b=_29.namespaceURI;
var _2c=_29.prefix;
if(_2c&&_2b&&_2b===_2a&&_12(_29,_2c)===_2a){
return _2c;
}
var _2d=_29.attributes;
var len=_2d.length;
for(var i=0;i<len;++i){
var _2e=_2d[i];
var _2f=_2e.baseName;
if(_2e.prefix===_c&&_2e.value===_2a&&_12(_29,_2f)===_2a){
return _2f||null;
}
}
_29=_29.parentNode;
}while(_29&&_29.nodeType===1);
return null;
};
})();


;(function(){
dojo.provide("jazz.util.binding");


jazz.util.binding={bind:function(_1,_2){
var _3={elem:_1};
var _4=false;
for(var i in _2){
if(_4||i!==_5){
_3[i]=_6(_1,_2,_3,i);
}else{
_4=true;
}
}
return _3;
},read:function(_7,_8){
var _9={namespaces:_8.namespaces};
var _a=false;
for(var i in _8){
if(_a||i!==_5){
_9[_b+i]=_8[i];
}else{
_a=true;
}
}
var _c={};
_d(_7,_9,_c);
var _e={};
_a=false;
for(var i in _8){
if(_a||i!==_5){
var _f=_c[_b+i]();
var _10=_8[i][0];
var _11=(typeof (_10)===_12);
if(_8[i][2]===_13){
if(_11&&_f){
_f=_14(_f.elem,_10);
}
}else{
if(_f){
var _15=[];
var len=_f.length;
for(var j=0;j<len;++j){
_15[j]=_11?_14(_f[j].elem,_10):_f[j];
}
_f=_15;
}
}
_e[i]=_f;
}else{
_a=true;
}
}
return _e;
}};
var dom=jazz.util.dom;
var _16=jazz.util.binding.bind;
var _14=jazz.util.binding.read;
var _17="true",_18="false",_19="/",_1a="boolean",_1b="number",_1c="string",_12="object",_1d,_1e="function",_1f=":",_20=",",AT=64,S=115,_21="set",_5="namespaces",_22="elem",_13="1",_b="get";
var _23={"boolean":function(str){
return str===_17;
},"number":function(str){
return parseFloat(str);
},"string":function(str){
return str;
},"object":function(_24,_25){
return _16(_24,_25);
}};
var _26={"boolean":function(_27){
var _28=typeof (_27);
if(_28===_1a){
return _27?_17:_18;
}else{
if(_27!==null&&_27!==_1d){
throw new Error("Invalid argument for binding; must be a boolean");
}
}
},"number":function(num){
var _29=typeof (num);
if(!isNaN(num)&&_29===_1b){
return num+"";
}else{
if(num!==null&&num!==_1d){
throw new Error("Invalid argument for binding; must be a number (not NaN)");
}
}
},"string":function(str){
var _2a=typeof (str);
if(_2a===_1c||str===null||str===_1d){
return str;
}
throw new Error("Invalid argument for binding; must be a string");
},"object":function(obj,_2b,_2c){
var _2d=typeof (obj);
if(_2d===_12){
if(obj!==null){
if(obj.elem){
return obj.elem;
}
var _2e=dom.createElementNS(_2c.ownerDocument,_2c.namespaceURI||null,_2c.nodeName);
var _2f=_2c.parentNode;
_2f.appendChild(_2e);
var _30={namespaces:_2b.namespaces};
for(var i in obj){
var _31=null;
var _32=obj[i];
if(typeof (_32)===_1e){
if(!_33(i)){
_31=_2b[i];
}
}else{
var _34=i.toLowerCase();
for(var j in _2b){
if(_33(j)){
if(i.length===j.length-3&&j.toLowerCase().indexOf(_34,3)===3){
_31=_2b[j];
break;
}
}
}
}
if(_31){
_30[_21+i]=_31;
}
}
var _35=_16(_2e,_30);
for(var i in _35){
if(i!==_22){
var _32=obj[i.substring(3)];
if(typeof (_32)===_1e){
_32=_32.call(obj);
}
_35[i].call(_35,_32);
}
}
_2f.removeChild(_2e);
return _2e;
}
}else{
if(obj!==_1d){
throw new Error("Invalid argument for binding; must be an object");
}
}
}};
var _36=_37;
var _38=_39,_3a=_3b;
if(dojo.isIE){
if(dojo.isIE>=9){
_36=_3c;
_38=_3d;
_3a=_3e;
}else{
_36=_3f;
_38=_40;
_3a=_41;
}
}
var _42=[null,function(_43){
return _43;
},function(_44,_45){
if(_44.hasAttributeNS){
if(_44.hasAttributeNS(_45.nodeNamespaceURI,_45.nodeName)){
return dom.getAttributeNS(_44,_45.nodeNamespaceURI,_45.nodeName);
}
}else{
var _46=dom.getAttributeNodeNS(_44,_45.nodeNamespaceURI,_45.nodeName);
if(_46){
return _46.value;
}
}
},_38];
var _47=[null,function(_48,_49,_4a,_4b){
var _4c=_48.parentNode;
if(_4b){
_4c.replaceChild(_4b,_48);
}else{
_4c.removeChild(_48);
}
_4d(_49,_4a);
},function(_4e,_4f,_50,_51){
if(typeof (_51)===_1c){
var _52=_4f.nodeName;
if(_4f.nodeNamespaceURI){
var _53=dom.lookupPrefix(_4e,_4f.nodeNamespaceURI);
if(_53){
_52=_53+_1f+_52;
}
}
dom.setAttributeNS(_4e,_4f.nodeNamespaceURI,_52,_51);
}else{
dom.removeAttributeNS(_4e,_4f.nodeNamespaceURI,_4f.nodeName);
}
},function(_54,_55,_56,_57){
if(typeof (_57)===_1c){
_3a(_54,_57);
}else{
_54.parentNode.removeChild(_54);
_4d(_55,_56);
}
}];
function _6(_58,_59,_5a,_5b){
return function(){
_d(_58,_59,_5a);
return _5a[_5b].apply(_5a,arguments);
};
};
function _d(_5c,_5d,_5e,_5f){
var _60={};
var _61={};
var _62={};
var _63={};
var _64={binding:_5e,bindInterface:_5d,elem:_5c,methodGroups:_61};
var _65=_5d[_5]||{};
var _66=false;
for(var i in _5d){
if(_66||i!==_5){
var _67=i;
var _68=_5d[_67];
var _69=_68[1];
var _6a=_61[_69];
if(!_6a){
_6a=_61[_69]=_63[_69]={namespaces:_65};
}
_6a[_67]=_68;
var _6b=_68[0];
var _6c={descriptor:_68,methodName:_67,type:_6b,nodeType:typeof (_6b)===_1c?3:1,xpath:_69};
var _6d=(_68[2]!==_13);
if(_6d){
_6c.many=_6d;
}
var _6e,_6f=null,_70=_60,len=_69.length;
var idx=0,_71=0,_72,_73=false,_74=false;
while(!_74){
_71=_69.indexOf(_19,idx);
if(_71===-1){
_71=len;
_74=true;
_73=(_69.charCodeAt(idx)===AT);
idx+=_73?1:0;
}
_72=_69.indexOf(_1f,idx);
if(_72==-1||_72>=_71){
_6f=null;
_6e=_69.substring(idx,_71);
}else{
_6f=_69.substring(idx,_72);
_6e=_69.substring(_72+1,_71);
}
idx=_71+1;
var _75=_65[_6f];
if(!_75&&_6f){
throw new Error("Undeclared namespace prefix \""+_6f+"\" in binding interface");
}
if(_74){
if(_73){
_6c.nodeType=2;
if(_6d){
throw new Error("Binding to multiple attributes is not allowed");
}
}
if(_73||_6d){
_6c.nodeName=_6e;
_6c.nodeNamespaceURI=_75||null;
break;
}
}
var _76=_70.children;
if(!_76){
_76=_70.children={};
_70.numChildren=0;
}
var _77=_70;
_70=null;
var _78=_76[_6e];
if(!_78){
_78=_76[_6e]=[];
}else{
var _79=_78.length;
for(var j=0;j<_79;++j){
var _7a=_78[j];
if(_75===_7a.namespaceURI){
_70=_7a;
break;
}
}
}
if(!_70){
_70={};
_78.push(_70);
++_77.numChildren;
if(_75){
_70.namespaceURI=_75;
}
}
}
var _7b=_70.entries;
if(!_7b){
_7b=_70.entries=[];
}
_7b.push(_6c);
}else{
_66=true;
}
}
_7c(_5c,_64,_62,_60,_63,_5f);
for(var i in _63){
var _6a=_63[i];
var _66=false;
for(var j in _6a){
if(_66||j!==_5){
var _6c=_6a[j];
var _7d=_7e(_6c,_62);
_5e[j]=_7f(j,_6c,_7d,_6a,_64);
}else{
_66=true;
}
}
}
};
function _4d(_80,_81){
var _82=_80.xpath;
var len=_82.length;
var _83=_81.methodGroups;
var _84=_81.binding;
for(var i in _83){
if(i.indexOf(_82)===0&&(i.length===len||i.charAt(len)===_19)){
var _85=_83[i];
for(var j in _85){
if(j!==_5){
_84[j]=_6(_81.elem,_81.bindInterface,_84,j);
}
}
}
}
};
function _7c(_86,_87,_88,_89,_8a,_8b){
var _8c=_87.binding;
var _8d=_89.entries;
if(_8d){
var len=_8d.length;
for(var i=0;i<len;++i){
var _8e=_8d[i];
var _8f=_7e(_8e.descriptor,_88);
_8c[_8e.methodName]=_90(_86,_8e,_8f,_87);
delete _8a[_8e.xpath];
}
}
var _91=_89.children;
if(_91){
var _92=_89.numChildren;
var _93=_86.firstChild;
while(_93){
if(_93.nodeType===1){
var _94=_93.localName||_93.baseName;
var _95=_91[_94];
if(_95){
var len=_95.length;
for(var i=len-1;i>=0;--i){
var _96=_95[i];
var _97=_96.namespaceURI;
if((_97&&_97===_93.namespaceURI)||_97==dom.lookupNamespaceURI(_93,_93.prefix)){
_7c(_93,_87,_88,_96,_8a,_8b);
_95.splice(i,1);
--_92;
if(--len===0){
delete _91[_94];
break;
}
}
}
if(_92===0){
break;
}
}
}
_93=_93.nextSibling;
}
if(_8b){
for(var i in _91){
var _95=_91[i];
var len=_95.length;
for(var j=0;j<len;++j){
var _96=_95[j];
var _98=dom.lookupPrefix(_86,_96.namespaceURI);
var _99=_98?_98+_1f+i:i;
var _9a=dom.createElementNS(_86.ownerDocument,_96.namespaceURI||null,_99);
_86.appendChild(_9a);
_7c(_9a,_87,_88,_96,_8a,true);
}
}
}
}
};
function _90(_9b,_9c,_9d,_9e){
if(_33(_9c.methodName)){
return _9f(_9b,_9c,_9d,_9e);
}
return _a0(_9b,_9c,_9d,_9e);
};
function _7f(_a1,_a2,_a3,_a4,_a5){
if(_33(_a1)){
return function(_a6){
var _a7=_a5.binding;
if(_a6!==null&&_a6!==_1d){
_d(_a5.elem,_a4,_a7,true);
return _a7[_a1](_a6);
}
};
}
return function(){
};
};
function _a0(_a8,_a9,_aa,_ab){
if(_a9.many){
return function(){
if(_aa.length===0){
_aa[0]=_c3(_a8,_a9,_ab);
}
return _aa[0];
};
}else{
var _ac=_a9.type;
var _ad=_23[typeof (_ac)===_12?_12:_ac];
var _ae=_42[_a9.nodeType];
return function(){
if(_aa.length===0){
var _af=_ae(_a8,_a9);
var _b0;
if(_af!==null&&_af!==_1d){
_b0=_ad(_af,_ac);
}
_aa[0]=_b0;
}
return _aa[0];
};
}
};
function _9f(_b1,_b2,_b3,_b4){
if(_b2.many){
return function(_b5){
var _b6=typeof (_b5);
if(_b5!==null&&(_b6!==_12||typeof (_b5.length)!==_1b)&&_b5!==_1d){
throw new Error("Invalid argument to multi-valued setter; must be an array (but was "+_b6+")");
}
_b5=_b5||[];
_b3.length===1&&_b3.pop();
_d6(_b1,_b2.nodeNamespaceURI,_b2.nodeName,function(_b7){
_b1.removeChild(_b7);
});
_b2.many=false;
var len=_b5.length;
for(var i=0;i<len;++i){
var _b8=dom.lookupPrefix(_b1,_b2.nodeNamespaceURI);
var _b9=_b8?_b8+_1f+_b2.nodeName:_b2.nodeName;
var _ba=dom.createElementNS(_b1.ownerDocument,_b2.nodeNamespaceURI||null,_b9);
_b1.appendChild(_ba);
_9f(_ba,_b2,[],_b4)(_b5[i]);
}
_b2.many=true;
};
}else{
var _bb=_b2.type;
var _bc=typeof (_bb)===_12?_12:_bb;
var _bd=_26[_bc];
var _be=_23[_bc];
var _bf=_47[_b2.nodeType];
return function(_c0){
var _c1;
var _c2=_bd(_c0,_bb,_b1);
_bf(_b1,_b2,_b4,_c2);
if(_c2!==null&&_c2!==_1d){
_c1=_be(_c2,_bb);
}
return _b3[0]=_c1;
};
}
};
function _c3(_c4,_c5,_c6){
var _c7={length:0,push:function(){
var _c8=[this.length,0];
var len=arguments.length;
for(var i=0;i<len;++i){
_c8.push(arguments[i]);
}
this.splice.apply(this,_c8);
return this.length;
},splice:function(_c9,num){
if(_c9!==parseInt(_c9,10)||num!==parseInt(num,10)||num<0){
throw new Error("Invalid argument to binding splice() first two arguments must be non-negative integers");
}
if(_c9<0||_c9+num>this.length){
throw new Error("Invalid argument to binding splice() index out of range ("+_c9+")");
}
var i=0;
var _ca=this;
var _cb;
var _cc=[];
_d6(_c4,_c5.nodeNamespaceURI,_c5.nodeName,function(_cd){
if(i>=_c9){
if(i<_c9+num){
_c4.removeChild(_cd);
_cc.push(_c7[i]);
}else{
if(i==_c9+num){
_cb=_cd;
}
}
}
++i;
});
var _ce=arguments.length-2-num;
if(_ce!=0){
if(_ce>0){
var _cf=this.length-1,end=_c9+num-1,_d0=-1;
}else{
var _cf=_c9+num,end=this.length,_d0=1;
}
for(var i=_cf;i!==end;i+=_d0){
this[i+_ce]=this[i];
}
for(var i=this.length+_ce;i<this.length;++i){
delete this[i];
}
this.length+=_ce;
}
var len=arguments.length-2;
for(var i=0;i<len;++i){
var _d1=arguments[i+2];
if(_d1===null||_d1===_1d){
throw new Error("Invalid argument in binding splice(); null and undefined are not allowed");
}
var _d2=dom.lookupPrefix(_c4,_c5.nodeNamespaceURI);
var _d3=_d2?_d2+_1f+_c5.nodeName:_c5.nodeName;
var _d4=dom.createElementNS(_c4.ownerDocument,_c5.nodeNamespaceURI||null,_d3);
if(_cb){
_c4.insertBefore(_d4,_cb);
}else{
_c4.appendChild(_d4);
}
_c5.many=false;
this[_c9+i]=_9f(_d4,_c5,[],_c6)(_d1);
_c5.many=true;
}
return _cc;
}};
_c5.many=false;
_d6(_c4,_c5.nodeNamespaceURI,_c5.nodeName,function(_d5){
_c7[_c7.length++]=_a0(_d5,_c5,[],_c6)();
});
_c5.many=true;
return _c7;
};
function _d6(_d7,_d8,_d9,_da){
var _db=_d7.firstChild;
while(_db){
var _dc=_db.nextSibling;
if(_db.nodeType===1){
var _dd=_db.localName||_db.baseName;
if(_d9===_dd&&((_d8&&_d8===_db.namespaceURI)||_d8==dom.lookupNamespaceURI(_db,_db.prefix))){
_da(_db);
}
}
_db=_dc;
}
};
function _7e(_de,_df){
var _e0=_de[0];
var _e1=(typeof (_e0)===_12);
var key=(_e1?_12:_e0)+_20+_de[1]+_20+_de[2];
if(_e1){
var _e2=_df[key]||(_df[key]=[]);
var len=_e2.length;
for(var i=0;i<len;++i){
var _e3=_e2[i];
if(_e3.type===_e0){
return _e3.value;
}
}
var _e3={type:_e0,value:[]};
_e2.push(_e3);
return _e3.value;
}else{
return _df[key]||(_df[key]=[]);
}
};
function _37(_e4){
return _e4.localName;
};
function _39(_e5){
return _e5.textContent;
};
function _3b(_e6,_e7){
_e6.textContent=_e7;
};
function _3c(_e8){
return _e8.localName||_e8.baseName;
};
function _3d(_e9){
return _e9.textContent||_e9.text||"";
};
function _3e(_ea,_eb){
if(_ea instanceof Element){
_ea.textContent=_eb;
}else{
_ea.text=_eb;
}
};
function _3f(_ec){
return _ec.baseName;
};
function _40(_ed){
return _ed.text;
};
function _41(_ee,_ef){
_ee.text=_ef;
};
function _33(_f0){
return _f0.charCodeAt(0)===S;
};
})();


;dojo.provide("jazz.app.internal.util.XhrUtil");


(function(){
var _1=jazz.util.binding;
jazz.app.internal.util.XhrUtil.immediateErrback=function(_2){
var _3=new dojo.Deferred();
_3.errback(_2);
return _3;
};
jazz.app.internal.util.XhrUtil.immediateCallback=function(_4){
var _5=new dojo.Deferred();
_5.callback(_4);
return _5;
};
function _6(_7){
return _7.status&&(_7.status==401);
};
jazz.app.internal.util.XhrUtil.getXml=function(_8,_9){
var _a=_9.passive&&true;
var _b=_9.schema||null;
var _c=new dojo.Deferred();
var _d=jazz.client.xhrGet({url:_8,handleAs:"xml",failOk:_a,headers:_9.headers||{"accept":"application/rdf+xml"},skipInterceptors:_a?["jazz.oauth"]:null});
_d.addCallback(function(_e){
if(_b){
var _f=_1.read(_e.documentElement,_b);
_c.callback(_f);
}else{
_c.callback(_e);
}
});
_d.addErrback(function(_10){
_10.log=false;
if(_a&&_6(_10)){
_c.callback(null);
}else{
_10.ioArgs=_d.ioArgs;
_c.errback(_10);
}
});
return _c;
};
})();


;dojo.provide("jazz.app.internal.util.Rootservices");












(function(){
var _1=jazz.util.binding;
var _2=jazz.app.internal.util.XhrUtil;
var _3={};
var _4={};
dojo.declare("jazz.app.internal.util.Rootservices",null,{url:null,_document:null,_binding:null,_friendsList:null,_title:null,constructor:function(_5){
this.url=_5;
this._document=_3[_5];
this._binding=_4[_5];
},load:function(_6){
if(this.isLoaded()){
return _2.immediateCallback(this);
}
var _7=this;
var _8=_2.getXml(this.url,{passive:_6});
_8.addCallback(function(_9){
if(_9){
_7._document=_9;
_7._binding=_1.read(_9.documentElement,_a);
_3[_7.url]=_9;
_4[_7.url]=_7._binding;
}
return _7;
});
return _8;
},getTitle:function(){
if(!this.isLoaded()){
log.error("jazz.app.internal.util.Rootservices.getTitle : not loaded");
return null;
}
return this._binding.title;
},getPublisher:function(){
if(!this.isLoaded()){
log.error("jazz.app.internal.util.Rootservices.getPublisher : not loaded");
return null;
}
return this._binding.publisher;
},getAbout:function(){
if(!this.isLoaded()){
log.error("jazz.app.internal.util.Rootservices.getAbout : not loaded");
return null;
}
return this._binding.about;
},getServiceUrl:function(ns,_b){
if(!this.isLoaded()){
console.error("jazz.app.internal.util.Rootservices.getServiceUrl : not loaded");
return null;
}
var _c=_1.read(this._document.documentElement,{namespaces:{ns:ns,rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"},value:["string","ns:"+_b+"/@rdf:resource","1"]}).value;
if(!_c){
console.warn("jazz.app.internal.util.Rootservices.getServiceUrl: no service for: "+ns+_b);
return null;
}
return _c;
},loadFriends:function(_d){
if(!this.isLoaded()){
return _2.immediateErrback(new Error("jazz.app.Rootservices.loadFriends rootservice not loaded"));
}
if(this._friendsList){
return _2.immediateCallback(this._friendsList);
}
var _e=_2.getXml(this._binding.friends,{schema:_f,passive:_d});
var _10=this;
_e.addCallback(function(_11){
if(!_11){
return null;
}
dojo.forEach(_11.friends,function(f){
f.title=decodeURI(f.title);
});
_10._friendsList=_11.friends;
return _10._friendsList;
});
return _e;
},isLoaded:function(){
return (this._document&&true);
},getCurrentUser:function(){
if(!this.isLoaded()){
console.error("jazz.app.internal.util.Rootservices.getCurrentUser : not loaded");
return null;
}
return this._binding.currentUser;
},getProjectAreas:function(){
if(!this.isLoaded()){
console.error("jazz.app.internal.util.Rootservices.getProjectAreas : not loaded");
return null;
}
return this._binding.projectAreas;
},getViewletServiceRoot:function(){
if(!this.isLoaded()){
console.error("jazz.app.internal.util.Rootservices.getViewletServiceRoot : not loaded");
return null;
}
return this._binding.viewletServiceRoot;
},getViewletWebUIRoot:function(){
if(!this.isLoaded()){
console.error("jazz.app.internal.util.Rootservices.getViewletWebUIRoot : not loaded");
return null;
}
return this._binding.viewletWebUIRoot;
},getHomeMenuIcon:function(){
if(!this.isLoaded()){
console.error("jazz.app.internal.util.Rootservices.getHomeMenuIcon : not loaded");
return null;
}
return this._binding.homeMenuIcon;
}});
var _12=null;
jazz.app.internal.util.Rootservices.loadLocal=function(){
if(_12){
return _2.immediateCallback(_12);
}
var _13=jazz.app.internal.util.Rootservices.load(net.jazz.ajax.contextRoot()+"/rootservices");
_13.addCallback(function(_14){
if(_14){
_12=_14;
}
});
return _13;
};
jazz.app.internal.util.Rootservices.load=function(url,_15){
return (new jazz.app.internal.util.Rootservices(url)).load(_15);
};
var _16={dc:"http://purl.org/dc/terms/",jd:"http://jazz.net/xmlns/prod/jazz/discovery/1.0/",jdb:"http://jazz.net/xmlns/prod/jazz/dashboard/1.0/",jfs:"http://jazz.net/xmlns/prod/jazz/jfs/1.0/",jp06:"http://jazz.net/xmlns/prod/jazz/process/0.6/",oslc:"http://open-services.net/ns/core#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"};
var _a={namespaces:_16,about:["string","@rdf:about","1"],currentUser:["string","jfs:currentUser/@rdf:resource","1"],friends:["string","jd:friends/@rdf:resource","1"],homeMenuIcon:["string","jdb:homeMenuIcon/@rdf:resource","1"],publisher:["string","oslc:publisher/@rdf:resource","1"],projectAreas:["string","jp06:projectAreas/@rdf:resource","1"],title:["string","dc:title","1"],viewletServiceRoot:["string","jd:viewletServiceRoot/@rdf:resource","1"],viewletWebUIRoot:["string","jd:viewletWebUIRoot/@rdf:resource","1"]};
var _17={namespaces:_16,rootServices:["string","jd:rootServices/@rdf:resource","1"],title:["string","dc:title","1"]};
var _f={namespaces:_16,friends:[_17,"jd:Friend","*"]};
})();


;(function(){
dojo.provide("com.ibm.team.configuration.web.context.internal.Namespaces");
com.ibm.team.configuration.web.context.internal.Namespaces={NAMESPACES:{jd:"http://jazz.net/xmlns/prod/jazz/discovery/1.0/",jfs:"http://jazz.net/xmlns/foundation/1.0/",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",gc:"http://jazz.net/ns/gc#",oslc_config:"http://open-services.net/ns/config#",oslc:"http://open-services.net/ns/core#"}};
})();


;(function(){
dojo.provide("com.ibm.team.configuration.web.context.internal.LocalRootServices");




var _1=null;
dojo.declare("com.ibm.team.configuration.web.context.internal.LocalRootServices",null,{constructor:function(_2){
this._currentUser=null;
this._rootServicesDoc=_2;
},getServiceUrl:function __getServiceUrl(_3,_4){
if(this._rootServicesDoc!==null){
return this._rootServicesDoc.getServiceUrl(_3,_4);
}else{
return null;
}
},getTitle:function __getTitle(){
return this._rootservicesDoc.getTitle();
},getPublisher:function __getPublisher(){
return this._rootServicesDoc.getPublisher();
},getCurrentUser:function __getCurrentUser(){
if(this._currentUser){
return this._currentUser;
}
if(this._rootServicesDoc){
var _5=this._rootServicesDoc.getCurrentUser();
var _6=this;
jazz.client.xhrGet({url:_5,handleAs:"text",sync:true,load:function(_7){
_6._currentUser=_7.substring(_7.lastIndexOf("/")+1);
},error:function(_8,_9){
console.error(dojo.fromJson(_9.xhr.responseText));
}});
return this._currentUser;
}
return null;
}});
com.ibm.team.configuration.web.context.internal.LocalRootServices.NAMESPACES=com.ibm.team.configuration.web.context.internal.Namespaces.NAMESPACES;
com.ibm.team.configuration.web.context.internal.LocalRootServices.SERVICE_NAMES={CM_SERVICE_PROVIDERS:"cmServiceProviders"};
com.ibm.team.configuration.web.context.internal.LocalRootServices.loadAsync=function(){
var _a=new dojo.Deferred();
if(_1){
_a.callback(_1);
return _a;
}
jazz.app.internal.util.Rootservices.loadLocal().then(function(_b){
_1=new com.ibm.team.configuration.web.context.internal.LocalRootServices(_b);
_a.callback(_1);
},function(_c){
console.error("Failed to load local rootservices",_c);
_a.errback(_c);
});
return _a;
};
})();

/*******************************************************************************
 * Licensed Materials - Property of IBM
 * (c) Copyright IBM Corporation 2015, 2018. All Rights Reserved.
 *
 * Note to U.S. Government Users Restricted Rights:  
 * Use, duplication or disclosure restricted by GSA ADP Schedule 
 * Contract with IBM Corp. 
 *******************************************************************************/
dojo.setObject("com.ibm.team.gc.sdk.service.internal.GcInitData", function () {
	return com.ibm.team.gc.sdk.service.internal.GcInitData._initData;
});
com.ibm.team.gc.sdk.service.internal.GcInitData._initData = {
	gcAppIsAvailable: true,
	gcAppUri: "https://rb-alm-14-p.de.bosch.com/gc",
	gcSelectionDialogUri: "https://rb-alm-14-p.de.bosch.com/gc/configurationPicker",
	gcAppTitle: "!GcInitDataResource.GcAppName!",
	projectAreaAssociationsRequiredForContributions: false
}
dojo.provide("com.ibm.team.gc.sdk.service.internal.GcInitData");

;dojo.provide("com.ibm.team.repository.web.client.internal.RepositoryClient");










(function(){
com.ibm.team.repository.web.client.internal.RepositoryClient={SERVICE_URI:"com.ibm.team.repository.common.internal.IContributorRestService",INIT_SERVICE_URI:"com.ibm.team.repository.service.internal.webuiInitializer.IWebUIInitializerRestService",GET_CONTRIBUTORS_METHOD:"getContributors",POST_CONTRIBUTOR_METHOD:"postContributor",QUERY_CONTRIBUTORS_URL:"/resource/virtual/contributors",getContributors:function(_1,_2){
this._invokeRepositoryService(_1,this.GET_CONTRIBUTORS_METHOD,_2);
},getContributorQueryResults:function(_3,_4){
var _5=[net.jazz.ajax.contextRoot(),this.QUERY_CONTRIBUTORS_URL];
if(_4.expression){
_4.expression=dojo.toJson(_4.expression);
}
var _6=true;
for(var i in _4){
if(_6){
_5.push("?");
}else{
_5.push("&");
}
_6=false;
_5.push(i);
_5.push("=");
_5.push(encodeURIComponent(_4[i]));
}
var _7={url:_5.join(""),handleAs:"json",headers:{"accept":"text/json","X-com-ibm-team-configuration-versions":"LATEST","X-Jazz-CSRF-Prevent":dojo.cookie("JSESSIONID")},handle:function(_8,_9){
if(_8 instanceof Error){
_3.doErrorCallback({status:_9.xhr.status,message:_9.xhr.statusText});
}else{
_3.doCallback(_8);
}
}};
dojo.xhrGet(_7);
},postContributor:function(_a,_b){
if(!_b.name){
alert("Missing required field 'name'");
return;
}
if(!_b.userId){
alert("Missing required field 'userId'");
return;
}
this._invokeRepositoryService(_a,this.POST_CONTRIBUTOR_METHOD,_b);
},getAuthenticatedContributor:function(_c){
this._invokeRepositoryService(_c,"getCurrentContributor");
},getInitializationData:function(_d){
var _e=dojo.isSafari<6?encodeURI(document.location.href):document.location.href;
var _f="getInitializationData";
var _10=_e.split("/projects/",2);
var _11={};
if(_10.length>=2){
var _12=_10[1];
if(_12){
_11["project"]=_12;
}
}
var _13=new com.ibm.team.repository.web.transport.ServiceRequest(this.INIT_SERVICE_URI,_f,_11);
com.ibm.team.repository.web.transport.TeamServerClient.invokeService(_13,_d,{headers:{"X-Referer":_e}});
},_invokeRepositoryService:function(_14,_15,_16){
if(arguments.length==2){
var _17=new com.ibm.team.repository.web.transport.ServiceRequest(this.SERVICE_URI,_15);
}else{
_17=new com.ibm.team.repository.web.transport.ServiceRequest(this.SERVICE_URI,_15,_16);
}
com.ibm.team.repository.web.transport.TeamServerClient.invokeService(_17,_14);
}};
})();


;dojo.provide("com.ibm.team.configuration.web.context.internal.GcRootServices");








(function(){
var _1=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _2=com.ibm.team.repository.web.client.internal.RepositoryClient;
var _3=com.ibm.team.gc.sdk.service.internal.GcInitData();
dojo.mixin(com.ibm.team.configuration.web.context.internal.GcRootServices,{getGcAppUri:function __getGcAppUri(){
return _3.gcAppUri;
},getGcSelectionDialogUri:function __getGcSelectionDialogUri(){
return _3.gcSelectionDialogUri;
},isAvailable:function __isAvailable(){
return !!_3.gcAppIsAvailable;
},getProjectAreaAssociationsRequiredForContributions:function __getProjectAreaAssociationsRequiredForContributions(){
return !!_3.projectAreaAssociationsRequiredForContributions;
}});
})();


;dojo.provide("com.ibm.team.configuration.web.context.ContextAPI");










(function(){
var _1=com.ibm.team.repository.web.client.session;
var _2=com.ibm.team.configuration.web.context.internal.LocalRootServices;
var _3=com.ibm.team.configuration.web.context.internal.GcRootServices;
var _4="com.ibm.team.configuration.web.globaltype";
var _5="com.ibm.team.configuration.web.localtype";
var _6="CURRENT_PROJECT_AREA_SCOPE";
var _7="COMPONENT_UNIQUE";
var _8="CONFIGURATION_UNIQUE";
var _9="jazz_config.component";
var _a="jazz_config.picker";
var _b="jazz_config.pickerfirstLoad";
var _c="jazz_config.contextProjectAreaUrl";
var _d="jazz_config.ignoreProjectArea";
var _e="jazz_config.contextProjectAreaId";
var _f="jazz_config.isAddContribution";
var _10="/com.ibm.team.configuration.web.munge=";
var _11=50;
var _12=10240;
var _13=1.5;
dojo.mixin(com.ibm.team.configuration.web.context.ContextAPI,{JAZZ_CONFIG_COMPONENT_PARAMETER:_9,JAZZ_CONFIG_CONTEXT_PROJECT_AREA_URL_PARAMETER:_c,JAZZ_CONFIG_CONTEXT_PROJECT_AREA_ID_PARAMETER:_e,JAZZ_CONFIG_IS_ADD_CONTRIBUTION_PARAMETER:_f,GLOBAL_CONFIGURATION_TYPE:_4,JAZZ_CONFIG_PICKER:_a,JAZZ_CONFIG_PICKER_FIRST_LOAD:_b,CONTEXT_VALID:"com.ibm.team.configuration.web.content.VALID",CONTEXT_VALID_SKEW:"com.ibm.team.configuration.web.content.VALID_SKEW",CONTEXT_INVALID_NOT_RESOLVED:"com.ibm.team.configuration.web.content.INVALID_NOT_RESOLVED",CONTEXT_INVALID_MISSING_OVERRIDE:"com.ibm.team.configuration.web.content.INVALID_MISSING_OVERRIDE",CONTEXT_INVALID_NO_CONTRIBUTIONS:"com.ibm.team.configuration.web.content.INVALID_NO_CONTRIBUTIONS",getLastUsedContext:function __getLastUsedContext(){
var _14=new dojo.Deferred();
var _15=this._getRecentlyUsedConfigurations(null,1,null,_6,true);
_15.then(function(_16){
_14.callback(_16[0]);
});
return _14;
},getLastUsedContextForComponent:function __getLastUsedContextForComponent(_17){
var _18=new dojo.Deferred();
var _19=this._getRecentlyUsedConfigurations(null,1,null,_6,true,_17);
_19.then(function(_1a){
_18.callback(_1a[0]);
});
return _18;
},getRecentlyUsedComponents:function __getRecentlyUsedComponents(_1b,_1c,_1d){
return this._getRecentlyUsedConfigurations(null,_1c,_1d,_1b,true,null,_7);
},getRecentlyUsedGlobalConfigurations:function __getRecentlyUsedGlobalConfigurations(_1e,_1f){
return this._getRecentlyUsedConfigurations(_4,_1e,_1f,null,false,null,_8);
},getRecentlyUsedLocalConfigurations:function __getRecentlyUsedLocalConfigurations(_20,_21,_22){
return this._getRecentlyUsedConfigurations(_5,_20,_21,_6,false,_22,_8);
},getRecentlyUsedLocalConfigurationsForProjectArea:function __getRecentlyUsedLocalContextsForProjectArea(_23,_24,_25,_26){
return this._getRecentlyUsedConfigurations(_5,_24,_25,_23,false,_26,_8);
},getRecentlyUsedContexts:function __getRecentlyUsedContexts(_27,_28){
return this._getRecentlyUsedConfigurations(null,_27,_28,_6,true);
},getRecentlyUsedContextsForProjectArea:function __getRecentlyUsedContexts(_29,_2a,_2b){
return this._getRecentlyUsedConfigurations(null,_2a,_2b,_29,true);
},saveAsCurrentContext:function __saveAsCurrentContext(_2c){
console.warn("ContextAPI.saveAsCurrentContext() does nothing starting 6.0.3.  CmTools.setContext() now automatically saves context in the history so this method call is no longer necessary.");
},saveAsRecentlyUsedConfiguration:function __saveAsRecentlyUsedConfiguration(_2d){
return this._saveAsRecentlyUsedConfiguration(_2d,false,_6);
},saveAsRecentlyUsedConfigurationForProjectArea:function __saveAsRecentlyUsedConfiguration(_2e,_2f){
return this._saveAsRecentlyUsedConfiguration(_2e,false,_2f);
},getResolvedConfiguration:function _getResolvedConfiguration(_30){
if(!_30.globalConfigurationUri){
throw new Error("'globalConfigurationUri' must be set on context in order to call ContextAPI.getResolvedConfiguration().");
}else{
if(!_30.componentUri){
throw new Error("'componentUri' must be set on context in order to call ContextAPI.getResolvedConfiguration().");
}
}
var _31=new dojo.Deferred();
var _32={componentUri:_30.componentUri,configurationUri:_30.globalConfigurationUri};
var _33=dojo.objectToQuery(_32);
jazz.client.xhrGet({url:net.jazz.ajax._contextRoot+"/configurationResolutionService?"+_33,handleAs:"json",headers:{"Accept":"application/json"},preventCache:true,handle:function(){
},load:function(_34){
_31.callback(_34);
},error:function(_35,_36){
_31.errback(dojo.fromJson(_36.xhr.responseText));
}});
return _31;
},validateContext:function _validateContext(_37){
var _38=this;
var _39=new dojo.Deferred();
var _3a=this.getResolvedConfiguration(_37);
_3a.then(function(_3b){
var _3c=dojo.clone(_3b);
var _3d=_3b["changeSetUris"];
var _3e=_3b["localConfigurationUris"];
var _3f=_3d.indexOf(_37.changeSetUri);
var _40=_3e.indexOf(_37.localConfigurationUri);
if(_3d.length==0&&_3e.length==0){
_3c.status=_38.CONTEXT_INVALID_NO_CONTRIBUTIONS;
}else{
if((_37["changeSetUri"]&&_3f==-1)||(!_37["changeSetUri"]&&_40==-1)){
var _41=!!_37.changeSetUri;
var _42=_3b.changeSetUris.length===0;
_3c.status=_42&&_41?_38.CONTEXT_INVALID_MISSING_OVERRIDE:_38.CONTEXT_INVALID_NOT_RESOLVED;
}else{
if((_37["changeSetUri"]&&_3f>0)||(!_37["changeSetUri"]&&_40>0)){
_3c.status=_38.CONTEXT_VALID_SKEW;
}else{
_3c.status=_38.CONTEXT_VALID;
}
}
}
_39.callback(_3c);
},function(_43){
_39.errback(_43);
});
return _39;
},_setContext:function __setContext(_44){
return this._saveAsRecentlyUsedConfiguration(_44,true,_6);
},_saveAsRecentlyUsedConfiguration:function ___saveAsRecentlyUsedConfiguration(_45,_46,_47){
var _48=new dojo.Deferred();
var _49=_45.isGlobal===true?_4:_5;
var _4a=this._getProjectAreaId(_47);
var _4b={};
if(_45.rdfType){
_4b.rdfType=_45.rdfType;
}
if(_46){
_4b.usedAsContext=true;
}
var _4c=JSON.stringify(_4b);
var _4d={uri:_45.uri,uri2:_45.componentUri,project:_4a,type:_49,label:_45.label,data:_4c};
jazz.client.xhrPost({url:net.jazz.ajax._contextRoot+"/view-history",handleAs:"json",headers:{"Accept":"application/json"},content:_4d,handle:function(){
},load:function(_4e){
_48.callback();
},error:function(_4f,_50){
_48.errback(dojo.fromJson(_50.xhr.responseText));
}});
return _48;
},_getRecentlyUsedConfigurations:function __getRecentlyUsedConfigurations(_51,_52,_53,_54,_55,_56,_57){
var _58=this;
var _59=new dojo.Deferred();
var _5a=this._getProjectAreaId(_54);
var _5b={project:_5a};
if(_51!==null){
_5b.type=_51;
}else{
_5b.type=[_4,_5];
}
if(_56){
_5b.uri2=_56;
}
if(_52==null){
_52=_11;
}
if(_52>_12){
_52=_12;
}
_5b.size=_52*_13;
if(_53!==undefined){
_5b.startIndex=_53;
}
jazz.client.xhrGet({url:net.jazz.ajax._contextRoot+"/view-history",handleAs:"json",headers:{"Accept":"application/json"},content:_5b,preventCache:true,handle:function(){
},load:function(_5c){
var d2=_58._getFormattedConfigResults(_5c.items,_52,_55,_57);
d2.then(function(_5d){
_59.callback(_5d);
});
},error:function(_5e,_5f){
_59.errback(dojo.fromJson(_5f.xhr.responseText));
}});
return _59;
},_getFormattedConfigResults:function __getFormattedResults(_60,_61,_62,_63){
var _64=this;
var _65={};
var _66=[];
var _67=new dojo.Deferred();
dojo.forEach(_60,function(_68,i){
_68.uri=_64._unmungeUri(_68.uri);
var _69=_64._validConfig(_68);
_66.push(_69);
});
var _6a=new dojo.DeferredList(_66);
_6a.then(function(_6b){
var _6c=[];
var _6d={};
for(var i=0;i<_6b.length;i++){
if(_6c.length>=_61){
break;
}
if(_6b[i][1]===true){
var _6e=_60[i];
var key=_64._getUniqueKey(_6e,_63);
if(_6d[key]){
continue;
}
var _6f=_64._getFormattedConfigResult(_6e);
if(_62&&!_6f.usedAsContext){
continue;
}
_6d[key]=true;
_6c.push(_6f);
}
}
_67.callback(_6c);
});
return _67;
},_getUniqueKey:function __getUniqueKey(_70,_71){
if(_71==_7){
return _70.uri2;
}else{
if(_71==_8){
return _70.uri;
}
}
var _72=_70.uri;
if(_70.uri2){
_72+=":"+_70.uri2;
}
return _72;
},_deleteEntry:function __deleteEntry(_73){
jazz.client.xhrDelete({url:net.jazz.ajax._contextRoot+"/view-history",timeout:5000,content:_73,load:function(){
if(djConfig.isDebug){
console.log("Deleted history entry "+_73);
}
},error:function(_74,_75){
if(djConfig.isDebug){
console.log("Failed to delete history entry "+_73);
}
}});
},_validConfig:function __validConfig(_76){
var _77=new dojo.Deferred();
var _78=this;
jazz.client.xhrGet({url:_76.uri,handleAs:"xml",headers:{"Accept":"application/rdf+xml"},timeout:5000,load:function(_79){
_77.callback(true);
},error:function(_7a,_7b){
_77.callback(false);
if(_7a.status==404){
_78._deleteEntry(_76);
}
}});
return _77;
},_getFormattedConfigResult:function __getFormattedResult(_7c){
if(!_7c){
return null;
}
var _7d=(_7c.type===_4)?true:false;
var _7e=(_7c.project!==undefined)?_7c.project:"";
var _7f={"uri":_7c.uri,"isGlobal":_7d,"project":_7e};
if(_7c.data){
try{
var _80=JSON.parse(_7c.data);
if(_80.rdfType){
_7f.rdfType=_80.rdfType;
}
if(_80.usedAsContext){
_7f.usedAsContext=_80.usedAsContext;
}
}
catch(error){
console.error("Failed to parse configResult data on "+JSON.stringify(_7c));
}
}
if(_7c.uri2){
_7f.componentUri=_7c.uri2;
}
return _7f;
},_unmungeUri:function __mungeUri(uri){
if(uri.indexOf(_10)>-1){
return uri.substring(0,uri.indexOf(_10));
}
return uri;
},_getProjectAreaId:function __getProjectAreaId(_81){
if(_81==_6){
_81=jazz.app.context.getProjectAreaUri();
}
if(_81){
return _81;
}
return null;
}});
})();


;define("dojox/xml/DomParser",["dojo/_base/kernel","dojo/_base/array"],function(_1){
_1.getObject("xml",true,dojox);
dojox.xml.DomParser=new (function(){
var _2={ELEMENT:1,ATTRIBUTE:2,TEXT:3,CDATA_SECTION:4,PROCESSING_INSTRUCTION:7,COMMENT:8,DOCUMENT:9};
var _3=/<([^>\/\s+]*)([^>]*)>([^<]*)/g;
var _4=/([^=]*)=(("([^"]*)")|('([^']*)'))/g;
var _5=/<!ENTITY\s+([^"]*)\s+"([^"]*)">/g;
var _6=/<!\[CDATA\[([\u0001-\uFFFF]*?)\]\]>/g;
var _7=/<!--([\u0001-\uFFFF]*?)-->/g;
var _8=/^\s+|\s+$/g;
var _9=/\s+/g;
var _a=/\&gt;/g;
var _b=/\&lt;/g;
var _c=/\&quot;/g;
var _d=/\&apos;/g;
var _e=/\&amp;/g;
var _f="_def_";
function _10(){
return new (function(){
var all={};
this.nodeType=_2.DOCUMENT;
this.nodeName="#document";
this.namespaces={};
this._nsPaths={};
this.childNodes=[];
this.documentElement=null;
this._add=function(obj){
if(typeof (obj.id)!="undefined"){
all[obj.id]=obj;
}
};
this._remove=function(id){
if(all[id]){
delete all[id];
}
};
this.byId=this.getElementById=function(id){
return all[id];
};
this.byName=this.getElementsByTagName=_11;
this.byNameNS=this.getElementsByTagNameNS=_12;
this.childrenByName=_13;
this.childrenByNameNS=_14;
})();
};
function _11(_15){
function _16(_17,_18,arr){
_1.forEach(_17.childNodes,function(c){
if(c.nodeType==_2.ELEMENT){
if(_18=="*"){
arr.push(c);
}else{
if(c.nodeName==_18){
arr.push(c);
}
}
_16(c,_18,arr);
}
});
};
var a=[];
_16(this,_15,a);
return a;
};
function _12(_19,ns){
function _1a(_1b,_1c,ns,arr){
_1.forEach(_1b.childNodes,function(c){
if(c.nodeType==_2.ELEMENT){
if(_1c=="*"&&c.ownerDocument._nsPaths[ns]==c.namespace){
arr.push(c);
}else{
if(c.localName==_1c&&c.ownerDocument._nsPaths[ns]==c.namespace){
arr.push(c);
}
}
_1a(c,_1c,ns,arr);
}
});
};
if(!ns){
ns=_f;
}
var a=[];
_1a(this,_19,ns,a);
return a;
};
function _13(_1d){
var a=[];
_1.forEach(this.childNodes,function(c){
if(c.nodeType==_2.ELEMENT){
if(_1d=="*"){
a.push(c);
}else{
if(c.nodeName==_1d){
a.push(c);
}
}
}
});
return a;
};
function _14(_1e,ns){
var a=[];
_1.forEach(this.childNodes,function(c){
if(c.nodeType==_2.ELEMENT){
if(_1e=="*"&&c.ownerDocument._nsPaths[ns]==c.namespace){
a.push(c);
}else{
if(c.localName==_1e&&c.ownerDocument._nsPaths[ns]==c.namespace){
a.push(c);
}
}
}
});
return a;
};
function _1f(v){
return {nodeType:_2.TEXT,nodeName:"#text",nodeValue:v.replace(_9," ").replace(_a,">").replace(_b,"<").replace(_d,"'").replace(_c,"\"").replace(_e,"&")};
};
function _20(_21){
for(var i=0;i<this.attributes.length;i++){
if(this.attributes[i].nodeName==_21){
return this.attributes[i].nodeValue;
}
}
return null;
};
function _22(_23,ns){
for(var i=0;i<this.attributes.length;i++){
if(this.ownerDocument._nsPaths[ns]==this.attributes[i].namespace&&this.attributes[i].localName==_23){
return this.attributes[i].nodeValue;
}
}
return null;
};
function _24(_25,val){
var old=null;
for(var i=0;i<this.attributes.length;i++){
if(this.attributes[i].nodeName==_25){
old=this.attributes[i].nodeValue;
this.attributes[i].nodeValue=val;
break;
}
}
if(_25=="id"){
if(old!=null){
this.ownerDocument._remove(old);
}
this.ownerDocument._add(this);
}
};
function _26(_27,val,ns){
for(var i=0;i<this.attributes.length;i++){
if(this.ownerDocument._nsPaths[ns]==this.attributes[i].namespace&&this.attributes[i].localName==_27){
this.attributes[i].nodeValue=val;
return;
}
}
};
function _28(){
var p=this.parentNode;
if(p){
for(var i=0;i<p.childNodes.length;i++){
if(p.childNodes[i]==this&&i>0){
return p.childNodes[i-1];
}
}
}
return null;
};
function _29(){
var p=this.parentNode;
if(p){
for(var i=0;i<p.childNodes.length;i++){
if(p.childNodes[i]==this&&(i+1)<p.childNodes.length){
return p.childNodes[i+1];
}
}
}
return null;
};
this.parse=function(str){
var _2a=_10();
if(str==null){
return _2a;
}
if(str.length==0){
return _2a;
}
if(str.indexOf("<!ENTITY")>0){
var _2b,eRe=[];
if(_5.test(str)){
_5.lastIndex=0;
while((_2b=_5.exec(str))!=null){
eRe.push({entity:"&"+_2b[1].replace(_8,"")+";",expression:_2b[2]});
}
for(var i=0;i<eRe.length;i++){
str=str.replace(new RegExp(eRe[i].entity,"g"),eRe[i].expression);
}
}
}
var _2c=[],_2d;
while((_2d=_6.exec(str))!=null){
_2c.push(_2d[1]);
}
for(var i=0;i<_2c.length;i++){
str=str.replace(_2c[i],i);
}
var _2e=[],_2f;
while((_2f=_7.exec(str))!=null){
_2e.push(_2f[1]);
}
for(i=0;i<_2e.length;i++){
str=str.replace(_2e[i],i);
}
var res,obj=_2a;
while((res=_3.exec(str))!=null){
if(res[2].charAt(0)=="/"&&res[2].replace(_8,"").length>1){
if(obj.parentNode){
obj=obj.parentNode;
}
var _30=(res[3]||"").replace(_8,"");
if(_30.length>0){
obj.childNodes.push(_1f(_30));
}
}else{
if(res[1].length>0){
if(res[1].charAt(0)=="?"){
var _31=res[1].substr(1);
var _32=res[2].substr(0,res[2].length-2);
obj.childNodes.push({nodeType:_2.PROCESSING_INSTRUCTION,nodeName:_31,nodeValue:_32});
}else{
if(res[1].charAt(0)=="!"){
if(res[1].indexOf("![CDATA[")==0){
var val=parseInt(res[1].replace("![CDATA[","").replace("]]",""));
obj.childNodes.push({nodeType:_2.CDATA_SECTION,nodeName:"#cdata-section",nodeValue:_2c[val]});
}else{
if(res[1].substr(0,3)=="!--"){
var val=parseInt(res[1].replace("!--","").replace("--",""));
obj.childNodes.push({nodeType:_2.COMMENT,nodeName:"#comment",nodeValue:_2e[val]});
}
}
}else{
var _31=res[1].replace(_8,"");
var o={nodeType:_2.ELEMENT,nodeName:_31,localName:_31,namespace:_f,ownerDocument:_2a,attributes:[],parentNode:null,childNodes:[]};
if(_31.indexOf(":")>-1){
var t=_31.split(":");
o.namespace=t[0];
o.localName=t[1];
}
o.byName=o.getElementsByTagName=_11;
o.byNameNS=o.getElementsByTagNameNS=_12;
o.childrenByName=_13;
o.childrenByNameNS=_14;
o.getAttribute=_20;
o.getAttributeNS=_22;
o.setAttribute=_24;
o.setAttributeNS=_26;
o.previous=o.previousSibling=_28;
o.next=o.nextSibling=_29;
var _33;
while((_33=_4.exec(res[2]))!=null){
if(_33.length>0){
var _31=_33[1].replace(_8,"");
var val=(_33[4]||_33[6]||"").replace(_9," ").replace(_a,">").replace(_b,"<").replace(_d,"'").replace(_c,"\"").replace(_e,"&");
if(_31.indexOf("xmlns")==0){
if(_31.indexOf(":")>0){
var ns=_31.split(":");
_2a.namespaces[ns[1]]=val;
_2a._nsPaths[val]=ns[1];
}else{
_2a.namespaces[_f]=val;
_2a._nsPaths[val]=_f;
}
}else{
var ln=_31;
var ns=_f;
if(_31.indexOf(":")>0){
var t=_31.split(":");
ln=t[1];
ns=t[0];
}
o.attributes.push({nodeType:_2.ATTRIBUTE,nodeName:_31,localName:ln,namespace:ns,nodeValue:val});
if(ln=="id"){
o.id=val;
}
}
}
}
_2a._add(o);
if(obj){
obj.childNodes.push(o);
o.parentNode=obj;
if(res[2].charAt(res[2].length-1)!="/"){
obj=o;
}
}
var _30=res[3];
if(_30.length>0){
obj.childNodes.push(_1f(_30));
}
}
}
}
}
}
for(var i=0;i<_2a.childNodes.length;i++){
var e=_2a.childNodes[i];
if(e.nodeType==_2.ELEMENT){
_2a.documentElement=e;
break;
}
}
return _2a;
};
})();
return dojox.xml.DomParser;
});


;(function(){
dojo.provide("jazz.ui.internal.ResourceLinkAggregator");




var _1=1;
jazz.ui.internal.resourceLinkAggreagtor=function(){
if(!jazz.ui.internal._resourceLinkAggregator){
jazz.ui.internal._resourceLinkAggregator=new jazz.ui.internal.ResourceLinkAggregator();
}
return jazz.ui.internal._resourceLinkAggregator;
};
dojo.declare("jazz.ui.internal.ResourceLinkAggregator",null,{constructor:function(){
this.reset();
this.resetOauth();
},reset:function(){
this._resourceLinks={};
this._timeoutId=null;
},resetOauth:function(_2){
if(_2&&this._oauthRLs){
this._oauthRLs[_2]=[];
}else{
this._oauthRLs={};
}
},register:function(_3,_4,_5,id){
id=id||_1++;
if(this._requestPending){
if(!this._registerQueue){
this._registerQueue=[];
}
this._registerQueue.push({uri:_3,callback:_4,errback:_5,id:id});
}else{
if(!this._resourceLinks[_3]){
this._resourceLinks[_3]=[];
}
this._resourceLinks[_3].push({callback:_4,errback:_5,id:id});
if(!this._timeoutId){
this._timeoutId=setTimeout(dojo.hitch(this,this.sendRequest),0);
}
}
return id;
},registerOauth:function(_6,_7,_8,_9){
var _a={callback:_8,errback:_9,id:_1++};
this._handleRegisterOauth(_6,_7,_a);
return _a.id;
},unregisterOauth:function(_b,_c,id){
if(this._oauthRLs[_b]&&this._oauthRLs[_b][_c]){
arr=this._oauthRLs[_b][_c];
for(var i=0;i<arr.length;i++){
if(arr[i].id===id){
return arr.splice(i,1)[0];
}
}
}
return false;
},_handleRegisterOauth:function(_d,_e,_f){
if(this._oauthRLs[_d]==null){
this._oauthRLs[_d]={};
}
if(this._oauthRLs[_d][_e]==null){
this._oauthRLs[_d][_e]=[];
}
this._oauthRLs[_d][_e].push(_f);
},sendRequest:function(){
this._requestPending=true;
var _10=[];
for(var i in this._resourceLinks){
_10.push(i);
}
var dfd=jazz.client.xhrPost({url:net.jazz.ajax.contextRoot()+"/_compactRendering",handleAs:"json",content:{uri:_10}});
dfd.addCallback(dojo.hitch(this,this.handleResponse,null));
dfd.addErrback(dojo.hitch(this,this.handleError,null));
},handleResponse:function(_11,_12){
var _13=_11?this._oauthRLs[_11]:this._resourceLinks;
for(var uri in _13){
if(_12[uri]){
for(var i=0;i<_13[uri].length;i++){
if(_12[uri]._err){
_13[uri][i].errback(_12[uri]._err);
}else{
if(_12[uri].oauthRequired){
if(_11){
var _14=true;
}else{
this._handleRegisterOauth(_12[uri].token,uri,_13[uri][i]);
}
}
_13[uri][i].callback(_12[uri]);
}
}
}
}
if(!_11){
this.reset();
}else{
if(!_14){
this.resetOauth(_11);
}
}
this._requestPending=false;
if(this._registerQueue){
for(var i=0;i<this._registerQueue.length;i++){
this.register(this._registerQueue[i].uri,this._registerQueue[i].callback,this._registerQueue[i].errback,this._registerQueue[i].id);
}
}
delete this._registerQueue;
},handleError:function(_15,err){
for(var uri in this._resourceLinks){
for(var i=0;i<this._resourceLinks[uri].length;i++){
this._resourceLinks[uri][i].errback(err);
}
}
if(_15){
this.resetOauth(_15);
}else{
this.reset();
}
this._requestPending=false;
},resendOauth:function(_16){
var _17=[];
if(this._oauthRLs[_16]){
for(var i in this._oauthRLs[_16]){
_17.push(i);
}
var dfd=jazz.client.xhrPost({url:net.jazz.ajax.contextRoot()+"/_compactRendering",handleAs:"json",content:{uri:_17}});
dfd.addCallback(dojo.hitch(this,this.handleResponse,_16));
dfd.addErrback(dojo.hitch(this,this.handleError,_16));
}
}});
})();


;dojo.cache("jazz.ui", "templates/HoverPopup.html", "<div class=\"jazz-ui-HoverPopup\">	<div class=\"wrapper\" dojoAttachPoint=\"wrapper\">		<div class=\"vert-trim1\"></div>		<div class=\"vert-trim2\"></div>		<div class=\"vert-trim3\"></div>		<div class=\"right-outline\">			<div class=\"left-outline\">				<div class=\"side-trim\">					<div dojoAttachPoint=\"contentWrapper\" class=\"content-wrapper\">						<div dojoAttachPoint=\"content\" class=\"content\">						</div>					</div>				</div>			</div>		</div>		<div class=\"vert-trim3\"></div>		<div class=\"vert-trim2\"></div>		<div class=\"vert-trim1\"></div>		<div class=\"top-right corner\"></div>		<div class=\"top-left corner\"></div>		<div class=\"bottom-right corner\"></div>		<div class=\"bottom-left corner\"></div>		<div dojoAttachPoint=\"arrow\" class=\"arrow\"></div>	</div></div>");

;dojo.provide("jazz.ui.HoverPopup");




(function(){
var _1=500;
var _2=350;
var _3=dojo.isIE?200:500;
var _4=2500;
var _5=300;
var _6=0;
var _7=3;
dojo.declare("jazz.ui.HoverPopup",dijit._Widget,{content:null,around:null,anchor:null,html:null,onOpen:null,onClose:null,openDelay:800,closeDelay:800,maxWidth:_1,maxHeight:_2,persist:true,enabled:true,programmatic:false,orientation:null,open:function(_8){
if(!this.isEnabled()){
return;
}
if(!_8){
if(this._aroundNodes&&this._aroundNodes.length==1){
_8=this._aroundNodes[0];
}else{
return;
}
}
if(this._openTimer){
clearTimeout(this._openTimer);
delete this._openTimer;
}
var m=jazz.ui._getMasterPopup();
this._connectOnBodyClick();
if(m._showing&&m._showing.programmatic==="block"){
return;
}
if(this.persist){
this._events=[];
this._events.push(this.connect(m.domNode,"onmouseover",this._hoverPopup));
this._events.push(this.connect(m.domNode,"onmouseout",this._mouseOutPopup));
this._events.push(this.connect(m.domNode,"onhover",this._hoverPopup));
this._events.push(this.connect(m.domNode,"onunhover",this._unHoverPopup));
}
this._isOpen=true;
this._target=_8;
if(this._lastOpen==-1&&this.createContents&&dojo.isFunction(this.createContents)){
var _9=this.createContents(this);
if(_9){
this.content=_9;
}
}
if(this.onOpen&&dojo.isFunction(this.onOpen)){
this.onOpen(this,this._lastOpen);
}
this._lastOpen=new Date().getTime();
if(!this.content){
console.error("HoverPopup: The createContents function must return a valid dom node.");
this.close();
return;
}
m.setContent(this.content);
this._doManagedConnects();
m.show(_8,this);
this._validate();
},_connectOnBodyClick:function(){
this._onBodyClickHandle=this.connect(dojo.body(),"onclick",function(_a){
if(this._getParentNode(_a.target,jazz.ui._getMasterPopup().content)&&this._getParentNode(_a.target,this._aroundNodes[0])){
this.close();
}
});
},_getParentNode:function(_b,_c,_d){
if(_b===_c){
return false;
}else{
if(_b.parentNode==null){
return true;
}else{
return this._getParentNode(_b.parentNode,_c);
}
}
},_disconnectOnBodyClick:function(){
if(this._onBodyClickHandle){
this.disconnect(this._onBodyClickHandle);
this._onBodyClickHandle=null;
}
},close:function(){
this._disconnectOnBodyClick();
if(this._closeTimer){
clearTimeout(this._closeTimer);
delete this._closeTimer;
}
if(this._validateTimeout){
clearTimeout(this._validateTimeout);
delete this._validateTimeout;
}
if(this._events){
while(this._events.length>0){
this.disconnect(this._events.pop());
}
}
var m=jazz.ui._getMasterPopup();
if(m._showing!==this){
return;
}
_6=Date.now();
this._isOpen=false;
this._target=null;
this._doManagedDisconnects();
m.hide();
if(this.onClose&&dojo.isFunction(this.onClose)){
this.onClose(this);
}
},managedConnect:function(_e,_f,_10,_11,_12){
var _13={arg1:_e,arg2:_f,arg3:_10,arg4:_11,arg5:_12};
this._mConnects.push(_13);
if(this._isOpen){
this._doManagedConnect(_13);
}
},isEnabled:function(){
return this.enabled;
},updateDimensions:function(_14,_15,_16){
},position:function(_17){
var _18=jazz.ui._getMasterPopup();
if(!_17){
if(!this._isOpen||!this._target){
return;
}
_17=this._target;
}
var _19=dojo.marginBox(_17);
var _1a=dojo.position(_17,true);
_19.x=_1a.x;
_19.y=_1a.y;
var _1b=dojo.marginBox(_17);
var _1c=dojo.position(_17,false);
_1b.x=_1c.x;
_1b.y=_1c.y;
if(_17.parentNode.offsetWidth<_1a.w){
_19.w=_1b.w=_17.parentNode.offsetWidth;
}
var v=dijit.getViewport();
this.updateDimensions(v,_19,_1b);
this.effectiveMaxWidth=Math.min(this.maxWidth,v.w-60);
this.effectiveMaxHeight=Math.min(this.maxHeight,v.h-30);
if(!dojo.isIE||dojo.isIE>=8){
_18.contentWrapper.style.maxWidth=this.effectiveMaxWidth+"px";
}
_18.contentWrapper.style.maxHeight=this.effectiveMaxHeight+"px";
if(this.orientation==="V"||this.orientation==="v"||this.orientation==="T"||this.orientation==="t"||this.orientation==="B"||this.orientation==="b"){
this.positionVer(_18,_19,_1b,v);
}else{
this.positionHor(_18,_19,_1b,v);
}
_18.contentWrapper.scrollTop=1;
_18.contentWrapper.scrollTop=0;
if(dojo.isIE<8){
_18.content.className=_18.content.className;
}
},positionVer:function(_1d,_1e,_1f,v){
if(this.orientation==="T"||this.orientation=="t"){
var top=true;
}else{
if(this.orientation=="B"||this.orientation=="b"){
var top=false;
}else{
var t=_1f.y;
var b=v.h-t-_1f.h;
var top=t>b;
}
}
var h=_1d.content.clientHeight+10;
var max=v.h-Math.min(this.effectiveMaxHeight,h)-50;
if(top){
var y=v.h-_1e.y;
var _20=v.h-_1f.y;
if(_20>max){
var d=_20-max;
y-=d;
}
_1d.domNode.style.bottom=(y+10)+"px";
dojo.addClass(_1d.wrapper,"top");
}else{
var y=_1e.y+_1e.h;
var _20=_1f.y+_1f.h;
if(_20>max){
var d=_20-max;
x-=d;
}
_1d.domNode.style.top=(y+10)+"px";
dojo.addClass(_1d.wrapper,"bottom");
}
if(d&&d>_1e.h){
_1d.arrow.style.display="none";
}
var l=_1f.x;
var r=v.w-l-_1f.w;
var w=_1d.content.scrollWidth;
if(r>l){
d=11-(_1e.w/2);
if(l>d){
max=v.w-Math.min(this.effectiveMaxWidth,w)-20;
if(l-d>max){
var p=_1e.x-t+max;
x=_1f.x+(_1e.w/2)-max-7;
}else{
p=_1e.x-d;
x=4;
}
}else{
var p=0;
var x=d-l;
}
_1d.domNode.style.left=p+"px";
_1d.arrow.style.left=x+"px";
}else{
r=v.w-_1e.x-_1e.w;
var wt=window.top;
var _21=v.w-(wt.innerWidth&&wt.scrollMaxX?wt.dijit.getViewport().w+wt.scrollMaxX:wt.document.body.scrollWidth);
var d=15-(_1e.w/2);
if(r>_21+d){
var min=Math.min(this.effectiveMaxWidth,w)+20;
if(l+_1f.w<min){
d=min-l-_1f.w;
x=d+(_1f.w/2)-8;
}else{
x=7;
}
p=r-d;
}else{
p=_21;
x=d-r;
}
_1d.domNode.style.right=p+"px";
_1d.arrow.style.right=x+"px";
}
},positionHor:function(_22,_23,_24,v){
if(this.orientation=="L"||this.orientation=="l"){
var _25=true;
}else{
if(this.orientation=="R"||this.orientation=="r"){
var _25=false;
}else{
var l=_24.x;
var r=v.w-l-_24.w;
var _25=l>r;
}
}
var w=_22.content.scrollWidth+10;
var max=v.w-Math.min(this.effectiveMaxWidth,w)-50;
if(_25){
var x=v.w-_23.x;
var _26=v.w-_24.x;
if(_26>max){
var d=_26-max;
x-=d;
}
_22.domNode.style.right=(x+10)+"px";
dojo.addClass(_22.wrapper,"left");
}else{
var x=_23.x+_23.w;
var _26=_24.x+_24.w;
if(_26>max){
var d=_26-max;
x-=d;
}
_22.domNode.style.left=(x+10)+"px";
dojo.addClass(_22.wrapper,"right");
}
if(d&&d>_23.w){
_22.arrow.style.display="none";
}
var t=_24.y;
var b=v.h-t-_24.h;
var h=_22.content.clientHeight;
if(b>t){
var d=11-(_23.h/2);
if(t>d){
max=v.h-Math.min(this.effectiveMaxHeight,h)-20;
if(t-d>max){
var p=_23.y-t+max;
var y=_24.y+(_23.h/2)-max-7;
}else{
var p=_23.y-d;
var y=4;
}
}else{
var p=0;
var y=d-t;
}
_22.domNode.style.top=p+"px";
_22.arrow.style.top=y+"px";
}else{
b=v.h-_23.y-_23.h;
var wt=window.top;
var _27=v.h-(wt.innerHeight&&wt.scrollMaxY?wt.dijit.getViewport().h+wt.scrollMaxY:wt.document.body.scrollHeight);
var d=15-(_23.h/2);
if(b>_27+d){
var min=Math.min(this.effectiveMaxHeight,h)+20;
if(t+_24.h<min){
d=min-t-_24.h;
y=d+(_24.h/2)-8;
}else{
var y=7;
}
var p=b-d;
}else{
var p=_27;
var y=d-b;
}
_22.domNode.style.bottom=p+"px";
_22.arrow.style.bottom=y+"px";
}
},destroy:function(){
if(this._isOpen){
this.close();
}else{
if(this._openTimer){
clearTimeout(this._openTimer);
delete this._openTimer;
}
}
this.content=null;
this._doManagedDisconnects();
this.inherited(arguments);
},postCreate:function(){
this._lastOpen=-1;
this._aroundNodes=[];
this._mConnects=[];
this._mHandlers=[];
this._attachArounds();
this.anchor=dojo.byId(this.anchor);
},createContents:function(_28){
var d=document.createElement("div");
if(this.html){
d.innerHTML=this.html;
}
return d;
},_attachArounds:function(){
var a=this.around;
if(dojo.isArray(a)){
for(var i=0;i<a.length;i++){
this._attachAround(a[i]);
}
}else{
this._attachAround(a);
}
delete this.around;
},_attachAround:function(c){
if(!c){
return;
}
var _29=dojo.byId(c);
if(_29){
this._aroundNodes.push(_29);
this.connect(_29,"onmouseover",this._hover);
this.connect(_29,"onmousemove",this._hover);
this.connect(_29,"onmouseout",this._mouseOut);
this.connect(_29,"onhover",this._hover);
this.connect(_29,"onunhover",this._unHover);
}
},_doManagedConnects:function(){
for(var i=0;i<this._mConnects.length;i++){
this._doManagedConnect(this._mConnects[i]);
}
},_doManagedConnect:function(_2a){
this._mHandlers.push(dojo.connect(_2a.arg1,_2a.arg2,_2a.arg3,_2a.arg4,_2a.arg5));
},_doManagedDisconnects:function(){
while(this._mHandlers.length>0){
dojo.disconnect(this._mHandlers.pop());
}
},_validate:function(){
if(dojo.isDescendant(this._target,document.body)==true){
if(dojo.isIE<8){
var m=jazz.ui._getMasterPopup();
var c=m.content;
var cw=m.contentWrapper;
cw.style.width=(c.clientWidth>=(this.effectiveMaxWidth-1)-(m._scrollbarSize||0))?this.effectiveMaxWidth+"px":"";
if(!m._scrollbarSize&&cw.clientWidth!=cw.offsetWidth){
m._scrollbarSize=cw.offsetWidth-cw.clientWidth;
}
}
this._validateTimeout=setTimeout(dojo.hitch(this,this._validate),_3);
return;
}
this.close();
},_mouseOut:function(e){
if(dojo.isDescendant(e.relatedTarget,e.target)==true){
return;
}
this._unHover(e);
},_hover:function(e){
if(this.programmatic){
return;
}
if(this._closeTimer){
clearTimeout(this._closeTimer);
delete this._closeTimer;
}
if(this._openTimer&&this._startEvent&&(Math.abs((this._startEvent.clientX-e.clientX))+Math.abs((this._startEvent.clientY-e.clientY)))>_7){
clearTimeout(this._openTimer);
delete this._openTimer;
}
if(!this._isOpen&&!this._openTimer){
var _2b=e.target;
this._startEvent={clientX:e.clientX,clientY:e.clientY};
this._openTimer=setTimeout(dojo.hitch(this,function(){
this.open(this._determineTarget(_2b));
}),(Date.now()-_6)>_4?this.openDelay:_5);
}
},_unHover:function(e){
if(this.programmatic){
return;
}
if(this._openTimer){
clearTimeout(this._openTimer);
delete this._openTimer;
}
this._closeTimer=setTimeout(dojo.hitch(this,function(){
if(!this._isTipHovered){
this.close();
}
}),this.closeDelay);
},_hoverPopup:function(e){
this._isTipHovered=true;
},_mouseOutPopup:function(e){
if(dojo.isIE>=9&&!e.relatedTarget){
return;
}
if(dojo.isDescendant(e.relatedTarget,jazz.ui._getMasterPopup().domNode)==true){
return;
}
this._unHoverPopup(e);
},_unHoverPopup:function(e){
_6=Date.now();
this._isTipHovered=false;
if(e.relatedTarget==this._target||dojo.isDescendant(e.relatedTarget,this._target)==true){
return;
}
this._unHover(e);
},_determineTarget:function(_2c){
if(this.anchor){
return this.anchor;
}
if(!_2c){
return _2c;
}
var _2d=null;
for(var i=0;i<this._aroundNodes.length;i++){
if(!this._aroundNodes[i]){
continue;
}
if(this._aroundNodes[i]==_2c){
return _2c;
}
if(dojo.isDescendant(_2c,this._aroundNodes[i])==true&&(!_2d||dojo.isDescendant(this._aroundNodes[i],_2d)==true)){
_2d=this._aroundNodes[i];
}
}
return _2d?_2d:_2c;
}});
dojo.declare("jazz.ui.internal._MasterPopup",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("jazz.ui","templates/HoverPopup.html"),postCreate:function(){
this.domNode.style.display="none";
this._backgroundIframe=new dijit.BackgroundIframe(this.domNode);
dojo.body().appendChild(this.domNode);
},show:function(_2e,_2f){
if(this._showing){
this._showing.close();
}
this._showing=_2f;
if(_2f.customClass){
dojo.addClass(this.domNode,_2f.customClass);
}
this.domNode.style.visibility="hidden";
this.domNode.style.display="block";
try{
_2f.position(_2e);
this.domNode.style.visibility="";
}
catch(e){
_2f.close();
if(djConfig.isDebug){
console.error(e);
}
}
},hide:function(){
this.domNode.style.display="none";
this.domNode.style.right="";
this.domNode.style.left="";
this.domNode.style.top="";
this.domNode.style.bottom="";
this.arrow.style.top="";
this.arrow.style.bottom="";
this.arrow.style.left="";
this.arrow.style.right="";
this.arrow.style.display="";
this.contentWrapper.style.maxWidth="";
this.contentWrapper.style.maxHeight="";
this.contentWrapper.style.width="";
dojo.removeClass(this.wrapper,"left");
dojo.removeClass(this.wrapper,"right");
dojo.removeClass(this.wrapper,"top");
dojo.removeClass(this.wrapper,"bottom");
if(this._showing&&this._showing.customClass){
dojo.removeClass(this.domNode,this._showing.customClass);
}
this._showing=null;
},setContent:function(_30){
if(this.content.firstChild){
this.content.replaceChild(_30,this.content.firstChild);
}else{
this.content.appendChild(_30);
}
},uninitialize:function(){
this._backgroundIframe.destroy();
}});
jazz.ui._getMasterPopup=function(){
if(!jazz.ui._masterPopup){
jazz.ui._masterPopup=new jazz.ui.internal._MasterPopup();
}
return jazz.ui._masterPopup;
};
})();


;(function(){
dojo.provide("jazz.util.ui");
jazz.util.ui={findMaxStringDisplayWidth:function(_1,_2,_3){
if(!_4(_2)){
return -1;
}
var _5=document.createElement("div");
dojo.style(_5,"position","absolute");
dojo.style(_5,"left","-10000px");
_2.appendChild(_5);
var _6=_3||-1;
dojo.forEach(_1,function(_7){
var _8=document.createElement("div");
dojo.style(_8,"float","right");
_8.innerHTML=_7;
_5.appendChild(_8);
_6=_8.clientWidth>_6?_8.clientWidth:_6;
_5.removeChild(_8);
_8=null;
});
_2.removeChild(_5);
return _6;
},convertToEms:function(_9,_a){
return _a/jazz.util.ui.measureEm(_9);
},measureEm:function(_b){
var _c=document.createElement("div");
_c.style.height="100em";
_b.appendChild(_c);
var _d=_c.offsetHeight/100;
_b.removeChild(_c);
return _d;
},convertToExs:function(_e,_f){
return _f/jazz.util.ui.measureEx(_e);
},measureEx:function(_10){
var _11=document.createElement("div");
_11.style.height="100ex";
_10.appendChild(_11);
var _12=_11.offsetHeight/100;
_10.removeChild(_11);
return _12;
}};
function _4(o){
return o&&o.nodeType&&o.cloneNode;
};
})();

dojo.provide("jazz.ui.internal.nls.ResourceLinkMessages")._built=true;
dojo.provide("jazz.ui.internal.nls.ResourceLinkMessages.en_us");
jazz.ui.internal.nls.ResourceLinkMessages.en_us={"showMore":"Show More","infoNotAvailable":"More information is not available","loading":"Loading...","loginRequired":"To view this resource, hover over this link and click Log in.","showLess":"Show Less"};

;dojo.cache("jazz.ui", "templates/ResourceLink.html", "<div class=\"root\">	<div class=\"titleBar\" dojoAttachPoint=\"titleBar\">		<a dojoAttachPoint=\"iconLink\" class=\"iconLink\"><img dojoAttachPoint=\"iconNode\" class=\"iconNode\"></img></a>		<div class=\"titleIndent\" dojoAttachPoint=\"titleWrapper\"><a dojoAttachPoint=\"titleLink\"></a></div>	</div>		<a class=\"closeButton\" dojoattachpoint=\"_closeButton\" dojoattachevent=\"onclick: close\" href=\"#\"><span></span></a>		<div class=\"dividerWrapper\"><div dojoAttachPoint=\"divider\" class=\"divider\"></div></div>		<div class=\"summarySection\">		<div class=\"loading-wrapper\"><span class=\"image-loading\" dojoAttachPoint=\"loadingImage\">&nbsp;</span></div>		<iframe class=\"loadingIframe\"				dojoAttachPoint=\"hoverIframe\" 				dojoAttachEvent=\"onreadystatechange: _contentLoaded, onload: _contentLoaded\" 				frameborder=\"0\" allowTransparency=\"true\"></iframe>	</div>		<div class=\"hidden bottomSection\" dojoAttachPoint=\"bottomSection\">		<div class=\"bottomDividerWrapper\"><div dojoAttachPoint=\"bottomDivider\" class=\"divider\"></div></div>		<a class=\"toggleLink showMore\" dojoAttachPoint=\"toggleLink\" dojoAttachEvent=\"onclick: toggleSize\" href=\"#\"><span class=\"chevron\"></span><span dojoAttachPoint=\"toggleMessage\">${messages.showMore}</span></a>	</div></div>");

;dojo.provide("jazz.ui.ResourceLink");
























dojo.requireLocalization("jazz.ui.internal","ResourceLinkMessages");
(function(){
var _1="jazz-ui-ResourceLink";
var _2="arrow";
var _3="application/x-jazz-compact-rendering";
var _4="application/x-oslc-compact+xml";
var _5="jazz-compact-rendering-preview-height:";
var _6="oslc-preview-height:";
var _7="http://purl.org/dc/terms/";
var _8="http://jazz.net/xmlns/prod/jazz/presentation/1.0/";
var _9="http://www.w3.org/1999/02/22-rdf-syntax-ns#";
var _a="http://open-services.net/ns/core#";
var _b=false;
var _c;
dojo.declare("jazz.ui.ResourceLink",dijit._Widget,{presentationUri:null,useAbbreviation:false,retainLinkText:false,iconNode:null,lazyFetch:null,around:null,noBidi:false,isExternalContent:false,alwaysShowLargePreview:false,onLoad:function(){
},getTitle:function(){
return this.popup&&((this.popup.compactRendering&&this.popup.compactRendering.title)||(this.popup.oslcCompact&&this.popup.oslcCompact.title));
},constructor:function(_d){
if(!_c){
_c=dojo.i18n.getLocalization("jazz.ui.internal","ResourceLinkMessages");
}
if(_d.isExternalContent===undefined){
dojo.deprecated("jazz.ui.ResourceLink","isExternalContent flag must be provided to resource link. In 6.0.3 it is set to false by \t\t\t \tby default but it will be set to true by default in 6.0.4");
}
},buildRendering:function(){
if(!this.srcNodeRef&&this.uri){
this.domNode=document.createElement("A");
if(!this.label&&!this.around){
throw new Error("ResourceLink REQUIRES a label parameter if a uri is given rather than a reference to an Anchor Node.");
}
}else{
if(this.srcNodeRef&&this.srcNodeRef.tagName==="A"){
this.domNode=this.srcNodeRef;
if(!this.uri){
this.uri=this.domNode.href;
}
this.target=this.srcNodeRef.target;
}else{
throw new Error("ResourceLink REQUIRES that either the uri parameter or a valid reference to an Anchor Node is given");
}
}
var _e=this.uri.match(/^[^\#\?]*\:\/\//);
_e=(_e&&_e.length)?_e[0]:false;
if(!_e){
var _f=document.baseURI||document.URL;
try{
this.uri=new dojo._Url(_f,this.uri).toString();
}
catch(e){
this._isInvalidUri=true;
}
}else{
if(_e!=="http://"&&_e!=="https://"){
this._isInvalidUri=true;
}
}
this.presentationUri=this.presentationUri||this.uri;
if(this.uri.indexOf("#")>0){
this.uri=this.uri.substring(0,this.uri.indexOf("#"));
}
this.domNode.href=this.presentationUri;
if(this.label){
this.domNode.innerHTML=jazz.util.html.removeScript(this.label);
}
if(!this._isInvalidUri){
this._styleLink();
}
if(this.isExternalContent){
console.log("External content being displayed, extra security being used");
}
},postCreate:function(){
if(this._isInvalidUri){
return;
}
var _10;
if(this.iconNode){
this.iconNode=dojo.byId(this.iconNode);
}
if(this.lazyFetch||(_b&&this.lazyFetch!==false)){
this.lazyFetch=true;
}else{
_10=this._registerWithAggregator(this._batchedPresentationHandler,this._errorPresentation);
}
this.popup=new net.jazz.ui._RichHover({around:this.around||this.domNode,uri:this.uri,presentationUri:this.presentationUri,lazyFetch:this.lazyFetch,onDisable:dojo.hitch(this,this._disable),onLoad:this.onLoad,aggregatorId:_10,target:this.target,alwaysShowLargePreview:this.alwaysShowLargePreview,isExternalContent:this.isExternalContent});
if(!this.noBidi){
if(!this.textDir){
this.textDir=jazz.app.i18n.getPreferredBaseTextDir();
}
this._applyBidiUccSpecialNumber();
}
},refresh:function(){
this._registerWithAggregator(this._batchedPresentationHandler,this._errorRefresh);
},_registerWithAggregator:function(_11,_12){
return jazz.ui.internal.resourceLinkAggreagtor().register(this.uri,dojo.hitch(this,_11),dojo.hitch(this,_12));
},_styleLink:function(){
dojo.addClass(this.domNode,_1);
},_errorPresentation:function(err){
console.warn("ResourceLink Error ("+this.uri+"): "+err.message);
this.popup.disable();
},_errorRefresh:function(err){
console.warn("ResourceLink Refresh Error ("+this.uri+"): "+err.message);
},_disable:function(){
if(!this.domNode){
return;
}
dojo.removeClass(this.domNode,_1);
delete this.popup;
},_batchedPresentationHandler:function(_13){
if(!this.domNode){
return;
}
if(_13.oauthRequired){
this.popup.setOauthRequired(_13.token);
if(!this.label&&!this.srcNodeRef){
this._applyTitle(_c.loginRequired);
}
}else{
if(_13.compactRendering){
_13=_13.compactRendering;
_14(_13);
if(_13.abbreviation&&this.useAbbreviation){
this._applyTitle(_13.abbreviation);
}else{
if(_13.title&&!this.retainLinkText){
this._applyTitle(_13.title);
}
}
if(_13.icon&&this.iconNode){
var _15;
if(this.iconNode.tagName==="IMG"){
_15=this.iconNode;
}else{
_15=document.createElement("img");
this.iconNode.appendChild(_15);
}
_15.src=_13.icon;
}
this.popup.setCompactRendering(_13);
}else{
if(_13.oslcCompact){
_13=_13.oslcCompact;
_16(_13);
if(_13.shortTitle&&this.useAbbreviation){
this._applyTitle(_13.shortTitle);
}else{
if(_13.title&&!this.retainLinkText){
this._applyTitle(_13.title);
}
}
if(_13.icon&&this.iconNode){
var _15;
if(this.iconNode.tagName==="IMG"){
_15=this.iconNode;
}else{
_15=document.createElement("img");
this.iconNode.appendChild(_15);
}
_15.src=_13.icon;
}
this.popup.setOslcCompact(_13);
}
}
}
this.onLoad();
},_applyTitle:function(_17){
this.domNode.innerHTML=_17;
if(!this.noBidi){
this._applyBidiUccSpecialNumber();
}
},_applyBidiUccSpecialNumber:function(){
this.applyTextDir(this.domNode,this.domNode.innerHTML);
if(this.domNode.dir==="rtl"&&this.textDir){
var _18=this.domNode.innerHTML;
var _19=new RegExp("^[0-9]+:\\s+");
var num=_19.exec(_18);
if(num){
var end=_18.substr(num.toString().length);
if(end){
this.domNode.innerHTML=num.toString()+this.enforceTextDirWithUcc({},end);
this.domNode.dir="";
}
}
}
},destroy:function(){
if(this.popup){
this.popup.destroy();
}
this.inherited(arguments);
}});
jazz.ui.ResourceLink.setLazyFetch=function(_1a){
_b=_1a;
};
dojo.declare("net.jazz.ui._RichHover",jazz.ui.HoverPopup,{customClass:"jazz-ui-ResourceHover",alwaysShowLargePreview:false,maxHeight:10000,_attachArounds:function(){
this.inherited(arguments);
for(var i=0;i<this._aroundNodes.length;i++){
this.connect(this._aroundNodes[i],"onclick",this._cancelOpen);
}
},_cancelOpen:function(e){
if(this._openTimer){
clearTimeout(this._openTimer);
delete this._openTimer;
}
},createContents:function(){
if(!this.compactRendering){
if(this.lazyFetch){
this._fetchCompactRendering();
}
return dojo.create("div",{innerHTML:_c.loading});
}else{
return this._createPresentation(dojo.create("div"));
}
},close:function(e){
if(e){
dojo.stopEvent(e);
}
this.inherited(arguments);
},onOpen:function(){
this._openListeners=[];
this._openListeners.push(this.connect(dojo.body(),"onkeypress",this._onKeyPress));
this._openListeners.push(this.connect(dojo.body(),"onclick",this._onBodyClick));
this._openListeners.push(this.connect(dojo,"stopEvent",this._onStopEvent));
if(window.postMessage){
this._openListeners.push(this.connect(window,"onmessage",this._onMessage));
}
this._renderResult();
},onClose:function(){
this.programmatic=false;
this.updateToggleLink(true);
for(var i=0;i<this._openListeners.length;i++){
this.disconnect(this._openListeners[i]);
}
if(this._disableOnClose){
this.disable();
}
},toggleSize:function(e){
dojo.stopEvent(e);
this.programmatic="block";
this.updateToggleLink(this._isFullDisplay);
if(this._isFullDisplay){
this.oslcCompact?this.displaySmallSummary():this.displaySmallSummaryLegacy();
}else{
this.oslcCompact?this.displayLargeSummary():this.displayLargeSummaryLegacy();
}
this.position();
},updateToggleLink:function(_1b){
if(this._presentation){
dojo.addClass(this._presentation.toggleLink,_1b?"showMore":"showLess");
dojo.removeClass(this._presentation.toggleLink,_1b?"showLess":"showMore");
this._presentation.toggleMessage.innerHTML=_1b?_c.showMore:_c.showLess;
}
},displaySmallSummaryLegacy:function(){
this._isFullDisplay=false;
if(this.compactRendering.smallPreview){
this._updateIFrameLegacy();
this._presentation.hoverIframe.src=this.compactRendering.smallPreview;
}
},displayLargeSummaryLegacy:function(){
this._isFullDisplay=true;
if(this.compactRendering.largePreview){
this._updateIFrameLegacy();
this._presentation.hoverIframe.src=this.compactRendering.largePreview;
}
},displaySmallSummary:function(){
this._isFullDisplay=false;
if(this.oslcCompact.smallPreview){
this._updateIFrame();
this._presentation.hoverIframe.src=this.oslcCompact.smallPreview.document;
}
},displayLargeSummary:function(){
this._isFullDisplay=true;
if(this.oslcCompact.largePreview){
this._updateIFrame();
this._presentation.hoverIframe.src=this.oslcCompact.largePreview.document;
}
},disable:function(){
if(this._isOpen){
this._renderError(_c.infoNotAvailable);
this._disableOnClose=true;
return;
}
if(this.onDisable){
this.onDisable();
}
this.destroy();
},_renderResult:function(){
if(this.oauthRequired){
if(this._presentation){
this._presentation.destroy();
delete this._presentation;
}
this.content.innerHTML="";
var _1c=jazz.util.internal.login.insertLoginLink(this.content,this.oauthToken);
this.connect(_1c,"onclick",dojo.hitch(this,this._fetchCompactRendering,true));
}else{
if(this.compactRendering){
this._createPresentation();
if(this.compactRendering.smallPreview&&(!this.alwaysShowLargePreview||!this.largePreview)){
this.displaySmallSummaryLegacy();
}else{
this.displayLargeSummaryLegacy();
}
}else{
if(this.oslcCompact){
this._createPresentation();
if(this.oslcCompact.smallPreview&&(!this.alwaysShowLargePreview||!this.largePreview)){
this.displaySmallSummary();
}else{
this.displayLargeSummary();
}
}
}
}
},_renderError:function(_1d){
if(this._presentation){
this._presentation.destroy();
delete this._presentation;
}
this.content.innerHTML=_1d;
},setOauthRequired:function(_1e){
this.oauthRequired=true;
this.oauthToken=_1e;
this._redraw();
},setCompactRendering:function(cr){
this.oauthRequired=false;
this.compactRendering=cr;
if(!cr.showHover){
this.disable();
}else{
if(window.postMessage){
if(cr.initialSmallHeight&&!this.dynamicSmallHeight){
this.dynamicSmallHeight=cr.initialSmallHeight;
}
if(cr.initialLargeHeight&&!this.dynamicLargeHeight&&!this.dynamicSmallHeight){
this.dynamicLargeHeight=cr.initialLargeHeight;
}
}
this._updatePresentation();
this._redraw();
}
},setOslcCompact:function(_1f){
this.oauthRequired=false;
this.oslcCompact=_1f;
if(!_1f.showHover){
this.disable();
}else{
if(window.postMessage){
if(_1f.smallPreview&&_1f.smallPreview.initialHeight&&!this.dynamicSmallHeight){
this.dynamicSmallHeight=_20(_1f.smallPreview.initialHeight);
}
if(_1f.largePreview&&_1f.largePreview.initialHeight&&!this.dynamicLargeHeight&&!this.dynamicSmallHeight){
this.dynamicLargeHeight=_20(_1f.largePreview.initialHeight);
}
}
this._updatePresentation();
this._redraw();
}
},_redraw:function(){
if(this._isOpen){
this._renderResult();
this.position();
}
},_updatePresentation:function(){
var cr=this.compactRendering||this.oslcCompact,_21=this._presentation;
if(_21){
if(cr.title){
_21.titleLink.innerHTML=cr.title;
}
if(cr.icon){
_21.iconNode.src=cr.icon;
dojo.removeClass(_21.iconLink,"hidden");
dojo.addClass(_21.titleWrapper,"titleIndent");
}else{
_21.iconNode.src="";
dojo.addClass(_21.iconLink,"hidden");
dojo.removeClass(_21.titleWrapper,"titleIndent");
}
if(cr.showExpand){
dojo.removeClass(_21.bottomSection,"hidden");
}else{
dojo.addClass(_21.bottomSection,"hidden");
}
}
},_createPresentation:function(_22){
_22=_22||this.content;
if(!this.oauthRequired&&!this._presentation){
this._presentation=new net.jazz.ui._RichHoverPresentation({close:dojo.hitch(this,this.close),isExternalContent:this.isExternalContent,toggleSize:dojo.hitch(this,this.toggleSize),target:this.target,hideToggleLink:this.alwaysShowLargePreview});
this._presentation.titleLink.href=this._presentation.iconLink.href=this.presentationUri;
this._updatePresentation();
_22.innerHTML="";
_22.appendChild(this._presentation.domNode);
}
return _22;
},_fetchCompactRendering:function(_23,e){
if(e){
e.preventDefault();
}
var _24={url:this.uri,headers:{accept:_4+","+_3+"; q=0.5"}};
if(!_23){
_24.skipInterceptors=["jazz.oauth"];
}
var dfd=jazz.client.xhrGet(_24);
dfd.addCallback(dojo.hitch(this,function(dfd,_25){
var doc;
if(dfd.ioArgs.xhr.getResponseHeader("Content-Type").substring(0,_3.length)===_3){
doc={compactRendering:_3b(dojox.xml.DomParser.parse(_25))};
}else{
if(dfd.ioArgs.xhr.getResponseHeader("Content-Type").substring(0,_4.length)===_4){
doc={oslcCompact:_45(dojox.xml.DomParser.parse(_25))};
}
}
if(!_23&&doc){
this._handleLazyFetchJson(doc);
}
if(doc){
return doc;
}
throw {};
},dfd));
dfd.addErrback(dojo.hitch(this,function(err){
if(!err||err.dojoType!=="cancel"){
if(err&&err.status===401){
var _26=new dojo._Url(this.uri).authority;
this.setOauthRequired(_26);
this.aggregatorId=jazz.ui.internal.resourceLinkAggreagtor().registerOauth(_26,this.uri,dojo.hitch(this,this._handleLazyFetchJson),dojo.hitch(this,this.disable));
}else{
this.disable();
}
}
return err;
}));
if(_23){
dfd.addBoth(dojo.hitch(this,function(_27){
if(_27&&_27.dojoType==="cancel"){
return _27;
}
var _28=jazz.ui.internal.resourceLinkAggreagtor();
if(this.aggregatorId&&_27&&(_27.compactRendering||_27.oslcCompact)){
var obj=_28.unregisterOauth(this.oauthToken,this.uri,this.aggregatorId);
obj.callback(_27);
delete this.aggregatorId;
}
_28.resendOauth(this.oauthToken);
return _27;
}));
}
},_handleLazyFetchJson:function(_29){
if(_29.compactRendering){
_14(_29.compactRendering);
this.setCompactRendering(_29.compactRendering);
}else{
if(_29.oslcCompact){
_16(_29.oslcCompact);
this.setOslcCompact(_29.oslcCompact);
}
}
this.onLoad();
},_updateIFrameLegacy:function(){
var cr=this.compactRendering;
if(!cr||!this._presentation){
return;
}
var v=dijit.getViewport();
if(cr.smallWidth){
this.effectiveSmallWidth=(v.w-60<cr.smallWidth+5)?v.w-65:cr.smallWidth;
}
if(cr.largeWidth){
this.effectiveLargeWidth=(v.w-60<cr.largeWidth+5)?v.w-65:cr.largeWidth;
}
if(this.effectiveSmallWidth&&this.effectiveSmallWidth+5>500){
this.maxWidth=this.effectiveSmallWidth+5;
}
if(this.effectiveLargeWidth&&this.effectiveLargeWidth+5>500&&(this.effectiveLargeWidth>this.effectiveSmallWidth||!this.effectiveSmallWidth)){
this.maxWidth=this.effectiveLargeWidth+5;
}
var w=this._isFullDisplay?this.effectiveLargeWidth:this.effectiveSmallWidth;
if(w){
this._presentation.loadingImage.style.width=this._presentation.hoverIframe.style.width=w+"px";
if(dojo.isIE){
this._presentation.divider.style.width=(w-4)+"px";
this._presentation.bottomDivider.style.width=(w-4)+"px";
}
}
var _2a=this._presentation.titleBar.offsetHeight+48;
var _2b=this.dynamicSmallHeight||cr.smallHeight;
var _2c=this.dynamicLargeHeight||(cr.initialLargeHeight&&this.dynamicSmallHeight)||cr.largeHeight;
if(_2b){
this.effectiveSmallHeight=(v.h*0.8<_2b+_2a)?v.h*0.8-_2a:_2b;
}
if(_2c){
this.effectiveLargeHeight=(v.h*0.8<_2c+_2a)?v.h*0.8-_2a:_2c;
}
var h=this._isFullDisplay?this.effectiveLargeHeight:this.effectiveSmallHeight;
if(h){
this._presentation.loadingImage.style.height=this._presentation.hoverIframe.style.height=h+"px";
}
},_updateIFrame:function(){
var _2d=this.oslcCompact;
if(!_2d||!this._presentation){
return;
}
var v=dijit.getViewport();
if(_2d.smallPreview){
var _2e=_20(_2d.smallPreview.hintWidth);
this.effectiveSmallWidth=(v.w-60<_2e+5)?v.w-65:_2e;
if(this.effectiveSmallWidth+5>500){
this.maxWidth=this.effectiveSmallWidth+5;
}
}
if(_2d.largePreview){
var _2f=_20(_2d.largePreview.hintWidth);
this.effectiveLargeWidth=(v.w-60<_2f+5)?v.w-65:_2f;
if(this.effectiveLargeWidth+5>500&&(this.effectiveLargeWidth>this.effectiveSmallWidth||!this.effectiveSmallWidth)){
this.maxWidth=this.effectiveLargeWidth+5;
}
}
var w=this._isFullDisplay?this.effectiveLargeWidth:this.effectiveSmallWidth;
if(w){
this._presentation.loadingImage.style.width=this._presentation.hoverIframe.style.width=w+"px";
if(dojo.isIE){
this._presentation.divider.style.width=(w-4)+"px";
this._presentation.bottomDivider.style.width=(w-4)+"px";
}
}
var _30=this._presentation.titleBar.offsetHeight+48;
if(_2d.smallPreview){
var _31=this.dynamicSmallHeight||_20(_2d.smallPreview.hintHeight);
this.effectiveSmallHeight=(v.h*0.8<_31+_30)?v.h*0.8-_30:_31;
}
if(_2d.largePreview){
var _32=this.dynamicLargeHeight||(_2d.largePreview.initialHeight&&this.dynamicSmallHeight)||_20(_2d.largePreview.hintHeight);
this.effectiveLargeHeight=(v.h*0.8<_32+_30)?v.h*0.8-_30:_32;
}
var h=this._isFullDisplay?this.effectiveLargeHeight:this.effectiveSmallHeight;
if(h){
this._presentation.loadingImage.style.height=this._presentation.hoverIframe.style.height=h+"px";
}
},_onKeyPress:function(e){
if(e.type=="keypress"&&e.keyCode==dojo.keys.ESCAPE){
this.close();
}
},_onBodyClick:function(e){
var _33=e&&e.target;
if(_33&&!dojo.isDescendant(_33,jazz.ui._getMasterPopup().domNode)){
this.close();
}
},_onStopEvent:function(e){
if(e.type=="click"){
this._onBodyClick(e);
}
},_onMessage:function(e){
if(!(this.compactRendering||this.oslcCompact)||!this._presentation||e.source!==this._presentation.hoverIframe.contentWindow||((this._isFullDisplay&&typeof (this.compactRendering?this.compactRendering.initialLargeHeight:this.oslcCompact.largePreview.initialHeight)==="undefined")||(!this._isFullDisplay&&(typeof (this.compactRendering?this.compactRendering.initialSmallHeight:this.oslcCompact.smallPreview.initialHeight)==="undefined")))){
return;
}
var _34=e.data,_35=this.oslcCompact?_6:_5;
if(_34&&_34.indexOf(_35)===0){
var _36=parseInt(_34.substring(_35.length),10);
if(this._isFullDisplay){
this.dynamicLargeHeight=_36;
}else{
this.dynamicSmallHeight=_36;
}
if(this._isOpen){
if(this.compactRendering){
this._updateIFrameLegacy();
}else{
this._updateIFrame();
}
this.position();
}
}
},destroy:function(){
if(this._presentation){
this._presentation.destroy();
delete this._presentation;
}
this.inherited(arguments);
}});
dojo.declare("net.jazz.ui._RichHoverPresentation",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("jazz.ui","templates/ResourceLink.html"),hideToggleLink:false,constructor:function(){
this.messages=_c;
},postCreate:function(){
if(dojo.isIE){
dojo.addClass(this.loadingImage,"hidden");
dojo.removeClass(this.hoverIframe,"loadingIframe");
}
if(this.isExternalContent){
dojo.attr(this.hoverIframe,"sandbox","");
}
if(this.target){
this.titleLink.target=this.target;
}
if(this.hideToggleLink){
dojo.setStyle(this.bottomSection,"display","none");
}
},_contentLoaded:function(e){
if(e.type==="load"){
dojo.addClass(this.loadingImage,"hidden");
dojo.removeClass(this.hoverIframe,"loadingIframe");
}
}});
var _14=function(_37){
if(_37.oauthRequired){
return;
}
if(_37.title){
_37.title=jazz.util.html.removeScript(_37.title);
}
if(_37.smallPreview||_37.largePreview){
_37.showHover=true;
}
if(_37.smallPreview&&_37.largePreview){
_37.showExpand=true;
}
_38(_37,"smallWidth",300);
_38(_37,"smallHeight",200);
_38(_37,"largeWidth",Math.max(300,_37.smallWidth));
_38(_37,"largeHeight",Math.max(300,_37.smallHeight));
_38(_37,"initialSmallHeight");
_38(_37,"initialLargeHeight");
};
var _38=function(obj,_39,def){
if(obj[_39]&&(Math.ceil(obj[_39])==Math.floor(obj[_39]))){
obj[_39]=parseInt(obj[_39],10);
}else{
if(def){
obj[_39]=def;
}
}
};
var _16=function(_3a){
if(_3a.title){
_3a.title=jazz.util.html.removeScript(_3a.title);
}
if(_3a.smallPreview){
_3a.showHover=true;
if(!_3a.smallPreview.hintWidth){
_3a.smallPreview.hintWidth="300px";
}
if(!_3a.smallPreview.hintHeight){
_3a.smallPreview.hintHeight="200px";
}
}
if(_3a.largePreview){
if(_3a.showHover){
_3a.showExpand=true;
}else{
_3a.showHover=true;
}
if(!_3a.largePreview.hintWidth){
_3a.largePreview.hintWidth="300px";
}
if(!_3a.largePreview.hintHeight){
_3a.largePreview.hintHeight="300px";
}
}
};
var _3b=function(_3c){
var _3d={},_3e,_3f,_40,_41=_3c.getElementsByTagNameNS("title",_7),_42=_3c.getElementsByTagNameNS("icon",_8),_43=_3c.getElementsByTagNameNS("smallPreview",_8),_44=_3c.getElementsByTagNameNS("largePreview",_8);
if(_41.length>0&&_41[0].childNodes.length>0){
_3d.title=_41[0].childNodes[0].nodeValue;
}
if(_42.length>0){
_3d.icon=_42[0].getAttributeNS("resource",_9);
}
if(_43.length>0){
_3d.smallPreview=_43[0].getAttributeNS("resource",_9);
_3e=parseInt(_43[0].getAttributeNS("preferred_width",_8),10);
_3f=parseInt(_43[0].getAttributeNS("preferred_height",_8),10);
_40=parseInt(_43[0].getAttributeNS("initialHeight",_8),10);
if(_3e){
_3d.smallWidth=_3e;
}
if(_3f){
_3d.smallHeight=_3f;
}
if(_40){
_3d.initialSmallHeight=_40;
}
}
if(_44.length>0){
_3d.largePreview=_44[0].getAttributeNS("resource",_9);
_3e=parseInt(_44[0].getAttributeNS("preferred_width",_8),10);
_3f=parseInt(_44[0].getAttributeNS("preferred_height",_8),10);
_40=parseInt(_44[0].getAttributeNS("initialHeight",_8),10);
if(_3e){
_3d.largeWidth=_3e;
}
if(_3f){
_3d.largeHeight=_3f;
}
if(_40){
_3d.initialLargeHeight=_40;
}
}
return _3d;
};
var _45=function(_46){
var _47={},_48,_49=_46.getElementsByTagNameNS("title",_7),_4a=_46.getElementsByTagNameNS("shortTitle",_a),_4b=_46.getElementsByTagNameNS("icon",_a),_4c=_46.getElementsByTagNameNS("smallPreview",_a),_4d=_46.getElementsByTagNameNS("largePreview",_a);
if(_49.length>0&&_49[0].childNodes.length>0){
_47.title=_49[0].childNodes[0].nodeValue;
}
if(_4a.length>0&&_4a[0].childNodes.length>0){
_47.shortTitle=_4a[0].childNodes[0].nodeValue;
}
if(_4b.length>0){
_47.icon=_4b[0].getAttributeNS("resource",_9);
}
if(_4c.length>0){
_47.smallPreview=_4e(_4c[0]);
}
if(_4d.length>0){
_47.largePreview=_4e(_4d[0]);
}
return _47;
};
var _4e=function(_4f){
var _50={};
_50.document=_4f.getElementsByTagNameNS("document",_a)[0].getAttributeNS("resource",_9);
_51(_4f,_50,"hintWidth");
_51(_4f,_50,"hintHeight");
_51(_4f,_50,"initialHeight");
return _50;
};
var _51=function(_52,_53,_54){
var _55=_52.getElementsByTagNameNS(_54,_a);
if(_55.length>0&&_55[0].childNodes.length>0){
_53[_54]=dojo.trim(_55[0].childNodes[0].nodeValue);
}
};
var _20=function(_56){
_56=_56.toLowerCase();
var px=_56.indexOf("px");
var em=_56.indexOf("em");
var ex=_56.indexOf("ex");
_56=parseFloat(_56);
if(em>0){
return Math.ceil(_56*_57());
}
if(ex>0){
return Math.ceil(_56*_58());
}
return Math.ceil(_56);
};
var _59,_5a;
var _57=function(){
if(!_59){
_59=jazz.util.ui.measureEm(_5b());
setTimeout(function(){
_59=null;
},0);
}
return _59;
};
var _58=function(){
if(!_5a){
_5a=jazz.util.ui.measureEx(_5b());
setTimeout(function(){
_5a=null;
},0);
}
return _5a;
};
var _5c;
var _5b=function(){
if(!_5c){
_5c=dojo.create("div",{style:{visibility:"hidden",fontSize:"133.3333333%"}},dojo.body());
}
return _5c;
};
})();

dojo.provide("jazz.ui.nls.MessageBoxMessages")._built=true;
dojo.provide("jazz.ui.nls.MessageBoxMessages.en_us");
jazz.ui.nls.MessageBoxMessages.en_us={"typeNotFound":"Invalid message type: ${0}. Please use a type from STATUS_TYPES array. The defaultType will be used.","more":"more.","unspecifiedServerError":"An unspecified server error has occurred.","messageID":"ID","causedBy":"Caused by","hideDetails":"hide details","serverUnreachable":"The server is unreachable.  Check network connectivity.","closeMessage":"Close","missingSummary":"Missing required field \'summary\'","additionalInfo":"Additional Info: ","summaryInvalid":"You must pass either a message string or a DOM element for args.summary","showDetails":"show details"};

;dojo.cache("jazz.ui", "templates/MessageBox.html", "<div class=\"jazz-ui-message-box jazz-ui-message-box-noDisplay\" role=\"status\" aria-live=\"assertive\">	<div dojoAttachPoint=\"messageArea\" class=\"messageArea\"></div></div>");

;dojo.provide("jazz.ui.MessageBox");










dojo.requireLocalization("jazz.ui","MessageBoxMessages");
(function(){
var _1;
var _2="jazz-ui-message-box-noDisplay";
var _3="CRJAZ";
dojo.declare("jazz.ui.MessageBox",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("jazz.ui","templates/MessageBox.html"),defaultType:"INFO",toggleState:"hidden",onClose:null,onToggle:null,constructor:function(){
if(!_1){
_1=dojo.i18n.getLocalization("jazz.ui","MessageBoxMessages");
}
this.messages=_1;
this.messagePrefix=_3;
},showMessage:function(_4){
if(_4&&_4.errorObject){
_4=this._processErrorObject(_4);
}else{
if(!_4.summary){
console.error(this.messages.missingSummary);
return;
}
}
if(!_4.type){
_4.type=this.defaultType;
}else{
var _5=dojo.exists(_4.type,jazz.ui.MessageBox.STATUS_TYPES);
if(!_5){
console.warn(dojo.string.substitute(this.messages.typeNotFound,[_4.type]));
_4.type=this.defaultType;
}
}
this.messageArea.innerHTML="<div class='messageIcon'></div>";
this.messageArea.className="messageArea "+_4.type;
if(_4.closable){
this.closeLink=dojo.create("a",{href:"#","class":"closeLink",innerHTML:"<span></span>",title:this.messages.closeMessage},this.messageArea);
this.connect(this.closeLink,"onclick","_close");
}
this._createSummary(_4.summary,this.messageArea,"messageSummary");
if(_4.details&&_4.details.length>0){
this.detailsLink=dojo.create("a",{href:"#","innerHTML":this.messages.showDetails,"class":"detailsLink","id":"details-box-"+dijit.registry.getUniqueId("details-box")},this.messageArea);
this.connect(this.detailsLink,"onclick","_toggleDetails");
this.detailsBox=document.createElement("div");
this.messageArea.appendChild(this.detailsBox);
dojo.addClass(this.detailsBox,"detailsBox");
for(var i=0;i<_4.details.length;i++){
this._createSummary(_4.details[i].message,this.detailsBox,"messageDetails");
}
}
if(this._fadeAnim){
this._fadeAnim.stop();
dojo.style(this.domNode,{opacity:1});
}
dojo.toggleClass(this.domNode,_2,false);
},hideMessage:function(_6){
if(_6){
this._doFadeOut();
}else{
if(this.domNode){
dojo.toggleClass(this.domNode,_2,true);
}
}
},_animationDone:function(){
dojo.toggleClass(this.domNode,_2,true);
dojo.style(this.domNode,{opacity:1});
delete this._fadeAnim;
},_doFadeOut:function(){
dojo.style(this.domNode,{opacity:1});
this._fadeAnim=dojo.fadeOut({node:this.domNode,duration:1000,onEnd:dojo.hitch(this,this._animationDone)});
this._fadeAnim.play();
},_close:function(_7){
if(_7){
dojo.stopEvent(_7);
}
if(this._fadeAnim){
this._fadeAnim.stop();
dojo.style(this.domNode,{opacity:1});
}
if(this.onClose&&typeof this.onClose=="function"){
if(this.onClose()===false){
return;
}
}
this.hideMessage();
},getToggleState:function(){
return this.toggleState;
},_createSummary:function(_8,_9,_a){
if(typeof _8=="string"){
var m=dojo.trim(_8);
if(m.substr(0,this.messagePrefix.length)==this.messagePrefix){
var _b=m.indexOf(" ");
var _c=m.substr(0,_b);
_8=m.substr(_b+1);
}
_8=dojo.cache("jazz/bogus",{value:_8,sanitize:true});
_8=jazz.util.html.removeStyleAndScript(_8);
var _d=dojo.create("div",{"innerHTML":_8,"class":_a});
if(_c){
var _e=dojo.create("span",{"innerHTML":this.messages.messageID+"  "+_c,"class":"messageId"});
_d.appendChild(_e);
}
dojo.place(_d,_9);
}else{
if(this._isNodeElement(_8)){
dojo.place(_8,_9);
}else{
console.error(this.messages.summaryInvalid);
return;
}
}
},_toggleDetails:function(e){
if(e){
dojo.stopEvent(e);
}
var _f=this.detailsBox.style.display=="block";
this.detailsBox.style.display=_f?"none":"block";
this.detailsLink.innerHTML=_f?this.messages.showDetails:this.messages.hideDetails;
this.toggleState=_f?"hidden":"visible";
if(this.onToggle&&typeof this.onToggle=="function"){
this.onToggle();
}
},_processErrorObject:function(_10){
var _11=jazz.ui.MessageBox.STATUS_TYPES.ERROR;
var _12=_10.errorObject;
if(!_10.type){
_10.type=_11;
}
if(_12.status===0||_12.status>=600){
_10.summary=this.messages.serverUnreachable;
}else{
_10.details=_10.details||[];
if(_10.summary&&_12.message){
if(_12.responseText){
_12.message=this.messages.additionalInfo+_12.message;
}
_10.details.push({message:_12.message,code:_11});
}
if(!_10.summary){
_10.summary=_12.message?_12.message:this.messages.unspecifiedServerError;
}
if(_12.exception){
var _13=dojo.isArray(_12.exception)?_12.exception.join("<br>"):_12.exception;
_10.details.push({message:_13,code:_11});
}
if(_12.nestedError){
var _14=this._handleNestedError(_12);
_10.details=_10.details.concat(_14);
}
}
return _10;
},_handleNestedError:function(_15,_16){
_16=_16||[];
if(_15.nestedError){
var _17=jazz.ui.MessageBox.STATUS_TYPES.ERROR;
_16.push({message:"<b>"+this.messages.causedBy+":</b> ",code:_17});
var _18=_15.nestedError;
if(_18.errorClass&&_18.errorMessage){
_16.push({message:_18.errorMessage+" ("+_18.errorClass+")",code:_17});
}
if(_18.errorTrace){
var _19="";
if(dojo.isArray(_18.errorTrace)){
for(var x=0;x<4;x++){
_19+=_18.errorTrace[x]+"<br/>";
}
_19+=" ... "+(_18.errorTrace.length-x)+" "+this.messages.more;
}else{
_19=_18.errorTrace;
}
_16.push({message:_19,code:_17});
}
return this._handleNestedError(_18,_16);
}else{
return _16;
}
},_isNodeElement:function(_1a){
if(typeof HTMLElement==="object"){
return _1a instanceof HTMLElement;
}else{
return (_1a.nodeType===1&&typeof _1a==="object"&&typeof _1a.nodeName==="string");
}
},uninitialize:function(){
if(this._fadeAnim){
this._fadeAnim.stop();
}
}});
jazz.ui.MessageBox.STATUS_TYPES={ERROR:"ERROR",WARNING:"WARNING",OK:"OK",INFO:"INFO"};
dojo.mixin(jazz.ui.MessageBox,{setDefaultPrefix:function(_1b){
_3=_1b;
}});
})();


;dojo.cache("com.ibm.team.configuration.web", "context/internal/templates/NotificationMessage.html", "<div class=\"notification-message-contentNode\" data-dojo-attach-point=\"contentNode\"></div>");

;dojo.provide("com.ibm.team.configuration.web.context.internal.NotificationMessage");


(function(){
var _1=jazz.ui.MessageBox.STATUS_TYPES;
dojo.declare("com.ibm.team.configuration.web.context.internal.NotificationMessage",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("com.ibm.team.configuration.web","context/internal/templates/NotificationMessage.html"),widgetsInTemplate:false,_loadedIntoContentCell:false,postCreate:function(){
this.inherited(arguments);
this._msgHandler=new jazz.ui.MessageBox({messagePrefix:"CRJGC"});
this.contentNode.appendChild(this._msgHandler.domNode);
},_lazyLoadIntoContentCell:function __lazyLoadIntoContentCell(){
if(!this._loadedIntoContentCell){
var _2=dojo.byId("content-cell");
if(_2){
_2.insertBefore(this.contentNode,_2.firstChild);
this._loadedIntoContentCell=true;
}
}
},showWarning:function(_3,_4,_5){
this._lazyLoadIntoContentCell();
var _6=null;
if(_4){
_6=[{message:_4,code:_1.WARNING}];
}
if(_5){
_6=_6||[];
_6.push({message:_5,code:_1.WARNING});
}
this._msgHandler.showMessage({type:_1.WARNING,summary:_3,details:_6,closable:true});
},hideMessage:function(){
this._msgHandler.hideMessage();
}});
})();

dojo.provide("com.ibm.team.configuration.web.nls.ConfigurationWebMessages")._built=true;
dojo.provide("com.ibm.team.configuration.web.nls.ConfigurationWebMessages.en_us");
com.ibm.team.configuration.web.nls.ConfigurationWebMessages.en_us={"mustSelectConfigurationHTML":"No configuration defined. \x3c0\x3eClick to select a configuration\x3c/0\x3e.","contextChangeSetIsMissingOverriddenStream$explanation":"The missing stream might have been replaced with another configuration. If you deliver this change set, your changes won\'t be visible in the global stream.","contextSkew":"CRJGC5007W The configuration context is no longer valid.","invalidProjectUrl":"Project area url \'{0}\' is not a valid url to pass into the ContextPicker.","useDefaultConfiguration":"Use Initial Stream","contextSwitchedToLastVisitedProjectAreaConfiguration$useraction":"If you want a different current configuration, switch to it.","contextSkew$explanation":"The global configuration contains multiple different configurations of the same component. The current local configuration is not the preferred one.","contextOutOfDate":"CRJGC5005W The configuration context is no longer valid.","contextOutOfDateWithDetails$explanation":"The contributions of this global configuration have changed. The local configuration context \x3ca id=\"staleContributionId\" href=\"{0}\"\x3e\x3c/a\x3e changed to \x3ca id=\"replacementContributionId\" href=\"{1}\"\x3e\x3c/a\x3e.","globalConfiguration":"Global Configuration","itemsPerPageAll":"Show All","componentPickerIFrameTitle":"Component Picker","componentFromBanner":"Use Current Component","itemsPerPage50":"50","contextSwitchedToProjectAreaConfiguration$explanation":"The global configuration that was your current configuration no longer includes a configuration from this project area. The system set your current configuration to the local configuration.","contextNoLongerResolves":"CRJGC5006W Select another component or global configuration. The global configuration does not contain a local configuration of this component.","contextOutOfDate$useraction":"To see the new context, \x3ca href=\"{0}\"\x3erefresh the browser page\x3c/a\x3e. If this is not the context that you expect, contact your configuration lead.","invalidContextForProjectArea":"CRJGC5000W The request to switch to the \"{1}\" global configuration was not completed because that global configuration does not contain any configurations from the \"{0}\" project area.","itemsPerPage10":"10","itemsPerPage100":"100","globalServiceTimeOut$useraction":"Confirm that the Global Configuration Management server is running, refresh your browser, and try the action again.","contextSwitchedToProjectAreaConfiguration":"CRJGC5003W The system has changed your current configuration to the \"{0}\" local configuration.","noGlobalServiceFoundFor":"No global configuration service found for. Ensure the GC server is running.","contextSwitchedToLastVisitedProjectAreaConfiguration":"CRJGC5001W The link that you clicked goes to a global configuration that no longer includes a configuration from the \"{0}\" project area. The local configuration is now \"{1}\".","failedParseApplicationAbout":"Failed to parse the Application About document \'{0}\'.","loading":"Loading...","failedParseCMServiceCatalog":"Failed to parse the CM Service Catalog \'{0}\'.","configurationPickerIFrameTitle":"Configuration Picker","mustSelectComponentHTML":"No component defined. \x3c0\x3eClick to select a component\x3c/0\x3e.","logInToView":"Log in to view","noRDFContent":"No RDF content for \'{0}\', ensure the service is available.","contextFromBanner":"Use Current Configuration","addRemoveTableColumnsButtonTooltip":"Add or remove columns","invalidContextForProjectArea$explanation":"A local configuration is required to view artifacts, and the selected global configuration does not contain one.","localConfigurationTitle":"{0} Configuration","itemsPerPage25":"25","mustSelectComponent":"&lt;Select a Component&gt;","globalServiceTimeOut$explanation":"The Global Configuration Management server is down or is starting.","selectAConfiguration":"Select the Configuration Context","contextSkew$useraction":"To see the new context, \x3ca href=\"{0}\"\x3erefresh the browser page\x3c/a\x3e. If this is not the context that you expect, contact your configuration lead.","contextSwitchedToLastVisitedProjectAreaConfiguration$explanation":"The system set your current configuration to the last local configuration that you visited or to the initial stream.","noGlobalServiceFound":"No global configuration service found. Ensure the GC server is running.","failedToValidateProjectAreaOptIn":"Failed to validate if the given project area \'{0}\' has opted into CM.","clearComponent":"Clear Component","useDefaultComponent":"Use Initial Component","noLocalServiceFoundFor":"No service found for: \'{0}\' on this server. Please contact your admin to verify the setup.","contextChangeSetIsMissingOverriddenStream":"CRJGC5009E The local stream that the \x3ca id=\"contextChangeSetIsMissingOverriddenStream-changeSet1\" href=\"{0}\"\x3e\x3c/a\x3e change set was created from is missing from this global stream.","globalServiceTimeOut":"CRJGC5002W Global Configuration Management is not available or is in the process of starting.","contextSwitchedToProjectAreaConfiguration$useraction":"If you want a different current configuration, switch to it. If the local configuration should be part of the global configuration, contact the configuration lead.","failedParseCMSelectionDialogDetails":"Failed to parse the OSLC Details \'{0}\'","contextOutOfDateWithDetails":"CRJGC5008W The configuration context is no longer valid.","mustSelectConfiguration":"&lt;Select a Configuration&gt;","localConfiguration":"Local Configuration","contextNoLongerResolves$useraction":"Select another component or global configuration, or ask your configuration lead to confirm that the global configuration contains the correct configurations.\x3cbr/\x3eIf you are working in a personal stream, check the status of a change set. Open the local configuration from the Current Configuration menu on the toolbar, and go to the Change Sets tab.","invalidConfigurationForComponentInViewlet":"Results cannot be displayed because the viewlet\'s component is not part of the chosen configuration context. \x3c0\x3eClick to update your settings.\x3c/0\x3e","selectAComponent":"Select the Component Context","chooseType":"Configuration type","clearConfiguration":"Clear Configuration","contextOutOfDateWithDetails$useraction":"To see the new context, \x3ca href=\"{0}\"\x3erefresh the browser page\x3c/a\x3e. If this is not the context that you expect, contact your configuration lead.","contextChangeSetIsMissingOverriddenStream$useraction":"To fix this problem: \x3col\x3e \x3cli\x3eDiscard this change set.\x3c/li\x3e \x3cli\x3eFrom the \x3cb\x3eCurrent Configuration\x3c/b\x3e menu, choose the global stream to work in.\x3c/li\x3e \x3cli\x3eCreate a change set and redo your changes.\x3c/li\x3e \x3c/ol\x3e If you don\'t want to discard this change set: \x3col\x3e \x3cli\x3eGet the missing stream name from the \x3cb\x3eCreated From\x3c/b\x3e field by hovering over this change set link: \x3ca id=\"contextChangeSetIsMissingOverriddenStream-changeSet2\" href=\"{0}\"\x3e\x3c/a\x3e.\x3c/li\x3e \x3cli\x3eAsk your configuration lead to add that stream to the global stream from which this personal stream was created.\x3c/li\x3e \x3c/ol\x3e","contextOutOfDate$explanation":"The contributions of this global configuration have changed.","invalidContextForProjectArea$useraction":"Try switching to a different global configuration or to a local configuration. If you think that you should be able to switch to the global configuration, contact the configuration lead.","itemsPerPageLabel":"Items Per Page:","contextNoLongerResolves$explanation":"One of the following events in another browser tab might have caused this error:\x3cul\x3e\x3cli\x3eThis local configuration was removed from the global configuration.\x3c/li\x3e\x3cli\x3eIf you are working in a personal stream, the change set might already be removed from it. Or, the change set might have been discarded or delivered.\x3c/li\x3e\x3c/ul\x3e"};

;(function(){
dojo.provide("com.ibm.team.configuration.web.context.ContextDisplayMessagesUtil");




dojo.requireLocalization("com.ibm.team.configuration.web","ConfigurationWebMessages");
var _1=dojo.i18n.getLocalization("com.ibm.team.configuration.web","ConfigurationWebMessages");
var _2=new com.ibm.team.configuration.web.context.internal.NotificationMessage();
var _3="com.ibm.team.configuration.web.uniquifier";
com.ibm.team.configuration.web.context.ContextDisplayMessagesUtil={displayInvalidContextForProjectArea:function(_4,_5){
var _6=dojo.replace(_1.invalidContextForProjectArea,[_4,_5]);
_2.showWarning(_6,_1.invalidContextForProjectArea$explanation,_1.invalidContextForProjectArea$useraction);
},displayContextOutOfDate:function(_7,_8){
var _9=this._addParameterToUri(window.location.href,_3,new Date().getTime());
if(_7&&_8){
var _a=_1.contextOutOfDateWithDetails;
var _b=dojo.replace(_1.contextOutOfDateWithDetails$explanation,[_7,_8]);
var _c=dojo.replace(_1.contextOutOfDateWithDetails$useraction,[_9]);
_2.showWarning(_a,_b,_c);
var _d=dojo.byId("staleContributionId");
var _e=dojo.byId("replacementContributionId");
if(_d&&_e){
new jazz.ui.ResourceLink({srcNodeRef:_d});
new jazz.ui.ResourceLink({srcNodeRef:_e});
}
}else{
var _a=_1.contextOutOfDate;
var _b=_1.contextOutOfDate$explanation;
var _c=dojo.replace(_1.contextOutOfDate$useraction,[_9]);
_2.showWarning(_a,_b,_c);
}
},displayMissingOverride:function(_f){
_2.showWarning(dojo.replace(_1.contextChangeSetIsMissingOverriddenStream,[_f]),_1.contextChangeSetIsMissingOverriddenStream$explanation,dojo.replace(_1.contextChangeSetIsMissingOverriddenStream$useraction,[_f]));
["contextChangeSetIsMissingOverriddenStream-changeSet1","contextChangeSetIsMissingOverriddenStream-changeSet2"].forEach(function(id){
var _10=dojo.byId(id);
if(_10){
new jazz.ui.ResourceLink({srcNodeRef:_10});
}
});
},displayContextSkew:function(){
var _11=this._addParameterToUri(window.location.href,_3,new Date().getTime());
var _12=dojo.replace(_1.contextSkew$useraction,[_11]);
_2.showWarning(_1.contextSkew,_1.contextSkew$explanation,_12);
},displayContextNoLongerResolves:function(){
_2.showWarning(_1.contextNoLongerResolves,_1.contextNoLongerResolves$explanation,_1.contextNoLongerResolves$useraction);
},_addParameterToUri:function __addParameterToUri(uri,_13,_14){
var _15=new dojo._Url(uri);
var _16=_15.query?dojo.queryToObject(_15.query):{};
_16[_13]=_14;
_15.query=dojo.objectToQuery(_16);
var _17=_15.scheme+"://"+_15.authority+_15.path+"?"+_15.query;
if(_15.fragment){
_17=_17+"#"+_15.fragment;
}
return _17;
},hideMessage:function(){
_2.hideMessage();
}};
}());


;(function CmTools(){
dojo.provide("com.ibm.team.repository.web.configurationManagement.CmTools");






var _1=com.ibm.team.repository.web.configurationManagement.CmEvents;


var _2=com.ibm.team.repository.web.configurationManagement._utils.PrivateConstants;


var _3=com.ibm.team.repository.web.configurationManagement.CmConfig;


var _4=com.ibm.team.configuration.web.context.ContextAPI;


var _5=dojo.require("com.ibm.team.configuration.web.context.internal.GcRootServices");
var _6="lcm.CmTools.backgroundErrors";
var _7=null;
var _8=null;
var _9=sessionStorage.getItem(_2.CM_URL_KEY);
var _a=15*1000;
var _b=true;
var _c=null;
var _d=false;
var _e=function(){
if(!_b||_d){
return;
}
if(_8&&_8.componentUri){
if(!_8.globalConfigurationUri){
if(_5.isAvailable()){
_d=true;
_f().then(function(_10){
_d=false;
dojo.publish(_6,[_10||[]]);
});
}
return;
}
dojo.when(_4.validateContext(_8),function(_11){
dojo.publish(_6,[_11.backgroundErrors||[]]);
if(_11.status===_4.CONTEXT_INVALID_NO_CONTRIBUTIONS){
com.ibm.team.configuration.web.context.ContextDisplayMessagesUtil.displayContextNoLongerResolves();
}else{
if(_11.status===_4.CONTEXT_INVALID_NOT_RESOLVED||_11.status===_4.CONTEXT_VALID_SKEW){
var _12=_8.changeSetUri?_8.changeSetUri:_8.localConfigurationUri;
com.ibm.team.configuration.web.context.ContextDisplayMessagesUtil.displayContextOutOfDate(_12,_11.highestOrderConfigurationUri);
}else{
if(_11.status===_4.CONTEXT_INVALID_MISSING_OVERRIDE){
com.ibm.team.configuration.web.context.ContextDisplayMessagesUtil.displayMissingOverride(_8.changeSetUri);
}else{
com.ibm.team.configuration.web.context.ContextDisplayMessagesUtil.hideMessage();
}
}
}
_a=_11["refreshDelay"]*1000;
_d=false;
_13();
},function(err){
_d=false;
_13();
});
}else{
dojo.publish(_6,[[]]);
_13();
}
};
var _13=function _setFreshnessCheckTimeout(){
if(_c){
clearTimeout(_c);
}
_c=setTimeout(_e,_a);
};
var _14=function _onBlurHandler(){
_b=false;
if(_c){
clearTimeout(_c);
}
};
var _15=function _onFocusHandler(){
_b=true;
if(_c){
clearTimeout(_c);
}
_e();
};
dojo.addOnLoad(function __onLoadAddEventListeners(){
window.addEventListener("blur",_14);
window.addEventListener("focus",_15);
});
function _f(){
var d=new dojo.Deferred();
jazz.client.xhrGet({url:net.jazz.ajax._contextRoot+"/gcsdk/cache/errors",handleAs:"json",headers:{"Accept":"application/json"},load:function(_16){
d.resolve(_16.map(function(_17){
return _17.message;
}));
},error:function(_18,_19){
}});
return d;
};
com.ibm.team.repository.web.configurationManagement.CmTools={BACKGROUND_ERRORS_EVENT:_6,cmConfig:_3,setConfigurationManagementButton:function __setConfigurationManagementButton(_1a){
_7=_1a;
},getConfigurationManagementButton:function __getConfigurationManagementButton(){
return com.ibm.team.repository.web.configurationManagement.CmTools.getConfigurationManagementButton();
},setMenuProvider:function __setMenuProviderBuilders(_1b){
if(!_7){
console.warn("Cannot set the menu providers when no ContextBannerButton has been defined.  Did you forget to call 'CmTools.setConfigurationManagementButton'?");
return;
}
if(!_1b){
console.warn("Menu builders must not be null!");
return;
}
_7.setMenuProvider(_1b);
},setContext:function __setContext(_1c){
for(var key in _1c){
var _1d=_1c[key];
if(_1d){
_1d=encodeURI(decodeURI(_1d.trim()));
_1c[key]=_1d;
}
}
if(!_8){
setTimeout(_e,_a);
}
_8=_1c;
var _1e={uri:null,rdfType:null,isGlobal:false,componentUri:_1c.componentUri};
if(_1c.globalConfigurationUri){
_1e.uri=_1c.globalConfigurationUri;
_1e.isGlobal=true;
}else{
if(_1c.changeSetUri){
_1e.uri=_1c.changeSetUri;
_1e.rdfType="changeset";
}else{
_1e.uri=_1c.localConfigurationUri;
}
}
if(djConfig.isDebug){
console.debug("CmTools.setContext called with context = "+JSON.stringify(_1c));
}
_4._setContext(_1e);
dojo.publish(_1.SET_CONTEXT,_1c);
},userRequestedContextChange:function __userRequestedContextChange(_1f){
dojo.publish(_1.USER_REQUESTED_CONTEXT_CHANGE,_1f);
if(djConfig.isDebug){
console.debug("CmTools.userRequestedContextChange called with context = "+JSON.stringify(_1f));
}
},addOnUserRequestedContextChangeHandler:function __addOnUserRequestedContextChangeHandler(_20){
return dojo.subscribe(_1.USER_REQUESTED_CONTEXT_CHANGE,this,_20);
},getContext:function __getContext(){
if(window!=window.top){
try{
if(window.top.com.ibm.team.repository.web.configurationManagement&&window.top.com.ibm.team.repository.web.configurationManagement.CmTools){
return window.top.com.ibm.team.repository.web.configurationManagement.CmTools.getContext();
}else{
return null;
}
}
catch(err){
}
}
return dojo.clone(_8);
},addOnSetContextHandler:function __addOnSetContextHandler(_21){
var _22=dojo.subscribe(_1.SET_CONTEXT,this,_21);
if(_8){
_21(_8);
}
return _22;
},getCmUri:function __getCmUri(){
return com.ibm.team.repository.web.configurationManagement.CmTools.getCmService("/localVersioning");
},getCmService:function __getCmViewService(_23){
return net.jazz.ajax.BootstrapProperties.FRONTSIDE_URL+_23;
},getVvcUri:function __getVvcUri(){
if(!_9){
var _24={handleAs:"json",url:net.jazz.ajax.BootstrapProperties.FRONTSIDE_URL+"/queryvvc/vvcurl",sync:true};
var def=new jazz.client.xhrGet(_24);
def.then(dojo.hitch(this,function(){
var url=def.ioArgs.xhr.getResponseHeader("Location");
if(url){
_9=url;
sessionStorage.setItem(_2.VVC_URL_STORAGE_KEY,_9);
}
if(!url){
location.reload();
}
}));
}
return _9;
},talkDirectlyWithVvc:false};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.util.ConfigurationManagementUtil");












(function(){
var _1=com.ibm.jdojo.lang;
var _2=_1.Exception;
var _3=_1.JavaScriptException;
var _4=_1.Runtime;
var _5=com.ibm.team;
var _6=_5.repository.web.client.session;
var _7=_5.rtc.foundation.web.util.PersistentStorage;
var _8=jazz.app.context;
var _9=dojo.declare("com.ibm.team.rtc.foundation.web.util.ConfigurationManagementUtil",null,{"-chains-":{constructor:"manual"}});
_9.OSLC_CONFIG_CONTEXT_PARAM="oslc_config.context";
_9.CONFIGURATION_CHANGED="configurationContextChanged";
_9.WORKITEM_INITIALIZATION_CONTEXT_KEY="com.ibm.team.workitem.service.workItemProjectAreaWebInitializer";
_9.PROJECT_AREA_CONTEXT_KEY="projectArea";
_9.USER_SELECTION_HIDDEN_KEY_QUALIFIER="nobanner";
_9.USER_SELECTION_VISIBLE_KEY_QUALIFIER=null;
_9._storage=new _7("com.ibm.team.rtc.foundation.web.util.ConfigurationManagementUtil",0);
_9.appendConfigurationURIParameter=function(_a,_b){
return _9.appendConfigurationURIParameterWithEncoding(_a,_b,false);
};
_9.appendConfigurationURIParameter2=function(_c){
return _9.appendConfigurationURIParameterWithEncoding(_c,_9._getDefaultConfigurationURI(_9.USER_SELECTION_VISIBLE_KEY_QUALIFIER),false);
};
_9.appendConfigurationURIParameterWithEncoding=function(_d,_e,_f){
if(_d!=null&&_e!=null&&_e.length>0){
_d=_d.concat(_d.indexOf("?")===-1&&_d.indexOf("#")===-1?"?":"&");
if(_f){
_d=_d.concat(_9.OSLC_CONFIG_CONTEXT_PARAM+"="+encodeURIComponent(_e));
}else{
_d=_d.concat(_9.OSLC_CONFIG_CONTEXT_PARAM+"="+_e);
}
}
return _d;
};
_9.getDefaultConfigurationURI=function(){
return _9._getDefaultConfigurationURI(_9._activeStorageKeyQualifier());
};
_9.getBannerDefaultConfigurationURI=function(){
return _9._getDefaultConfigurationURI(_9.USER_SELECTION_VISIBLE_KEY_QUALIFIER);
};
_9._getDefaultConfigurationURI=function(_10){
var _11=_9.getConfigurationURI();
if(_11==null){
_11=_9._getStoredConfiguration(_10);
}
if(_11==null){
try{


_11=com.ibm.team.repository.web.configurationManagement.CmTools==null?null:com.ibm.team.repository.web.configurationManagement.CmTools.getContext()==null?null:com.ibm.team.repository.web.configurationManagement.CmTools.getContext().globalConfigurationUri;
}
catch(exception){
if((exception=exception instanceof _2?exception:new _3(exception)) instanceof _2){
console.log("Could not load CmTools");
}else{
throw exception;
}
}
}
return _11;
};
_9.getConfigurationURI=function(){
var _12=_9.getConfigurationURIParameter(_9.getWindowLocationSearch());
if(_12==null){
_12=_9.getConfigurationURIParameter(_9.getWindowLocationHash());
}
if(_12==null){
return null;
}
return decodeURIComponent(_12);
};
_9.getWindowLocationSearch=function(){
return window.location.search;
};
_9.setWindowLocationSearch=function(_13){
var _14=_13==null||_13.length===0?"":"?"+_13;
window.history.replaceState(null,"",window.location.pathname+_14+window.location.hash);
};
_9.getWindowLocationHash=function(){
return window.location.hash;
};
_9.replaceWindowLocationHash=function(_15){
var _16=window.location.href.indexOf("#");
var _17;
if(_16<0){
_17=window.location.href+"#"+_15;
}else{
_17=window.location.href.substring(0,_16)+"#"+_15;
}
window.location.replace(_17);
};
_9.getWindowLocationHref=function(){
return window.location.href;
};
_9.isCmEnabled=function(){
var _18=_8.get();
return _18.cmEnabled;
};
_9.updateConfigurationURI=function(_19,_1a){
var _1b=_9.getWindowLocationHash().replace(new RegExp("#"),"");
_1b=_1b.replace("+","%20");
var _1c=dojo.queryToObject(_1b);
var _1d=_1c[_9.OSLC_CONFIG_CONTEXT_PARAM];
_1d=_1d==null?null:_1d;
if(_1d!==_19){
if(_19==null){
delete _1c[_9.OSLC_CONFIG_CONTEXT_PARAM];
}else{
_1c[_9.OSLC_CONFIG_CONTEXT_PARAM]=_19;
}
_9.replaceWindowLocationHash(decodeURIComponent(dojo.objectToQuery(_1c)));
}
_1b=_9.getWindowLocationSearch().replace(new RegExp("^\\?"),"");
_1b=_1b.replace("+","%20");
_1c=dojo.queryToObject(_1b);
_1d=_1c[_9.OSLC_CONFIG_CONTEXT_PARAM];
if(_1d!=null){
delete _1c[_9.OSLC_CONFIG_CONTEXT_PARAM];
if(_4.getValues(_1c).length===0){
_9.setWindowLocationSearch("");
}else{
_9.setWindowLocationSearch(decodeURIComponent(dojo.objectToQuery(_1c)));
}
}
if(!(_1a===false)){
_9._setStoredConfiguration(_19,_9.USER_SELECTION_VISIBLE_KEY_QUALIFIER);
}
};
_9.removeConfigurationParameter=function(url){
return _9._removeParameter(url,_9.OSLC_CONFIG_CONTEXT_PARAM);
};
_9.getConfigurationURIParameter=function(url){
if(url==null){
return null;
}
var _1e=new RegExp(_9.OSLC_CONFIG_CONTEXT_PARAM+"=.*?($|[&;])");
var _1f=url.match(_1e);
if(_1f!=null&&_1f[0]!=null){
var _20=_1f[0].substring(_9.OSLC_CONFIG_CONTEXT_PARAM.length+1);
_20=_20.replace(new RegExp("[&|?]$"),"");
return _20;
}
return null;
};
_9.hasOSLCLinkTypeMappings=function(){
var _21=dojo.getObject("com.ibm.team.repository.web.client.init.InitializationData");
if(_21!=null){
var _22=_21.get(_9.WORKITEM_INITIALIZATION_CONTEXT_KEY);
if(_22!=null){
var _23=_22[_9.PROJECT_AREA_CONTEXT_KEY];
return _23.hasOSLCLinkTypeMappings;
}
}
return false;
};
_9.isUseUserSelectedConfigurationContextEnabled=function(){
var _24=dojo.getObject("com.ibm.team.repository.web.client.init.InitializationData");
if(_24!=null){
var _25=_24.get(_9.WORKITEM_INITIALIZATION_CONTEXT_KEY);
if(_25!=null){
var _26=_25[_9.PROJECT_AREA_CONTEXT_KEY];
return _26.useUserSelectedConfigurationContext;
}
}
return false;
};
_9.shouldDisplayBannerButton=function(){
return _9.hasOSLCLinkTypeMappings()&&_9.isUseUserSelectedConfigurationContextEnabled();
};
_9.updateConfigurationURIParameter=function(_27,_28){
var _29=_9.removeConfigurationParameter(_27);
return _9.appendConfigurationURIParameter(_29,_28);
};
_9._removeParameter=function(url,_2a){
if(url==null){
return null;
}
var _2b=url.replace(new RegExp(_2a+"=.*?($|[&;])","g"),"");
if(!(url===_2b)){
_2b=_2b.replace(new RegExp("[&|?]$"),"");
}
return _2b;
};
_9._configurationStorageKey=function(_2c){
var _2d=_6.getAuthenticatedContributor().itemId;
var _2e=_8.get().itemId;
var key=_2e+"_"+_2d+"_";
if(_2c!=null){
key=key+_2c+"_";
}
return key+_9.OSLC_CONFIG_CONTEXT_PARAM;
};
_9.getStoredConfiguration=function(){
return _9._getStoredConfiguration(_9._activeStorageKeyQualifier());
};
_9.setStoredConfiguration=function(_2f){
var _30=_9._activeStorageKeyQualifier();
_9._setStoredConfiguration(_2f,_30);
var _31=_30===_9.USER_SELECTION_VISIBLE_KEY_QUALIFIER?_9.USER_SELECTION_HIDDEN_KEY_QUALIFIER:_9.USER_SELECTION_VISIBLE_KEY_QUALIFIER;
_9._setStoredConfiguration(null,_31);
};
_9._activeStorageKeyQualifier=function(){
return _9.isUseUserSelectedConfigurationContextEnabled()?_9.USER_SELECTION_VISIBLE_KEY_QUALIFIER:_9.USER_SELECTION_HIDDEN_KEY_QUALIFIER;
};
_9._getStoredConfiguration=function(_32){
return _9._storage.getEntry(_9._configurationStorageKey(_32));
};
_9._setStoredConfiguration=function(_33,_34){
var _35=_9._getStoredConfiguration(_34);
if(_35===_33){
return;
}
if(_33==null){
_9._storage.clearEntry(_9._configurationStorageKey(_34));
}else{
_9._storage.putEntry(_9._configurationStorageKey(_34),_33);
}
dojo.publish(_9.CONFIGURATION_CHANGED,[_33]);
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.QueryClient");






























(function(){
var _1=net.jazz.ajax.toolbox.lang.checkNotNull;
var _2=net.jazz.ajax.toolbox.lang.checkNotEmpty;
var _3=com.ibm.team.workitem.api.common.WorkItemAttributes;
var _4=com.ibm.team.repository.web.transport.ServiceRequest;
var _5=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _6=com.ibm.team.repository.web.transport.TeamServerClient;
var _7="com.ibm.team.workitem.common.internal.rest.IQueryRestService";
var _8="com.ibm.team.workitem.common.internal.rest.IQueryEditorRestService";
var _9="score";
var _a="com.ibm.team.workitem.search";
var _b="com.ibm.team.workitem.workItemType";
var _c=com.ibm.team.workitem.web.client.internal.query.Term;
var _d=com.ibm.team.workitem.web.client.internal.query.UIItem;
var _e=com.ibm.team.workitem.web.client.internal.query.AttributeExpression;
var _f=com.ibm.team.workitem.web.client.internal.query.SimilarityExpression;
var _10=com.ibm.team.workitem.web.client.internal.query.QueryDescriptor;
var _11=com.ibm.team.workitem.web.client.internal.query.Operator;
var _12=com.ibm.team.workitem.web.client.internal.query.Variable;
var _13=com.ibm.team.workitem.web.client.internal.ClientConstants;
var _14=com.ibm.team.rtc.foundation.web.util.ConfigurationManagementUtil;
com.ibm.team.workitem.web.client.internal.QueryClient={SCOPE_PERSONAL:0,SCOPE_OTHER_CONTRIBUTORS:1,SCOPE_TEAM_AREA:2,SCOPE_PROJECT_AREA:3,SCOPE_CROSS_REPOSITORY:4,SCOPE_PREDEFINED:5,PROCESS_REPORT_OK:0,PROCESS_REPORT_WARNING:2,PROCESS_REPORT_ERROR:4,_invokeJsonService:function(_15,_16,_17){
var _18={};
if(_17){
var _19=dojo.toJson(_17);
_18.jsonString=_19;
_18.projectAreaItemId=jazz.app.context.get().itemId;
}
var _1a=new _4(_7,_16,_18);
_6.invokeService(_1a,_15);
},_invokeQueryService:function(_1b,_1c,_1d){
this._invokeService(_7,_1b,_1c,_1d);
},_invokeQueryEditorService:function(_1e,_1f,_20){
this._invokeService(_8,_1e,_1f,_20);
},_invokeService:function(_21,_22,_23,_24){
if(!_24){
_24={};
}
if(!_24.projectAreaItemId){
_24.projectAreaItemId=jazz.app.context.get().itemId;
}
if(navigator.userAgent.toLowerCase().search("edge")>=0){
_24.now=Date.now();
}
serviceRequest=new _4(_21,_23,_24);
var _25={headers:_13.CACHE_CONTROL_HEADERS};
_6.invokeService(serviceRequest,_22,_25);
},getQuery:function(_26,_27,_28){
if(!_27){
_27="";
}
_28=_28?true:false;
this._invokeQueryService(_26,"getQuery",{itemId:_27,includeCount:_28});
},getQuery2:function(_29,_2a){
this._invokeQueryService(_29,"getQuery",_2a);
},getQueries:function(_2b,_2c,_2d){
if(!_2c){
_2c=[];
}
_2d=_2d?true:false;
this._invokeQueryService(_2b,"getQueries",{itemIds:_2c,includeCount:_2d});
},getQueries2:function(_2e,_2f){
this._invokeQueryService(_2e,"getQueries",_2f);
},getScopedQueries:function(_30,_31,_32,_33,_34,_35,_36,_37){
_33=_33?true:false;
_34=_34?true:false;
_36=_36?true:false;
var _38={scope:_31,includeCount:_33,includeParentScopes:_34,projectAreaItemId:_35,suppressCrossRepoQueries:_36,keepPredefinedQueriesSeparate:_37};
if(_32){
_38.scopeItemId=_32;
}
this._invokeQueryService(_30,"getScopedQueries",_38);
},getScopedQueries2:function(_39,_3a){
this.getScopedQueries(_39,_3a.scope,_3a.scopeItemId,_3a.includeCount,_3a.includeParentScopes,_3a.projectAreaItemId,_3a.suppressCrossRepoQueries,_3a.keepPredefinedQueriesSeparate);
},getHistogram:function(_3b,_3c){
this._invokeQueryService(_3b,"getHistogram",_3c);
},getCompleteQuery:function(_3d,_3e,_3f){
if(!_3e){
_3e="";
}
_3f=_3f?true:false;
this._invokeQueryService(_3d,"getQuery",{itemId:_3e,includeExpression:true,includeCount:_3f});
},execute:function(_40,_41,_42,_43,_44,_45,_46){
var _47=new Object();
_47.startIndex=_40;
_47.maxResults=_41;
_47.token=_42;
_47.jsonQuery=dojo.toJson(_43);
_47.orderAttributes=_44;
_47.orderDirections=_45;
this._invokeQueryService(_46,"postExecute",_47);
},getResultSet:function(_48,_49,_4a){
var _4b=dojo.clone(_49);
var _4c=_14.getBannerDefaultConfigurationURI();
if(_4c!=null){
_4b.userSelectedConfigContext=_4c;
}
if(!_4b.columnIdentifiers){
_4b.columnIdentifiers=[];
}
if(!_4b.filterAttribute){
_4b.filterAttribute="";
}
if(!_4b.filterValue){
_4b.filterValue="";
}
if(_4b.sortOrder){
var _4d=new Array();
var _4e=new Array();
for(var i=0;i<_4b.sortOrder.length;i++){
var _4f=_4b.sortOrder[i];
_4d.push(_4f.id);
_4e.push(_4f.ascending);
}
_4b.sortColumns=_4d;
_4b.sortDirections=_4e;
if((window.location.href.indexOf(_a)!=-1||_4b.sortColumns.indexOf(_9)!=-1)&&_4b.columnIdentifiers.indexOf(_4f.id)==-1){
if(_4b.columnIdentifiers.length==0){
this.addDefaultColumnIdentifiers(_4b.columnIdentifiers);
}
_4b.columnIdentifiers.push(_9);
}
delete _4b.sortOrder;
}
if(_48){
if(_48.itemId){
_4b.itemId=_48.itemId;
}
if(_48.projectAreaItemId){
_4b.projectAreaItemId=_48.projectAreaItemId;
}
if(!_4b.jsonExpression){
if(_48.expression){
var _50=_c.createFromDTO(_48.expression);
_4b.jsonExpression=_50.serialize();
}else{
_4b.jsonQuery=dojo.toJson(_48);
}
}
}
this._invokeQueryService(_4a,"postGetResultSet",_4b);
},addDefaultColumnIdentifiers:function(_51){
_51.push(_3.TYPE);
_51.push(_3.ID);
_51.push(_3.SUMMARY);
_51.push(_3.OWNER);
_51.push(_3.STATE);
_51.push(_3.PRIORITY);
_51.push(_3.SEVERITY);
_51.push(_3.MODIFIED);
},getResults:function(_52,_53){
this._invokeQueryService(_53,"getResults",_52);
},getQueriesForOwner:function(_54,_55){
this._invokeQueryService(_55,"getQueriesForOwner",_54);
},getQueriesForOwner2:function(_56,_57){
this._invokeQueryService(_57,"getQueriesForOwner2",_56);
},getDefaultQuery:function(_58){
this._invokeQueryService(_58,"getDefaultQuery");
},deleteQuery:function(_59,_5a){
this._invokeQueryService(_5a,"postDeleteQuery",{uuid:_59});
},getWorkItemTemplates:function(_5b,_5c){
this._invokeQueryService(_5b,"getWorkItemTemplates",_5c);
},getWorkItemTemplates2:function(_5d,_5e){
this._invokeQueryService(_5d,"getWorkItemTemplates2",_5e);
},instantiateWorkItemTemplate:function(_5f,_60){
this._invokeQueryService(_5f,"postInstantiateWorkItemTemplate",_60);
},getTemplateStringVariables:function(_61,_62){
this._invokeQueryService(_61,"postGetTemplateStringVariables",_62);
},postSaveQueries:function(_63,_64){
this._invokeQueryEditorService(_63,"postSaveQueries",_64);
},getAttributeTree:function(_65,_66){
var _67=_66?dojo.clone(_66):new Object();
_67.queryType=_b;
this._invokeQueryEditorService(_65,"getAttributeTree",_67);
},getPresentation:function(_68,_69,_6a){
_1(_69);
var _6b={queryType:_b,attributeIdentifier:_69};
if(_6a){
_6b.projectAreaItemId=_6a;
}
this._invokeQueryEditorService(_68,"getPresentation",_6b);
},saveQuery:function(_6c,_6d){
var _6e=dojo.clone(_6d);
_6e.queryType=_b;
if(_6e.expression){
_6e.jsonExpression=_c.createFromDTO(_6e.expression).serialize();
delete _6e.expression;
}
var _6f=new Array();
_6e.setArguments=_6f;
if(_6e.teamAreaAssociations){
_6f.push("teamAreaAssociations");
}
if(_6e.contributorAssociations){
_6f.push("contributorAssociations");
}
if(_6e.resultColumns){
_6f.push("resultColumns");
}
if(_6e.sortColumns){
_6f.push("sortColumns");
}
this._invokeQueryEditorService(_6c,"postSaveQuery",_6e);
},getEditableQuery:function(_70,_71){
var _72=new Object();
_72.queryType=_b;
_72.itemId=_71;
this._invokeQueryEditorService(_70,"getEditableQuery",_72);
},createWorkItemTemplate:function(_73,_74){
this._invokeQueryService(_73,"postCreateWorkItemTemplate",_74);
},createFulltextQuery:function(_75,_76,_77){
var _78=new _c(_11.AND);
var _79=new _e("all",new _11("contains",null),_d.createFromIds([_76]));
_78.addAttributeExpression(_79);
if(_77){
var _7a=new _12("state","open or in progress");
var _7b=new _e("internalState",new _11("is",null));
_7b.setVariables([_7a]);
_78.addAttributeExpression(_7b);
}
return {name:_75,expression:_78.createDTO(),itemId:""};
},createSimilarityQuery:function(_7c,_7d){
var _7e=new _10();
_7e.setName(_7c);
_7e.setItemId("");
var _7f=new _c(_11.AND);
_7f.addSimilarityExpression(_7d);
_7e.setTerm(_7f);
return _7e;
},createWorkItemIdQuery:function(_80,_81){
if(!_81||_81.length==0){
_2(_81,"createWorItemIdQuery.idArray");
}
var _82=new _e("id",new _11("is",null),_d.createFromIds(_81));
var _83=new _c(_11.AND);
_83.addAttributeExpression(_82);
return {name:_80,expression:_83.createDTO(),values:_81};
}};
})();


;dojo.provide("jazz.ui.tree.AbstractItem");


(function(){
dojo.declare("jazz.ui.tree.AbstractItem",dijit._Widget,{tree:null,selectable:true,update:function(){
},getFocusNode:function(){
return this.domNode;
},getId:function(){
return this.id;
},isSelectable:function(){
return this.selectable;
},addChild:function(_1,_2){
_1.tree=this.tree;
_1._parent=this;
if(!_2&&_2!=0){
this._children.push(_1);
}else{
this._children.splice(_2,0,_1);
}
this._initWaiItem(_1);
this._notifyTree();
},getChildren:function(){
return this._children;
},getDepth:function(){
if(this._parent){
return this._parent.getDepth()+1;
}
return -1;
},getIndex:function(_3){
for(var i=0;i<this._children.length;i++){
if(_3.getId()==this._children[i].getId()){
return i;
}
}
},getNextSibling:function(){
if(!this._parent){
return null;
}
var i=this._parent.getIndex(this);
var _4=this._parent.getChildren();
if(i==_4.length-1){
return null;
}
return this._parent.getChildren()[i+1];
},getParent:function(){
return this.isRoot()?null:this._parent;
},getPreviousSibling:function(){
if(!this._parent){
return null;
}
var i=this._parent.getIndex(this);
if(i==0){
return null;
}
return this._parent.getChildren()[i-1];
},isExpanded:function(){
return !this.isLeaf()&&dojo.hasClass(this.tree._branches[this.getId()].root,"open")&&(this.isRoot()||this._parent.isExpanded());
},isLeaf:function(){
return this.tree._isLeaf(this);
},isRoot:function(){
return this._parent.getId()==this.tree._root.getId();
},isVisible:function(){
return this.isRoot()||this._parent.isExpanded();
},refresh:function(){
this.tree._refreshItem(this);
},removeChild:function(_5,_6){
for(var i=0;i<this._children.length;i++){
if(_5.getId()==this._children[i].getId()){
this._children.splice(i,1);
if(this.tree){
this.tree._removeItem(_5);
}
if(_6){
delete _5.tree;
}else{
_5.destroy();
}
break;
}
}
},setExpanded:function(_7){
this.tree._setExpanded(this,_7);
},toggleExpanded:function(){
this.setExpanded(!this.isExpanded());
},_parent:null,postCreate:function(){
this._children=[];
},_initWaiItem:function(_8){
var _9=_8.getFocusNode();
dijit.setWaiRole(_9,"treeitem");
dijit.setWaiState(_9,"expanded","false");
dijit.setWaiState(_9,"selected","false");
var _a=_8.getDepth()+1;
dijit.setWaiState(_9,"level",_a);
if(_8.label){
dijit.setWaiState(_9,"label",_8.label);
}
},_notifyTree:function(){
if(this.tree){
this.tree._refreshItem(this);
}
}});
})();


;dojo.provide("jazz.ui.tree.IconItem");




(function(){
dojo.declare("jazz.ui.tree.IconItem",[jazz.ui.tree.AbstractItem,dijit._Templated],{label:"",iconClass:"",templateString:"<div class='simpleItem'><div dojoAttachPoint='_icon' class='icon ${iconClass}'></div><div dojoAttachPoint='_label' class='label'>${label}</div></div>",update:function(){
this._icon.className="icon "+this.iconClass;
this._label.innerHTML=this.label;
}});
})();


;dojo.provide("jazz.ui.Tree");






(function(){
var _1=jazz.ui.tree.AbstractItem;
dojo.declare("jazz.ui.Tree",[dijit._Widget,dijit._Templated],{indent:15,selection:true,addChild:function(_2,_3){
this._root.addChild(_2,_3);
if(!this._focus){
this._setFocus(_2,false);
}
},getChildren:function(){
return this._root.getChildren();
},getItem:function(id){
var b=this._branches[id];
if(b){
return b.item;
}
},getSelection:function(){
if(this.selection){
var _4=[];
for(var i in this._selection){
_4.push(this._selection[i]);
}
return _4;
}
},onDblClick:function(_5){
if(!_5.isLeaf()){
_5.toggleExpanded();
}
},onEnter:function(){
},onSelectionChanged:function(_6){
},refresh:function(){
this._refreshItem(this._root);
},removeChild:function(_7,_8){
this._root.removeChild(_7,_8);
},setSelection:function(_9){
if(!_9){
return;
}
this._doSelection({},_9,true);
},templateString:"<div class='jazz-ui-Tree'/>",postCreate:function(){
this._root=new _1();
this._root.tree=this;
this._branches=[];
if(this.selection){
this._selection={};
}
this.connect(this.domNode,"onkeypress",this._handleKeypress);
dijit.setWaiRole(this.domNode,"tree");
if(this.selection==="multi"){
dijit.setWaiState(this.domNode,"multiselectable","true");
}else{
dijit.setWaiState(this.domNode,"multiselectable","false");
}
},_setExpanded:function(_a,_b){
var _c=this._branches[_a.getId()].root;
if(_b){
dojo.removeClass(_c,"closed");
dojo.addClass(_c,"open");
dijit.setWaiState(_a.getFocusNode(),"expanded","true");
}else{
dojo.addClass(_c,"closed");
dojo.removeClass(_c,"open");
dijit.setWaiState(_a.getFocusNode(),"expanded","false");
if(this.selection){
var s=this.getSelection();
for(var i=0;i<s.length;i++){
if(!s[i].isVisible()){
this._doSelection({ctrlKey:true},s[i],true);
var _d=s[i];
while(!_d.isVisible()){
_d=_d._parent;
}
if(!this._selection[_d.getId()]){
this._doSelection({ctrlKey:true},_d,true);
}
}
}
}
}
},_isLeaf:function(_e){
return _e.getChildren().length==0;
},_refreshItem:function(_f){
if(_f.getId()==this._root.getId()){
for(var i=0;i<_f.getChildren().length;i++){
this._refreshItem(_f.getChildren()[i]);
}
return;
}
var b=this._branches[_f.getId()];
if(!b){
if(_f.getFocusNode()){
this.connect(_f.getFocusNode(),"onfocus",dojo.hitch(this,this._setFocus,_f,false));
}
b={};
var r=document.createElement("div");
b.root=r;
r.className="treeBranch closed";
r.innerHTML="<div class='row'><a hideFocus='true' class='twistie'></a></div><div class='body'></div>";
var row=r.firstChild;
b.row=row;
b.twist=row.firstChild;
b.body=row.nextSibling;
row.appendChild(_f.domNode);
this.connect(b.twist,"onclick",function(e){
e.preventDefault();
this._handleTwistie(_f);
});
this.connect(b.twist,"onmousedown",function(e){
e.preventDefault();
return false;
});
this.connect(b.twist,"onselectstart",function(){
return false;
});
b.item=_f;
this._branches[_f.getId()]=b;
if(_f.isRoot()){
this.domNode.appendChild(b.root);
}
}
if(this.selection&&!b.handler){
b.handler=this.connect(_f.domNode,"onclick",function(e){
this._doSelection(e,_f);
});
}
if(!b.dblHandler){
b.dblHandler=this.connect(_f.domNode,"ondblclick",function(e){
this.onDblClick(_f);
});
}
this._updateBranch(b);
_f.update();
b.row.style.paddingLeft=(_f.getDepth()*this.indent)+"px";
for(var i=0;i<_f.getChildren().length;i++){
this._refreshItem(_f.getChildren()[i]);
b.body.appendChild(this._branches[_f.getChildren()[i].getId()].root);
}
},_handleTwistie:function(_10){
_10.toggleExpanded();
if(this.selection&&this.getSelection().length==0){
this._setFocus(_10,false);
}
if(this._focus){
var _11=this._focus;
while(!_11.isVisible()){
_11=_11._parent;
}
this._focus=_11;
}
var _12=this._branches[_10.getId()].twist;
_12.tabIndex="0";
_12.focus();
if(!this._onTwistBlur){
this._onTwistBlur=this.connect(_12,"onblur",dojo.hitch(this,function(){
_12.tabIndex="-1";
this.disconnect(this._onTwistBlur);
delete this._onTwistBlur;
}));
}
},_doSelection:function(e,_13,_14){
var b=this._branches[_13.getId()],_15=false;
if(this.selection=="multi"&&(e.ctrlKey||(dojo.isMac&&e.metaKey))){
if(_13.isSelectable()){
_15=true;
if(this._selection[_13.getId()]){
dojo.removeClass(b.row,"j-selected");
dijit.setWaiState(_13.getFocusNode(),"selected","false");
delete this._selection[_13.getId()];
}else{
dojo.addClass(b.row,"j-selected");
dijit.setWaiState(_13.getFocusNode(),"selected","true");
this._selection[_13.getId()]=_13;
}
}
}else{
var s=this.getSelection(),_16=s.length;
for(var i=0;i<_16;i++){
dojo.removeClass(this._branches[s[i].getId()].row,"j-selected");
var _17=s[i].getFocusNode();
dijit.setWaiState(_17,"selected","false");
delete this._selection[s[i].getId()];
}
if(_13.isSelectable()){
this._selection[_13.getId()]=_13;
dojo.addClass(b.row,"j-selected");
dijit.setWaiState(_13.getFocusNode(),"selected","true");
_15=true;
}else{
if(_16){
_15=true;
}
}
}
this._setFocus(b.item,!_14);
if(_15){
this.onSelectionChanged(this.getSelection());
}
},_setFocus:function(_18,_19){
var d=document.createElement("div");
if(this._focus){
this._focus.getFocusNode().setAttribute("tabIndex","");
}
_18.getFocusNode().setAttribute("tabIndex","0");
if(_19){
_18.getFocusNode().focus();
}
this._focus=_18;
},_handleKeypress:function(e){
if(e.altKey){
return;
}
var k=dojo.keys;
switch(e.keyCode){
case k.ENTER:
this.onEnter(e);
break;
case k.LEFT_ARROW:
this._onLeft(e);
break;
case k.RIGHT_ARROW:
this._onRight(e);
break;
case k.UP_ARROW:
this._onUp(e);
break;
case k.DOWN_ARROW:
this._onDown(e);
break;
case k.HOME:
this._onHome(e);
break;
case k.END:
this._onEnd(e);
break;
}
},_onLeft:function(){
if(this._focus.isExpanded()){
this._focus.setExpanded(false);
}else{
if(this._focus.isRoot()){
return;
}
this._doKeyboardFocus(this._focus.getParent());
}
},_onRight:function(){
if(this._focus.isLeaf()){
return;
}
if(!this._focus.isExpanded()){
this._focus.setExpanded(true);
}else{
this._doKeyboardFocus(this._focus.getChildren()[0]);
}
},_onUp:function(e){
dojo.stopEvent(e);
var _1a=this._focus.getPreviousSibling();
if(_1a){
if(_1a.isExpanded()){
this._findEnd(_1a.getChildren());
}else{
this._doKeyboardFocus(_1a);
}
}else{
if(!this._focus.isRoot()){
this._doKeyboardFocus(this._focus.getParent());
}
}
},_onDown:function(e){
dojo.stopEvent(e);
if(this._focus.isExpanded()){
this._doKeyboardFocus(this._focus.getChildren()[0]);
}else{
var n=this._focus.getNextSibling();
if(n){
this._doKeyboardFocus(n);
}else{
this._findParentNext(this._focus);
}
}
},_onHome:function(){
var _1b=this.getChildren();
this._doKeyboardFocus(_1b[0]);
},_onEnd:function(){
this._findEnd(this.getChildren());
},_findParentNext:function(_1c){
var p=_1c.getParent();
if(!p){
return;
}
var n=p.getNextSibling();
if(n){
this._doKeyboardFocus(n);
}else{
this._findParentNext(p);
}
},_findEnd:function(arr){
var _1d=arr[arr.length-1];
if(_1d.isLeaf()||!_1d.isExpanded()){
this._doKeyboardFocus(_1d);
}else{
this._findEnd(_1d.getChildren());
}
},_doKeyboardFocus:function(_1e){
if(this.selection){
this._doSelection({},_1e);
}else{
this._setFocus(_1e,true);
}
},_removeItem:function(_1f){
var b=this._branches[_1f.getId()];
if(b){
if(b.root.parentNode){
b.root.parentNode.removeChild(b.root);
}
var p=_1f.getParent();
if(p){
b=this._branches[p.getId()];
if(b){
this._updateBranch(b);
}
}
_1f.destroy();
}
},_updateBranch:function(_20){
if(_20.item.isLeaf()){
dojo.addClass(_20.row,"leaf");
}else{
dojo.removeClass(_20.row,"leaf");
}
},destroy:function(){
this._root.destroy();
this.inherited(arguments);
}});
})();


;dojo.provide("jazz.ui.tree.LinkItem");




(function(){
dojo.declare("jazz.ui.tree.LinkItem",[jazz.ui.tree.AbstractItem,dijit._Templated],{label:"",href:"",onclick:"",templateString:"<a dojoAttachPoint='_link'></a>",init:function(){
this.update();
},update:function(){
if(this.onclick&&!this.handler){
this.handler=this.connect(this._link,"onclick",this.onclick);
}
this._link.href=this.href;
this._link.innerHTML="";
this._link.appendChild(document.createTextNode(this.label));
},getFocusNode:function(){
return this._link;
}});
})();


;dojo.provide("jazz.ui.tree.SimpleItem");




(function(){
dojo.declare("jazz.ui.tree.SimpleItem",[jazz.ui.tree.AbstractItem,dijit._Templated],{label:"",templateString:"<div class='simpleItem'><div dojoAttachPoint='_label' class='label'>${label}</div></div>",update:function(){
this._label.innerHTML=this.label;
}});
})();


;dojo.provide("jazz.ui.ModeledTree");








(function(){
var _1=jazz.ui.tree.LinkItem;
var _2=jazz.ui.tree.SimpleItem;
var _3=jazz.ui.tree.IconItem;
dojo.declare("jazz.ui.ModeledTree",jazz.ui.Tree,{model:null,createTreeItem:function(_4){
if(_4.href||_4.onclick){
return new _1(_4);
}
if(_4.iconClass){
return new _3(_4);
}
return new _2(_4);
},expandTo:function(id,_5){
if(this._data[id]){
if(!this._data[id].item.isRoot()){
this._data[id].item.getParent().setExpanded(true);
}
return;
}
var _6=this._findPath(id,_5);
if(_6){
this._supressEvents=true;
for(var i=0;i<_6.length;i++){
this.getItem(_6[i]).setExpanded(true);
}
delete this._supressEvents;
}
},getModelObject:function(id){
if(this._data[id]){
return this._data[id].modelObj;
}
},getState:function(){
return dojo.clone(this._expanded);
},onStateChange:function(){
},restoreState:function(_7){
this._supressEvents=true;
this._expanded=_7;
this._doRestore(this.getChildren());
delete this._supressEvents;
},constructor:function(_8){
this._data={};
this._expanded={};
this._childrenBuilt={};
},postCreate:function(){
this.inherited(arguments);
if(!this.model){
console.error("jazz.ui.ModeledTree is missing required parameter 'model'");
return;
}
if(this.model){
for(var i=0;i<this.model.length;i++){
this.addChild(this._buildItem(this.model[i]));
}
}
},_isLeaf:function(_9){
if(this._data[_9.getId()]){
var _a=this._data[_9.getId()].modelObj;
return !(_a&&_a.children&&_a.children.length);
}
this.inherited(arguments);
},_setExpanded:function(_b,_c){
if(_c){
this._expanded[_b.getId()]=true;
var _d=this._data[_b.getId()].modelObj;
if(_d.children&&!this._childrenBuilt[_b.getId()]){
for(var i=0;i<_d.children.length;i++){
_b.addChild(this._buildItem(_d.children[i]));
}
this._childrenBuilt[_b.getId()]=true;
}
}else{
delete this._expanded[_b.getId()];
}
this.inherited(arguments);
if(!this._supressEvents){
this.onStateChange();
}
},_buildItem:function(_e){
var _f=this.createTreeItem(_e);
this._data[_f.getId()]={item:_f,modelObj:_e};
return _f;
},_doRestore:function(arr){
for(var i=0;i<arr.length;i++){
var _10=arr[i];
_10.setExpanded(this._expanded[_10.getId()]);
this._doRestore(_10.getChildren());
}
},_findPath:function(id,_11,_12){
if(!_12){
_12=this.model;
}
for(var i=0;i<_12.length;i++){
var obj=_12[i];
var _13=_11(obj);
if(_13==id){
return true;
}
if(!obj.children){
continue;
}
var _14=this._findPath(id,_11,obj.children);
if(_14){
if(_14===true){
return [_13];
}
_14.splice(0,0,_13);
return _14;
}
}
return false;
},destroy:function(){
this._destroyChildren(this._root);
this.inherited(arguments);
},_destroyChildren:function(_15){
if(_15){
var _16=_15.getChildren();
if(_16){
for(var i=0;i<_16.length;i++){
var _17=_16[i];
if(_17){
this._destroyChildren(_17);
_17.destroy();
}
}
}
}
}});
})();

/*******************************************************************************
 * Licensed Materials - Property of IBM
 * (c) Copyright IBM Corporation 2010. All Rights Reserved.
 * 
 * Note to U.S. Government Users Restricted Rights:
 * Use, duplication or disclosure restricted by GSA ADP Schedule
 * Contract with IBM Corp.
 *******************************************************************************/
dojo.provide("jazz.app.internal.applicationAbout");

(function() {

var data = {
  "abouts": {
    "https://rb-alm-14-p.de.bosch.com/am/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/am",
      "description": "Provides capabilities for change management, planning, software configuration management, automation (build system), and extensions for IBM enterprise platforms development.",
      "icon": "https://rb-alm-14-p.de.bosch.com/am/web/com.ibm.team.rtc.web/ui/graphics/UICustomizations/RTC_16.png",
      "identifier": "http://jazz.net/application/ccm",
      "instanceName": "/am",
      "nonLocalizedTitle": "Change and Configuration Management",
      "productAbbreviation": "EWM",
      "productName": "IBM Engineering Workflow Management",
      "productShortName": "Engineering Workflow Management",
      "shortTitle": "CCM",
      "title": "Change and Configuration Management",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/ccm/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com:443/ccm",
      "description": "Provides capabilities for change management, planning, software configuration management, automation (build system), and extensions for IBM enterprise platforms development.",
      "icon": "https://rb-alm-14-p.de.bosch.com/ccm/web/com.ibm.team.rtc.web/ui/graphics/UICustomizations/RTC_16.png",
      "identifier": "http://jazz.net/application/ccm",
      "instanceName": "/ccm",
      "nonLocalizedName": "Change and Configuration Management",
      "productAbbreviation": "EWM",
      "productName": "IBM Engineering Workflow Management",
      "productShortName": "Engineering Workflow Management",
      "shortTitle": "CCM",
      "title": "Change and Configuration Management",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/dcc/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/dcc",
      "description": "This is the Data Collection Component.",
      "icon": "https://rb-alm-14-p.de.bosch.com/dcc/web/com.ibm.rational.datacollection.web/graphics/DCC_16.png",
      "identifier": "http://jazz.net/application/dcc",
      "instanceName": "/dcc",
      "nonLocalizedTitle": "Data Collection Component",
      "productAbbreviation": "DCC",
      "productName": "IBM Engineering Data Collection Component",
      "productShortName": "Data Collection Component",
      "shortTitle": "Data Collection Component",
      "title": "Data Collection Component",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/gc/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/gc",
      "description": "Assembles and manages configurations (streams and baselines) across applications.",
      "icon": "https://rb-alm-14-p.de.bosch.com/gc/web/com.ibm.team.gc.web.app/images/gcApp16.png",
      "identifier": "http://jazz.net/application/gc",
      "instanceName": "/gc",
      "nonLocalizedTitle": "Global Configuration Management",
      "productAbbreviation": "GCM",
      "productName": "IBM Engineering Global Configuration Management",
      "productShortName": "Global Configuration Management",
      "shortTitle": "GCM",
      "title": "Global Configuration Management",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/jts/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/jts",
      "description": "The Jazz Team Server is the integration hub for multiple collaborating applications.  It provides integration services such as user and license management, as well as functional services such as such as storage, security, and process support.",
      "icon": "https://rb-alm-14-p.de.bosch.com/jts/web/jazz.app/graphics/JazzUI/icons/Jazz_16.png",
      "identifier": "http://jazz.net/application/jts",
      "instanceName": "rb-alm-14-p.de.bosch.com/jts",
      "nonLocalizedTitle": "Jazz Team Server",
      "productAbbreviation": "JTS",
      "productName": "IBM Engineering Jazz Team Server",
      "productShortName": "Jazz Team Server",
      "shortTitle": "JTS",
      "title": "Jazz Team Server",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/ldx/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/ldx",
      "description": "The Link Index Provider application indexes Tracked Resource Set providers and provides a SPARQL endpoint that allows quering across the indexed data.",
      "icon": "https://rb-alm-14-p.de.bosch.com/ldx/resources/images/LQE_bann16.png",
      "identifier": "http://jazz.net/application/lqe",
      "instanceName": "/ldx",
      "nonLocalizedTitle": "Link Index Provider",
      "productAbbreviation": "LDX",
      "productName": "IBM Engineering Link Index Provider",
      "productShortName": "Link Index Provider",
      "shortTitle": null,
      "title": "Link Index Provider",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/lqe/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/lqe",
      "description": "The Lifecycle Query Engine application indexes Tracked Resource Set providers and provides a SPARQL endpoint that allows quering across the indexed data.",
      "icon": "https://rb-alm-14-p.de.bosch.com/lqe/resources/images/LQE_bann16.png",
      "identifier": "http://jazz.net/application/lqe",
      "instanceName": "/lqe",
      "nonLocalizedTitle": "Lifecycle Query Engine",
      "productAbbreviation": "LQE",
      "productName": "IBM Engineering Lifecycle Query Engine",
      "productShortName": "Lifecycle Query Engine",
      "shortTitle": null,
      "title": "Lifecycle Query Engine",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/lqe2/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/lqe2",
      "description": "The Lifecycle Query Engine application indexes Tracked Resource Set providers and provides a SPARQL endpoint that allows quering across the indexed data.",
      "icon": "https://rb-alm-14-p.de.bosch.com/lqe2/resources/images/LQE_bann16.png",
      "identifier": "http://jazz.net/application/lqe",
      "instanceName": "/lqe2",
      "nonLocalizedTitle": "Lifecycle Query Engine",
      "productAbbreviation": "LQE",
      "productName": "IBM Engineering Lifecycle Query Engine",
      "productShortName": "Lifecycle Query Engine",
      "shortTitle": null,
      "title": "Lifecycle Query Engine",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/qm/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/qm",
      "description": "Delivers capabilities for test management, including test planning, creation, and execution, as well as workflow control, tracking, and end-to-end traceability.",
      "icon": "https://rb-alm-14-p.de.bosch.com/qm/web/com.ibm.rqm.planning.web/ui/internal/page/templates/images/banner/RQM_16.png",
      "identifier": "http://jazz.net/application/qm",
      "instanceName": "/qm",
      "nonLocalizedTitle": "Quality Management",
      "productAbbreviation": "ETM",
      "productName": "IBM Engineering Test Management",
      "productShortName": "Engineering Test Management",
      "shortTitle": "QM",
      "title": "Quality Management",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/rm/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/rm",
      "description": "This application provides the capabilities to create and manage requirements and trace them to modeling, testing, and change and configuration management. You can define, elicit, capture, elaborate, discuss, and review requirements and supporting artifacts.",
      "icon": "https://rb-alm-14-p.de.bosch.com/rm/web/com.ibm.rdm.web/pages/images/RDNG_16.png",
      "identifier": "http://jazz.net/application/rm",
      "instanceName": "/rm",
      "nonLocalizedTitle": "Requirements Management",
      "productAbbreviation": "DOORS Next",
      "productName": "IBM Engineering Requirements Management DOORS Next",
      "productShortName": "Engineering Requirements Management DOORS Next",
      "shortTitle": "RM",
      "title": "Requirements Management",
      "version": "7.0.2 SR1"
    },
    "https://rb-alm-14-p.de.bosch.com/rs/application-about": {
      "contextRoot": "https://rb-alm-14-p.de.bosch.com/rs",
      "description": "Provides querying and reporting services that simplify the creation of charts, graphs, dashboard widgets, spreadsheets and documents based on a variety of data sources.",
      "icon": "https://rb-alm-14-p.de.bosch.com/rs/graphics/ReportBuilder.png",
      "identifier": "http://jazz.net/application/jrs",
      "instanceName": "/rs",
      "nonLocalizedTitle": "Report Builder",
      "productAbbreviation": "JRS",
      "productName": "IBM Engineering Report Builder",
      "productShortName": "Report Builder",
      "shortTitle": null,
      "title": "Report Builder",
      "version": "7.0.2 SR1"
    }
  },
  "errors": null,
  "local": "https://rb-alm-14-p.de.bosch.com/ccm/application-about"
};

// list of dupliated publishers indexed by uri
var duplicatedPublishers = {};

function logError(aboutData){
	aboutData&&aboutData.errors&&console.error(aboutData.errors);
}
jazz.app.internal.applicationAbout.get = function(uri){
   if (!uri) return data.abouts;
   return data.abouts[uri];
};

jazz.app.internal.applicationAbout.getCurrent = function(){
   return data.abouts[data.local];
};

jazz.app.internal.applicationAbout.uri = data.local;

/* returns the display name for this application
 * it is of the form <Application Name> (<instanceName>)  
 * 
 * it returns the instanceName portion if  (forceInstanceName==true) or
 * if there is more than one application with the same identifier.
 *
 * if there is not application about for this uri it returns the just the uri
 *
 * uri:appliation about uri
 * params: 
 * {
 *   forceInstanceName: always return the instanceName portion
 *   addMarkup:         puts the <Application Name> between <span> tags
 * }
 */
 function spanwrap(s){return "<span>" + s + "</span>";}
 
jazz.app.internal.applicationAbout.getDisplayName = function(uri, params){
   if (!uri || !data.abouts[uri])
      return null;

   params = params || {};

   var name=params.addMarkup?spanwrap(data.abouts[uri].title):data.abouts[uri].title;
	
   if (duplicatedPublishers[uri] || params.forceInstanceName) 
      return name+ " (" + data.abouts[uri].instanceName + ")";
	
   return name;
};

jazz.app.internal.applicationAbout.refresh = function(){

	var deferred = jazz.client.xhrGet({
    	url				 : net.jazz.ajax._contextRoot+"/_consolidated-application-about",
		handleAs		 : "json"
	});
	
	deferred.addCallback(function(result){
		logError(result);
	
		// if we have an error now but didn't before then lets
		// keep our previous results
		if (!result.errorMessages && !data.errors){
			data=result;
		}
		
		return data.abouts;
	});
	
	return deferred;
}

jazz.app.internal.applicationAbout.findAboutUriFromContext = function(context){
   if (!context) return null;
   for (var uri in data.abouts){
      if (data.abouts[uri].contextRoot == context) 
         return uri;
   }
   return null;
};
// check for duplicates
(function(){
   duplicatedPublishers = {};
   var publishers={};
	
   for (var uri in data.abouts){
      var about = data.abouts[uri];
      if (publishers[about.identifier]){
         duplicatedPublishers[uri]=1;
         duplicatedPublishers[publishers[about.identifier]]=1;
      }
      else{
         publishers[about.identifier]=uri;
      }
   }
})();

// log any errors
logError(data);
})();

;(function(){
dojo.provide("com.ibm.team.process.web.common.internal.ProcessConstants");






var _1=com.ibm.team.process.web.common.internal.ProcessConstants;
_1.ROOTSERVICESXML=net.jazz.ajax.contextRoot()+"/rootservices";
_1.NAMESPACE_RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#";
_1.NAMESPACE_DC="http://purl.org/dc/terms/";
_1.NAMESPACE_OSLC="http://open-services.net/xmlns/discovery/1.0/";
_1.NAMESPACE_OSLC_CM="http://open-services.net/xmlns/cm/1.0/";
_1.NAMESPACE_OSLC_QM="http://open-services.net/xmlns/qm/1.0/";
_1.NAMESPACE_OSLC_RM="http://open-services.net/xmlns/rm/1.0/";
_1.NAMESPACE_OSLC_SCM="http://open-services.net/xmlns/scm/1.0/";
_1.NAMESPACE_JP="http://jazz.net/xmlns/prod/jazz/process/1.0/";
_1.NAMESPACE_JP06="http://jazz.net/xmlns/prod/jazz/process/0.6/";
_1.NAMESPACE_JD="http://jazz.net/xmlns/prod/jazz/discovery/1.0/";
_1.NAMESPACE_JFS="http://jazz.net/xmlns/prod/jazz/jfs/1.0/";
_1.CONTENT_TYPE_APPLICATION_XML="application/xml";
_1.PERMISSION_PATH_SEPARATOR="~#_~#";
_1.PERMISSION_PATH_DELIMITER=":~_:~";
_1.BEHAVIOR_PATH_SEPARATOR=_1.PERMISSION_PATH_SEPARATOR;
_1.NONE="none";
_1.BLOCK="block";
_1.FLEX="flex";
_1.DIV="div";
_1.EMPTY="";
_1.INLINE="inline";
_1.VISIBLE="visible";
_1.HIDDEN="hidden";
_1.BR="br";
_1.STALE_DATA_EXCEPTION="com.ibm.team.repository.common.StaleDataException";
_1.TEAM_OPERATION_CANCELED_EXCEPTION="com.ibm.team.process.common.advice.TeamOperationCanceledException";
_1.PERMISSION_DENIED_EXCEPTION="com.ibm.team.repository.common.PermissionDeniedException";
_1.PROCESS_DATA_VALIDATION_EXCEPTION="com.ibm.team.process.common.service.ProcessDataValidationException";
_1.MAIL_SERVICE_NOT_CONFIGURED_EXCEPTION="com.ibm.team.process.internal.service.exceptions.MailServiceNotConfiguredException";
_1.LICENSE_NOT_GRANTED_EXCEPTION="com.ibm.team.repository.common.LicenseNotGrantedException";
_1.SC_FORBIDDEN=403;
_1.PREFIX="com.ibm.team.process.";
_1.ERROR_PRIORITY_HIGH=100;
_1.ERROR_PRIORITY_LOW=-500;
_1.ERROR_PRIORITY_WARNING=-999;
_1.ERROR_PRIORITY_WARNING_LOW=-1999;
_1.DEFAULT_ROLE_ID="default";
_1.SERVICE_PROVIDER_ERROR_TYPE="error";
_1.SERVICE_PROVIDER_NOT_LOADED_TYPE="notLoaded";
_1.SERVICE_PROVIDER_TYPE="serviceProvider";
_1.SERVICE_PROVIDER_CATALOG_TYPE="serviceProviderCatalog";
_1.ITERATION_TYPE_NONE="com.ibm.team.process.internal.iteration.type.none";
_1.PARAM_OWNING_APP_KEY="owningApplicationKey";
_1.JTS_OWNING_APPLICATION_KEY="JTS-Sentinel-Id";
_1.PRECONDITIONS="preconditions";
_1.FOLLOWUP_ACTIONS="followup-actions";
_1.PRECONDITION="precondition";
_1.FOLLOWUP_ACTION="followup-action";
_1.OPERATION_ADVISORS="operationAdvisors";
_1.OPERATION_PARTICIPANTS="operationParticipants";
_1.ITEM_TYPE={PROJECT_AREA:1,TEAM_AREA:2};
_1.IterationTypeDTO={ID:"id",ITEM_ID:"itemId",STATE_ID:"stateId",LABEL:"label"};
_1.ExtensionDTO={ID:"id",NAME:"name",ITEMS:"items",DESCRIPTION:"description",CONTEXT:"context",HAS_XML_CONVERTER:"hasXMLConverter",ICON_URL:"imageUrl",DEPRECATED:"deprecated"};
_1.BehaviorConfigurationDTO={CONFIGURED:"configured",FINAL_OP:"finalOp",NOT_OPTIONAL:"notOptional",NAMESPACE:"namespace",CONTENT:"content",CONTEXT:"context",CONTEXT_ID:"contextId",ROLE_ID:"roleId"};
_1.ProcessRoleDTO={DESCRIPTION:"description",ID:"id",LABEL:"label",CARDINALITY:"cardinality",DEFINED:"defined"};
_1.PermissionConfigurationDTO={SELECTED:"selected",CONFIGURED:"configured",FINAL_OP:"finalOp",DENIAL_EXPLANATION:"denialExplanation"};
_1.PermissionsScopeContext={PROJECT:"project",TEAM:"team",DEV_LINES:"devLines",ITERATION_TYPES:"iterationTypes",ITERATIONS:"iterations"};
_1.ExtensionContext={PROJECT:1,TEAM:2,ALL:3};
_1.PermissionContext={PROJECT:1,TEAM:2,DEV_LINE:3,ITERATION_TYPE:4,ITERATION:5,ALL:6};
_1.BehaviorContext=_1.PermissionContext;
_1.EditorContext={PROJECT:1,TEAM:2};
_1.TabEnum={OVERVIEW:"com.ibm.team.process.web.Overview",PERMISSIONS:"com.ibm.team.process.web.Permissions",ROLES:"com.ibm.team.process.web.Roles",ACCESS_CONTROL:"com.ibm.team.process.web.AccessControl",TIMELINE:"com.ibm.team.process.web.Timelines",ITERATION_TYPES:"com.ibm.team.process.web.IterationTypes",OPERATION_BEHAVIOR:"com.ibm.team.process.web.OperationBehavior",CONFIGURATION_MANAGEMENT:"com.ibm.team.process.web.ConfigurationManagement",HISTORY:"com.ibm.team.process.web.History"};
_1.EditorMode={PREVIEW:"Preview",EDIT:"Edit",NEW:"new"};
_1.RoleCardinality={MANY:0,SINGLE:1};
_1.EditOperationBehaviorConfigurationEnum={ROLE:"role",CONTEXT:"context"};
_1.LinkTypes={IMPLEMENTS:"implements",IMPLEMENTED_BY:"implemented-by",VALIDATES:"validates",VALIDATED_BY:"validated-by",TESTS:"tests",TESTED_BY:"tested-by",RELATED_TO:"related-to",TRACKS:"tracks",TRACKED_BY:"tracked-by",TRACKS_CHANGES:"tracks-changes",CHANGES_TRACKED_BY:"changes-tracked-by",TRACKS_RM:"tracks-rm",TRACKED_BY_CM:"tracked-by-cm",ELABORATES:"elaborates",ELABORATED_BY:"elaborated-by",ARCHITECTS:"architects",ARCHITECTED_BY:"architected-by",VALIDATED_BY_AM:"validated-by-am",VALIDATES_AM:"validates-am",VALIDATED_BY_ARCHITECTURE_ELEMENTS:"validated-by-architecture-elements",VALIDATES_ARCHITECTURE_ELEMENTS:"validates-architecture-elements",RELATED_TO_RM:"related-to-rm",RELATED_TO_AM:"related-to-am",AUTOMATES:"automates",AUTOMATED_BY:"automated-by",CONFIGURATION_CONTRIBUTES_TO:"configuration-contributes-to",CONFIGURATION_CONTRIBUTED_FROM:"configuration-contributed-from",UNSUPPORTED_LINK_TYPE:"unsupported-link-type"};
_1.AllLinkTypes=[_1.LinkTypes.IMPLEMENTS,_1.LinkTypes.IMPLEMENTED_BY,_1.LinkTypes.VALIDATES,_1.LinkTypes.VALIDATED_BY,_1.LinkTypes.TESTS,_1.LinkTypes.TESTED_BY,_1.LinkTypes.RELATED_TO,_1.LinkTypes.TRACKS,_1.LinkTypes.TRACKED_BY,_1.LinkTypes.TRACKS_CHANGES,_1.LinkTypes.CHANGES_TRACKED_BY,_1.LinkTypes.TRACKS_RM,_1.LinkTypes.TRACKED_BY_CM,_1.LinkTypes.ELABORATES,_1.LinkTypes.ELABORATED_BY,_1.LinkTypes.ARCHITECTS,_1.LinkTypes.ARCHITECTED_BY,_1.LinkTypes.VALIDATED_BY_AM,_1.LinkTypes.VALIDATES_AM,_1.LinkTypes.RELATED_TO_AM,_1.LinkTypes.RELATED_TO_RM,_1.LinkTypes.AUTOMATES,_1.LinkTypes.AUTOMATED_BY,_1.LinkTypes.CONFIGURATION_CONTRIBUTES_TO,_1.LinkTypes.CONFIGURATION_CONTRIBUTED_FROM,_1.LinkTypes.VALIDATES_ARCHITECTURE_ELEMENTS,_1.LinkTypes.VALIDATED_BY_ARCHITECTURE_ELEMENTS];
_1.UsesLinkTypes=[_1.LinkTypes.IMPLEMENTED_BY,_1.LinkTypes.VALIDATES,_1.LinkTypes.TESTS,_1.LinkTypes.TRACKED_BY,_1.LinkTypes.TRACKED_BY_CM,_1.LinkTypes.CHANGES_TRACKED_BY,_1.LinkTypes.ELABORATES,_1.LinkTypes.ARCHITECTS,_1.LinkTypes.VALIDATED_BY_AM,_1.LinkTypes.AUTOMATED_BY,_1.LinkTypes.CONFIGURATION_CONTRIBUTED_FROM,_1.LinkTypes.VALIDATES_ARCHITECTURE_ELEMENTS];
_1.ServiceProviderTypes={CM:"cmServiceProviders",RM:"rmServiceProviders",QM:"qmServiceProviders",SCM:"scmServiceProviders",AM:"amServiceProviders",AUTO:"autoServiceProviders",CONFIG:"configServiceProviders",GLOBAL_CONFIG:"globalConfigServiceProviders"};
_1.AllServiceProviderTypes=[_1.ServiceProviderTypes.CM,_1.ServiceProviderTypes.RM,_1.ServiceProviderTypes.QM,_1.ServiceProviderTypes.SCM,_1.ServiceProviderTypes.AM,_1.ServiceProviderTypes.AUTO,_1.ServiceProviderTypes.CONFIG,_1.ServiceProviderTypes.GLOBAL_CONFIG];
_1.CSSClass={ACTION_COLUMN:"action-column",TOOLBAR_TABLE:"toolbar-table",TABLE_ROW_SELECTED:"selected"};
_1.ProjectSelectorContext={ADD:"jazz.app.events.contextSwitcher.addContext",DELETE:"jazz.app.events.contextSwitcher.deleteContext"};
_1.ProjectAreaExtensionPage={EXTENSION_POINT_PROFILE_PAGES:"com.ibm.team.process.web.projectAreaEditorPages",EXTENSION_POINT_SUPPRESSED_PROFILE_PAGES:"com.ibm.team.process.web.suppressedProjectAreaEditors",ELEMENT_PAGE:"page",ATTRIBUTE_ID:"id",ATTRIBUTE_TITLE:"title",ATTRIBUTE_WIDGET:"widget",ATTRIBUTE_TEAM_AREA_EDITOR:"teamAreaEditor",ATTRIBUTE_UA_KEY:"uaKey",ATTRIBUTE_UA_KEY_TEAM_AREA:"uaKeyForTeamAreaEditor",ATTRIBUTE_PRIORITY:"priority"};
_1.UAKey={OVERVIEW_TAB:"com.ibm.team.process.web.tab_overview",TIMELINES_TAB:"com.ibm.team.process.web.tab_timelines",ITERATION_TYPES_TAB:"com.ibm.team.process.web.tab_iterationtypes",ROLES_TAB:"com.ibm.team.process.web.tab_roles",PERMISSIONS_TAB:"com.ibm.team.process.web.tab_permissions",ACCESSCONTROL_TAB:"com.ibm.team.process.web.tab_accesscontrol",PROCESS_DESCRIPTION_TAB:"com.ibm.team.process.web.tab_process_description",OVERVIEW_TEAMAREA_TAB:"com.ibm.team.process.web.tab_overview_teamarea",ROLES_TEAMAREA_TAB:"com.ibm.team.process.web.tab_roles_teamarea",PERMISSIONS_TEAMAREA_TAB:"com.ibm.team.process.web.tab_permissions_teamarea",ARCHIVED_PROJECTAREAS_PAGE:"com.ibm.team.process.web.page_archived_project_areas",CREATE_PROJECTAREA_PAGE:"com.ibm.team.process.web.page_create_project_area",OPERATION_BEHAVIOR_TAB:"com.ibm.team.process.web.tab_operation_behavior",OPERATION_BEHAVIOR_TEAMAREA_TAB:"com.ibm.team.process.web.tab_operation_behavior_teamarea",CONFIGURATION_MANAGEMENT_TAB:"com.ibm.team.process.web.tab_configuration_management",CONFIGURATION_MANAGEMENT_SINGLE_OR_FULL_TAB:"com.ibm.team.process.web.tab_configuration_management_qm",HISTORY_TAB:"com.ibm.team.process.web.tab_history",HISTORY_TEAMAREA_TAB:"com.ibm.team.process.web.tab_history_teamarea",HISTORY_TAB_HELPER:"com.ibm.team.process.web.tab_history_helper",HISTORY_TEAMAREA_TAB_HELPER:"com.ibm.team.process.web.tab_history_teamarea_helper"};
_1.NodeType={ELEMENT:1,ATTRIBUTE:2,TEXT:3,COMMENT:8,DOCUMENT:9};
_1.XMLATTRIBUTE_RESOURCE="resource";
_1.XMLATTRIBUTE_ABOUT="about";
_1.NAMESPACE_JTP="http://jazz.net/xmlns/prod/jazz/jtp/0.6/";
_1.XMLELEMENT_TITLE="title";
_1.XMLELEMENT_ID="id";
_1.XMLELEMENT_PROCESSNAME="processName";
_1.XMLELEMENT_AVAILABLELOCALE="available-locales";
_1.XMLELEMENT_LOCALE="locale";
_1.OSLC_VERSION_HEADER="OSLC-Core-Version";
_1.OSLC_CORE_VERSION="2.0";
_1.OSLC_PRE_CORE_VERSION="1.0";
_1.NAMESPACE_OSLC_CORE="http://open-services.net/ns/core#";
_1.NAMESPACE_OSLC_CORE_CM="http://open-services.net/ns/cm#";
_1.NAMESPACE_OSLC_CORE_RM="http://open-services.net/ns/rm#";
_1.NAMESPACE_OSLC_CORE_QM="http://open-services.net/ns/qm#";
_1.NAMESPACE_OSLC_CORE_SCM="http://open-services.net/ns/scm#";
_1.NAMESPACE_OSLC_AM="http://open-services.net/ns/am#";
_1.NAMESPACE_OSLC_AUTO="http://open-services.net/ns/auto#";
_1.NAMESPACE_OSLC_CONFIG="http://open-services.net/ns/config#";
_1.NAMESPACE_OSLC_GLOBAL_CONFIG="http://jazz.net/ns/globalconfig#";
_1.ELEM_OSLC_CATALOGS="oslcCatalogs";
_1.ELEM_SERVICE_PROVIDER_CATALOG="ServiceProviderCatalog";
_1.ELEM_DOMAIN="domain";
_1.PROJECT_AREA_RECENTLY_VIEWED="projectAreaRecentlyViewedEvent";
_1.TIMELINE_SELECTOR_EMPTY_OPTION_ID="timelineSelectorEmptyOptionId";
_1.ProjectAreaRecentlyViewedParams={APP_PROJECTAREA_QUERY_TYPE:"com.ibm.team.process.projectareas",JTS_PROJECTAREA_QUERY_TYPE:"com.ibm.team.process.projectareas&owningApplicationKey=",JTS_APP:jazz.app.internal.applicationAbout.findAboutUriFromContext(net.jazz.ajax.BootstrapProperties.FRONTSIDE_URL)};
_1.ProjectAreaEditAction={SHORT_ID:"editProjectArea",ID:"com.ibm.team.process.editProjectArea",ACTIONPREFIX_ID_ITEMIDSUFFIX:"#action=com.ibm.team.process.editProjectArea&itemId=",ID_ITEMIDSUFFIX:"com.ibm.team.process.editProjectArea&itemId="};
_1.TeamAreaEditAction={SHORT_ID:"editTeamArea",ID:"com.ibm.team.process.editTeamArea",ACTIONPREFIX_ID_ITEMIDSUFFIX:"#action=com.ibm.team.process.editTeamArea&itemId="};
})();

dojo.provide("com.ibm.team.process.web.client.internal.nls.Messages")._built=true;
dojo.provide("com.ibm.team.process.web.client.internal.nls.Messages.en_us");
com.ibm.team.process.web.client.internal.nls.Messages.en_us={"ProcessClient_1":"ProcessClient#getProcessAreasForUser: Missing required param: ${0}"};

;(function(){
dojo.provide("com.ibm.team.process.web.client.internal.ProcessClient");












dojo.requireLocalization("com.ibm.team.process.web.client.internal","Messages");
var _1="com.ibm.team.process.internal.service.web.IProcessWebUIService";
var _2="com.ibm.team.process.internal.service.web.IProcessWebUIServiceWithChecks";
var _3="com.ibm.team.process.internal.service.web.IProcessLicenseCheck";
var _4=com.ibm.team.repository.web.transport.ServiceRequest;
var _5=com.ibm.team.repository.web.transport.TeamServerClient;
var _6=com.ibm.team.process.web.common.internal.ProcessConstants;
var _7=com.ibm.team.process.web.client.internal.ProcessClient;
var _8="http://jazz.net/xmlns/prod/jazz/process/0.6/";
function _9(_a,_b){
var _c=new _4(_1,"getMembersWithReadAccess",_a);
_5.invokeService(_c,_b);
};
_7.getMembersWithReadAccess=_9;
function _d(_e,_f){
var _10=new _4(_1,"getMembersPaged",_e);
_5.invokeService(_10,_f);
return _10;
};
_7.getMembersPaged=_d;
function _11(_12,_13){
if(!_12.userId){
this.messages=dojo.i18n.getLocalization("com.ibm.team.process.web.client.internal","Messages");
alert(dojo.string.substitute(this.messages.ProcessClient_1,[_12.userId]));
return;
}
var _14=new _4(_1,"getProcessAreasForUser",_12);
_5.invokeService(_14,_13);
};
_7.getProcessAreasForUser=_11;
function _15(_16,_17){
var _18=new _4(_1,"getAllProjectAreas",_17);
_5.invokeService(_18,_16);
};
_7.getAllProjectAreas=_15;
function _19(_1a,_1b){
var _1c=new _4(_1,"getProjectAreasPaged",_1b);
_5.invokeService(_1c,_1a);
};
_7.getProjectAreasPaged=_19;
function _1d(_1e,_1f){
var _20=new _4(_1,"getProjectAreaByUUID",_1e);
_5.invokeService(_20,_1f);
};
_7.getProjectAreaByUUID=_1d;
function _21(_22,_23){
var _24=new _4(_2,"getProjectAreaByUUIDWithChecks",_22);
_5.invokeService(_24,_23);
};
_7.getProjectAreaByUUIDWithChecks=_21;
function _25(_26,_27){
var _28=new _4(_1,"getProjectAreaByUUIDWithLimitedMembers",_26);
_5.invokeService(_28,_27);
};
_7.getProjectAreaByUUIDWithLimitedMembers=_25;
function _29(_2a,_2b){
var _2c=new _4(_2,"getProjectAreaByUUIDWithLimitedMembersWithChecks",_2a);
_5.invokeService(_2c,_2b);
};
_7.getProjectAreaByUUIDWithLimitedMembersWithChecks=_29;
function _2d(_2e,_2f){
var _30=new _4(_1,"getLPAContainingProjectAreaUrl",_2e);
_5.invokeService(_30,_2f);
};
_7.getLPAContainingProjectAreaUrl=_2d;
function _31(_32,_33){
var _34=new _4(_1,"getPermissionExtensions",_32);
_5.invokeService(_34,_33);
};
_7.getPermissionExtensions=_31;
function _35(_36,_37){
var _38=new _4(_1,"getOperationBehaviorExtensions",_36);
_5.invokeService(_38,_37);
};
_7.getOperationBehaviorExtensions=_35;
function _39(_3a,_3b){
var _3c=new _4(_1,"getPermissions",_3a);
_5.invokeService(_3c,_3b);
};
_7.getPermissions=_39;
function _3d(_3e,_3f){
var _40=new _4(_1,"getPermissionsForAllRoles",_3e);
_5.invokeService(_40,_3f);
};
_7.getPermissionsForAllRoles=_3d;
function _41(_42,_43){
var _44=new _4(_1,"getConfiguredPermissionsScopes",_42);
_5.invokeService(_44,_43);
};
_7.getConfiguredPermissionsScopes=_41;
function _45(_46,_47){
var _48=new _4(_1,"getInheritedPermissions",_46);
_5.invokeService(_48,_47);
};
_7.getInheritedPermissions=_45;
function _49(_4a,_4b){
var _4c=new _4(_1,"getOperationBehavior",_4a);
_5.invokeService(_4c,_4b);
};
_7.getOperationBehavior=_49;
function _4d(_4e,_4f){
var _50=new _4(_1,"getProjectHierarchy",_4e);
_5.invokeService(_50,_4f);
};
_7.getProjectHierarchy=_4d;
function _51(_52,_53){
var _54=new _4(_1,"getTeamAreaByUUID",_52);
_5.invokeService(_54,_53);
};
_7.getTeamAreaByUUID=_51;
function _55(_56,_57){
var _58=new _4(_2,"getTeamAreaByUUIDWithChecks",_56);
_5.invokeService(_58,_57);
};
_7.getTeamAreaByUUIDWithChecks=_55;
function _59(_5a,_5b){
var _5c=new _4(_1,"getTeamAreaByUUIDWithLimitedMembers",_5a);
_5.invokeService(_5c,_5b);
};
_7.getTeamAreaByUUIDWithLimitedMembers=_59;
function _5d(_5e,_5f){
var _60=new _4(_2,"getTeamAreaByUUIDWithLimitedMembersWithChecks",_5e);
_5.invokeService(_60,_5f);
};
_7.getTeamAreaByUUIDWithLimitedMembersWithChecks=_5d;
function _61(_62,_63){
var _64=new _4(_1,"getProcessAreaHierarchiesWithApplicationContext",_63);
_5.invokeService(_64,_62);
};
_7.getProcessAreaHierarchies=_61;
function _65(_66,_67){
var _68=new _4(_1,"getHierarchyForTeamArea",_66);
_5.invokeService(_68,_67);
};
_7.getHierarchyForTeamArea=_65;
function _69(_6a,_6b){
if(!_6a.isLicenseSearch){
if(!_6a.searchTerm){
_6a.searchTerm="%";
}else{
_6a.searchTerm="%"+_6a.searchTerm+"%";
}
}
if(!_6a.pageSize){
_6a.pageSize=50;
}
if(!_6a.pageNum){
_6a.pageNum=0;
}
if(_6a.filterOutUsers&&_6a.filterOutUsers.length>0){
_6a.filterOutUsers=dojo.toJson(_6a.filterOutUsers);
}
var _6c=new _4(_1,"getContributors",_6a);
_5.invokeService(_6c,_6b);
};
_7.getContributors=_69;
function _6d(_6e,_6f){
var _70=new _4(_1,"getAllProcessDefinitions",_6e);
_5.invokeService(_70,_6f);
};
_7.getAllProcessDefinitions=_6d;
function _71(_72,_73){
var _74=new _4(_1,"getAllProcessProviders",_72);
_5.invokeService(_74,_73);
};
_7.getAllProcessProviders=_71;
function _75(_76,_77){
var _78=new _4(_1,"getProcessProviderContainers",_76);
_5.invokeService(_78,_77);
};
_7.getProcessProviderContainers=_75;
function _79(_7a,_7b){
var _7c=new _4(_1,"getProcessProviderContainerInfo",_7a);
_5.invokeService(_7c,_7b);
};
_7.getProcessProviderContainerInfo=_79;
function _7d(_7e,_7f){
var _80=new _4(_1,"getProcessDefinitions",_7e);
_5.invokeService(_80,_7f);
};
_7.getProcessDefinitions=_7d;
function _81(_82,_83){
var _84=new _4(_1,"getProjectDevelopmentLines",_82);
_5.invokeService(_84,_83);
};
_7.getProjectDevelopmentLines=_81;
function _85(_86,_87){
var _88=new _4(_1,"getIterationTypes",_86);
_5.invokeService(_88,_87);
};
_7.getIterationTypes=_85;
function _89(_8a,_8b){
var _8c=new _4(_1,"getIterations",_8a);
_5.invokeService(_8c,_8b);
};
_7.getIterations=_89;
function _8d(_8e,_8f){
var _90=new _4(_1,"getTeamAreaIterations",_8e);
_5.invokeService(_90,_8f);
};
_7.getTeamAreaIterations=_8d;
function _91(_92,_93){
var _94=new _4(_1,"postProcessDefinition",_92);
_5.invokeService(_94,_93);
};
_7.postProcessDefinition=_91;
function _95(_96,_97){
var _98=new _4(_1,"postProjectArea",_96);
_5.invokeService(_98,_97);
};
_7.postProjectArea=_95;
function _99(_9a,_9b){
var _9c=new _4(_1,"postTeamArea",_9a);
_5.invokeService(_9c,_9b);
};
_7.postTeamArea=_99;
function _9d(_9e,_9f){
var _a0=new _4(_1,"postDeployPredefinedProcessDefinitions",_9e);
_5.invokeService(_a0,_9f);
};
_7.deployPredefinedProcessDefinitions=_9d;
function _a1(_a2,_a3){
var _a4=new _4(_1,"postArchiveProcessItem",_a2);
_5.invokeService(_a4,_a3);
};
_7.postArchiveProcessItem=_a1;
function _a5(_a6,_a7){
var _a8=new _4(_1,"postUnarchiveProcessArea",_a6);
_5.invokeService(_a8,_a7);
};
_7.postUnarchiveProcessArea=_a5;
function _a9(_aa,_ab){
var _ac=new _4(_1,"postInitializeProjectArea",_aa);
_5.invokeService(_ac,_ab);
};
_7.postInitializeProjectArea=_a9;
function _ad(_ae,_af){
var _b0=new _4(_1,"getProcessDefinitionById",_ae);
_5.invokeService(_b0,_af);
};
_7.getProcessDefinitionById=_ad;
function _b1(_b2,_b3){
var _b4=new _4(_1,"postDeleteProcessDefinition",_b2);
_5.invokeService(_b4,_b3);
};
_7.deleteProcessDefinition=_b1;
function _b5(_b6,_b7){
var _b8=new _4(_1,"postGenerateTeamInvitations",_b6);
_5.invokeService(_b8,_b7);
};
_7.generateTeamInvitations=_b5;
function _b9(_ba,_bb){
var _bc=new _4(_1,"getEmailSubjectAndBody",_ba);
_5.invokeService(_bc,_bb);
};
_7.generateTeamInvitation=_b9;
function _bd(_be,_bf){
return _be.toLocaleLowerCase().localeCompare(_bf.toLocaleLowerCase());
};
_7.stringCompare=_bd;
function _c0(_c1){
var _c2=new _4(_1,"getIsOslcCoreEnabled");
_5.invokeService(_c2,_c1);
};
_7.getIsOslcCoreEnabled=_c0;
function _c3(_c4,_c5){
var _c6=new _4(_3,"getProcessLicenseCheckStatus",_c4);
_5.invokeService(_c6,_c5);
};
_7.processLicenseCheckStatus=_c3;
function _c7(_c8,_c9,_ca){
var _cb=function(_cc){
if(_ca){
_ca(_cc);
}
};
var _cd=function(_ce){
var _cf=dojox.xml.DomParser.parse(_ce);
var _d0=_cf.documentElement;
var _d1=_d0.childrenByNameNS("role",_8);
var _d2=[];
var i=0;
dojo.forEach(_d1,function(_d3){
var _d4={};
var _d5=_d3.childrenByNameNS("url",_8);
if(_d5.length>0&&_d5[0].childNodes.length>0){
_d4.url=_d5[0].childNodes[0].nodeValue;
}else{
_d4.url=null;
}
var _d6=_d3.childrenByNameNS("id",_8);
if(_d6.length>0&&_d6[0].childNodes.length>0){
_d4.id=_d6[0].childNodes[0].nodeValue;
}else{
_d4.id=null;
}
var _d7=_d3.childrenByNameNS("label",_8);
if(_d7.length>0&&_d7[0].childNodes.length>0){
_d4.label=_d7[0].childNodes[0].nodeValue;
}else{
_d4.label=null;
}
var _d8=_d3.childrenByNameNS("description",_8);
if(_d8.length>0&&_d8[0].childNodes.length>0){
_d4.description=_d8[0].childNodes[0].nodeValue;
}else{
_d4.description="";
}
_d2[i++]=_d4;
});
if(_c9){
_c9(_d2);
}
};
_d9(_c8,_cd,_cb);
};
_7.getProcessRoles=_c7;
function _da(_db,_dc,_dd){
var _de=function(_df){
if(_dd){
_dd(_df);
}
};
var _e0=function(_e1){
var _e2=dojox.xml.DomParser.parse(_e1);
var _e3=_e2.documentElement;
var _e4={};
var _e5=_e3.childrenByNameNS("url",_8);
if(_e5.length>0&&_e5[0].childNodes.length>0){
_e4.url=_e5[0].childNodes[0].nodeValue;
}else{
_e4.url=null;
}
var _e6=_e3.childrenByNameNS("user-url",_8);
if(_e6.length>0&&_e6[0].childNodes.length>0){
_e4.userUrl=_e6[0].childNodes[0].nodeValue;
}else{
_e4.userUrl=null;
}
var _e7=[];
var _e8=_e3.childrenByNameNS("role-assignments",_8);
if(_e8.length>0&&_e8[0].childNodes.length>0){
var _e9=_e8[0].childrenByNameNS("role-assignment",_8);
var j=0;
dojo.forEach(_e9,function(_ea){
var _eb={};
var _ec=_ea.childrenByNameNS("url",_8);
if(_ec.length>0&&_ec[0].childNodes.length>0){
_eb.url=_ec[0].childNodes[0].nodeValue;
}else{
_eb.url=null;
}
var _ed=_ea.childrenByNameNS("role-url",_8);
if(_ed.length>0&&_ed[0].childNodes.length>0){
_eb.roleUrl=_ed[0].childNodes[0].nodeValue;
}else{
_eb.roleUrl=null;
}
_e7[j++]=_eb;
});
}
_e4.processRoles=_e7;
if(_dc){
_dc(_e4);
}
};
_d9(_db,_e0,_de);
};
_7.getMember=_da;
function _ee(_ef,_f0,_f1){
var _f2=function(_f3){
if(_f1){
_f1(_f3);
}
};
var _f4=function(_f5){
var _f6=dojox.xml.DomParser.parse(_f5);
var _f7=_f6.documentElement;
if(_f0){
_f0(_f7);
}
};
_d9(_ef,_f4,_f2);
};
_7.getRootServices=_ee;
function _f8(_f9){
var _fa=new _4(_1,"getLPACreateProjectAreaUrl");
_5.invokeService(_fa,_f9);
};
_7.getLPACreateProjectAreaUrl=_f8;
function _fb(_fc,_fd){
var _fe=new _4(_1,"getApplication",_fc);
_5.invokeService(_fe,_fd);
};
_7.getApplication=_fb;
function _ff(_100){
var _101=new _4(_1,"getMailerServiceStatus");
_5.invokeService(_101,_100);
};
_7.getMailerServiceStatus=_ff;
function _102(args,_103,fail){
var _104=args.chosenRoles;
var _105=args.memberUrl+"/"+"role-assignments";
var _106=args.memberUrl+"/"+"role";
var data="<?xml version=\"1.0\" encoding=\"UTF-8\"?>";
data+="<jp06:role-assignments xmlns:jp06=\"http://jazz.net/xmlns/prod/jazz/process/0.6/\">";
for(var i=0;i<_104.length;i++){
data+="<jp06:role-assignment>";
data+="<jp06:url>";
data+=_105+"/"+encodeURIComponent(_104[i].id);
data+="</jp06:url>";
data+="<jp06:role-url>";
data+=_106+"/"+encodeURIComponent(_104[i].id);
data+="</jp06:role-url>";
data+="</jp06:role-assignment>";
}
data+="</jp06:role-assignments>";
var _107=jazz.client.xhrPut({url:_105,header:{"Accept-Charset":"UTF-8","Content-Type":"application/xml;charset=UTF-8"},putData:data});
if(_103){
_107.addCallback(_103);
}
if(fail){
_107.addErrback(fail);
}
};
_7.putProcessRoleAssignments=_102;
function _108(args,_109){
var _10a=new _4(_1,"getRemoteEnterpriseProcessUpdateStatus",args);
_5.invokeService(_10a,_109);
};
_7.getRemoteEnterpriseProcessUpdateStatus=_108;
function _10b(args,_10c){
var _10d=new _4(_1,"getApplicationPublisher",args);
_5.invokeService(_10d,_10c);
};
_7.getApplicationPublisher=_10b;
function _10e(args,_10f){
var _110=new _4(_1,"getTeamAreasForUsers",args);
_5.invokeService(_110,_10f);
};
_7.getTeamAreasForUsers=_10e;
function _111(_112){
var _113=new _4(_1,"getTeamInvitationPredefinedVariables");
_5.invokeService(_113,_112);
};
_7.getTeamInvitationPredefinedVariables=_111;
function _114(args,_115){
var _116=new _4(_1,"getTeamInvitationFromGenerator",args);
_5.invokeService(_116,_115);
};
_7.getTeamInvitationFromGenerator=_114;
function _117(_118){
var _119=new _4(_1,"getIsConfigurationManagementSupported");
_5.invokeService(_119,_118);
};
_7.getIsConfigurationManagementSupported=_117;
function _11a(_11b){
var _11c=new _4(_1,"getSupportedCmModes");
_5.invokeService(_11c,_11b);
};
_7.getSupportedCmModes=_11a;
function _11d(_11e){
var _11f=new _4(_1,"getSupportedCmModesForStandardUI");
_5.invokeService(_11f,_11e);
};
_7.getSupportedCmModesForStandardUI=_11d;
function _d9(url,_120,_121){
var args={url:url,headers:{"accept":"text/xml"}};
var _122=jazz.client.xhrGet(args);
_122.addCallback(_120);
_122.addErrback(_121);
};
function _123(_124){
var _125=new _4(_1,"postimportTemplateLicenseCheck");
_5.invokeService(_125,_124);
};
_7.importTemplateLicenseCheck=_123;
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.page.EventTopics");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.ui.internal.page.EventTopics",null,{"-chains-":{constructor:"manual"}});
_1.BUILDER_POST_SAVE="builder/postSave";
_1.INITIALIZE_QUERIES="pageview/initializeQueries";
_1.CHANGE_PROJECT_AREA="pageview/changeProjectArea";
_1.ITEMPROXY_DESTROYED="itemproxy/destroyed";
_1.QUERY_EDITOR_CHANGED="query/editorChanged";
_1.QUERY_EDITOR_EDIT_QUERY_REQUEST_ABANDONED="query/editRequestAbaondoned";
_1.QUERY_CONDITION_SECTION_CHANGED="query/conditionSectionChanged";
_1.QUERY_EDITOR_NAME_CHANGED="query/editorNameChanged";
_1.QUERY_DELETED="query/deleted";
_1.QUERY_ACTION_RUN="query/action/run";
_1.QUERY_EXPLORER_SELECTION_CHANGED="query/explorer/selectionChanged";
_1.QUERY_EXPLORER_REFRESH_NEEDED="query/explorer/refreshNeeded";
_1.QUERY_EXPLORER_REFRESH_COMPLETED="query/explorer/refreshCompleted";
_1.QUERY_EXPLORER_TAG_CHANGED="query/explorer/tagChanged";
_1.QUERY_EXPLORER_SWITCHING_TABS="query/explorer/switchingTabs";
_1.SHOW_ERROR_PAGE="workitem/view/errorpage";
_1.SHOW_WELCOME_PAGE="workitem/view/welcomepage";
_1.SHOW_IMPORTER_PAGE="workitem/view/importpage";
_1.STOP_BACKGROUND_OPERATIONS="workitem/operations/stop";
_1.WORKITEM_ABOUT_TO_SAVE="workitem/aboutToSave";
_1.WORKITEM_CHANGED="workitem/changed";
_1.WORKITEM_COMPONENT_MENU_LOADED="rtc/workitems/page/menuloaded";
_1.WORKITEM_EDITOR_CHANGED="workitem/editorChanged";
_1.WORKITEM_IMPORTER_OPENED="workitem/importerOpened";
_1.WORKITEM_IMPORTER_CANCELED="workitem/importerCanceled";
_1.WORKITEM_EDITABLE_PROPERTIES_CHANGED="rtc/workitems/editableProperties/changed";
_1.WORKITEM_PRESENTATION_CHANGED="workitem/presentationChanged";
_1.WORKITEM_READ_ONLY_PROPERTIES_CHANGED="workitem/readonly/changed";
_1.WORKITEM_REFRESH_CACHE="workitem/cache/refresh";
_1.WORKITEM_REFRESHED="workitem/refreshed";
_1.WORKITEM_REPOSITORY_ITEMS_CHANGED="workitem/cache/changed";
_1.WORKITEM_REQUIRED_PROPERTIES_CHANGED="workitem/requiredproperties/changed";
_1.WORKITEM_RICH_TEXT_RESIZED="rtc/workitems/richtext/resized";
_1.WORKITEM_TYPE_CHANGED="workitem.attributes.workItemType/changed";
_1.WORKITEM_STORED="workitem/stored";
_1.WORKITEM_VIEW_CHANGED="workitem/view/changed";
_1.WORKITEM_SAVE="com/ibm/rtc/workitem/save";
_1.WORKITEM_REFRESH="com/ibm/rtc/workitem/refresh";
_1.WORKITEM_PAGE_LOADED="rtc/workitems/page/loaded";
_1.WORKITEM_QUERY_VIEWED="rtc/workitems/query/viewed";
_1.WORKITEM_OPERATION_SELECTIONS_CHANGED="rtc/workitems/query/operation/selection/changed";
_1.WORKITEM_ITEM_VIEWED="rtc/workitems/item/viewed";
_1.WORKITEM_ITEMS_DELETED="rtc/workitems/items/deleted";
_1.WORKITEM_ACTION_COMPONENT_MENU_REFRESH="rtc/workitems/page/menu/refresh";
_1.WORKITEM_ACTION_COMPONENT_MENU_SETPAGEDIRTY="rtc/workitems/page/menu/setPageDirty";
_1.WORKITEM_ACTION_CREATE_FROM_TEMPLATE="rtc/workitems/actions/createFromTemplate";
_1.WORKITEM_ACTION_GET_CURRENT_RESULTS="rtc/workitems/query/getResults";
_1.WORKITEM_ACTION_HANDLE_QUICK_SEARCH="rtc/workitems/actions/handleQuickSearch";
_1.WORKITEM_ACTION_REFRESH_QUERIES="rtc/workitems/actions/refreshQueries";
_1.WORKITEM_ACTION_CLEAR_QUERIES="rtc/workitems/actions/clearQueries";
_1.WORKITEM_ACTION_CLEAR_QUERY_EDITOR="rtc/workitems/actions/clearQueryEditor";
_1.WORKITEM_ACTION_DISCARD_QUERY_EDITOR_CHANGES="rtc/workitems/actions/discardQueryEditorChanges";
_1.WORKITEM_ACTION_CLOSE_QUERY_RESULTS="rtc/workitems/actions/closeQueryResults";
_1.WORKITEM_ACTION_SHOW_QUERIES="rtc/workitems/actions/showQueries";
_1.WORKITEM_ACTION_TOGGLE_GRID_GROUP="rtc/workitems/actions/hideGridChildren";
_1.WORKITEM_ACTION_SET_BREADCRUMBS="rtc/workitems/actions/setBreadcrumbs";
_1.WORKITEM_ACTION_SET_HEADER_BREADCRUMBS="rtc/workitems/actions/setHeaderBreadcrumbs";
_1.WORKITEM_ACTION_SET_MESSAGEBOX="rtc/workitems/actions/setMessageBox";
_1.WORKITEM_ACTION_NOTIFY_INLINE_TO_PUBLISH_ITEM_VIEWED="rtc/workitems/actions/notifyInlineEditorToPublishItemViewed";
_1.WORKITEM_ACTION_SHOW_RICH_TEXT="rtc/workitems/actions/showRichText";
_1.WORKITEM_URL_CHANGED="workitem/url/changed";
_1.ON_CHANGE="onchange";
_1.ON_DEPENDENCY_CHANGE="onDependencyChange";
_1.ON_REFRESH="onrefresh";
_1.ITEMPICKER_PUBLISH_ON_SELECT="com/ibm/team/workitem/ItemPicker/onSelect";
_1.ITEMPICKER_PUBLISH_ON_ESCAPE="com/ibm/team/workitem/ItemPicker/onEscape";
_1.ITEMPICKER_PUBLISH_ON_ENTER="com/ibm/team/workitem/ItemPicker/onEnter";
_1.ITEMPICKER_PUBLISH_ON_CHANGE_FOCUS="com/ibm/team/workitem/ItemPicker/onChangeFocus";
_1.ITEMPICKER_PUBLISH_ON_CHANGE_DOWN="com/ibm/team/workitem/ItemPicker/onChangeDown";
_1.TEMPLATE_WIZARD_MODEL_CHANGE="com/ibm/team/workitems/template/wizard/onChange";
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.query.ValueProvider");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.ui.internal.view.query.ValueProvider",null,{"-chains-":{constructor:"manual"},getScriptClass:function(){
return this._scriptClass;
},setScriptClass:function(_2){
this._scriptClass=_2;
},getProperties:function(){
return this._properties;
},setProperties:function(_3){
this._properties=_3;
},getType:function(){
return this._type;
},setType:function(_4){
this._type=_4;
},createDTO:function(){
var _5={};
_5.properties=this._properties;
_5.scriptClass=this._scriptClass;
_5.type=this._type;
return _5;
}});
_1.createFromDTO=function(_6){
if(_6==null){
return null;
}
var _7=new _1();
_7._scriptClass=_6.scriptClass;
_7._properties=_6.properties;
_7._type=_6.type;
return _7;
};
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.query.Attribute");


(function(){
var _1=com.ibm.team.workitem.web.ui.internal.view.query.ValueProvider;
var _2=dojo.declare("com.ibm.team.workitem.web.ui.internal.view.query.Attribute",null,{"-chains-":{constructor:"manual"},getLabel:function(){
return this._label;
},setLabel:function(_3){
this._label=_3;
},getId:function(){
return this._id;
},setId:function(id){
this._id=id;
},getExternalId:function(){
return this._externalId;
},setExternalId:function(_4){
this._externalId=_4;
},getAttributeTypeId:function(){
return this._attributeTypeId;
},setAttributeTypeId:function(_5){
this._attributeTypeId=_5;
},isQueryable:function(){
return this._queryable;
},setQueryable:function(_6){
this._queryable=_6;
},isSortable:function(){
return this._sortable;
},setSortable:function(_7){
this._sortable=_7;
},isColumn:function(){
return this._column;
},setColumn:function(_8){
this._column=_8;
},isBulkEditable:function(){
return this._bulkEditable;
},setBulkEditable:function(_9){
this._bulkEditable=_9;
},isMultiValued:function(){
return this._multiValued;
},setMultiValued:function(_a){
this._multiValued=_a;
},isEnumeration:function(){
return this._enumeration;
},setEnumeration:function(_b){
this._enumeration=_b;
},getValueProvider:function(){
return this._valueProvider;
},setValueProvider:function(_c){
this._valueProvider=_c;
},getDependentAttributes:function(){
return this._dependentAttributes;
},setDependentAttributes:function(_d){
this._dependentAttributes=_d;
},hasValueSet:function(){
return this._hasValueSet;
},hasNullValue:function(){
return this._hasNullValue;
},getNullValue:function(){
return this._nullValue;
},createDTO:function(){
var _e={};
_e.label=this._label;
_e.id=this._id;
_e.externalId=this._externalId;
_e.attributeTypeId=this._attributeTypeId;
_e.isQueryable=this._queryable;
_e.isSortable=this._sortable;
_e.isColumn=this._column;
_e.isBulkEditable=this._bulkEditable;
_e.isMultiValued=this._multiValued;
_e.isEnumeration=this._enumeration;
_e.dependentAttributes=this._dependentAttributes;
_e.hasNullValue=this._hasNullValue;
_e.nullValue=this._nullValue;
if(this._valueProvider!=null){
_e.valueProvider=new Array(this._valueProvider.length);
for(var i=0;i<this._valueProvider.length;i++){
_e.valueProvider[i]=this._valueProvider[i].createDTO();
}
}
return _e;
}});
_2.createFromDTO=function(_f){
if(_f==null){
return null;
}
var _10=new _2();
_10._label=_f.label;
_10._id=_f.id;
_10._externalId=_f.externalId;
_10._attributeTypeId=_f.attributeTypeId;
_10._queryable=_f.isQueryable;
_10._sortable=_f.isSortable;
_10._column=_f.isColumn;
_10._bulkEditable=_f.isBulkEditable;
_10._multiValued=_f.isMultiValued;
_10._enumeration=_f.isEnumeration;
if(_f.valueProvider!=null){
_10._valueProvider=new Array(_f.valueProvider.length);
for(var i=0;i<_f.valueProvider.length;i++){
_10._valueProvider[i]=_1.createFromDTO(_f.valueProvider[i]);
}
}
_10._dependentAttributes=_f.dependentAttributes;
_10._hasValueSet=_f.hasValueSet;
_10._hasNullValue=_f.hasNullValue;
_10._nullValue=_f.nullValue;
return _10;
};
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.Presentation");






(function(){
var _1=com.ibm.team.workitem.web;
var _2=_1.client.internal.query;
var _3=_2.Operator;
var _4=_2.Variable;
var _5=_1.ui.internal.view.query.Attribute;
var _6=dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.Presentation",null,{"-chains-":{constructor:"manual"},getWidgetClass:function(){
return this._widgetClass;
},setWidgetClass:function(_7){
this._widgetClass=_7;
},getAttribute:function(){
return this._attribute;
},setAttribute:function(_8){
this._attribute=_8;
},getProperties:function(){
return this._properties;
},setProperties:function(_9){
this._properties=_9;
},getVariables:function(){
return this._variables;
},setVariables:function(_a){
this._variables=_a;
},getOperators:function(){
return this._operators;
},setOperators:function(_b){
this._operators=_b;
},isBulkOperationPart:function(){
return this._bulkOperationPart;
},setBulkOperationPart:function(_c){
this._bulkOperationPart=_c;
},createDTO:function(){
var _d={};
_d.widgetClass=this._widgetClass;
_d.attribute=this._attribute.createDTO();
_d.properties=this._properties;
if(this._variables!=null){
_d.variables=new Array(this._variables.length);
for(var i=0;i<this._variables.length;i++){
_d.variables[i]=this._variables[i].createDTO();
}
}
if(this._operators!=null){
_d.operators=new Array(this._operators.length);
for(var i=0;i<this._operators.length;i++){
_d.operators[i]=this._operators[i].createDTO();
}
}
return _d;
}});
_6.createFromDTO=function(_e){
if(_e==null){
return null;
}
var _f=new _6();
_f._widgetClass=_e.widgetClass;
_f._attribute=_5.createFromDTO(_e.attribute);
_f._properties=_e.properties;
if(_e.variables!=null){
_f._variables=new Array(_e.variables.length);
for(var i=0;i<_e.variables.length;i++){
_f._variables[i]=_4.createFromDTO(_e.variables[i]);
}
}
if(_e.operators!=null){
_f._operators=new Array(_e.operators.length);
for(var i=0;i<_e.operators.length;i++){
_f._operators[i]=_3.createFromDTO(_e.operators[i]);
}
}
_f._bulkOperationPart=false;
return _f;
};
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.VariableControl");










(function(){
var _1=com.ibm.team.workitem.web.ui.internal.page.EventTopics;
var _2=com.ibm.team.workitem.web.client.internal.query.Variable;
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.VariableControl",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"checkBox\"><input id=\"${id}_input\" type=\"checkbox\" dojoattachpoint=\"_checkBox\"/><label for=\"${id}_input\" style=\"vertical-align: top;\" dojoattachpoint=\"_label\"></label></div>",constructor:function(_3){
this.variable=_3.variable;
this._section=_3.section;
},postCreate:function(){
this._checkBox.setAttribute("name",this.variable.id);
this._label.appendChild(document.createTextNode(this.variable.label));
this.connect(this._checkBox,"onclick",this._handleCheck);
},isChecked:function(){
return this._checkBox.checked==true;
},_handleCheck:function(e){
this.setChecked(this.isChecked());
this._publishChangeEvent();
},setChecked:function(_4){
this._checkBox.checked=_4;
this._checkBox.defaultChecked=_4;
},getVariable:function(){
var _5=this.variable;
var _6=new _2(_5.id,_5.arguments);
_6.setLabel(_5.label);
return _6;
},_publishChangeEvent:function(){
if(this._section.isEditorPart()===true){
dojo.publish(_1.QUERY_EDITOR_CHANGED,[]);
}else{
dojo.publish(_1.QUERY_CONDITION_SECTION_CHANGED,[]);
}
}});
})();


;define("dojox/xml/parser",["dojo/_base/kernel","dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(_1){
_1.getObject("xml.parser",true,dojox);
dojox.xml.parser.parse=function(_2,_3){
var _4=_1.doc;
var _5;
_3=_3||"text/xml";
if(_2&&_1.trim(_2)&&"DOMParser" in _1.global){
var _6=new DOMParser();
_5=_6.parseFromString(_2,_3);
var de=_5.documentElement;
var _7="http://www.mozilla.org/newlayout/xml/parsererror.xml";
if(de.nodeName=="parsererror"&&de.namespaceURI==_7){
var _8=de.getElementsByTagNameNS(_7,"sourcetext")[0];
if(_8){
_8=_8.firstChild.data;
}
throw new Error("Error parsing text "+de.firstChild.data+" \n"+_8);
}
return _5;
}else{
if("ActiveXObject" in _1.global){
var ms=function(n){
return "MSXML"+n+".DOMDocument";
};
var dp=["Microsoft.XMLDOM",ms(6),ms(4),ms(3),ms(2)];
_1.some(dp,function(p){
try{
_5=new ActiveXObject(p);
}
catch(e){
return false;
}
return true;
});
if(_2&&_5){
_5.async=false;
_5.loadXML(_2);
var pe=_5.parseError;
if(pe.errorCode!==0){
throw new Error("Line: "+pe.line+"\n"+"Col: "+pe.linepos+"\n"+"Reason: "+pe.reason+"\n"+"Error Code: "+pe.errorCode+"\n"+"Source: "+pe.srcText);
}
}
if(_5){
return _5;
}
}else{
if(_4.implementation&&_4.implementation.createDocument){
if(_2&&_1.trim(_2)&&_4.createElement){
var _9=_4.createElement("xml");
_9.innerHTML=_2;
var _a=_4.implementation.createDocument("foo","",null);
_1.forEach(_9.childNodes,function(_b){
_a.importNode(_b,true);
});
return _a;
}else{
return _4.implementation.createDocument("","",null);
}
}
}
}
return null;
};
dojox.xml.parser.textContent=function(_c,_d){
if(arguments.length>1){
var _e=_c.ownerDocument||_1.doc;
dojox.xml.parser.replaceChildren(_c,_e.createTextNode(_d));
return _d;
}else{
if(_c.textContent!==undefined){
return _c.textContent;
}
var _f="";
if(_c){
_1.forEach(_c.childNodes,function(_10){
switch(_10.nodeType){
case 1:
case 5:
_f+=dojox.xml.parser.textContent(_10);
break;
case 3:
case 2:
case 4:
_f+=_10.nodeValue;
}
});
}
return _f;
}
};
dojox.xml.parser.replaceChildren=function(_11,_12){
var _13=[];
if(_1.isIE){
_1.forEach(_11.childNodes,function(_14){
_13.push(_14);
});
}
dojox.xml.parser.removeChildren(_11);
_1.forEach(_13,_1.destroy);
if(!_1.isArray(_12)){
_11.appendChild(_12);
}else{
_1.forEach(_12,function(_15){
_11.appendChild(_15);
});
}
};
dojox.xml.parser.removeChildren=function(_16){
var _17=_16.childNodes.length;
while(_16.hasChildNodes()){
_16.removeChild(_16.firstChild);
}
return _17;
};
dojox.xml.parser.innerXML=function(_18){
if(_18.innerXML){
return _18.innerXML;
}else{
if(_18.xml){
return _18.xml;
}else{
if(typeof XMLSerializer!="undefined"){
return (new XMLSerializer()).serializeToString(_18);
}
}
}
return null;
};
return dojox.xml.parser;
});

dojo.provide("com.ibm.team.workitem.web.ui.internal.nls.QueryMessages")._built=true;
dojo.provide("com.ibm.team.workitem.web.ui.internal.nls.QueryMessages.en_us");
com.ibm.team.workitem.web.ui.internal.nls.QueryMessages.en_us={"labelAddUser":"Add User","anyValueSelected":"Any value selected","helpForBulkOperationsWithoutDelete":"To change the attributes of selected work work items, click the ${0} button to choose from a list of available attributes, or click on the ${1} icon in the column headers below to change the corresponding attribute.","sectionTitleBulkOperations":"Edit Multiple Work Items (${0} work items selected)","dialogTitleSelectProcessArea":"Select Team or Project Area","optionMonthsAgo":"Months before this month","gridColumnActions":"Actions","buttonAddUser":"Add User...","QueryResultPageControl_Aria_labelPageXToYOfZ":"Work Items ${0} - ${1} of ${2}","sectionTitleTemplateCreateNoneSelected":"Create Template from Work Items (no work items selected)","errorMissingRequiredParmQueryType":"Missing required parameter \'this.queryType\'","dialogTitleSelectAttribute":"Select Attribute","sectionTitleSortOrder":"Sort Order","manyValuesSelected":"${0} values selected","msgDurationValidation":"Use an abbreviated time unit format such as: \'2h\' or \'1d\'","titleEditCurrentQuery":"Edit Current Query","confirmDeleteQuery":"The query \'${0}\' will be permanently deleted.","errorFetchingQueries":"Error fetching queries","titleCancelQuery":"Cancel and return the Queries page","optionDaysFromNow":"Days after today","labelAllMustMatch":"All match","sectionTitleUserSharing":"User Sharing","buttonAddTeamArea":"Add Team or Project Area...","busyRunningSearch":"Running search...","QueryResults_COLLAPSE_ATTRIBUTE_TOOLTIP":"Collapse attribute: ${0}","QueryResultPageControl_QUERY_SAVE_ERROR":"Error while saving the query.","promptOperationCompleteRefresh":"Operation complete. The query table does not yet show the changes. Refreshing will clear the selections. Do you want to refresh the query?","labelMoreLinks":"${0} more links...","labelTimeSheets_one":"1 entry","labelAnyCanMatch":"Some match","QueryResultPageControl_labelPageXToYOfZ":"\x3cb\x3e${0}\x3c/b\x3e - \x3cb\x3e${1}\x3c/b\x3e of \x3cb\x3e${2}\x3c/b\x3e","unTaggedQueriesLabel":"Untagged","tabTitleDetails":"Details","labelWorkItem":"${0}: ${1}","titleDelete":"Remove","dialogTitleSelectProjectArea":"Select Project Area","titleOwned":"Created by me","removeTagLabel":"Remove:","labelNotSet":"Not Set","buttonRemove":"Remove","gridColumnCheckbox":"","enterFilterString":"Enter a filter string:","titleViewFullReport":"View Full Result Set in Printable Format","optionMonthsFromNow":"Months after this month","errorInvalidParmValue":"Invalid value for \'this.queryType\'; valid values are \'shared\' or \'myQueries\' (saw \'${0}\')","buttonEditTable":"Bulk Edit Items","timeDurationLabel":"${0} ${1}","labelEmptyTeamAreaSharing":"Not shared","msgTimeFormatLabel":"Enter a duration","busySavingQuery":"Saving Query \'${0}\'","labelAllOpenWorkItems":"All Unresolved Work Items","buttonDescending":"Descending","optionHoursAgo":"Hours before this hour","labelName":"Name:","labelParamWidget":"Values provided when query is run","QueryResultPageControl_Aria_labelPageXToYOfZWithActual":"Work Items ${0} - ${1} of ${2} (${3})","labelCreateTemplate":"Create Work Item Template","addTagLabel":"Add:","labelUnassigned":"Unassigned","tabTitleMyQueries":"My Queries","sectionTitleTemplateCreate":"Create Template from Work Items (${0} work items selected)","titleOwnedAndUnowned":"Any creator","optionMinAgo":"Minutes before this minute","buttonCancel":"Cancel","buttonClose":"Close","optionYearsFromNow":"Years after this year","labelDisableParam":"Disable Input of Condition Values when Query is Run","QueryResultPageControl_labelPageXToYOfZWithActual":"\x3cb\x3e${0}\x3c/b\x3e - \x3cb\x3e${1}\x3c/b\x3e of \x3cb\x3e${2}\x3c/b\x3e (${3})","titleEnterDecimal":"Please enter a valid decimal number.\x3cbr/\x3eThe number cannot have more than 24 significant digits and more than 4 fraction digits","sectionTitleBulkOperationsOneSelected":"Edit Multiple Work Items (1 work item selected)","tagAddInfoCount":"Tags will be added to ${0} of ${1} items.","labelTimeSheets":"${0} entries","titleEnterNumber":"Please enter a number. \x3cbr /\x3eMultiple numbers can be separated by comma.","labelDescending":" (descending)","buttonSave":"Save","QueryResultPageControl_labelPage1OfX":"\x3cb\x3e1\x3c/b\x3e of \x3cb\x3e${0}\x3c/b\x3e","buttonUp":"Up","labelIndividuallyShared":"Individually shared","buttonAddColumn":"Add Column...","labelCreator":"Creator:","buttonFalse":"False","anyValueText":"Any","confirmDeleteSharedQuery":"The query \'${0}\' is shared with other users. The query will be permanently deleted for all users.","errorTerminatingStep":"Error: ${0} | Details: ${1}","errorFetchingWidget":"Loading widget failed","labelPredefined":"Predefined","msgDeleteOneSuccessful":"Work Item ${0} has been deleted.","QueryResultPageControl_Aria_labelPage1OfX":"Work Item 1 of ${0}","buttonAdd":"Add","optionDaysAgo":"Days before today","buttonTrue":"True","optionYearsAgo":"Years before this year","labelActions":"Actions","sectionTitleWorkItemEditQuery":"Edit Query","buttonEditDescription":"Edit Description","selectTagsToDelete":"Select tags to remove.","labelEmptyOrderColumns":"Default sort order","errorFetchingAttributes":"Loading attributes failed","sectionTitleTemplateCreateGeneric":"Create Template from Work Items","queryResultsNameWithSorting":"${0}${1}","sectionTitleBulkOperationsNoneSelected":"Edit Multiple Work Items (no work items selected)","selectAttributes":"Select attributes:","labelPrevious":"Previous","labelSeverity":"Severity","gridColumnExpandCollapse":"Expand/Collapse","errorTerminatingStepWithoutDetails":"Error: ${0}","titleReRunQuery":"Re-Run Query","titleExportCSV":"Download as Spreadsheet (.csv)","workItemsNoResultsLabel":"No work items found for ${0}.","sectionTitleWorkItemNewQuery":"New Query","labelNoResults":"No results. Select items and run an operation from the operations tab to show results.","optionHoursFromNow":"Hours after this hour","tabTitleSharedQueries":"Shared Queries","titleSelectDeselectAll":"Select/Deselect All","titleUnowned":"Created by others","errorDeletingQuery":"Error deleteing query","QueryResults_EXPAND_ATTRIBUTE_TOOLTIP":"Expand attribute: ${0}","titleShared":"Shared","hideArchivedValues":"Hide archived values","confirmAbandonUnnamedQuery":"Only one query may be edited or viewed at a time. To edit or view a second query, the changes to the first query must be abandoned. Are you sure you want to abandon changes to the new (unnamed) query?","tabTitleConditions":"Conditions","tabTitleResultLayout":"Column Display","sectionTitleBulkOperationInProgress":"Running... ${0}","QueryResultPageControl_Aria_labelPage1OfXWithActual":"Work Item 1 of ${0} (${1})","buttonEdit":"Edit Query","QueryGridGadgetFactory_COUNT":"(${0})","errorAttributeAlreadyAdded":"The attribute is already editable.","labelDeleteWorkItems":"Delete Work Items","buttonStop":"Stop","msgDeleteManySuccessful":"${0} work items have been deleted.","optionMinFromNow":"Minutes after this minute","labelNoWorkItemsFound":"No work items found.","titleShowHideBulkOperations":"Edit Multiple Work Items","titleAddOperation":"Add operation on this attribute","titleUnshared":"Unshared","labelTomorrow":"Tomorrow","QueryResultPageControl_QUERY_SAVE_SUCCESS":"The query was successfully saved.","buttonAddSortColumn":"Add Sort Column...","errorLoadingUsersFailed":"Loading users failed","labelAllWorkItems":"All Work Items","oneValueSelected":"1 value selected","labelNoWorkItemsMatchFilter":"No work items match the current filter criteria.","enterTagsToAdd":"Enter tags to add.","sectionTitleDetails":"Details","dialogTitleSelectTeamArea":"Select Team Area","dialogTitleAddUsers":"Add Users","titleCloseQuery":"Close the query editor and show the query results","sectionTitleBulkOperationsGeneric":"Edit Multiple Work Items","titleHideGroups":"Hide groups","msgQueryNotShared":"The query is not shared and will not be visible in the Shared Queries tab. You can find it in the My Queries tab.","msgTimeFormatLabelUnit":"Select duration unit","dialogTitleAddWorkItems":"Add Work Items","copyOfNamePattern":"Copy of ${0}","labelClose":"Close","helpForBulkOperations":"To change the attributes of selected work work items, click ${0} to choose from a list of available attributes, or click on the ${1} icon in the column headers below to change the corresponding attribute. Select work items and click ${2} to delete the selected work items.","queryResultsAriaName":"Query Results","labelNoFilteredQueries":"There are no queries that match the tag and/or filter criteria","buttonRun":"Run","labelFilterText":"Filter text","sectionTitleResultColumns":"Result Columns","labelAddOperatorConditionAND":"Add AND condition","buttonDelete":"Delete","confirmDeleteQueryTitle":"Delete the query?","dialogTitleSelectAttributes":"Select Attributes","labelEmptyUserSharing":"Not shared","labelCurrentDate":"now","titleCloseQueryResults":"Close the query results view","QueryResults_buttonEditToggle":"Toggle Edit Work Item in Row","QueryResultsDataHeaderGadget_titleSortingIsDisabled":"Close the operation editor to enable sorting","helpForQueries":"To add terms to the query, click the ${0} button.","labelEmptyResultColumns":"Default columns","labelNoneSelected":"None","labelAddWorkItem":"Add WorkItem","errorNoDetailsAvailable":"No details available","gridColumnTags":"Tags","labelAddOperatorConditionOR":"Add OR condition","labelAND":"AND","sectionTitleDescription":"Description","QueryGridGadgetFactory_COUNT_FILTERED":"(${0} [${1} filtered])","labelItemsPerPage":"Items Per Page","buttonOK":"OK","labelAddCondition":"Add Condition","titleShowGroups":"Show groups","labelTypeFilterText":"Type Filter Text","calenderImgLabel":"Open Calender","buttonCreateTemplate":"Create Work Item Templates","titleSharedAndUnshared":"Shared/Unshared","errorFetchingPresentation":"Loading presentation failed","titleNewQuery":"New Query","labelEmptyDescription":"No description","labelNone":"None","msgDueDateLabel":"Due Date","titleOrderResultsBy":"Refresh and order results by \'${0}\' (${1})","busyLoading":"Loading...","sectionTitleTeamAreaSharing":"Team and Project Area Sharing","titleCreateTemplate":"Create Work Item Template...","buttonSaveCopy":"Save Copy","labelPersonalTags":"Personal","labelClear":"Clear","allQueriesLabel":"All queries","confirmAbandonNamedQuery":"Only one query may be edited or viewed at a time. To edit or view a second query, the changes to the first query must be abandoned. Are you sure you want to abandon changes to the query named \"${0}\"?","noSelectionText":"No Selection","buttonDown":"Down","labelWorkItemType":"Work Item Type","labelAddAttributeChange":"Add Attribute Change","helpForWorkItemTemplateCreation":"To create a work item template of selected work work items, select work items from the table below and click ${0} to open the template creation dialog.","confirmRunOperation":"Are you sure you want to modify ${0} work items?","labelMore":"More...","tagDeleteInfoCount":"Tags will be removed from ${0} of ${1} items.","labelEnableParam":"Enable Input of Condition Values when Query is Run","errorMissingRequiredParmParentController":"Missing required parameter \'this.parentController\'","selectMoreItems":"Select More Items","allTagsAreBeingAdded":"Cannot remove a tag while it is being added.","msgTimeFormatAssistance":"Enter a duration (e.g. \'1w 2d 3h 4m\', default is \'h\')","msgGlobalConfigurationChanged":"The global configuration has changed.  Refresh to update the links in the query results view.","labelToday":"Today","urlTooLong":"Can not open the document as the URL length exceeds the maximal length supported by the browser. Please use a query with less parameters or use a different browser.","labelRun":"Run...","QueryResultPageControl_labelPage1OfXWithActual":"\x3cb\x3e1\x3c/b\x3e of \x3cb\x3e${0}\x3c/b\x3e (${1})","showLinks":"Show links","confirmDeleteWorkItem":"Are you sure you want to delete work item ${0}? This operation cannot be undone. Any open query will be refreshed. Proceed?","labelNext":"Next","sectionTitleTemplateCreateOneSelected":"Create Template from Work Items (1 work item selected)","showArchivedValues":"Show archived values","titleDeleteWorkItems":"Delete Work Items","labelAddAttributeCondition":"Add attribute condition","labelAscending":" (ascending)","labelShowLess":"Show Less","titleSearch":"Search","sectionTitleTags":"Tags","titleAriaLabel":"${0} ${1}","labelYesterday":"Yesterday","buttonAscending":"Ascending","QueryResults_TITLE_SAVE_CURRENT_COLUMN_WIDTHS":"Persist Current Column Widths","menuDelete":"Delete Query","appendDuplicateAttributeLableWithID":"${0} (${1})","sectionTitleBulkOperationsDerivedValue":"${0} (values derived from item ${1})","labelPriority":"Priority","labelConditionTypeMenu":"Condition type: ","labelOR":"OR","confirmDeleteWorkItems":"Are you sure you want to delete ${0} work items? This operation cannot be undone. Any open query will be refreshed. Proceed?","gridColumnName":"Name","errorFetchingSharedQueries":"Error fetching shared queries","titleShowNonEmptyGroups":"Show groups (exclude empty)","labelShowAll":"Show All","labelSearchWorkItems":"Search Work Items","ResultColumnsSection_Width":"width:","labelSharedTags":"Shared","gridColumnDescription":"Description","labelNoQueries":"No Queries."};

;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.ErrorLabel");




dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");




(function(){
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.ErrorLabel",[dijit._Widget,dijit._Templated],{templateString:"<div><div dojoAttachpoint='_errorElement'></div></div>",constructor:function(_1){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");
},postCreate:function(){
this._messageSpan=document.createElement("span");
this._errorElement.appendChild(this._messageSpan);
this._toolTip=new jazz.ui.HoverPopup({around:[this._messageSpan]});
this.clearError();
},destroy:function(){
if(this._toolTip&&this._toolTip.destroy){
this._toolTip.destroy();
}
this.inherited(arguments);
},showError:function(_2,_3){
dojox.xml.parser.replaceChildren(this._messageSpan,document.createTextNode(_2));
this._toolTip.html=_3.message?_3.message:this.messages.errorNoDetailsAvailable;
this._errorElement.style.display="";
},clearError:function(){
this._errorElement.style.display="none";
}});
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.BaseQueryWidget");




(function(){
var _1=dijit._Templated;
var _2=dijit._Widget;
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.BaseQueryWidget",[_2,_1],{constructor:function(_3){
},getValue:function(){
return null;
},hasValue:function(){
return this.getValue()!=null;
},getValues:function(){
return null;
},$interfaces:{"com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.IQueryEditorWidget":true}});
})();


;dojo.cache("com.ibm.team.workitem.web", "ui/internal/view/queryeditor/widgets/templates/ParameterValueWidget.html", "<div class=\"com-ibm-team-workitem-queryeditor-parameter-value-widget\">	<span dojoattachpoint=\"_message\" class=\"message\"></span></div>");

;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.ParameterValueWidget");


dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");
var _2=com.ibm.team.workitem.web.client.internal.query.Variable;
var _3=com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.BaseQueryWidget;
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.ParameterValueWidget",_3,{templatePath:dojo.moduleUrl("com.ibm.team.workitem.web","ui/internal/view/queryeditor/widgets/templates/ParameterValueWidget.html"),constructor:function(_4){
var _5;
this.presentation=_4.presentation;
if(typeof _4.variables!=="undefined"&&_4.variables.length>0&&_4.variables[0].id===_2.PARAMETER_VARIABLE_ID){
_5=_4.variables[0];
if(_5.name){
this.variable=_2.createNamedVariable(_5.id,_5.name,this.presentation.getAttribute().getId());
}else{
this.variable=_2.createNewNamedVariable(_5.id,this.presentation.getAttribute().getId());
}
}
},postCreate:function(){
var _6=document.createTextNode(_1.labelParamWidget);
this._message.appendChild(_6);
},getValues:function(){
return [];
},getParameterVariables:function(){
if(!this.variable){
this.variable=_2.createNewNamedVariable(_2.PARAMETER_VARIABLE_ID,this.presentation.getAttribute().getId());
}
return [this.variable];
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.model.Label");
(function(){
var _1=dojo.declare("com.ibm.team.rtc.foundation.web.model.Label",null,{"-chains-":{constructor:"manual"},constructor:function(_2){
this._isLazyFetch=false;
this._label=_2;
},iconUrl:function(_3){
this._iconUrl=_3;
return this;
},url:function(_4){
this._url=_4;
return this;
},lazyFetch:function(_5){
this._isLazyFetch=_5;
return this;
},getLabel:function(){
return this._label;
},getIconUrl:function(){
return this._iconUrl;
},getUrl:function(){
return this._url;
},isLazyFetch:function(){
return this._isLazyFetch;
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabel":true}});
_1.EMPTY_LABEL=new _1("");
})();


;dojo.provide("com.ibm.jdojo.util.Assert");
(function(){
function _1(_2,_3,_4){
if(!_2){
_5("Illegal Argument",_3,_4);
}
};
function _6(_7,_8,_9){
if(_7==null){
_5("Assertion Failed (null element)",_8,_9);
}
};
function _a(_b,_c,_d){
if(!_b){
_5("Assertion Failed",_c,_d);
}
};
function _e(_f,_10){
};
function _11(_12){
_1(dojo.isArray(_12),"Expecting '[]' but got '"+_12+"'");
};
function _13(_14,_15){
_5("Assertion Failed",_14,_15);
};
function _5(_16,_17,_18){
var _19=_16;
if(dojo.isString(_17)){
_19+=": '"+_17+"'";
}
if(dojo.isString(_18)){
_19+=" (@"+_18+")";
}
console.error(_19);
if(this.djConfig&&this.djConfig.isDebug){
throw new Error(_19);
}
};
dojo.mixin(com.ibm.jdojo.util.Assert,{isLegal:_1,isNotNull:_6,isTrue:_a,isArray:_11,isInstanceOf:_e,fail:_13});
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.ScriptValueResolver");




(function(){
var _1=com.ibm.jdojo.util.Assert;
var _2=com.ibm.jdojox.util.IllegalArgumentException;
dojo.declare("com.ibm.team.workitem.web.client.internal.ScriptValueResolver",null,{"-chains-":{constructor:"manual"},resolve:function(_3,_4){
if(_3==null){
return this._getNullValue();
}
var _5=this._resolve(_3,_4);
if(_5!=null){
return _5;
}
throw new _2("Unsupported value - "+_3);
},_getNullValue:function(){
return null;
},_resolve:function(_6,_7){
_1.isTrue(false,"Abstract method '_resolve' invoked");
}});
})();

dojo.provide("com.ibm.team.workitem.web.ui.internal.nls.WorkItemEditorMessages")._built=true;
dojo.provide("com.ibm.team.workitem.web.ui.internal.nls.WorkItemEditorMessages.en_us");
com.ibm.team.workitem.web.ui.internal.nls.WorkItemEditorMessages.en_us={"dialogTitleSelectWorkItemType":"Select Work Item Type","labelDateMinuteAgo":"1 minute ago","labelTeamAreaAttribute":"Team Area","labelQueryComposingRetry":"Retry","HistoryPart_Aria_historyItemLabel":"Change history record initiated by ${0} ${1}","labelShowWorkItemsRelatedToConfiguration":"Show only Work Items related to the current Global Configuration","labelDateHourAgo":"1 hour ago","msgApprovalNameValidation":"The name may not be empty or longer than 250 characters and must be unique within the work item. Leave the name blank to generate a default name.","msgDurationValidation":"Enter the time spent, e.g. \"1w 2d 3h 4m\"; default unit is \"h\".","labelListNoItemsDefault":"No Items.","buttonNext":"Next","labelListOfSubscribers":"Subscribers","pageTitleWorkItemSummaryMore":"${0} ${1}: ${2}...","labelApprovals":"Approvals","typeWorkItemID":"${0} ${1}","msgLogOperationFailed":"Operation failed. Details: ${0}","labelNoEditorPresentationForThisType":"No inline editor presentation has been defined for this type of work item. Contact your project adminsitrator.","titleTabRequiredMarker":"There is a required field on this tab.","labelPotentialDuplicates":"Potential Duplicates","msgLogSaveComplete":"Save complete: ${0}","titleUnsubscribeMe":"Unsubscribe Me","msgLogAttributeUpdateFailureError":"*Error* ${0}: ${1} Details: ${2}","busyRunningSearch":"Running search...","titleLinkDelete":"Delete this link from the work item","optionNotAvailable":"Not Available","labelListOfProjectAreas":"Project Areas","errorInvalidURI":"Invalid URI: ${0}","labelApprovalMyState":"Your State: ${0}","promptNavigateAway":"Are you sure you want to navigate away from this page? You have unsaved changes.${0}\nYou can change pages but must remember to return to the Work Items page to finish your unsaved work.\n\nPress OK to continue, or Cancel to stay on the current page.","errorFileSizeExceedsMaximumAllowed":"The uploaded file size exceeds the maximum file size allowed: ${0} bytes.","confirmRefreshAfterStateChange":"Work Item ${0} has been changed in the repository by another user or client. The work item must be reloaded, discarding all local changes, including those made in plans. Do you want to reload the work item now?","labelWorkItem":"Work Item","msgEstimateValidation":"Enter a time estimate, e.g. \"1w 2d 3h 4m\"; default unit is \"h\".","labelDateDaysAgo":"${0} days ago","msgDefaultEMailSubject":"About that Work Item...","msgSaveCancelledDueToUpload":"Save cancelled.","LinksPresentation_HugeLinkNumber_Description":"Work Items with large number of links refresh the links in batches. This process is run in the background.","labelListOfProcessAreas":"Process Areas","msgNoApprovals":"No Approvals","actionLabelWithProject":"${0} (${1})","labelQueryPicker":"Select a query from the tree below:","currentTargetIndicator":"\u25cf ${0}","labelAllOpenWorkItems":"All Unresolved Work Items","msgLogOperationCancelled":"Processing cancelled.","labelName":"Name","buttonCreateQuery":"Create Query","msgLogErrorFetching":"Failed to fetch Work Item ${0}","labelDateMinutesAgo":"${0} minutes ago","errorProcessAlreadySelected":"The item named \"${0}\" is already on the list. The selection is ignored.","busySplitting":"Splitting...","labelStoredInRepository":"Stored in Repository","labelUnassigned":"Unassigned","errorAttachmentUploadFailed":"Upload failed. Response is: ${0}","labelRecentlyViewed":"Recently Viewed Work Items:","msgProjectAreaIsArchived":"The project area for this work item has been archived.","labelTabRequired":" *","buttonCancel":"Cancel","buttonClose":"Close","labelNow":"Now","titleItemRestore":"Restore this removed item","attributeFiledAgainst":"Filed Against","titlePasteAsLink":"Paste as link...","labelApprovalApproved":"Approved","labelCorrection":"Correction:","labelRecentlyViewedExcludingThisWorkItem":"Recently Viewed Work Items excluding this work item:","titleSubscribeMe":"Subscribe Me","msgApproval":"Approval","msgLogUpdatingFromCache":"Updating Work Item ${0} - Found in cache","dialogTitleAlert":"Alert","linkSet":"Set ${0}","promptResetContinue":"Resetting will result in losing your changes. Continue with the reset action?","labelAttachments":"Attachments","titleRemoveWorkItem":"Cancel changes without saving and remove the work item from the view","busyLoadingQueries":"Loading Queries","titleThisIsCurrent":"This is the current work item.","pageTitleNewWorkItem":"New Work Item","attributeSeverity":"Severity","labelApprovalRejected":"Rejected","titleUserId":"@${0}","promptCancelWorkItemEdit":"You will lose the unsaved changes if you cancel. Do you want to cancel?","labelNoHistory":"No History.","ContributorLabelProvider_archived":"${0} (archived)","labelLoadedFromProjectArea":"Loaded: ${0} from project area ${1}","promptEnterRelatedUri":"Enter the URI of the related artifact.","errorFetchingServerTime":"Error fetching server time: ${0}","optionMore":"More...","msgSaveAllComplete":"Save operation(s) complete.","buttonForwardToItem":"Forward to ${0}","labelUnnamed":"Unnamed","titleAWorkItem":"A work item","msgParenCount":"(${0})","dialogTitleCreateWorkItem":"Create Work Item","msgStartingBulkUpdateOperation":"Updating ${0} item(s)...","buttonAdd":"Add","msgApprovalApproved":"${0} approved","errorOpeningWorkItem":"Error opening work item","linkAdd":"Add ${0}","titleSelectOwner":"Select Owner","dialogTitleSelectPlannedFor":"Set Iteration","errorOpeningWorkItemWithMessage":"Error opening work item. ${0}","buttonRefresh":"Refresh","msgApprovalPending":"${0} pending","errorFetchingSortOrderDefaults":"Error fetching sort order defaults","SectionMenuDropDownActionWidget_Aria_label":"${0} ${1}","labelResourceUrl":"URI","errorCreatingNewWorkItem":"Error creating new work item","labelServiceProviders":"Service Providers","msgAddDuplicateOfLink":"Add \"Duplicate Of\" link.","titleAttachmentDelete":"Remove the attachment","dialogTitleSelectServiceProvider":"Add Link","msgRefreshToForceUpdate":"Refresh to get the latest updates. Note: The refresh will clear other status messages.","errorLoadingQuickInformation":"Error loading quick information presentation for editing the work item","buttonAddApprovers":"Add Approvers...","promptResetLostChangesContinue":"Resetting will result in losing your changes except for your unsaved comment.\nYour unsaved comment will not be removed, but you must save it after the refresh action to add it to the work item.\n\nContinue with the reset action?","dialogTitleSelectUrl":"Enter Related Artifact Link","promptSelectProjectArea":"A Team Area was selected. Pleases select a Project Area.","errorOpeningWorkItemMessage":"Work item ID must be a positive integer (saw ${0})","msgLogRefreshComplete":"Refresh complete.","msgWelcomeToShowQueries":"Queries","labelLoadingSelectItemServiceProviders":"Loading Select Item service providers...","labelState":"State","headingRecentlyViewed":"Recently Viewed","labelUnsavedWorkItems":"Unsaved Work Items","msgApprovalRejected":"${0} rejected","pageTitleQueriesBreadcrumb":"Queries (${0})","menuItemServiceProviderRTC":"IBM Engineering Workflow Management","promptRefreshContinue":"Refreshing will result in losing your changes. Continue with the refresh action?","errorInvalidRegex":"Invalid regular expression: ${0}","labelNotResolved":"Not Resolved","msgError":"Error!","attributeOwnedBy":"Owned By","WorkitemEditorHeader_Aria_toolbox":"Toolbox","msgSaveCancelledDueToUploadDetails":"The Save operation was cancelled because an upload was in progress.","descriptionNoApprovals":"Select an approval type to add approvals to your work item.","promptAttachmentUploadInProgress":"An attachment upload is in progress or has not completed successfully.\nClick OK to save anyway, or Cancel to cancel the Save.\nThe upload may complete before this message is closed.\n\nDo you want to stop the attachment upload in progress and save?","msgProjectAreaIsDifferent":"Work Item belongs to ${0} project. Click here to open the work item in that context.","msgSaveBeforeSplit":"The work item must be saved before the Continue Work for Owner action. Save ?","promptSelectTeamArea":"A Project Area was selected. Pleases select a Team Area.","errorNoPermissions":"Insufficient privileges to access this work item.","msgRemoveDuplicateOfLinkDetails":"Remove the \"Duplicate Of\" link. You may need to Save or Reopen before assigning a duplicate.","chooserHeadingTeam":"${0} Team Queries","noPickerProvided":"Project \'${0}\' provides no selection dialog.","loading":"Loading...","busyCreatingWorkItems":"Creating work items...","selectWorkItemWidgetTitleText":"Move or Copy this Work Item","msgLinkCannotReferenceItself":"A work item cannot link to itself. The selected work item was skipped.","titleApproverRestore":"Restore this deleted approver","labelWorkItems":"Work Items","msgSaveBeforeSplitCheckTimeSpent":"Time Spent is empty. The work item will not be split.","WorkItemOverview_Aria_rightDetailsTable":"Second details group","labelRepository":"Repository: ${0} at ${1}","msgResolutionSet":"The work item has a \"Duplicate Of\" link so the Resolution has been changed to \"Duplicate\". To change the status or resolution, first remove the \"Duplicate Of\" link.","labelNew":"New","busyCopying":"Copying...","labelApprovalCountPending":"${0} Pending","dialogTitleSelectWorkItem2":" - Select Work Item","errorConsoleDetails":"*** Error: ${0} | Details: ${1}","msgTypeChange":"The work item type has changed. Click here to load the presentation for the selected type.","buttonBackToCurrentQuery":"Back to Current Query","errorOnlyOneProjectArea":"There is only one project area, so move and copy are not available.","busyUploading":"Uploading...","pageTitleWorkItem":"Work Item","operationOpeningWorkItem":"Opening Work Item ${0}","labelDue":"Due","attributeNewComment":"New Comment","actionAdd":"Add...","promptLogInOrCancelWorkItemEdit":"You must be logged in to edit or create work items.\nPress OK to log in or Cancel to refresh.","msgClickToCreateDefault":"Click to create a default work item or use the drop down to select a type to create.","chooserHeadingShared":"Queries Shared by Others","errorRunningPotentialDuplicatesQueryCouldNotConstruct":"Could not construct Potential Duplicates search.","ApprovalsPart_Aria_labelDropdownButton":"Add approvals","buttonSaveAndClose":"Save and Close","operationOpeningQuery":"Opening Query","msgBackgroundOperationStopped":"The multiple work item update operation was stopped.","labelItemsChanged":"Items changed:","msgRefreshToMergeWithTheLatestUpdates":"Refresh to merge with the latest updates.","msgLogErrorInvalidId":"Invalid id found: ${0}. The operation is terminated.","labelMoveCopy":"Move or Copy","errorFetchStoreDetails":"Error fetching or storing ${0} | Details: ${1}","labelWorkItemSetFromTemplate":"Work Item Set from ${0}","msgLogUpdatingFetching":"Updating Work Item ${0} - Fetching","labelRelated":"Related","buttonOK":"OK","titleSelectApprovers":"Select Approvers","msgRemoveDuplicateOfLink":"Remove \"Duplicate Of\" link.","dialogTitleSelectWorkItems":"Select Work Items","menuSectionRationalTeamConcert":"IBM Engineering Workflow Management","labelResourceComment":"Label","busyLoading":"Loading...","busyWorking":"Working...","labelCreateButtonText":"Create","titleApproverDelete":"Delete this approver from the approval","errorLoadingProperties":"Error loading properties for editing the work item","labelQueryComposingCancelled":"Query \x3cb\x3e${0}\x3c/b\x3e cancelled.","labelKBytes":"${0} KB","promptRefreshLostChangesContinue":"Refreshing will result in losing your changes except for your unsaved comment.\nYour unsaved comment will not be removed, but you must save it after the refresh action to add it to the work item.\n\nContinue with the refresh action?","actionSet":"Set...","operationLoadingTypeDefinition":"Loading type definition","labelAttachmentAddFile":"Add File:","promptConfirmSaveAll":"All unsaved work items must be saved. Do you want to save ${0} item(s)?","labelCurrentQuery":"Current Query: ","errorLoadingTimeFromServer":"Error loading server time","busyEditingWorkItem":"Editing Work Item","titleApprovalDelete":"Delete this approval from the work item","labelDescription":"Description","buttonNew":"New","titleThisIsLinked":"This work item is already linked.","errorInUpdateRefreshTimestamp":"Error in updateRefreshTimestamp: ${0}, ${1}","msgAttachmentAlreadyAdded":"An attachment with the specified file name already exists.\n(${0})","labelListOfWorkItems":"Work Items","titleFindPotentialDuplicates":"Find Potential Duplicates","labelDuplicateOf":"Duplicate Of","labelBytes":"${0} bytes","labelWorkItemSet":"Work Item Set","labelRequired":"* ","msgAnErrorOccured":"An error occured.","errorFetchingSearchResults":"Error running search query","labelApprovalCountRejected":"${0} Rejected","noQueriesFound":"No queries were found for the current selection.","labelProjectAreaAttribute":"Project Area","attributeResolution":"Resolution","msgAttachmentUploadError":"An error occured during file upload.\nThe server or file upload service is not responding,\nor an invalid fully qualified file name was provided.","pageTitleWorkItemSummary":"${0} ${1}: ${2}","labelRevertTypeChange":"Revert Type Change","labelSimpleQuery":"Simple Query","labelNewQueryForMenu":"* [New Query] ${0}","labelTypeFilter":"Type","promptSave":"Save ${0}?","errorFetchingItemTypes":"Error fetching work item types","errorNoDefaultWorkItemType":"The default work item type is not defined. Select a type using the Create Work Item button.","msgQueryNoDefaultQueryFound":"No default query found","msgProjectAreaIsDifferentDetails":"The page displayed has a project area context which determines the scope of certain features (e.g. quick search). Work items in other project areas can be viewed and edited, but some actions will default to the page\'s project area context.","msgLogAttributeUpdateFailureWarning":"*Warning* ${0}: ${1} ${2}","labelCreateItem":"Create Linked ${0}...","msgDropArtifactsDescription":"Drop artifacts here to link them to this work item.","msgAddDuplicateOfLinkDetails":"Click to create a link to the \"Duplicate Of\" work item.","labelDefaultQueryName":"New Query","optionShowAll":"(Show All)","optionPlusMore":"(plus ${0} more)","msgResolutionChangedToDuplicate":"Since a \"Duplicate Of\" link has been added, the resolution has been changed to \"Duplicate\".","operationOpeningNewWorkItem":"Opening New Work Item","msgLogOperationCompleteSuccess":"Operation complete: ${0} item(s) updated.","titleResetWorkItem":"Reset the new work item to the default new state.","titleApprovalRestore":"Restore this deleted approval","msgDropToCreateLink":"Drop artifacts here to add them to this work item as links.","labelCopyNotSupported":"This copy operation is not supported in this browser version","errorFailedToLoadEditableLinkTypes":"Error loading available link types. Adding links is disabled. Contact your project administrator.","ariaLabelLinkType":"Link Type: ${0}","titleAttachmentCancelUpload":"Cancel upload","labelSummary":"Summary: ","titleRequiredMarker":"The value is required.","busyRunningQuery":"Running query...","titleCommentCollapse":"Collapse Comment","labelNewQuery":"* [New Query]","errorRunningQuery":"Error running query","msgLogAttributeUpdateCompleteWithFailures":"Attribute update(s) completed with errors.","dialogTitleSelectServiceProvider2":" - Select Service Provider","errorUnknownKeypressType":"WorkItemEditor#_handleGenericKeypress: unknown keypress type: ${0}","labelDateLastWeek":"Last Week","titleAnUnsavedNewWorkItem":"An unsaved new work item","operationRunningQueryNamed":"Running Query ${0}","dialogTitleSelectPlannedFor2":"- Select Planned For Target","attributeDescription":"Description","labelRationalTeamConcert":"IBM Engineering Workflow Management","errorRunningSavedQuery":"Error running saved query","msgLogAttributeUpdateCompleteSuccess":"Attribute update(s) completed.","labelQuickInformation":"Quick Information","msgConfirmingSaveAll":"All unsaved work items must be saved. Confirming save of ${0} items.","errorStoringInOperationSoCancel":"Error saving ${0}. Manually save or refresh the work item and try again. The operation has been stopped.\nDetails: ${1}","titleShowMostRecentQueryResults":"Show the most recent query results without rerunning it.","labelNoCommentContent":"No comment content.","labelShowTemplate":"Show Template","selectWorkItemWidgetLabelText":"Select the target project area.","buttonPrevious":"Previous","labelListOfUsers":"Users","descriptionNoLinks":"Select a link type to add links to your work item.","labelNewWorkItem":"[New Work Item] ${0}","titleCreateChild":"Create Child Work Item","tabTitleMyQueries":"My Queries","labelLoadingNewItemServiceProviders":"Loading New Item service providers...","msgRefreshAfterGlobalConfigurationChanged":"The global configuration has changed. Refresh to update the work item link context.","headingSharedQueries":"Shared Queries","errorAttachmentServerNotResponding":"File upload failed:\nThe server or file upload service is not responding,\nan invalid fully qualified file name was provided,\nthe session timed out,\nor another error occured.","chooserHeadingPersonal":"My Queries","labelNoSummary":"[No Summary]","typeWorkItemIDWithSummary":"${0} ${1}: ${2}","labelWorkItemsComponent":"Work Items","errorCreatingTab":"Error creating tab: ${0}","errorGettingAttributeValue":"Error getting attribute value: ${0}","pageTitleQuery":"Query: ${0}","promptConfirmRefreshOfUnsavedWorkItems":"Some of the unsaved work items you are editing have changed in the repository. You must refresh these work items before you can save your changes. Refreshing will undo all your editor changes except to a new comment values. Do you want to refresh ${0} unsaved work items now?","msgLogUpdatingRefreshingStart":"Refreshing open work item(s)...","msgLogUpdateComplete":"Update complete: ${0}","msgLogUpdatingRefreshing":"Refreshing Work Item ${0} - Refreshing","buttonSave":"Save","labelIncludeLinkHistory":"Include Link History","labelQuickInformationApproval":"${0}: ${1} (${2} of ${3})","labelSubscriptions":"Subscriptions","msgWelcomeText":"To get started, \x3ca dojoAttachPoint=\'_createWorkItemANCHOR\' href=\'${0}\' title=\'Create a new work item of the default type\'\x3ecreate a new work item\x3c/a\x3e, \x3ca href=\'${1}\' title=\'Create a new query\'\x3ecreate a new query\x3c/a\x3e, \x3ca href=\'${2}\' title=\'Select a query and run it to choose from a set of work items\'\x3eshow queries\x3c/a\x3e or search for a work item.","labelApprovalCumulativeState":"Cumulative State: ${0}","headingApprovals":"Approvals","titleLinkRestore":"Restore this deleted link","labelSearchByKeyword":"Search by Keyword or Work Item Number","titleRunMostRecentQueryResults":"Run the most recent query again to show the latest results.","titleItemRemove":"Remove this item from the list","labelApprovalPending":"Pending","labelRecentlyViewedExcluding":"Recently Viewed Work Items excluding ${0} ${1}:","msgLogFailedUpdating":"Attribute update failed for: ${0}. ${1}","errorFailedToLoadServiceDocument":"Problems loading the service document containing the picker information. ${0}","labelNoAttachments":"No Attachments.","labelNoTemplates":"No Templates.","msgNoSuchWorkItem":"Work Item ${0} does not exist. Search for a different work item number.","ApprovalWidget_Aria_label":"${0} ${1}","tooltipAutoArchivingDisabled":"Automatic archiving of auditable links is disabled. To include deleted links in the work item history, link archiving must be enabled by your Change and Configuration Management server administrator.","msgLogErrorStoring":"Failed to store Work Item ${0}","attributePlannedFor":"Planned For","titleResetTemplate":"Reset the template to it\'s initial state.","dialogTitleConfirmRefreshOfUnsavedWorkItems":"Confirm Refresh Of Unsaved Work Items","titleCreateLinkedItemInProjectArea":"Create linked ${0} in project area ${1}","labelSavedToProjectArea":"Saved: ${0} to project area ${1}","buttonAddLink":"Add Link: ${0}","labelSelectPlannedForAndPressOK":"Select a Planned For value and press OK.","errorRunningPotentialDuplicatesQueryMissingArgument":"Missing argument: Potential Duplicates search must have an itemId, summary or content.","titleAddToThingsList":"Add to ${0} List...","buttonBackToItem":"Back to ${0}","labelLink":"Link","defaultOverviewTabTitle":"Overview","labelSize":"Size","labelNoName":"[No Name]","msgDropArtifactsHeading":"Drop artifacts","errorLoadingProjectAreas":"Error loading project areas","promptConfirmRefreshOfUnsavedWorkItemsCancelled":"Review your unsaved work and copy any information you do not wish to lose, then press refresh on a work item editor to synchronize the work items displayed by the client with the values in the repository.","LinksPresentation_Aria_LinksMenu":"Add links","labelQuery":"Query","dialogTitleSelectWorkItem":"Select Work Item","errorFetchingInOperationSoCancel":"Error refreshing after saving ${0}. Manually save the work item and try again. The operation has been stopped.\nDetails: ${1}","msgSearchResultsOpen":"Search Results for ${0} in Open Work Items","titleCommentExpand":"Expand Comment","msgValueNotValid":"The value is not valid.","msgStartingSaveAllOperation":"Saving ${0} items...","promptUnsavedWorkItems":"You have unsaved work on the Work Items page.","attributeStatus":"Status","msgAttachmentNotLoggedIn":"Log in to add or remove attachments.","tabTitleSharedQueries":"Shared Queries","msgLogProcessingItems":"Processing ${0} items...","labelAttachmentCancelUpload":"Cancel Upload","labelApprovalCountApproved":"${0} Approved","titleCommentSendEmail":"Send an E-mail to the user","titleCreateWorkItemSet":"Create the set of work items specified by the template","errorServerNotResponding":"The server is not responding or a page navigation occurred before an operation completed.\nCheck that your server connection is working and that the server is operational,\nthen try the action again or refresh the page.","msgApprovalCount":"Approvals (${0})","errorPartNotSupportedInSlot":"Part \"${0}\" is not supported in slot \"${1}\". The presentation has been skipped.","labelIn":" in ","pageTitleWorkItems":"Work Items","msgLogErrorRefreshing":"Failed to refresh ${0}","operationRunningQuery":"Running Query","msgResults":"${0} result(s)","errorAttachmentUpload":"Error uploading file: ${0}","buttonCreateWorkItem":"Create Work Item","errorNoWorkItemTypes":"The project area does not have any work item types. The work item cannot be created. Contact your project administrator to add a work item type to the project area.","labelSaved":"Saved: ${0}","msgQueryNotFound":"Query does not exist","labelSearchByQuery":"Search by Query","msgWelcomeToWorkItems":"Welcome to Work Items","dirtyMarker":"*","msgDropToAttach":"Drop to attach to the work item.","labelAllWorkItems":"All Work Items","labelProjectArea":"Project Area","WorkItemEditorBanner_workItemLabel":"${0}: ${1}","labelMove":"Move","savingCreatesTags":"Saving the work item will create the following tags: ${0}","operationRunningDefaultQuery":"Running default query","dialogTitleSelectWorkItems2":" - Select Work Items","titleMoveCopy":"Move or copy this work item to another project area","labelID":"ID","labelNameSummary":"${0}: ${1}","msgInfosMore":"${0} (plus ${1} more, click to view)","labelCopy":"Copy","labelSelectServiceProviderAndPressOK":"Select a Service Provider and press OK to link to a resource.","headingMyQueries":"My Queries","labelNewOfItemType":"[New ${0}] ${1}","labelWorkItemListTypeAttribute":"${0}: ${1}","labelListOfItems":"Items","labelCreatedBy":"Created&nbsp;by","labelNoLinks":"No Links","labelDateHoursAgo":"${0} hours ago","buttonNewComment":"New Comment","labelUnknown":"Unknown","msgSearchResults":"Search Results for ${0}","busyProgress":"Progress","defaultTypeLabel":"Work Item","errorLoadingHistory":"Error loading History.","attributeFoundIn":"Found In","errorCouldNotLoadWorkItem":"Could not load work item. A work item with that number may not exist.","msgResolutionChangedToDuplicateDetails":"Either save the work item as a duplicate or remove the \"Duplicate Of\" link and change the resolution.","labelTemplates":"Templates","titleCreateCopy":"Create Work Item Copy","buttonSet":"Set","labelCreateFromTemplate":"Create from Template","errorLoadingPresentation":"Error loading presentation for editing the work item","buttonAddPrompt":"Add...","errorInvalidFetchSimpleInputSelector":"Invalid fetchSimpleInputSelector: ${0}","labelLoaded":"Loaded: ${0}","errorNoTemplateQuery":"The Create from Template query result cannot be shown. The URL cannot be reloaded. Create work items from a template to view the template creation results.","labelSelectExisting":"Select Existing","promptCloseWorkItemEdit":"You will lose the unsaved changes if you close. Do you want to close?","errorFetchingWorkItemProperties":"Error loading properties for editing the work item","titleFileNameSizeK":"${0} (size: ${1}K)","LinksPresentation_HugeLinkNumber_Message":"Refreshing links...","errorCreatingWorkItemSet":"Error creating work item set from template ${0}. The work items were not created. Details: ${1}","errorUnknownDetails":"An error occurred. Check that your server connection is working and that the server is operational, then try the action again or refresh the page.","errorEditingQuery":"Error editing query","labelDate":"Date","titleAttachmentRestore":"Restore the deleted attachment.","msgWorkItemTypeIsArchived":"This work item type has been archived.","errorLoadingSimpleInfo":"Error loading simple info (${0}) for editing the work item","titleRevertTypeChanage":"Change the type to the original type.","promptAttachmentUploadSizeEmptyConfirm":"The file uploaded is empty (size=0). Do you want to attach the empty file?\nFile name: ${0}","pageTitleShowQueries":"Queries","labelChangeAndConfigurationManagement":"Change and Configuration Management","titleFindingPotentialDuplicates":"Finding potential duplicates...","labelNone":"None","labelType":"Type","titleNotSavedYet":"This work item has not yet been saved.","msgClickToCreate":"Click to create a ${0} or use the drop down to select a type to create.","promptConfirmRefreshOfUnsavedWorkItem":"The unsaved work item you are editing has changed in the repository. You must refresh this work item before you can save your changes. Refreshing will undo all your editor changes except to a new comment value. Do you want to refresh the unsaved work item now?","msgHistoryChangeBy":"${0} (${1})","titleUserNameWithId":"${0} (@${1})","ariaLabelLink":"${0}: ${1}","labelNoDescription":"No Description.","labelMatching":"Matching Work Items:","labelItemCount":"${0} (${1})","labelUnknownError":"Unknown","labelTemplate":"Template","labelListNoItems":"No ${0}.","msgLogUpdatingStoring":"Saving Work Item ${0} - Storing","labelTypeId":"${0} ${1}","labelMore":"More...","busyLoadingWorkItem":"Loading Work Item ${0}...","defaultGenericTabTitlePrefix":"Tab ${0}","busyMoving":"Moving...","labelWorkItemTypes":"Work Item Types","labelDescriptionPlus":"Description ${0}","labelNotAvailable":"Not Available","busyLoadingApprovals":"Loading Approvals","labelDateYesterday":"Yesterday","labelListWorkItem":"${0} ${1}: ${2}","titleRefreshWorkItem":"Refresh the work item values with its saved state.","titleWarningMorePossiblePotentialDuplicates":"Showing ${0} of ${1} results. Click ${2} to show all.","labelUnknownItem":"Unknown Item","dialogTitleSelectMoveCopy":"Move or Copy ${0}","labelListOfTeamAreas":"Team Areas","busySaving":"Saving...","labelCurrentWorkItem":"Current Work Item: ","labelSelectNew":"Create New","errorRunningDefaultQuery":"Error running default query","chooserHeadingProject":"Predefined Queries","titleCopyIdAndSummary":"Copy ID and Summary","headingUnsavedWork":"Unsaved Work","msgLogOperationEnded":"Processing ended.","attributePriority":"Priority","labelEnterSearchString":"Work Item Number or Words Contained in the Text. Use quotes for a phrase search:","labelQueryComposing":"Composing query \x3cb\x3e${0}\x3c/b\x3e...","labelValue":"${0}: ","WorkItemOverview_Aria_leftDetailsTable":"First details group"};

;dojo.provide("com.ibm.team.workitem.web.internal.model.types.LegacyModelBinding");






dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.jdojo;
var _3=_2.lang.Runtime;
var _4=_2.util.Assert;
var _5=dojo.declare("com.ibm.team.workitem.web.internal.model.types.LegacyModelBinding",null,{"-chains-":{constructor:"manual"},fromLegacy2:function(_6,_7){
if(_5._isGenericUnassigned(_6)){
return _7;
}
return this.fromLegacy(_6);
},fromLegacy:function(_8){
_4.isTrue(false,"Abstract method 'fromLegacy' invoked");
},toLegacy:function(_9){
_4.isTrue(false,"Abstract method 'toLegacy' invoked");
},toLegacyId:function(_a){
var _b=this.toLegacy(_a);
return _b.id;
},_getIconUrl:function(_c){
return _c==null||_c.indexOf(_5.EMPTY_ICON_SUFFIX,_c.length-_5.EMPTY_ICON_SUFFIX.length)!==-1?null:_c;
}});
_5.EMPTY_ICON_SUFFIX="com.ibm.team.workitem.common/icons/obj16/type_none.gif";
_5._isGenericUnassigned=function(_d){
var _e=_d;
return _3.getProperties(_e).length===2&&("label" in _e)&&_e["label"]===_1.labelUnassigned&&(("_eQualifiedClassName" in _e)||(("id" in _e)&&_e["id"]===""));
};
})();


;dojo.provide("com.ibm.jdojox.util.JDojoX");


(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=dojo.declare("com.ibm.jdojox.util.JDojoX",null,{"-chains-":{constructor:"manual"}});
_2.isEqual=function(o1,o2){
if(_1.implementsInterface(o1,"com.ibm.jdojox.util.IEqualable")){
return o1.equals(o2);
}else{
if(dojo.isArray(o1)){
return _2._equalArrays(o1,o2);
}else{
if(o1 instanceof Date){
return _2._equalDates(o1,o2);
}else{
if(_2._isPlainObject(o1)){
return _2._equalPlainObjects(o1,o2);
}
}
}
}
return o1===o2;
};
_2._equalArrays=function(_3,_4){
if(!dojo.isArray(_3)||!dojo.isArray(_4)){
return false;
}
var a1=_3;
var a2=_4;
if(a1.length!==a2.length){
return false;
}
var _5=true;
for(var i=0;i<a1.length;i++){
_5=_5&&_2.isEqual(a1[i],a2[i]);
if(!_5){
break;
}
}
return _5;
};
_2._equalDates=function(_6,_7){
if(!(_6 instanceof Date)){
return false;
}
if(!(_7 instanceof Date)){
return false;
}
var d1=_6;
var d2=_7;
return d1.getTime()===d2.getTime();
};
_2._equalPlainObjects=function(_8,_9){
if(!_2._isPlainObject(_8)||!_2._isPlainObject(_9)){
return false;
}
var _a=_1.getProperties(_8);
var _b=_1.getProperties(_9);
_a.sort();
_b.sort();
if(!_2.isEqual(_a,_b)){
return false;
}
var _c=true;
var _d=_a;
var _e=_d.length;
for(var _f=0;_f<_e;_f++){
var _10=_d[_f];
_c=_c&&_2.isEqual(_8[_10],_9[_10]);
if(!_c){
break;
}
}
return _c;
};
_2._isPlainObject=function(_11){
return dojo.indexOf(_1.getProperties(_11),"declaredClass")<0&&dojo.isObject(_11)&&!dojo.isFunction(_11);
};
})();


;dojo.provide("com.ibm.team.workitem.web.model.types.AttributeType");




(function(){
var _1=com.ibm.jdojo.util.Assert;
var _2=com.ibm.jdojox.util.JDojoX;
var _3=dojo.declare("com.ibm.team.workitem.web.model.types.AttributeType",null,{"-chains-":{constructor:"manual"},constructor:function(_4,_5,_6,_7){
if(!(_4!=null)){
_1.fail("typeId != null","AttributeType:30");
}
this._typeId=_4;
if(!(_7!=null)){
_1.fail("legacyModelBinding != null","AttributeType:31");
}
this._legacyModelBinding=_7;
if(!(_5!=null)){
_1.fail("labelProvider != null","AttributeType:32");
}
this._labelProvider=_5;
this._valueResolver=_6;
},getTypeId:function(){
return this._typeId;
},getIdentifier:function(){
return this.getTypeId();
},getLabelProvider:function(){
return this._labelProvider;
},getNullValue:function(){
return null;
},compareValue:function(_8,_9){
return _2.isEqual(_8,_9);
},copy:function(_a){
return _a;
},getScriptValueResolver:function(){
return this._valueResolver;
},getLegacyModelBinding:function(){
return this._legacyModelBinding;
},$interfaces:{"com.ibm.jdojo.util.IMappable":true}});
_3.UNASSIGNED_ITEM_ID="__Unassigned__";
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.BooleanAttributeType");










(function(){
var _1=com.ibm.jdojo.lang.JavaScriptException;
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.model.Label;
var _4=_2.workitem.web;
var _5=_4.client.internal.ScriptValueResolver;
var _6=_4.internal.model.types.LegacyModelBinding;
var _7=_4.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.BooleanAttributeType",_7,{constructor:function(_8){
this.inherited(arguments,[_8,new _9(),new _a(),new _b()]);
}});
var _9=dojo.declare("com.ibm.team.workitem.web.internal.model.types.BooleanAttributeType.BooleanLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_c){
return _c?new _3("true"):new _3("false");
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _a=dojo.declare("com.ibm.team.workitem.web.internal.model.types.BooleanAttributeType.BooleanResolver",_5,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_d,_e){
return dojo.isString(_d)?this._computeFromString(_d):typeof _d=="boolean"?_d:null;
},_getNullValue:function(){
return false;
},_computeFromString:function(_f){
return _f==="true"?true:_f==="false"?false:null;
}});
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.BooleanAttributeType.BooleanBinding",_6,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_10){
var _11=_10;
if(_11.id!=null){
if(typeof _11.id==="boolean"){
return _10.id;
}else{
if(_10.id!=="true"&&_10.id!=="false"){
throw new _1("Boolean can be true or false. Cannot interpret unknown value: "+_10.id);
}
return _10.id==="true";
}
}else{
if(typeof _10==="boolean"){
return _10;
}
}
console.debug("[Value Conversion]: could not interpret "+_10+" as a boolean. Returning as false.");
return false;
},toLegacy:function(_12){
var _13={};
_13.id=_12;
_13.label=String(_12);
return _13;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.AbstractItemAttributeType");








dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.jdojo.util.Assert;
var _3=com.ibm.team.workitem.web;
var _4=_3.internal.model.types.LegacyModelBinding;
var _5=_3.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.AbstractItemAttributeType",_5,{constructor:function(_6,_7,_8,_9){
this.inherited(arguments,[_6,_7,_8,_9]);
}});
dojo.declare("com.ibm.team.workitem.web.internal.model.types.AbstractItemAttributeType.AbstractItemBinding",_4,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_a){
if(_4._isGenericUnassigned(_a)){
return this._createUnassignedItem();
}
return this._createItem(_a);
},toLegacy:function(_b){
if(_b!=null){
if(_5.UNASSIGNED_ITEM_ID===_b.getItemId()){
return this._createUnassignedDto();
}else{
return this._createDto(_b);
}
}
console.debug("[Value Conversion]: could not interpret "+_b+" as an item. Returning as object.");
return _b;
},_createItem:function(_c){
_2.isTrue(false,"Abstract method '_createItem' invoked");
},_createUnassignedItem:function(){
_2.isTrue(false,"Abstract method '_createUnassignedItem' invoked");
},_createUnassignedDto:function(){
var _d={};
_d.id="";
_d.label=_1.labelUnassigned;
return _d;
},_createDto:function(_e){
var _f={};
_f.id=_e.getItemId();
_f.label=_e.getLabel();
_f.iconUrl=_e.getIconUrl();
return _f;
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.api.model.ItemHandle");




(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.jdojox.util.JDojoX;
dojo.declare("com.ibm.team.rtc.foundation.web.api.model.ItemHandle",null,{"-chains-":{constructor:"manual"},constructor:function(_3,_4){
if(_3==null||_3===""){
console.warn("This should not happen - Item Id should not be null or empty ");
}
this._itemId=_3;
this._stateId=_4!=null?_4:null;
},getItemId:function(){
return this._itemId;
},getStateId:function(){
return this._stateId;
},sameItemId:function(_5){
return _5!=null&&_2.isEqual(this._itemId,_5.getItemId());
},equals:function(o){
if(o==null){
return false;
}
if(!(_1.implementsInterface(o,"com.ibm.team.rtc.foundation.api.common.model.IItemHandle"))){
return false;
}
var _6=o;
if(!this.sameItemId(_6)){
return false;
}
return _2.isEqual(this._stateId,_6.getStateId());
},$interfaces:{"com.ibm.jdojox.util.IEqualable":true,"com.ibm.team.rtc.foundation.api.common.model.IItemHandle":true}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.api.model.Item");






(function(){
var _1=com.ibm.jdojo.util.Assert;
var _2=com.ibm.jdojox.util.IllegalArgumentException;
var _3=com.ibm.team.rtc.foundation.web.api.model.ItemHandle;
var _4=dojo.declare("com.ibm.team.rtc.foundation.web.api.model.Item",_3,{constructor:function(_5,_6){
this.inherited(arguments,[_5,_6]);
this._isNew=false;
this._isNull=false;
},getLabel:function(){
return this._label;
},getIconUrl:function(){
return this._iconUrl;
},getLocation:function(){
return this._location;
},getUrl:function(){
if(this.isNew()||this._location==null){
return null;
}
if(this._location.namedUri!=null){
return this._location.namedUri;
}
return this._location.locationUri;
},isNew:function(){
return this._isNew;
},isNull:function(){
return this._isNull;
},equals:function(o){
if(!(o instanceof _4)){
return false;
}
if(this.isNew()){
return this===o;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.rtc.foundation.api.common.model.IItem":true}});
var _7=dojo.declare("com.ibm.team.rtc.foundation.web.api.model.Item.AbstractItemBuilder",null,{"-chains-":{constructor:"manual"},constructor:function(_8,_9){
this._item=this._create(_8,_9);
},label:function(_a){
this._item._label=_a;
return this;
},iconUrl:function(_b){
this._item._iconUrl=_b;
return this;
},location:function(_c){
this._item._location=_c;
return this;
},isNull:function(_d){
this._item._isNull=_d;
return this;
},build:function(){
this._check();
return this._item;
},_check:function(){
if(!this._item.isNew()&&this._isNullOrEmpty(this._item.getLabel())){
throw new _2("Label is mandatory while building an Item");
}
},_isNullOrEmpty:function(_e){
return _e==null||_e==="";
},_create:function(_f,_10){
_1.isTrue(false,"Abstract method '_create' invoked");
}});
dojo.declare("com.ibm.team.rtc.foundation.web.api.model.Item.ItemBuilder",_7,{constructor:function(_11,_12){
this.inherited(arguments,[_11,_12]);
},_create:function(_13,_14){
return new _4(_13,_14);
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler");


(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=dojo.declare("com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler",null,{"-chains-":{constructor:"manual"},constructor:function(_3){
var _4=Array.prototype.slice.call(arguments,1);
this.fScanner=new _5(_4!=null&&_4.length>0?_4:[new _6(_3),new _7(),new _8()]);
},beginDocument:function(){
this.fXMLText="";
},text:function(_9){
this.fXMLText=this.fXMLText.concat(this.fScanner.escapeText(_9));
},getHTML:function(){
return this.fXMLText;
}});
var _5=dojo.declare("com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.Scanner",null,{"-chains-":{constructor:"manual"},_offSet:0,constructor:function(_a){
this._rules=_a;
},read:function(){
try{
return this._offSet<this._text.length?this._text.charAt(this._offSet):_5.EOF;
}
finally{
++this._offSet;
}
},unread:function(){
--this._offSet;
},escapeText:function(_b){
this._offSet=0;
this._text=_b;
var _c=_2.EMPTY_STRING;
while(true){
var _d=this._getReplacement();
if(_d!=null){
_c=_c.concat(_d);
}else{
var ch=this.read();
if(ch===_5.EOF){
break;
}
_c=_c.concat(String(ch));
}
}
return _c;
},_getReplacement:function(){
var _e=this._rules;
var _f=_e.length;
for(var _10=0;_10<_f;_10++){
var _11=_e[_10];
var _12=_11.evaluate(this);
if(_12!=null){
return _12;
}
}
return null;
}});
_1.declareInterface("com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.IRule");
var _6=dojo.declare("com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.LineDelimiterRule",null,{"-chains-":{constructor:"manual"},constructor:function(_13){
this._breakTag=_13?_6.CANONICAL_BREAK_TAG:_6.BREAK_TAG;
},evaluate:function(_14){
var ch=_14.read();
if(ch==="\n"){
return this._breakTag;
}
if(ch==="\r"){
ch=_14.read();
if(ch!=="\n"){
_14.unread();
}
return this._breakTag;
}
_14.unread();
return null;
},$interfaces:{"com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.IRule":true}});
var _7=dojo.declare("com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.SpaceRule",null,{"-chains-":{constructor:"manual"},evaluate:function(_15){
var ch=_15.read();
if(ch===" "){
ch=_15.read();
_15.unread();
if(ch===" "){
return _7.ENTITY_REF_NBSP;
}
}
_15.unread();
return null;
},$interfaces:{"com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.IRule":true}});
var _8=dojo.declare("com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.EntityRule",null,{"-chains-":{constructor:"manual"},evaluate:function(_16){
var ch=_16.read();
var _17=_8.CHARS.indexOf(ch);
if(_17>-1){
return _8.ENTITIES[_17];
}
_16.unread();
return null;
},$interfaces:{"com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler.IRule":true}});
_2.EMPTY_STRING="";
_5.EOF=-1;
_6.BREAK_TAG="<br/>";
_6.CANONICAL_BREAK_TAG="<br></br>";
_7.ENTITY_REF_NBSP="&nbsp;";
_8.CHARS="<>&^~\"\t";
_8.ENTITIES=["&lt;","&gt;","&amp;","&circ;","&tilde;","&quot;","&#09;"];
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.text.XMLString");


(function(){
var _1=com.ibm.team.rtc.foundation.web.text.HTMLOutputHandler;
var _2=dojo.declare("com.ibm.team.rtc.foundation.web.text.XMLString",null,{"-chains-":{constructor:"manual"},constructor:function(_3){
this._xmlString=_3;
},getXMLText:function(){
return this._xmlString;
},length:function(){
return this._xmlString.length;
},concat:function(_4){
return _2.createFromXMLText(this.getXMLText()+_4.getXMLText());
},equals:function(_5){
if(this===_5){
return true;
}
if(_5==null){
return false;
}
if(!(_5 instanceof _2)){
return false;
}
return this._xmlString===_5._xmlString;
},$interfaces:{"com.ibm.jdojox.util.IEqualable":true}});
_2.createFromPlainText=function(_6,_7){
var _8=_7!=null?_7:new _1(false);
_8.beginDocument();
_8.text(_6);
return new _2(_8.getHTML());
};
_2.createFromXMLText=function(_9){
return new _2(_9);
};
_2.EMPTY=_2.createFromXMLText("");
})();


;dojo.provide("com.ibm.team.workitem.web.model.WorkItem");






(function(){
var _1=com.ibm.jdojox.util.IllegalArgumentException;
var _2=com.ibm.team.rtc.foundation.web;
var _3=_2.api.model.Item;
var _4=_3.AbstractItemBuilder;
var _5=_2.text.XMLString;
var _6=dojo.declare("com.ibm.team.workitem.web.model.WorkItem",_3,{constructor:function(_7,_8){
this.inherited(arguments,[_7,_8]);
this._values={};
},_set:function(_9,_a){
this._values[_9]=_a;
},_get:function(_b){
return this._values[_b];
},_isValueSet:function(_c){
return (_c in this._values);
},getValue:function(_d){
return this._get(_d);
},getId:function(){
return this._isValueSet("id")?this._get("id"):0;
},getType:function(){
return this._get("workItemType");
},getSummary:function(){
return this._get("summary");
},getPlannedFor:function(){
return this._get("target");
},equals:function(o){
if(o==null||!(o instanceof _6)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.workitem.api.common.IWorkItem":true}});
dojo.declare("com.ibm.team.workitem.web.model.WorkItem.WorkItemBuilder",_4,{constructor:function(_e,_f){
this.inherited(arguments,[_e,_f]);
},_create:function(_10,_11){
return new _6(_10,_11);
},id:function(id){
this._item._set("id",id);
return this;
},summary:function(_12){
this._item._set("summary",_12);
return this;
},type:function(_13){
this._item._set("workItemType",_13);
return this;
},plannedFor:function(_14){
this._item._set("target",_14);
return this;
},url:function(url){
this._item._location={locationUri:null,namedUri:url};
return this;
},isNew:function(_15){
this._item._isNew=_15;
return this;
},_check:function(){
if(this._item._isNew){
if(this._item._isValueSet("id")&&this._item.getId()>0){
throw new _1("Id should not be set for a new work item");
}
if(this._item.getType()==null){
throw new _1("Type should be set for a new work item");
}
}else{
if(!this._item._isValueSet("id")||this._item.getId()<=0){
throw new _1("Id should be set for an existing work item");
}
if(this._item.getSummary()==null){
throw new _1("Summary should be set for an existing work item");
}
}
},build:function(){
this._check();
if(this._item._isNew){
this._item._set("id",_6.getNextNewId());
if(this._item.getSummary()==null){
this._item._set("summary",_5.EMPTY);
}
}
if(this._item._label==null){
this._item._label=(this._item.getId()).toString()+": "+this._item.getSummary().getXMLText();
}
if(this._item.getType()!=null){
this._item._iconUrl=this._item.getType().getIconUrl();
}
return this._item;
}});
_6._lastNewId=0;
_6.getNextNewId=function(){
_6._lastNewId=_6._lastNewId-1;
return _6._lastNewId;
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.ItemAttributeType");














dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web;
var _4=_3.api.model.Item.ItemBuilder;
var _5=_3.model.Label;
var _6=_2.workitem.web;
var _7=_6.client.internal.ScriptValueResolver;
var _8=_6.internal.model.types.AbstractItemAttributeType;
var _9=_8.AbstractItemBinding;
var _a=_6.model;
var _b=_a.WorkItem;
var _c=_a.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.ItemAttributeType",_8,{constructor:function(_d,_e,_f){
this.inherited(arguments,[_d,new _10(),new _11(),new _12(_e.getLegacyModelBinding(),_f.getLegacyModelBinding())]);
}});
var _10=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ItemAttributeType.ItemLabelProvider",null,{"-chains-":{constructor:"manual"},constructor:function(_13){
this._lazyFetch=_13;
},getLabel:function(_14){
return new _5(_14.getLabel()).iconUrl(_14.getIconUrl()).url(_14.getUrl()).lazyFetch(this._lazyFetch);
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _11=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ItemAttributeType.ItemResolver",_7,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_15,_16){
if(dojo.isString(_15)){
for(var $it=_16.iterator();$it.hasNext();){
var _17=$it.next();
if(_15===_17.getItemId()){
return _17;
}
}
}
return null;
}});
var _12=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ItemAttributeType.ItemBinding",_9,{constructor:function(_18,_19){
this.inherited(arguments,[]);
this._workItemBinding=_18;
this._contributorBinding=_19;
},fromLegacy:function(_1a){
if(_1a["_eQualifiedClassName"]==="com.ibm.team.workitem.rest.dto:WorkItemDTO"){
return this._workItemBinding.fromLegacy(_1a);
}
if(_1a["_eQualifiedClassName"]==="com.ibm.team.workitem.rest.dto:ContributorDTO"){
return this._contributorBinding.fromLegacy(_1a);
}
return this.inherited("fromLegacy",arguments,[_1a]);
},_createItem:function(_1b){
var dto=_1b;
if(dto.id!=null&&dto.id!==""){
return new _4(dto.id).label(dto.label).iconUrl(this._getIconUrl(dto.iconUrl)).build();
}
return this._createUnassignedItem();
},_createUnassignedItem:function(){
return new _4(_c.UNASSIGNED_ITEM_ID).label(_1.labelUnassigned).isNull(true).build();
},toLegacy:function(_1c){
if(_1c instanceof _b){
return this._workItemBinding.toLegacy(_1c);
}
return this.inherited("toLegacy",arguments,[_1c]);
},toLegacyId:function(_1d){
if(_1d instanceof _b){
return this._workItemBinding.toLegacyId(_1d);
}
return this.inherited("toLegacyId",arguments,[_1d]);
}});
})();


;dojo.provide("com.ibm.team.workitem.web.model.Category");


(function(){
var _1=com.ibm.team.rtc.foundation.web.api.model.Item;
var _2=_1.AbstractItemBuilder;
var _3=dojo.declare("com.ibm.team.workitem.web.model.Category",_1,{constructor:function(_4,_5){
this.inherited(arguments,[_4,_5]);
},getId:function(){
return this._id;
},getParentId:function(){
return this._parentId;
},equals:function(o){
if(o==null||!(o instanceof _3)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.workitem.api.common.ICategory":true}});
dojo.declare("com.ibm.team.workitem.web.model.Category.CategoryBuilder",_2,{constructor:function(_6,_7){
this.inherited(arguments,[_6,_7]);
},_create:function(_8,_9){
return new _3(_8,_9);
},id:function(id){
this._item._id=id;
return this;
},parentId:function(_a){
this._item._parentId=_a;
return this;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.CategoryAttributeType");








(function(){
var _1=com.ibm.team.workitem.web;
var _2=_1.internal.model.types;
var _3=_2.AbstractItemAttributeType;
var _4=_2.ItemAttributeType;
var _5=_4.ItemLabelProvider;
var _6=_4.ItemResolver;
var _7=_2.LegacyModelBinding;
var _8=_1.model.Category.CategoryBuilder;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.CategoryAttributeType",_3,{constructor:function(_9){
this.inherited(arguments,[_9,new _5(),new _6(),new _a()]);
}});
var _a=dojo.declare("com.ibm.team.workitem.web.internal.model.types.CategoryAttributeType.CategoryBinding",_7,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_b){
var _c;
if(_b["_eQualifiedClassName"]==="com.ibm.team.workitem.rest.dto:WorkItemCategoryDTO"){
var _d=_b;
var _e=_a._getParentId(_a._normalizePath(_d.categoryId));
var id=_a._getId(_a._normalizePath(_d.categoryId));
_c=new _8(_d.itemId).parentId(_e).id(id.length>0?id:_d.itemId).label(this._normalizeLabel(_d.name)).build();
}else{
if(_b["_eQualifiedClassName"]==="com.ibm.team.workitem.rest.dto:CategoryDTO"){
var _d=_b;
var _e=_a._getParentId(_d.path);
var id=_a._getId(_d.path);
_c=new _8(_d.id).parentId(_e).id(id.length>0?id:_d.id).label(this._normalizeLabel(_d.label)).build();
}else{
var _d=_b;
var _e=_a._getParentId(_d.arguments);
var id=_a._getId(_d.arguments);
_c=new _8(_d.id).parentId(_e).id(id.length>0?id:_d.id).label(this._normalizeLabel(_d.label)).build();
}
}
return _c;
},toLegacy:function(_f){
var _10=_f;
var _11={};
_11.id=_10.getItemId();
_11.label=_10.getLabel();
_11.path=this._toPath(_10);
return _11;
},_normalizeLabel:function(_12){
return _12!=null?_12.replace(new RegExp("^\\s+"),""):_12;
},_toPath:function(_13){
var _14=_13.getId();
if(_13.getParentId()!=null&&_13.getParentId().length>0){
_14=_13.getParentId()+"/"+_14;
}
return _14;
}});
_a._normalizePath=function(_15){
if(_15==null){
return "";
}
if(_15.indexOf("/")===-1){
return _15;
}
var _16=_15.slice(1,_15.length-1);
return _16.replace(new RegExp("^[^/]+/"),"");
};
_a._getParentId=function(_17){
if(_17==null||_17.indexOf("/")===-1){
return "";
}
return _17.substring(0,_17.lastIndexOf("/"));
};
_a._getId=function(_18){
return _18==null?"":_18;
};
})();


;dojo.provide("com.ibm.jdojox.util.IllegalStateException");


(function(){
var _1=com.ibm.jdojo.lang.RuntimeException;
dojo.declare("com.ibm.jdojox.util.IllegalStateException",_1,{constructor:function(_2){
this.inherited(arguments,[_2]);
}});
})();


;dojo.provide("com.ibm.jdojox.util.ArrayList");






(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.jdojox.util;
var _3=_2.IllegalStateException;
var _4=_2.JDojoX;
dojo.declare("com.ibm.jdojox.util.ArrayList",null,{"-chains-":{constructor:"manual"},constructor:function(_5){
this._contents=[];
if(_5!=null){
var _6=_5;
var _7=_6.length;
for(var _8=0;_8<_7;_8++){
var e=_6[_8];
this.add(e);
}
}
},add:function(_9){
this._contents.push(_9);
return this;
},contains:function(_a){
return this.indexOf(_a)>-1;
},containsAll:function(_b){
var _c=true;
for(var _d=_b.iterator();_d.hasNext();){
var _e=_d.next();
_c=_c&&this.contains(_e);
}
return _c;
},isEmpty:function(){
return this.size()===0;
},size:function(){
return this._contents.length;
},toArray:function(){
return this._contents.slice(0);
},iterator:function(){
return new _f(this);
},at:function(_10){
this._rangeCheck(_10,false);
return this._contents[_10];
},addAt:function(_11,_12){
this._rangeCheck(_11,true);
this._contents.splice(_11,0,_12);
return this;
},addAllAt:function(_13,_14){
this._rangeCheck(_13,true);
var it=_14.iterator();
var i=_13;
while(it.hasNext()){
this.addAt(i++,it.next());
}
return this;
},removeAt:function(_15){
this._rangeCheck(_15,false);
var _16=this._contents.splice(_15,1);
return _16[0];
},indexOf:function(_17){
var _18=0;
var _19=this._contents;
var _1a=_19.length;
for(var _1b=0;_1b<_1a;_1b++){
var e=_19[_1b];
if(_4.isEqual(e,_17)){
return _18;
}
_18++;
}
return -1;
},addAll:function(_1c){
var it=_1c.iterator();
while(it.hasNext()){
this.add(it.next());
}
return this;
},clear:function(){
this._contents=[];
return this;
},remove:function(_1d){
var _1e=this.indexOf(_1d);
if(_1e>-1){
this.removeAt(_1e);
}
return this;
},removeAll:function(_1f){
var it=_1f.iterator();
while(it.hasNext()){
var _20=this.indexOf(it.next());
if(_20>-1){
this.removeAt(_20);
}
}
return this;
},_rangeCheck:function(_21,_22){
if(_21<0){
throw new _3("Index cannot be smaller than 0");
}
if(_22&&_21>this.size()){
throw new _3("Index cannot be bigger than the size of the collection");
}
if(!_22&&_21>this.size()-1){
throw new _3("Index cannot be bigger than the index of the last element (size - 1)");
}
},equals:function(_23){
if(this===_23){
return true;
}
if(_1.implementsInterface(_23,"com.ibm.jdojox.util.IList")){
var _24=_23;
if(_24.size()!==this.size()){
return false;
}
var it1=this.iterator(),it2=_24.iterator();
while(it1.hasNext()){
var e1=it1.next(),e2=it2.next();
if(!(e1==null?e2==null:_4.isEqual(e1,e2))){
return false;
}
}
return true;
}
return false;
},$interfaces:{"com.ibm.jdojox.util.ICollection":true,"com.ibm.jdojox.util.IEqualable":true,"com.ibm.jdojox.util.IIterable":true,"com.ibm.jdojox.util.IList":true}});
var _f=dojo.declare("com.ibm.jdojox.util.ArrayList.Iterator",null,{"-chains-":{constructor:"manual"},constructor:function(_25){
this._curIndex=-1;
this._list=_25;
},hasNext:function(){
return this._curIndex<this._list.size()-1;
},next:function(){
if(!this.hasNext()){
throw new _3("There are no next element in the list");
}
this._curIndex++;
this._removable=true;
return this._list.at(this._curIndex);
},remove:function(){
if(!this._removable){
throw new _3("next() was not called before remove()");
}
this._list.removeAt(this._curIndex);
this._removable=false;
this._curIndex--;
},$interfaces:{"com.ibm.jdojox.util.IIterator":true}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.api.model.Contributor");








(function(){
var _1=com.ibm.jdojox.util.IllegalArgumentException;
var _2=com.ibm.team;
var _3=_2.repository.web;
var _4=_3.client.session;
var _5=_3.transport.TeamServerClient;
var _6=_2.rtc.foundation.web.api.model.Item;
var _7=_6.AbstractItemBuilder;
var _8=dojo.declare("com.ibm.team.rtc.foundation.web.api.model.Contributor",_6,{constructor:function(_9,_a){
this.inherited(arguments,[_9,_a]);
this._isArchived=false;
},getUserId:function(){
return this._userId;
},getImageUrl:function(){
return this._imageUrl;
},getEmailAddress:function(){
return this._emailAddress;
},isArchived:function(){
return this._isArchived;
},equals:function(o){
if(o==null||!(o instanceof _8)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.rtc.foundation.api.common.model.IContributor":true}});
var _b=dojo.declare("com.ibm.team.rtc.foundation.web.api.model.Contributor.ContributorBuilder",_7,{constructor:function(_c,_d){
this.inherited(arguments,[_c,_d]);
if(_d!=null){
console.warn("stateId has not been adopted to contributor items. Adopting it for one place and not for others might cause equality checks to fail, affecting list operations like remove and contains");
}
},userId:function(_e){
this._item._userId=_e;
return this;
},imageUrl:function(_f){
this._item._imageUrl=_f;
return this;
},emailAddress:function(_10){
this._item._emailAddress=_10;
return this;
},isArchived:function(_11){
this._item._isArchived=_11;
return this;
},_create:function(_12,_13){
return new _8(_12,_13);
},_check:function(){
if(this._item.isNull()&&this._item.getItemId()!=="_YNh4MOlsEdq4xpiOKg5hvA"){
throw new _1("Null contributor should always have Unassigned item id - "+"_YNh4MOlsEdq4xpiOKg5hvA");
}
this.inherited("_check",arguments,[]);
},build:function(){
if(this._item.getItemId()==="_YNh4MOlsEdq4xpiOKg5hvA"){
this._item._isNull=true;
}
this._item._imageUrl=this._item._imageUrl!=null?this._item._imageUrl:_5._getServicePrefix()+_8.MEMBER_PHOTO_SERVICE+"?itemId="+this._item.getItemId();
return this.inherited("build",arguments,[]);
}});
_8._AUTHENTICATED_CONTRIBUTOR_=null;
_8.MEMBER_PHOTO_SERVICE="com.ibm.team.rtc.common.service.IMemberPhotoService";
_8.getAuthenticatedContributor=function(){
if(_8._AUTHENTICATED_CONTRIBUTOR_==null){
var _14=_4.getAuthenticatedContributor();
_8._AUTHENTICATED_CONTRIBUTOR_=new _b(_14.itemId).userId(_14.userId).emailAddress(_14.emailAddress).isArchived(_14.archived).label(_14.name).location({locationUri:_4.getAuthenticatedContributorUri(),namedUri:_4.getAuthenticatedContributorUri()}).build();
}
return _8._AUTHENTICATED_CONTRIBUTOR_;
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.util.XMLStringNormalizer");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.internal.util.XMLStringNormalizer",null,{"-chains-":{constructor:"manual"}});
_1.REGEX_SPAN_TAG_FOR_BOOTKMARKS=new RegExp("<span id=\"cke_bm_[a-zA-Z0-9]+\" style=\"display:none\">&nbsp;<\\/span>","g");
_1.removeSpanTagsCreatedDuringBookmarkCreation=function(_2){
return _2.replace(_1.REGEX_SPAN_TAG_FOR_BOOTKMARKS,"");
};
_1.EMPTY_STRING="";
_1.REGEX_ALL_EMPTY_TAGS=new RegExp("\\s*<\\s*(\\s*\\w+)\\s*><\\s*/\\1\\s*>|\\s*<\\s*\\w+\\s*/\\s*>","g");
_1.REGEX_LONG_EMPTY_TAGS=new RegExp("\\s*<\\s*(\\w+)\\s*><\\s*/\\1\\s*>","g");
_1.removeAllEmptyTags=function(_3){
return _1.replaceIncludingNested(_3,_1.REGEX_ALL_EMPTY_TAGS,_1.EMPTY_STRING);
};
_1.removeLongEmptyTags=function(_4){
return _1.replaceIncludingNested(_4,_1.REGEX_LONG_EMPTY_TAGS,_1.EMPTY_STRING);
};
_1.replaceIncludingNested=function(_5,_6,_7){
var _8;
var _9=_5;
var _a=_9.length;
do{
_8=_a;
_9=_1.replace(_9,_6,_7);
_a=_9.length;
}while(_8>_a);
return _9;
};
_1.replace=function(_b,_c,_d){
return _b.replace(_c,_d);
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.Comment");








(function(){
var _1=com.ibm.jdojox.util.IllegalArgumentException;
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web;
var _4=_3.api.model.Contributor;
var _5=_3.text.XMLString;
var _6=_2.workitem.web.internal.util.XMLStringNormalizer;
var _7=dojo.declare("com.ibm.team.workitem.web.internal.model.Comment",null,{"-chains-":{constructor:"manual"},constructor:function(){
this._isNew=true;
},getContent:function(){
return this._content;
},getNormalizedContentXMLText:function(){
return this._normalized(this.getContent());
},getCreationDate:function(){
return this._creationDate;
},getCreator:function(){
return this._creator;
},isNew:function(){
return this._isNew;
},equals:function(o){
if(o==null||!(o instanceof _7)){
return false;
}
var _8=o;
return this.isNew()?this._isNewCommentEqual(_8):this._isCommentEqual(_8);
},_isNewCommentEqual:function(_9){
return _9.isNew()&&this._normalized(this.getContent())===this._normalized(_9.getContent());
},_isCommentEqual:function(_a){
return this._normalized(this.getContent())===this._normalized(_a.getContent())&&this.getCreationDate().getTime()===_a.getCreationDate().getTime()&&this.getCreator().getItemId()===_a.getCreator().getItemId();
},_normalized:function(_b){
var _c=_b.getXMLText();
_c=_6.removeSpanTagsCreatedDuringBookmarkCreation(_c);
_c=_6.removeLongEmptyTags(_c);
_c=_c.replace(_7.WHITE_SPACE,"");
return _c;
},$interfaces:{"com.ibm.jdojox.util.IEqualable":true}});
dojo.declare("com.ibm.team.workitem.web.internal.model.Comment.CommentBuilder",null,{"-chains-":{constructor:"manual"},constructor:function(){
this._comment=new _7();
},content:function(_d){
this._comment._content=_d;
return this;
},creator:function(_e){
this._comment._creator=_e;
return this;
},date:function(_f){
if(_f==null){
_f=new Date();
}
this._comment._creationDate=_f;
return this;
},isNew:function(_10){
this._comment._isNew=_10;
return this;
},build:function(){
if(this._comment._isNew){
if(this._comment._content==null){
this._comment._content=_5.EMPTY;
}
if(this._comment._creator==null){
this._comment._creator=_4.getAuthenticatedContributor();
}
if(this._comment._creationDate==null){
this._comment._creationDate=new Date();
}
}
if(this._comment._content==null){
throw new _1("Content of existing comment should not be null");
}
if(this._comment._creator==null){
throw new _1("Creator of existing comment should not be null");
}
if(this._comment._creationDate==null){
throw new _1("Creation date of existing comment should not be null");
}
return this._comment;
}});
_7.WHITE_SPACE=/\s/g;
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.ListAttributeType");










(function(){
var _1=com.ibm.jdojo.util.Assert;
var _2=com.ibm.jdojox.util.ArrayList;
var _3=com.ibm.team;
var _4=_3.rtc.foundation.web.model.Label;
var _5=_3.workitem.web;
var _6=_5.internal.model.types.LegacyModelBinding;
var _7=_5.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.ListAttributeType",_7,{constructor:function(_8,_9,_a,_b,_c){
this.inherited(arguments,[_8,_a!=null?_a:new _d(_9.getLabelProvider()),_b,_c!=null?_c:new _e(_9.getLegacyModelBinding())]);
if(!(_9!=null)){
_1.fail("baseType != null","ListAttributeType:36");
}
this._baseType=_9;
},copy:function(_f){
return _f!=null?new _2(_f.toArray()):null;
},getBaseType:function(){
return this._baseType;
}});
var _d=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ListAttributeType.ListLabelProvider",null,{"-chains-":{constructor:"manual"},constructor:function(_10){
this._baseLabelProvider=_10;
},getLabel:function(_11){
var _12="";
var _13=", ";
var _14=null;
var _15=true;
for(var $it=_11.iterator();$it.hasNext();){
var _16=$it.next();
var _17=this._baseLabelProvider.getLabel(_16);
_15=_15&&_17.isLazyFetch();
_12+=_17.getLabel()+_13;
_14=_14==null?_17.getIconUrl():null;
}
if(_12.indexOf(_13,_12.length-_13.length)!==-1){
_12=_12.substring(0,_12.length-_13.length);
}
var _18=!_11.isEmpty()&&_15;
return new _4(_12).lazyFetch(_18);
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ListAttributeType.ListBinding",_6,{constructor:function(_19){
this.inherited(arguments,[]);
this._binding=_19;
},fromLegacy:function(_1a){
var _1b=new _2();
var _1c=_1a.items;
if(_1c!=null){
for(var i=0;i<_1c.length;i++){
_1b.add(this._binding.fromLegacy(_1c[i]));
}
}
return _1b;
},toLegacy:function(_1d){
var dto={};
dto.items=[];
dto.content=[];
for(var _1e=_1d.iterator();_1e.hasNext();){
var cur=_1e.next();
dto.items.push(this._binding.toLegacy(cur));
dto.content.push(this._binding.toLegacyId(cur));
}
return dto;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.TimestampAttributeType");










(function(){
var _1=com.ibm.team;
var _2=_1.rtc.foundation.web.model.Label;
var _3=_1.workitem.web;
var _4=_3.client.internal.ScriptValueResolver;
var _5=_3.internal.model.types.LegacyModelBinding;
var _6=_3.model.types.AttributeType;
var _7=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TimestampAttributeType",_6,{constructor:function(_8){
this.inherited(arguments,[_8,new _9(),new _a(),new _b()]);
},compareValue:function(_c,_d){
if(_c==null){
return _d==null;
}else{
if(_d==null){
return false;
}
}
return _c.getTime()===_d.getTime();
}});
var _9=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TimestampAttributeType.TimestampLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_e){
return new _2(_e.toLocaleDateString());
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _a=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TimestampAttributeType.TimestampResolver",_4,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_f,_10){
return _f instanceof Date?_f:dojo.isString(_f)?dojo.date.stamp.fromISOString(_f):!isNaN(_f)?new Date(_f):null;
}});
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TimestampAttributeType.TimeStampBinding",_5,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_11){
var _12=_11;
if(_12.id!=null){
if(isNaN(_12.id)){
return _7.createFromIsoString(_12.id);
}
return new Date(parseInt(_12.id));
}
if(dojo.isString(_11)){
return _7.createFromIsoString(_11);
}else{
return null;
}
},toLegacy:function(_13){
if(_13==null){
return "";
}
var o={};
o.zulu=true;
o.milliseconds=true;
var _14=dojo.date.stamp.toISOString(_13,o);
var _15={};
_15.id=_14;
_15.label=_14;
return _15;
}});
_7.toIsoString=function(_16){
if(_16==null){
console.error("Attempted to transform a null date into a string. Application logic error");
}
var o={};
o.zulu=true;
o.milliseconds=true;
return dojo.date.stamp.toISOString(_16,o);
};
_7.createFromIsoString=function(_17){
return _17!=null&&_17.length>0?dojo.date.stamp.fromISOString(_17):null;
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.CommentsAttributeType");


















(function(){
var _1=com.ibm.jdojox.util.ArrayList;
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web;
var _4=_3.api.model.Contributor.ContributorBuilder;
var _5=_3.model.Label;
var _6=_3.text.XMLString;
var _7=_2.workitem.web;
var _8=_7.internal.model;
var _9=_8.Comment.CommentBuilder;
var _a=_8.types;
var _b=_a.LegacyModelBinding;
var _c=_a.ListAttributeType;
var _d=_c.ListLabelProvider;
var _e=_a.TimestampAttributeType;
var _f=_7.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.CommentsAttributeType",_c,{constructor:function(_10){
this.inherited(arguments,[_10,new _11("comment"),new _d(new _12()),null,new _13(new _14())]);
}});
var _11=dojo.declare("com.ibm.team.workitem.web.internal.model.types.CommentsAttributeType.CommentType",_f,{constructor:function(_15){
this.inherited(arguments,[_15,new _12(),null,new _14()]);
}});
var _12=dojo.declare("com.ibm.team.workitem.web.internal.model.types.CommentsAttributeType.CommentLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_16){
return new _5(_16.getContent().getXMLText());
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _14=dojo.declare("com.ibm.team.workitem.web.internal.model.types.CommentsAttributeType.CommentBinding",_b,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_17){
var dto=_17;
var _18=dto.creator;
var _19=null;
if(_18.locationUri!=null||_18.webUri!=null){
_19={locationUri:_18.locationUri,namedUri:_18.webUri};
}
var _1a=new _4(_18.itemId).isArchived(_18.archived).userId(_18.userId!=null?_18.userId:null).imageUrl(_18.imageUrl).location(_19).label(_18.name).build();
return new _9().content(_6.createFromXMLText(dto.content)).creator(_1a).date(_e.createFromIsoString(dto.creationDate)).isNew(dto.isNew).build();
},toLegacy:function(_1b){
var _1c={};
_1c.content=_1b.getContent().getXMLText();
_1c.creationDate=_e.toIsoString(_1b.getCreationDate());
_1c.isNew=_1b.isNew();
var _1d=_1b.getCreator();
_1c.creator={};
_1c.creator.itemId=_1d.getItemId();
_1c.creator.name=_1d.getLabel();
if(_1d.getUserId()!=null){
_1c.creator.userId=_1d.getUserId();
}
var _1e=_1d.getLocation();
if(_1e!=null){
if(_1e.locationUri!=null){
_1c.creator.locationUri=_1e.locationUri;
}
if(_1e.namedUri!=null){
_1c.creator.webUri=_1e.namedUri;
}
}
return _1c;
}});
var _13=dojo.declare("com.ibm.team.workitem.web.internal.model.types.CommentsAttributeType.CommentsBinding",_b,{constructor:function(_1f){
this.inherited(arguments,[]);
this._baseBinding=_1f;
},fromLegacy:function(_20){
var _21=new _1();
var _22=_20.items;
if(_22!=null){
for(var i=0;i<_22.length;i++){
_21.add(this._baseBinding.fromLegacy(_22[i]));
}
}
return _21;
},toLegacy:function(_23){
var _24={};
_24.items=[];
for(var $it=_23.iterator();$it.hasNext();){
var _25=$it.next();
_24.items.push(this._baseBinding.toLegacy(_25));
}
return _24;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.ContributorAttributeType");














dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web;
var _4=_3.api.model.Contributor.ContributorBuilder;
var _5=_3.model.Label;
var _6=_2.workitem.web.internal.model.types;
var _7=_6.AbstractItemAttributeType;
var _8=_6.ItemAttributeType.ItemResolver;
var _9=_6.LegacyModelBinding;
var _a=dojo.string;
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ContributorAttributeType",_7,{constructor:function(_c){
this.inherited(arguments,[_c,new _d(),new _8(),new _e(true)]);
}});
var _d=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ContributorAttributeType.ContributorLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_f){
return new _5(_d.updateWithArchived(_f.isArchived(),_f.getLabel())).iconUrl(_f.getIconUrl()).url(_f.getUrl()).lazyFetch(true);
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ContributorAttributeType.ContributorBinding",_9,{constructor:function(_10){
this.inherited(arguments,[]);
this._useUTIItemDTO=_10;
},fromLegacy:function(_11){
var _12=_11;
var _13=null;
if(_12.locationUri!=null||_12.webUri!=null){
_13={locationUri:_12.locationUri,namedUri:_12.webUri};
}
if(_12.itemId!=null){
return new _4(_12.itemId).userId(_12.userId!=null?_12.userId:null).imageUrl(_12.imageUrl).isArchived(!!_12.archived).location(_13).label(_12.name).build();
}else{
var _14=_11;
if(_14.id!=null){
return new _4(_14.id).isArchived(_14.isArchived).userId(_14.name).label(_14.label).location(_13).build();
}
}
console.debug("[Value Conversion]: could not interpret "+_11+" as a contributor. Returning as unassigned contributor.");
return new _4("_YNh4MOlsEdq4xpiOKg5hvA").label(_1.labelUnassigned).build();
},toLegacy:function(_15){
if(this._useUTIItemDTO){
var _16={};
var _17=_15;
_16.id=_17.getItemId();
_16.label=_17.getLabel();
_16.isArchived=_17.isArchived();
var _18=_17.getLocation();
if(_18!=null){
_16.webUri=_18.namedUri;
}
return _16;
}else{
var dto={};
var _17=_15;
dto.itemId=_17.getItemId();
dto.name=_17.getLabel();
dto.userId=_17.getUserId();
dto.imageUrl=_17.getImageUrl();
dto.archived=_17.isArchived();
var _18=_17.getLocation();
if(_18!=null){
dto.locationUri=_18.locationUri;
dto.webUri=_18.namedUri;
}
return dto;
}
},toLegacyId:function(_19){
if(this._useUTIItemDTO){
return this.inherited("toLegacyId",arguments,[_19]);
}else{
return this.toLegacy(_19).itemId;
}
}});
dojo.declare("com.ibm.team.workitem.web.internal.model.types.ContributorAttributeType.SubscriberAttributeType",_7,{constructor:function(_1a){
this.inherited(arguments,[_1a,new _d(),new _8(),new _e(false)]);
}});
_b.DEFAULT_CONTRIBUTORS=-2;
_b.DEFAULT_CONTRIBUTORS_LIMIT=50;
_d.updateWithArchived=function(_1b,_1c){
if(_1b){
return _a.substitute(_1.ContributorLabelProvider_archived,[_1c]);
}
return _1c;
};
})();


;dojo.provide("com.ibm.team.workitem.shared.common.NumberFormatException");


(function(){
var _1=com.ibm.jdojo.lang.RuntimeException;
var _2=dojo.declare("com.ibm.team.workitem.shared.common.NumberFormatException",_1,{constructor:function(_3){
this.inherited(arguments,[_3]);
}});
_2.message="The provided number is incorrectly formatted. "+"The number may contain an integral part followed by a fractional part which is separated by a '.'. "+"The number may contain up to 24 integral digits and up to 4 decimal digits.";
_2.INVALID_DECIMAL=new _2(_2.message);
})();


;dojo.provide("com.ibm.team.workitem.shared.common.BigDecimal");


(function(){
var _1=com.ibm.team.workitem.shared.common.NumberFormatException;
var _2=dojo.declare("com.ibm.team.workitem.shared.common.BigDecimal",null,{"-chains-":{constructor:"manual"},_fraction:0,constructor:function(_3){
if(!_2.isValid(_3)){
throw _1.INVALID_DECIMAL;
}
this._parse(_3);
},equals:function(_4){
if(_4==null){
return false;
}
if(_4 instanceof _2){
return this.compareTo(_4)===0;
}
return false;
},compareTo:function(_5){
var _6=this._compareIntegrals(this._integral,_5._integral);
if(_6!==0){
return _6;
}
return this._compareInt(this._fraction,_5._fraction);
},getStringRepresentation:function(){
return this._value;
},getFraction:function(){
return this._fraction;
},getIntegral:function(){
return this._integral;
},toString:function(){
return this.getStringRepresentation();
},_parse:function(_7){
var _8=_2.VALID_NUMBER.exec(_7);
this._value=_8[0];
var _9=_2._split(_7);
this._sign=_9._sign;
this._integral=this._parseIntegralSlots(this._sign+_9._integral);
this._fraction=this._parseFraction(this._sign,_9._fraction);
},_parseIntegralSlots:function(_a){
var _b=_a.match(_2.INTEGRAL_SLOT_SIZE);
var _c=[];
if(_b!=null){
for(var i=0,_d=_b.length;i<_d;i++){
_c.push(parseInt(this._sign+_b[i]));
}
}
return _c;
},_parseFraction:function(_e,_f){
var _10=parseInt(_e+_f,10);
if(_10===0||isNaN(_10)){
return 0;
}
return _10*((Math.pow(10,_2.MAXIMUM_FRACTION_LENGTH-_f.length))|0);
},_compareIntegrals:function(a,b){
for(var i=0;i<Math.max(a.length,b.length);i++){
var _11=this._compareInt(this._getNumberOrZero(a,i),this._getNumberOrZero(b,i));
if(_11!==0){
return _11;
}
}
return 0;
},_getNumberOrZero:function(_12,_13){
return _13<_12.length?_12[_13]:0;
},_compareInt:function(a,b){
if(a>b){
return 1;
}else{
if(a<b){
return -1;
}
}
return 0;
},$interfaces:{"com.ibm.jdojox.util.IEqualable":true}});
_2.MAXIMUM_INTEGRAL_LENGTH=24;
_2.MAXIMUM_FRACTION_LENGTH=4;
_2.PLUS_SIGN="+";
_2.MINUS_SIGN="-";
_2.DECIMAL_SEPERATOR=".";
_2.VALID_NUMBER=new RegExp("^(\\+|-)?(?:(\\d+)|(?:(\\d*)\\.(\\d+)))$");
_2.INTEGRAL_SLOT_SIZE=new RegExp("\\d{1,12}","g");
_2._split=function(_14){
var _15=_2.PLUS_SIGN;
var _16="";
var _17="";
var _18=0;
var _19=_14.indexOf(_2.DECIMAL_SEPERATOR);
if(_19===-1){
_19=_14.length;
}
if(_14.charAt(0)===_2.PLUS_SIGN||_14.charAt(0)===_2.MINUS_SIGN){
_15=_14.charAt(0);
_18++;
}
_16=_14.substring(_18,_19);
if(_19<_14.length){
_17=_14.substring(_19+1,_14.length);
}
return {_sign:_15,_integral:_16,_fraction:_17};
};
_2.isValid=function(_1a){
var _1b=_2.VALID_NUMBER.test(_1a);
if(_1b){
var _1c=_2._split(_1a);
return _1c._integral.length<=_2.MAXIMUM_INTEGRAL_LENGTH&&_1c._fraction.length<=_2.MAXIMUM_FRACTION_LENGTH;
}
return false;
};
_2.ZERO=new _2("0");
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.NumberFormat");


(function(){
var _1=com.ibm.jdojo.util.Assert;
dojo.declare("com.ibm.team.workitem.web.ui.internal.NumberFormat",null,{"-chains-":{constructor:"manual"},constructor:function(){
},isValid:function(_2){
_1.isTrue(false,"Abstract method 'isValid' invoked");
},isValidCharacter:function(c){
return c==="-"||(c>="0"&&c<="9");
},parse:function(_3){
_1.isTrue(false,"Abstract method 'parse' invoked");
},_isSame:function(c1,c2){
var _4=c1.charCodeAt(0);
var _5=c2.charCodeAt(0);
if(_4===32&&_5===160||_4===160&&_5===32){
return true;
}
return _4===_5;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.StringBuilder");
(function(){
dojo.declare("com.ibm.team.workitem.web.ui.internal.StringBuilder",null,{"-chains-":{constructor:"manual"},_size:0,constructor:function(_1){
this._characters=new Array(_1);
this._size=0;
},appendCharacter:function(ch){
this._characters[this._size++]=ch;
},appendString:function(_2){
for(var i=0,_3=_2.length;i<_3;++i){
this.appendCharacter(_2.charAt(i));
}
},insertCharacter:function(_4,ch){
this._characters.splice(_4,0,ch);
this._size++;
},remove:function(_5,_6){
this._characters.splice(_5,_6);
this._size-=_6;
},toString:function(){
return this._characters.join("");
},reverse:function(){
this._characters=this._characters.reverse();
},length:function(){
return this._size;
}});
})();


;define("dojo/i18n!dojo/cldr/nls/number", {"currencySpacing-afterCurrency-surroundingMatch":"[:digit:]","exponential":"E","minusSign":"-","perMille":"\u2030","decimalFormat-long":"000 trillion","currencySpacing-afterCurrency-currencyMatch":"[:^S:]","percentSign":"%","currencySpacing-beforeCurrency-currencyMatch":"[:^S:]","scientificFormat":"#E0","list":";","currencySpacing-beforeCurrency-surroundingMatch":"[:digit:]","currencyFormat":"\xa4#,##0.00;(\xa4#,##0.00)","plusSign":"+","decimalFormat-short":"000T","currencySpacing-beforeCurrency-insertBetween":"\xa0","currencySpacing-afterCurrency-insertBetween":"\xa0","superscriptingExponent":"\xd7","decimalFormat":"#,##0.###","infinity":"\u221e","nan":"NaN","percentFormat":"#,##0%","decimal":".","group":","});

;define("dojo/number",["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(_1,_2,_3,_4,_5){
var _6={};
_1.setObject("dojo.number",_6);
_6.format=function(_7,_8){
_8=_1.mixin({},_8||{});
var _9=_2.normalizeLocale(_8.locale),_a=_2.getLocalization("dojo.cldr","number",_9);
_8.customs=_a;
var _b=_8.pattern||_a[(_8.type||"decimal")+"Format"];
if(isNaN(_7)||Math.abs(_7)==Infinity){
return null;
}
return _6._applyPattern(_7,_b,_8);
};
_6._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;
_6._applyPattern=function(_c,_d,_e){
_e=_e||{};
var _f=_e.customs.group,_10=_e.customs.decimal,_11=_d.split(";"),_12=_11[0];
_d=_11[(_c<0)?1:0]||("-"+_12);
if(_d.indexOf("%")!=-1){
_c*=100;
}else{
if(_d.indexOf("\u2030")!=-1){
_c*=1000;
}else{
if(_d.indexOf("\xa4")!=-1){
_f=_e.customs.currencyGroup||_f;
_10=_e.customs.currencyDecimal||_10;
_d=_d.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(_13,_14,_15,_16){
var _17=["symbol","currency","displayName"][_15.length-1],_18=_e[_17]||_e.currency||"";
if(!_18){
return "";
}
return _14+_18+_16;
});
}else{
if(_d.indexOf("E")!=-1){
throw new Error("exponential notation not supported");
}
}
}
}
var _19=_6._numberPatternRE;
var _1a=_12.match(_19);
if(!_1a){
throw new Error("unable to find a number expression in pattern: "+_d);
}
if(_e.fractional===false){
_e.places=0;
}
return _d.replace(_19,_6._formatAbsolute(_c,_1a[0],{decimal:_10,group:_f,places:_e.places,round:_e.round}));
};
_6.round=function(_1b,_1c,_1d){
var _1e=10/(_1d||10);
return (_1e*+_1b).toFixed(_1c)/_1e;
};
if((0.9).toFixed()==0){
var _1f=_6.round;
_6.round=function(v,p,m){
var d=Math.pow(10,-p||0),a=Math.abs(v);
if(!v||a>=d){
d=0;
}else{
a/=d;
if(a<0.5||a>=0.95){
d=0;
}
}
return _1f(v,p,m)+(v>0?d:-d);
};
}
_6._formatAbsolute=function(_20,_21,_22){
_22=_22||{};
if(_22.places===true){
_22.places=0;
}
if(_22.places===Infinity){
_22.places=6;
}
var _23=_21.split("."),_24=typeof _22.places=="string"&&_22.places.indexOf(","),_25=_22.places;
if(_24){
_25=_22.places.substring(_24+1);
}else{
if(!(_25>=0)){
_25=(_23[1]||[]).length;
}
}
if(!(_22.round<0)){
_20=_6.round(_20,_25,_22.round);
}
var _26=String(Math.abs(_20)).split("."),_27=_26[1]||"";
if(_23[1]||_22.places){
if(_24){
_22.places=_22.places.substring(0,_24);
}
var pad=_22.places!==undefined?_22.places:(_23[1]&&_23[1].lastIndexOf("0")+1);
if(pad>_27.length){
_26[1]=_4.pad(_27,pad,"0",true);
}
if(_25<_27.length){
_26[1]=_27.substr(0,_25);
}
}else{
if(_26[1]){
_26.pop();
}
}
var _28=_23[0].replace(",","");
pad=_28.indexOf("0");
if(pad!=-1){
pad=_28.length-pad;
if(pad>_26[0].length){
_26[0]=_4.pad(_26[0],pad);
}
if(_28.indexOf("#")==-1){
_26[0]=_26[0].substr(_26[0].length-pad);
}
}
var _29=_23[0].lastIndexOf(","),_2a,_2b;
if(_29!=-1){
_2a=_23[0].length-_29-1;
var _2c=_23[0].substr(0,_29);
_29=_2c.lastIndexOf(",");
if(_29!=-1){
_2b=_2c.length-_29-1;
}
}
var _2d=[];
for(var _2e=_26[0];_2e;){
var off=_2e.length-_2a;
_2d.push((off>0)?_2e.substr(off):_2e);
_2e=(off>0)?_2e.slice(0,off):"";
if(_2b){
_2a=_2b;
_2b=undefined;
}
}
_26[0]=_2d.reverse().join(_22.group||",");
return _26.join(_22.decimal||".");
};
_6.regexp=function(_2f){
return _6._parseInfo(_2f).regexp;
};
_6._parseInfo=function(_30){
_30=_30||{};
var _31=_2.normalizeLocale(_30.locale),_32=_2.getLocalization("dojo.cldr","number",_31),_33=_30.pattern||_32[(_30.type||"decimal")+"Format"],_34=_32.group,_35=_32.decimal,_36=1;
if(_33.indexOf("%")!=-1){
_36/=100;
}else{
if(_33.indexOf("\u2030")!=-1){
_36/=1000;
}else{
var _37=_33.indexOf("\xa4")!=-1;
if(_37){
_34=_32.currencyGroup||_34;
_35=_32.currencyDecimal||_35;
}
}
}
var _38=_33.split(";");
if(_38.length==1){
_38.push("-"+_38[0]);
}
var re=_5.buildGroupRE(_38,function(_39){
_39="(?:"+_5.escapeString(_39,".")+")";
return _39.replace(_6._numberPatternRE,function(_3a){
var _3b={signed:false,separator:_30.strict?_34:[_34,""],fractional:_30.fractional,decimal:_35,exponent:false},_3c=_3a.split("."),_3d=_30.places;
if(_3c.length==1&&_36!=1){
_3c[1]="###";
}
if(_3c.length==1||_3d===0){
_3b.fractional=false;
}else{
if(_3d===undefined){
_3d=_30.pattern?_3c[1].lastIndexOf("0")+1:Infinity;
}
if(_3d&&_30.fractional==undefined){
_3b.fractional=true;
}
if(!_30.places&&(_3d<_3c[1].length)){
_3d+=","+_3c[1].length;
}
_3b.places=_3d;
}
var _3e=_3c[0].split(",");
if(_3e.length>1){
_3b.groupSize=_3e.pop().length;
if(_3e.length>1){
_3b.groupSize2=_3e.pop().length;
}
}
return "("+_6._realNumberRegexp(_3b)+")";
});
},true);
if(_37){
re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_3f,_40,_41,_42){
var _43=["symbol","currency","displayName"][_41.length-1],_44=_5.escapeString(_30[_43]||_30.currency||"");
if(!_44){
return "";
}
_40=_40?"[\\s\\xa0]":"";
_42=_42?"[\\s\\xa0]":"";
if(!_30.strict){
if(_40){
_40+="*";
}
if(_42){
_42+="*";
}
return "(?:"+_40+_44+_42+")?";
}
return _40+_44+_42;
});
}
return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_34,decimal:_35,factor:_36};
};
_6.parse=function(_45,_46){
var _47=_6._parseInfo(_46),_48=(new RegExp("^"+_47.regexp+"$")).exec(_45);
if(!_48){
return NaN;
}
var _49=_48[1];
if(!_48[1]){
if(!_48[2]){
return NaN;
}
_49=_48[2];
_47.factor*=-1;
}
_49=_49.replace(new RegExp("["+_47.group+"\\s\\xa0"+"]","g"),"").replace(_47.decimal,".");
return _49*_47.factor;
};
_6._realNumberRegexp=function(_4a){
_4a=_4a||{};
if(!("places" in _4a)){
_4a.places=Infinity;
}
if(typeof _4a.decimal!="string"){
_4a.decimal=".";
}
if(!("fractional" in _4a)||/^0/.test(_4a.places)){
_4a.fractional=[true,false];
}
if(!("exponent" in _4a)){
_4a.exponent=[true,false];
}
if(!("eSigned" in _4a)){
_4a.eSigned=[true,false];
}
var _4b=_6._integerRegexp(_4a),_4c=_5.buildGroupRE(_4a.fractional,function(q){
var re="";
if(q&&(_4a.places!==0)){
re="\\"+_4a.decimal;
if(_4a.places==Infinity){
re="(?:"+re+"\\d+)?";
}else{
re+="\\d{"+_4a.places+"}";
}
}
return re;
},true);
var _4d=_5.buildGroupRE(_4a.exponent,function(q){
if(q){
return "([eE]"+_6._integerRegexp({signed:_4a.eSigned})+")";
}
return "";
});
var _4e=_4b+_4c;
if(_4c){
_4e="(?:(?:"+_4e+")|(?:"+_4c+"))";
}
return _4e+_4d;
};
_6._integerRegexp=function(_4f){
_4f=_4f||{};
if(!("signed" in _4f)){
_4f.signed=[true,false];
}
if(!("separator" in _4f)){
_4f.separator="";
}else{
if(!("groupSize" in _4f)){
_4f.groupSize=3;
}
}
var _50=_5.buildGroupRE(_4f.signed,function(q){
return q?"[-+]":"";
},true);
var _51=_5.buildGroupRE(_4f.separator,function(sep){
if(!sep){
return "(?:\\d+)";
}
sep=_5.escapeString(sep);
if(sep==" "){
sep="\\s";
}else{
if(sep=="\xa0"){
sep="\\s\\xa0";
}
}
var grp=_4f.groupSize,_52=_4f.groupSize2;
if(_52){
var _53="(?:0|[1-9]\\d{0,"+(_52-1)+"}(?:["+sep+"]\\d{"+_52+"})*["+sep+"]\\d{"+grp+"})";
return ((grp-_52)>0)?"(?:"+_53+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_53;
}
return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";
},true);
return _50+_51;
};
return _6;
});


;dojo.provide("com.ibm.team.workitem.web.ui.internal.DecimalFormat");










(function(){
var _1=com.ibm.team.workitem;
var _2=_1.shared.common.BigDecimal;
var _3=_1.web.ui.internal;
var _4=_3.NumberFormat;
var _5=_3.StringBuilder;
var _6=dojo.number;
var _7=dojo.declare("com.ibm.team.workitem.web.ui.internal.DecimalFormat",_4,{_minimumFractionDigits:0,_maximumFractionDigits:0,_minimumIntegerDigits:0,_maximumIntegerDigits:0,_groupSize:0,constructor:function(_8){
this.inherited(arguments,[]);
this._groupingUsed=false;
this._forceUSLocale=false;
this._setFormat(_8);
},isValid:function(_9){
return _2.isValid(this._minimize(this._unFormat(_9)));
},splitDecimalString:function(_a){
var _b=this._unFormat(_a);
var _c=_b.split(String(_2.DECIMAL_SEPERATOR));
if(_c.length===1){
_c.push("");
}
return _c;
},parse:function(_d){
return new _2(this._minimize(this._unFormat(_d)));
},_minimize:function(_e){
while(_e.charAt(0)==="0"&&_e.length>0){
_e=_e.substring(1);
}
var _f=_e.indexOf(_2.DECIMAL_SEPERATOR);
if(_f>=0){
while(_e.charAt(_e.length-1)==="0"&&_e.length>0){
_e=_e.substring(0,_e.length-1);
}
if(_f===_e.length-1){
_e=_e.substring(0,_f);
}
}
return _e.length>0?_e:"0";
},_unFormat:function(_10){
var _11=new _5(0);
var _12=this.determineSign(_10);
_10=this.removePrefixAndSuffix(_10,_12!==_2.MINUS_SIGN);
for(var i=0;i<_10.length;i++){
var ch=_10.charAt(i);
if(this._isSame(this.getDecimal(),ch)){
ch=_2.DECIMAL_SEPERATOR;
}else{
if(this._isSame(this.getGroup(),ch)){
continue;
}
}
_11.appendCharacter(ch);
}
return _12+_11.toString();
},removePrefixAndSuffix:function(_13,_14){
var _15=_14?this._prefixFormatPart:this._nPrefixFormatPart;
var _16=_14?this._suffixFormatPart:this._nSuffixFormatPart;
if(_15.length>0&&_13.length>_15.length&&(_13.substring(0,_15.length)===_15)){
_13=_13.substring(_15.length);
}
if(_16.length>0&&_13.length>_16.length&&(_13.substring(_13.length-_16.length)===_16)){
_13=_13.substring(0,_13.length-_16.length);
}
return _13;
},determineSign:function(_17){
var _18="";
if(_17.length>this._nPrefixFormatPart.length+this._nSuffixFormatPart.length){
var _19=_17.substring(0,this._nPrefixFormatPart.length);
var _1a=_17.substring(this._nPrefixFormatPart.length,_17.length-this._nSuffixFormatPart.length);
var _1b=_17.substring(_17.length-this._nSuffixFormatPart.length);
var _1c=true;
for(var i=0;i<_1a.length;i++){
var c=_1a.charAt(i);
_1c=_1c&&!isNaN(parseInt(c))||this._isSame(this.getDecimal(),c)||this._isSame(this.getGroup(),c);
}
if((this._nPrefixFormatPart===_19)&&(this._nSuffixFormatPart===_1b)&&_1c){
_18=String(_2.MINUS_SIGN);
}
}
return _18.charAt(0);
},_setFormat:function(_1d){
this._format=_1d;
this._numberLocalization=this._getNumberLocalization();
if(this._format==null){
this._format=this._numberLocalization.decimalFormat;
}
if(this._format==null){
this._format=_7.DEFAULT_FORMAT_EN_US;
}
var _1e=this._splitFormat(this._format);
this._prefixFormatPart=_1e[0];
this._numberFormatPart=_1e[1];
this._suffixFormatPart=_1e[2];
this._nPrefixFormatPart=this._numberLocalization.minusSign+this._prefixFormatPart;
this._nSuffixFormatPart=this._suffixFormatPart;
if(_1e.length>3){
this._nPrefixFormatPart=_1e[3];
this._nSuffixFormatPart=_1e[5];
}
this.configureSetings(this._numberFormatPart);
},_getNumberLocalization:function(){
_6.format(0,{});
return dojo.i18n.getLocalization("dojo.cldr","number");
},_splitFormat:function(_1f){
var _20=[];
var _21=0;
_21=this._parseFormat(_1f,0,_21,false,_20);
_21=this._parseFormat(_1f,1,_21,true,_20);
_21=this._parseFormat(_1f,2,_21,false,_20);
if(_21<_1f.length){
_21=this._parseFormat(_1f,3,_21,false,_20);
_21=this._parseFormat(_1f,4,_21,true,_20);
_21=this._parseFormat(_1f,5,_21,false,_20);
}
return _20;
},_parseFormat:function(_22,_23,_24,_25,_26){
var _27=new _5(0);
var _28=false;
var _29=false;
var i;
for(i=_24;i<_22.length;i++){
var ch=_22.charAt(i);
if(ch===_7.ESCAPE_CHARACTER){
if(_25){
break;
}
if(_29){
_27.appendCharacter(ch);
}
_28=!_28;
_29=_28;
continue;
}
_29=false;
if(!_28&&ch===_7.PATTERN_SEPERATOR){
if(_23===3){
continue;
}
break;
}
if(!_28&&(dojo.indexOf(_7.SPECIAL_CHARACTERS,ch)!==-1)!==_25){
break;
}
_27.appendCharacter(ch);
}
_26[_23]=_27.toString();
return i;
},configureSetings:function(_2a){
var _2b=_2a.indexOf(_7.DECIMAL_SEPERATOR);
this.setMaximumFractionDigits(0);
this.setMinimumFractionDigits(0);
this.setMaximumIntegerDigits(0);
this.setMinimumIntegerDigits(0);
this.setGroupingUsed(false);
var _2c=_2b>=0?_2b:_2a.length;
var _2d=_2b>=0?_2b+1:_2a.length;
for(var i=_2c-1;i>=0;--i){
var ch=_2a.charAt(i);
var _2e=_2c-i;
if(ch===_7.GROUP_SEPERATOR&&!this.isGroupingUsed()){
this.setGroupingUsed(true);
this._groupSize=_2e-1;
}
if(ch===_7.ZERO_OR_NUMBER){
this.setMinimumIntegerDigits(_2e);
this.setMaximumIntegerDigits(65000);
}
if(ch===_7.NON_ZERO_NUMBER){
this.setMaximumIntegerDigits(65000);
}
}
for(var i=_2d,_2f=_2a.length;i<_2f;++i){
var ch=_2a.charAt(i);
var _2e=i-_2d+1;
if(ch===_7.ZERO_OR_NUMBER){
this.setMinimumFractionDigits(_2e);
}
if(ch===_7.NON_ZERO_NUMBER){
this.setMaximumFractionDigits(_2e);
}
}
},format:function(_30){
var _31=_30.getStringRepresentation();
var _32=this._isNegative(_31);
_31=this._stripSign(_31);
_31=this._minimize(_31);
var _33=_31.indexOf(_2.DECIMAL_SEPERATOR);
_33=_33>=0?_33:_31.length;
var _34=this._numberFormatPart.indexOf(_7.DECIMAL_SEPERATOR);
_34=_34>=0?_34:this._numberFormatPart.length;
var _35=this._internalFormat(_31);
var _36=_35[0];
var _37=_35[1];
if((_36.length===0||_7.ZERO_PATTERN.test(_36))&&(_37.length===0||_7.ZERO_PATTERN.test(_37))){
_32=false;
}
if(_37.length>0){
_37=this.getDecimal()+_37;
}
var _38=this._prefixFormatPart;
var _39=this._suffixFormatPart;
if(_32){
_38=this._nPrefixFormatPart;
_39=this._nSuffixFormatPart;
}
return _38+_36+_37+_39;
},_internalFormat:function(_3a){
var _3b=_3a.indexOf(_2.DECIMAL_SEPERATOR);
var _3c=_3b>=0?_3b:_3a.length;
var _3d=_3b>=0?_3b+1:_3a.length;
var _3e=new _5(0);
var _3f=0;
var _40=0;
for(var i=_3c-1;i>=0&&_40<=this._maximumIntegerDigits;--i,++_40){
if(this.isGroupingUsed()&&_3f===this._groupSize){
_3e.appendString(this.getGroup());
_3f=0;
}
_3e.appendCharacter(_3a.charAt(i));
_3f++;
}
for(var i=_40;i<this._minimumIntegerDigits;++i){
_3e.appendCharacter("0");
}
_3e.reverse();
var _41=new _5(0);
if(_3d<_3a.length&&this._maximumFractionDigits>0||this._minimumFractionDigits>0){
_40=0;
for(var i=_3d,_42=_3a.length;i<_42&&_40<this._maximumFractionDigits;++i,++_40){
_41.appendCharacter(_3a.charAt(i));
}
for(var i=_40;i<this._minimumFractionDigits;++i){
_41.appendCharacter("0");
}
if((_3d+_40)<_3a.length){
var cur=_3d+_41.length()-1;
var _43=_7._roundHalfEven(_3a.charAt(cur),_3a.charAt(cur+1),(cur+2)<_3a.length?_3a.charAt(cur+1):"0");
_41.remove(_41.length(),1);
_41.appendCharacter(_43);
}
}
var _44=_3e.toString();
if(_41.length()===0&&_3d<_3a.length){
_44=this._handleRounding(_44,_3a.substring(_3d));
}
return [_44,_41.toString()];
},_handleRounding:function(_45,_46){
var _47=_46.charAt(0);
var _48=_46.length>1?_46.charAt(1):0;
var cur=_45.charAt(_45.length-1);
var _49=_7._roundHalfEven(cur,_47,_48);
return _45.substring(0,_45.length-1)+_49;
},_stripSign:function(_4a){
if(_4a.charAt(0)===_2.MINUS_SIGN||_4a.charAt(0)===_2.PLUS_SIGN){
return _4a.substring(1);
}
return _4a;
},_isNegative:function(_4b){
return _4b.charAt(0)===_2.MINUS_SIGN;
},getMinimumFractionDigits:function(){
return this._minimumFractionDigits;
},getMaximumFractionDigits:function(){
return this._maximumFractionDigits;
},getMinimumIntegerDigits:function(){
return this._minimumIntegerDigits;
},getMaximumIntegerDigits:function(){
return this._maximumIntegerDigits;
},isGroupingUsed:function(){
return this._groupingUsed;
},setMinimumFractionDigits:function(_4c){
this._minimumFractionDigits=_4c;
if(this._minimumFractionDigits>this._maximumFractionDigits){
this._maximumFractionDigits=this._minimumFractionDigits;
}
return this;
},setMaximumFractionDigits:function(_4d){
this._maximumFractionDigits=_4d;
if(this._minimumFractionDigits>this._maximumFractionDigits){
this._minimumFractionDigits=this._maximumFractionDigits;
}
return this;
},setMinimumIntegerDigits:function(_4e){
this._minimumIntegerDigits=_4e;
if(this._minimumIntegerDigits>this._maximumIntegerDigits){
this._maximumIntegerDigits=this._minimumIntegerDigits;
}
return this;
},setMaximumIntegerDigits:function(_4f){
this._maximumIntegerDigits=_4f;
if(this._minimumIntegerDigits>this._maximumIntegerDigits){
this._minimumIntegerDigits=this._maximumIntegerDigits;
}
return this;
},forceDecimalUSLocale:function(){
this._forceUSLocale=true;
return this;
},setGroupingUsed:function(_50){
this._groupingUsed=_50;
return this;
},isValidCharacter:function(c){
return this.inherited("isValidCharacter",arguments,[c])||this._isSame(this.getDecimal(),c)||this._isSame(this.getGroup(),c)||this._isSame(this._numberLocalization.minusSign,c);
},getGroup:function(){
return !this._forceUSLocale?this._numberLocalization.group:_7.GROUP_SEPERATOR+"";
},getDecimal:function(){
return !this._forceUSLocale?this._numberLocalization.decimal:_7.DECIMAL_SEPERATOR+"";
}});
_7.NON_ZERO_NUMBER="#";
_7.ZERO_OR_NUMBER="0";
_7.GROUP_SEPERATOR=",";
_7.DECIMAL_SEPERATOR=".";
_7.ESCAPE_CHARACTER="'";
_7.PATTERN_SEPERATOR=";";
_7.SPECIAL_CHARACTERS=[String(_7.NON_ZERO_NUMBER),String(_7.ZERO_OR_NUMBER),String(_7.GROUP_SEPERATOR),String(_7.DECIMAL_SEPERATOR)];
_7.ZERO_PATTERN=new RegExp("^0+$");
_7.DEFAULT_FORMAT_EN_US="#,##0.###";
_7._roundHalfEven=function(cur,_51,_52){
var _53=parseInt(String(cur));
var _54=parseInt(String(_51));
var _55=_52!==0?parseInt(String(_52)):0;
if(_54>5||(_54===5&&_55>0)){
return (_53+1);
}else{
if(_54<5){
return cur;
}else{
return _53%2===0?cur:(_53+1);
}
}
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.DecimalAttributeType");












(function(){
var _1=com.ibm.team;
var _2=_1.rtc.foundation.web.model.Label;
var _3=_1.workitem;
var _4=_3.shared.common.BigDecimal;
var _5=_3.web;
var _6=_5.client.internal.ScriptValueResolver;
var _7=_5.internal.model.types.LegacyModelBinding;
var _8=_5.model.types.AttributeType;
var _9=_5.ui.internal.DecimalFormat;
var _a=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DecimalAttributeType",_8,{constructor:function(_b){
this.inherited(arguments,[_b,new _c(),new _d(),new _e()]);
}});
var _c=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DecimalAttributeType.DecimalLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_f){
return _f!=null?new _2(_a.FORMAT.format(_f)):_2.EMPTY_LABEL;
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _d=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DecimalAttributeType.DecimalResolver",_6,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_10,_11){
return dojo.isString(_10)?new _4(_10):!isNaN(_10)?new _4((_10).toString()):null;
},_getNullValue:function(){
return new _4("0");
}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DecimalAttributeType.DecimalBinding",_7,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_12){
return new _4(_12.id);
},toLegacy:function(_13){
var _14={};
_14.id=_13.getStringRepresentation();
_14.label=_a.format(_13);
return _14;
}});
_a.FORMAT=new _9(null).setMaximumFractionDigits(4);
_a.format=function(_15){
if(_15==null){
console.error("Attempted to format a null decimal into a string. Application logic error");
return "";
}
return _a.FORMAT.format(_15);
};
})();


;dojo.provide("com.ibm.team.workitem.web.model.Deliverable");


(function(){
var _1=com.ibm.team.rtc.foundation.web.api.model.Item;
var _2=_1.AbstractItemBuilder;
var _3=dojo.declare("com.ibm.team.workitem.web.model.Deliverable",_1,{constructor:function(_4,_5){
this.inherited(arguments,[_4,_5]);
},equals:function(o){
if(o==null||!(o instanceof _3)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.workitem.api.common.IDeliverable":true}});
dojo.declare("com.ibm.team.workitem.web.model.Deliverable.DeliverableBuilder",_2,{constructor:function(_6,_7){
this.inherited(arguments,[_6,_7]);
},_create:function(_8,_9){
return new _3(_8,_9);
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.DeliverableAttributeType");










dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team.workitem.web;
var _3=_2.internal.model.types;
var _4=_3.AbstractItemAttributeType.AbstractItemBinding;
var _5=_3.ItemAttributeType;
var _6=_5.ItemLabelProvider;
var _7=_5.ItemResolver;
var _8=_2.model;
var _9=_8.Deliverable.DeliverableBuilder;
var _a=_8.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.DeliverableAttributeType",_a,{constructor:function(_b){
this.inherited(arguments,[_b,new _6(),new _7(),new _c()]);
}});
var _c=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DeliverableAttributeType.DeliverableBinding",_4,{constructor:function(){
this.inherited(arguments,[]);
},_createItem:function(_d){
var _e=_d;
if(_e.id!=null&&_e.id!==""){
return new _9(_e.id).label(_e.label).iconUrl(this._getIconUrl(_e.iconUrl)).build();
}
return this._createUnassignedItem();
},_createUnassignedItem:function(){
return new _9(_a.UNASSIGNED_ITEM_ID).label(_1.labelUnassigned).isNull(true).build();
}});
})();


;dojo.provide("com.ibm.team.workitem.shared.common.Duration");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.shared.common.Duration",null,{"-chains-":{constructor:"manual"},_value:0,constructor:function(_2){
this._value=_2;
},longValue:function(){
return this._value;
},isSpecified:function(){
return this._value>-1;
},isValid:function(){
return this._value>-2;
},equals:function(_3){
if(this===_3){
return true;
}
if(_3==null||!(_3 instanceof _1)){
return false;
}
var _4=_3;
return this._value===_4._value;
},stringValue:function(){
return !!this._value?(this._value).toString():"";
},$interfaces:{"com.ibm.jdojox.util.IEqualable":true,"com.ibm.team.workitem.api.common.IDuration":true}});
_1.UNSPECIFIED=new _1(-1);
})();

dojo.provide("com.ibm.team.workitem.web.model.nls.Messages")._built=true;
dojo.provide("com.ibm.team.workitem.web.model.nls.Messages.en_us");
com.ibm.team.workitem.web.model.nls.Messages.en_us={"WorkItemAttachmentList_ATTACHMENT_DELETION_ERROR_Message":"Attachment \'${0}\' cannot be deleted.","ProjectConfiguration_CopyHandlerFetchError":"Unable to fetch the copy handler location from service provider: \'${0}\'. Reason: ${1}","durationLabel":"${0} hours","WorkItemAttachmentList_ATTACHMENT_DELETION_ERROR_Description":"Attachment (Reference: \'${0}\') could not be deleted from the database. This may be a temporary server problem. Please try again.","WorkItemAttachmentList_ATTACHMENT_DELETION_CONFIRMATION":"Are you sure you want to delete the attachment? This operation cannot be undone after save."};

;dojo.provide("com.ibm.team.workitem.web.model.DurationFormat");




dojo.requireLocalization("com.ibm.team.workitem.web.model","Messages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.model","Messages");
var _2=dojo.string;
var _3=dojo.declare("com.ibm.team.workitem.web.model.DurationFormat",null,{"-chains-":{constructor:"manual"}});
_3.format=function(_4){
if(_4.isSpecified()){
return _2.substitute(_1.durationLabel,[(_4.longValue()/(1000*60*60)).toString()]);
}
return "";
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.DurationAttributeType");














(function(){
var _1=com.ibm.team;
var _2=_1.rtc.foundation.web;
var _3=_2.model.Label;
var _4=_2.util.JsonIO;
var _5=_1.workitem;
var _6=_5.shared.common.Duration;
var _7=_5.web;
var _8=_7.client.internal.ScriptValueResolver;
var _9=_7.internal.model.types.LegacyModelBinding;
var _a=_7.model;
var _b=_a.DurationFormat;
var _c=_a.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.DurationAttributeType",_c,{constructor:function(_d){
this.inherited(arguments,[_d,new _e(),new _f(),new _10()]);
},compareValue:function(_11,_12){
if(_11==null){
return _12==null;
}else{
if(_12==null){
return false;
}
}
return _11.longValue()===_12.longValue();
}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DurationAttributeType.DurationLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_13){
return new _3(_b.format(_13));
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _f=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DurationAttributeType.DurationResolver",_8,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_14,_15){
if(dojo.isString(_14)){
return new _6(parseInt(_14));
}
return isNaN(_14)?null:new _6(_14);
}});
var _10=dojo.declare("com.ibm.team.workitem.web.internal.model.types.DurationAttributeType.DurationBinding",_9,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_16){
var _17=_16;
if(_17.id!=null){
var _18=new _6(parseInt(_17.id));
return _18;
}
console.debug("[Value Conversion]: could not interpret "+_4.stringify(_16)+" as a duration. Returning as -1.");
return new _6(-1);
},toLegacy:function(_19){
var _1a={};
_1a.id=(_19.longValue()).toString();
_1a.label=new _e().getLabel(_19).getLabel();
return _1a;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.ESignatureAttributeType");






(function(){
var _1=com.ibm.team;
var _2=_1.rtc.foundation.web.model.Label;
var _3=_1.workitem.web;
var _4=_3.internal.model.types.LegacyModelBinding;
var _5=_3.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.ESignatureAttributeType",_5,{constructor:function(_6){
this.inherited(arguments,[_6,new _7(),null,new _8()]);
}});
var _7=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ESignatureAttributeType.LabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_9){
return new _2(_9);
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _8=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ESignatureAttributeType.TextBinding",_4,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_a){
var _b="";
var _c=_a;
if(_c.id!=null){
_b=_c.id;
}else{
if(_c.label!=null){
_b=_c.label;
}else{
if(dojo.isString(_a)){
_b=String(_a);
}
}
}
return _b;
},toLegacy:function(_d){
var _e={};
_e.id=_d;
_e.label=_d;
return _e;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.model.ConfigurationItem");


(function(){
var _1=com.ibm.jdojox.util.IllegalArgumentException;
var _2=dojo.declare("com.ibm.team.workitem.web.model.ConfigurationItem",null,{"-chains-":{constructor:"manual"},constructor:function(_3,_4){
if(_3==null||_3===""){
throw new _1("Identifier shoul not be null or empty");
}
if(_4==null){
throw new _1("Label shoul not be null");
}
this._identifier=_3;
this._label=_4;
this._iconUrl=null;
},iconUrl:function(_5){
this._iconUrl=_5;
return this;
},getIdentifier:function(){
return this._identifier;
},getLabel:function(){
return this._label;
},getIconUrl:function(){
return this._iconUrl;
},equals:function(o){
if(o==null||!(o instanceof _2)){
return false;
}
var _6=o;
return this._identifier===_6._identifier&&this._label===_6._label;
},$interfaces:{"com.ibm.jdojo.util.IMappable":true,"com.ibm.jdojox.util.IEqualable":true,"com.ibm.team.workitem.api.common.IConfigurationItem":true}});
})();


;dojo.provide("com.ibm.team.workitem.web.model.Literal");


(function(){
var _1=com.ibm.team.workitem.web.model.ConfigurationItem;
var _2=dojo.declare("com.ibm.team.workitem.web.model.Literal",_1,{constructor:function(_3,_4){
this.inherited(arguments,[_3,_4]);
},equals:function(o){
if(o==null||!(o instanceof _2)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.workitem.api.common.ILiteral":true}});
_2.EMPTY_LITERAL=new _2("_EMPTY_ID_","");
})();


;dojo.provide("com.ibm.team.workitem.web.model.EnumerationLiteral");


(function(){
var _1=com.ibm.team.workitem.web.model.Literal;
dojo.declare("com.ibm.team.workitem.web.model.EnumerationLiteral",_1,{constructor:function(_2,_3,_4){
this.inherited(arguments,[_2,_3]);
this._archived=_4;
},getIsArchived:function(){
return this._archived;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.EnumerationAttributeType");












dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.model.Label;
var _4=_2.workitem.web;
var _5=_4.client.internal.ScriptValueResolver;
var _6=_4.internal.model.types.LegacyModelBinding;
var _7=_4.model;
var _8=_7.EnumerationLiteral;
var _9=_7.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.EnumerationAttributeType",_9,{constructor:function(_a){
this.inherited(arguments,[_a,new _b(),new _c(),new _d()]);
}});
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.EnumerationAttributeType.LiteralLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_e){
return new _3(_e.getLabel()).iconUrl(_e.getIconUrl());
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _c=dojo.declare("com.ibm.team.workitem.web.internal.model.types.EnumerationAttributeType.LiteralResolver",_5,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_f,_10){
if(dojo.isString(_f)){
for(var $it=_10.iterator();$it.hasNext();){
var _11=$it.next();
if(_11.getIdentifier()===_f){
return _11;
}
}
return new _8(_f,_f,false);
}
return null;
}});
var _d=dojo.declare("com.ibm.team.workitem.web.internal.model.types.EnumerationAttributeType.LiteralBinding",_6,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_12){
var _13=_12;
if(_6._isGenericUnassigned(_12)||_13.id==null){
return new _8(_9.UNASSIGNED_ITEM_ID,_1.labelUnassigned,false);
}
return new _8(_13.id,_13.label,_13.isArchived).iconUrl(this._getIconUrl(_13.iconUrl));
},toLegacy:function(_14){
if(_14.getIdentifier()===_9.UNASSIGNED_ITEM_ID){
var _15={};
_15.id="";
_15.label=_1.labelUnassigned;
return _15;
}
var _16={};
_16.id=_14.getIdentifier();
_16.label=_14.getLabel();
_16.isArchived=false;
if(_14.getIconUrl()!=null){
_16.iconUrl=_14.getIconUrl();
}
return _16;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.HTMLAttributeType");












(function(){
var _1=com.ibm.team;
var _2=_1.rtc.foundation.web;
var _3=_2.model.Label;
var _4=_2.text.XMLString;
var _5=_1.workitem.web;
var _6=_5.client.internal.ScriptValueResolver;
var _7=_5.internal;
var _8=_7.model.types.LegacyModelBinding;
var _9=_7.util.XMLStringNormalizer;
var _a=_5.model.types.AttributeType;
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.HTMLAttributeType",_a,{constructor:function(_c){
this.inherited(arguments,[_c,new _d(),new _e(),new _f()]);
},compareValue:function(_10,_11){
if(_10==null){
return _11==null;
}else{
if(_11==null){
return false;
}
}
return _b._normalize(_10).replace(_b.expLeadingTrailingSpaces,"")===_b._normalize(_11).replace(_b.expLeadingTrailingSpaces,"");
},getNullValue:function(){
return _4.EMPTY;
}});
var _d=dojo.declare("com.ibm.team.workitem.web.internal.model.types.HTMLAttributeType.RichTextLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_12){
return new _3(_12.getXMLText());
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.HTMLAttributeType.RichTextResolver",_6,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_13,_14){
if(_13 instanceof _4){
return _13;
}
return dojo.isString(_13)?_4.createFromPlainText(_13):null;
},_getNullValue:function(){
return _4.EMPTY;
}});
var _f=dojo.declare("com.ibm.team.workitem.web.internal.model.types.HTMLAttributeType.RichTextBinding",_8,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_15){
var _16="";
var _17=_15;
var _18=_15;
if(_17.content!=null){
_16=_17.content;
}else{
if(_18.label!=null){
_16=_18.label;
}else{
if(dojo.isString(_15)){
_16=String(_15);
}else{
console.debug("[Value Conversion]: could not interpret "+_15+" as rich text. Returning as empty string.");
}
}
}
return _4.createFromXMLText(_16);
},toLegacy:function(_19){
var _1a=_19;
var _1b={};
_1b.content=_1a.getXMLText();
_1b.isHTML=true;
return _1b;
},toLegacyId:function(_1c){
return this.toLegacy(_1c).content;
}});
_b.REGEX_FOR_ID="\\sid=\"\\w+\"";
_b.REGEX_FOR_WIDGETID="\\swidgetid=\"\\w+\"";
_b.REGEX_FOR_CLASS="\\sclass=\"[a-zA-Z0-9_-]+\"";
_b.REGEX_TRIM_LEADING_TRAILING_SPACES="^\\s+|\\s+$";
_b.REGEX_ANCHOR_TAGS="<a[^>]*>([^<]+)<\\/a>";
_b.REGEX_ENDS_WITH_FORWARD_SLASH="/$";
_b.Regex_STRONG_TAG_BEGIN="<strong>";
_b.Regex_STRONG_TAG_END="</strong>";
_b.expAnchorTags=new RegExp(_b.REGEX_ANCHOR_TAGS,"g");
_b.expId=new RegExp(_b.REGEX_FOR_ID,"g");
_b.expWidgetId=new RegExp(_b.REGEX_FOR_WIDGETID,"g");
_b.expClass=new RegExp(_b.REGEX_FOR_CLASS,"g");
_b.expTrailingForwardSlash=new RegExp(_b.REGEX_ENDS_WITH_FORWARD_SLASH,"g");
_b.expLeadingTrailingSpaces=new RegExp(_b.REGEX_TRIM_LEADING_TRAILING_SPACES,"");
_b.expStrongTagStart=new RegExp(_b.Regex_STRONG_TAG_BEGIN,"g");
_b.expStrongTagEnd=new RegExp(_b.Regex_STRONG_TAG_END,"g");
_b._normalize=function(_1d){
var _1e=_1d.getXMLText();
_1e=_b.removeUnnecessaryHtmlAttributesFromAnchorTags(_1e);
_1e=_9.removeSpanTagsCreatedDuringBookmarkCreation(_1e);
_1e=_b.replaceStrongTagsWithBoldTags(_1e);
_1e=_b._normalizeBrTagsWithLeadingSpaces(_1e);
_1e=_b._normalizeEmptyTags(_1e);
_1e=_9.removeLongEmptyTags(_1e);
return dojo.create("div",{innerHTML:_1e}).innerHTML;
};
_b.replaceStrongTagsWithBoldTags=function(_1f){
_1f=_1f.replace(_b.expStrongTagStart,"<b>");
return _1f.replace(_b.expStrongTagEnd,"</b>");
};
_b.removeUnnecessaryHtmlAttributesFromAnchorTags=function(_20){
var _21=null;
var _22=_20.match(_b.expAnchorTags);
var _23=null;
if(_22!=null){
var _24=_22;
var _25=_24.length;
for(var _26=0;_26<_25;_26++){
var _27=_24[_26];
_23=_27.replace(_b.expId,"");
_23=_23.replace(_b.expWidgetId,"");
_23=_23.replace(_b.expClass,"");
_21=(_23!=null&&_23!=="")?_23.substring(_23.indexOf(">")+1,_23.lastIndexOf("<")):null;
if(_21.match(_b.expTrailingForwardSlash)!=null){
_23=_b._normalizeStrings(_23,_21,_21.substring(0,_21.length-1));
}
_20=_b._normalizeStrings(_20,_27,_23);
}
}
return _b._normalizeStrings(_20,"<br />","<br/>");
};
_b._normalizeBrTagsWithLeadingSpaces=function(_28){
return _b._normalizeStrings(_28," <br/>","<br/>");
};
_b._normalizeEmptyTags=function(_29){
var _2a=_b._normalizeStrings(_29,"\xa0","");
return _2a;
};
_b._normalizeStrings=function(_2b,_2c,_2d){
var _2e=_2b.split(_2c);
if(_2e[0]!=null){
_2b=_2e[0];
}
for(var i=1;i<_2e.length;i++){
_2b=_2b+_2d+_2e[i];
}
return _2b;
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.IntegerAttributeType");










(function(){
var _1=com.ibm.team;
var _2=_1.rtc.foundation.web.model.Label;
var _3=_1.workitem.web;
var _4=_3.client.internal.ScriptValueResolver;
var _5=_3.internal.model.types.LegacyModelBinding;
var _6=_3.model.types.AttributeType;
var _7=dojo.number;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.IntegerAttributeType",_6,{constructor:function(_8){
this.inherited(arguments,[_8,new _9(),new _a(),new _b()]);
},getNullValue:function(){
return 0;
}});
var _9=dojo.declare("com.ibm.team.workitem.web.internal.model.types.IntegerAttributeType.IntegerLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_c){
return new _2((_c).toString());
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _a=dojo.declare("com.ibm.team.workitem.web.internal.model.types.IntegerAttributeType.IntegerResolver",_4,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_d,_e){
return dojo.isString(_d)?((_7.parse(_d,{}))|0):!isNaN(_d)?((_d)|0):null;
},_getNullValue:function(){
return 0;
}});
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.IntegerAttributeType.IntegerBinding",_5,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_f){
var _10=_f;
var _11=null;
if(_10.id!=null){
_11=_10.id;
}else{
if(typeof _f==="number"||dojo.isString(_f)){
_11=_f;
}
}
if(_11!=null){
return ((_7.parse(_11,{}))|0);
}else{
console.debug("[Value Conversion]: could not interpret "+_f+" as an integer. Returning as 0.");
return 0;
}
},toLegacy:function(_12){
var _13={};
_13.id=_12;
_13.label=_12;
return _13;
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.api.process.model.Iteration");




(function(){
var _1=com.ibm.jdojox.util.IllegalArgumentException;
var _2=com.ibm.team.rtc.foundation.web.api.model.Item;
var _3=_2.AbstractItemBuilder;
var _4=dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.Iteration",_2,{constructor:function(_5,_6){
this.inherited(arguments,[_5,_6]);
this._isCurrent=false;
this._isBacklog=false;
this._hasDeliverable=false;
},getId:function(){
return this._id;
},getLabel:function(){
return this._label!=null&&this._label!==""?this._label:this._id;
},isCurrent:function(){
return this._isCurrent;
},isBacklog:function(){
return this._isBacklog;
},hasDeliverable:function(){
return this._hasDeliverable;
},getParentId:function(){
return this._parentId;
},isUnassigned:function(){
return this.getItemId()===_4.UNASSIGNED;
},getParent:function(){
return this._parent;
},getStartDate:function(){
return this._startDate;
},getEndDate:function(){
return this._endDate;
},isOpen:function(){
return this._startDate==null&&this._endDate==null;
},equals:function(o){
if(o==null||!(o instanceof _4)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.rtc.foundation.api.common.process.model.IIteration":true}});
dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.Iteration.IterationBuilder",_3,{constructor:function(_7,_8){
this.inherited(arguments,[_7,_8]);
},_create:function(_9,_a){
return new _4(_9,_a);
},id:function(id){
this._item._id=id;
return this;
},current:function(_b){
this._item._isCurrent=_b;
return this;
},backlog:function(_c){
this._item._isBacklog=_c;
return this;
},hasDeliverable:function(_d){
this._item._hasDeliverable=_d;
return this;
},parentId:function(_e){
this._item._parentId=_e;
return this;
},startDate:function(_f){
this._item._startDate=_f;
return this;
},endDate:function(_10){
this._item._endDate=_10;
return this;
},_check:function(){
if(!this._item.isNew()&&this._isNullOrEmpty(this._item.getLabel())&&this._isNullOrEmpty(this._item.getId())){
throw new _1("Label or id is mandatory while building an Item");
}
}});
_4.UNASSIGNED="__Unassigned__";
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.ImageSource");


(function(){
var _1=net.jazz.ajax.contextRoot;
var _2=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.ImageSource",null,{"-chains-":{constructor:"manual"},constructor:function(_3,_4){
this.fIsDimmed=false;
if(_4!=null){
this.fBundleId=_4;
this.fImgPath=_3;
this.fFallbackImgURI=null;
}else{
this.fFallbackImgURI=_3;
var _5=_3.indexOf(_2.IMAGE_CONTENT_SERVICE);
if(_5>=0){
var _6=_3.substring(0,_5+_2.IMAGE_CONTENT_SERVICE.length+1);
var _7=_3.substring(_5+_2.IMAGE_CONTENT_SERVICE.length+1);
var _8=this.removeParams(_7);
var _9=this.extractParams(_7);
if(_9!=null){
if(_9[_2.TOP_LEFT]!=null){
this.fTopLeftOverlay=new _2(_6+_9[_2.TOP_LEFT],null);
}
if(_9[_2.TOP_RIGHT]!=null){
this.fTopRightOverlay=new _2(_6+_9[_2.TOP_RIGHT],null);
}
if(_9[_2.BOTTOM_LEFT]!=null){
this.fBottomLeftOverlay=new _2(_6+_9[_2.BOTTOM_LEFT],null);
}
if(_9[_2.BOTTOM_RIGHT]!=null){
this.fBottomRightOverlay=new _2(_6+_9[_2.BOTTOM_RIGHT],null);
}
if(_9[_2.DIMMING]!=null){
this.fIsDimmed=_9[_2.DIMMING]===String(true);
}
if(_8.indexOf(_2.PROCESS_ATTACHMENT_PREFIX)===0){
var _a=_8.substring(_2.PROCESS_ATTACHMENT_PREFIX.length);
this.fProcessAreaId=_a.substring(0,_a.indexOf(_2.SLASH));
this.fImgPath=_a.substring(this.fProcessAreaId.length);
}else{
if(_8.indexOf(_2.BUNDLE_ENTRY_PREFIX)===0){
var _b=_7.indexOf(_2.SLASH,_2.BUNDLE_ENTRY_PREFIX.length);
this.fBundleId=_7.substring(0,_b+1);
var _c=this.fBundleId.indexOf(".");
if(_c!==-1){
this.fBundleId=this.fBundleId.substring(0,_c);
}
this.fImgPath=_7.substring(_b);
}else{
if(_8.indexOf(_2.PLUGIN_PREFIX)===0){
var _b=_7.indexOf(_2.SLASH,_2.PLUGIN_PREFIX.length);
this.fBundleId=_7.substring(_2.PLUGIN_PREFIX.length,_b);
this.fImgPath=_7.substring(_b);
}else{
var _b=_7.indexOf(_2.SLASH);
this.fBundleId=_7.substring(0,_b);
this.fImgPath=_7.substring(_b);
}
}
}
}
}else{
var _d=this._createURL(_1(),"web/");
if(_3.indexOf(_d)===0){
var _b=_3.indexOf(_2.SLASH,_d.length);
var _e=_3.substring(_d.length,_b);
if(_e.indexOf(".")!==-1){
this.fBundleId=_e;
this.fImgPath=_3.substring(_b);
}
}
}
}
},isComposedImage:function(){
return this.fIsDimmed||this.fTopLeftOverlay!=null||this.fTopRightOverlay!=null||this.fBottomLeftOverlay!=null||this.fBottomRightOverlay!=null;
},getTopLeftOverlay:function(){
return this.fTopLeftOverlay;
},getTopRightOverlay:function(){
return this.fTopRightOverlay;
},getBottomLeftOverlay:function(){
return this.fBottomLeftOverlay;
},getBottomRightOverlay:function(){
return this.fBottomRightOverlay;
},isDimmed:function(){
return this.fIsDimmed;
},isProcessAttachment:function(){
return this.fProcessAreaId!=null;
},getProcessAreaId:function(){
return this.fProcessAreaId;
},getBundleId:function(){
return this.fBundleId;
},getImagePath:function(){
return this.fImgPath;
},removeParams:function(_f){
var _10=_f.indexOf(_2.PARAMS_START);
if(_10>=0){
return _f.substring(0,_10);
}
return _f;
},extractParams:function(uri){
var _11={};
var _12=uri.indexOf(_2.PARAMS_START);
if(_12>=0){
var _13=uri.substring(_12+1).split(_2.PARAMS_SEP);
var _14=_13;
var _15=_14.length;
for(var _16=0;_16<_15;_16++){
var _17=_14[_16];
var _18=_17.split(_2.PARAM_INNER_SEP);
if(_18.length!==2){
return null;
}
_11[_18[0]]=_18[1];
}
}
return _11;
},isBundleImage:function(){
return this.fBundleId!=null;
},toUri:function(){
if(this.fFallbackImgURI==null&&this.fBundleId!=null&&this.fImgPath!=null){
this.fFallbackImgURI=this._createURL(_1(),"web",this.fBundleId,this.fImgPath);
}
return this.fFallbackImgURI;
},_createURL:function(){
var _19=Array.prototype.slice.call(arguments,0);
var _1a=_19[0];
for(var i=1;i<_19.length;i++){
var _1b=_19[i];
if(_1a.charAt(_1a.length-1)!==_2.SLASH){
_1a=_1a+_2.SLASH;
}
_1a=_1a+_1b.substring(_1b.charAt(0)===_2.SLASH?1:0);
}
return _1a;
},toString:function(){
return this.toUri();
}});
_2.IMAGE_CONTENT_SERVICE="com.ibm.team.workitem.common.internal.model.IImageContentService";
_2.PROCESS_ATTACHMENT_PREFIX="processattachment/";
_2.BUNDLE_ENTRY_PREFIX="bundleentry/";
_2.PLUGIN_PREFIX="plugin/";
_2.TOP_LEFT="tl";
_2.TOP_RIGHT="tr";
_2.BOTTOM_LEFT="bl";
_2.BOTTOM_RIGHT="br";
_2.DIMMING="dim";
_2.SLASH="/";
_2.PARAMS_START="?";
_2.PARAMS_SEP="&";
_2.PARAM_INNER_SEP="=";
_2.fromBundleImage=function(_1c,_1d){
return new _2(_1d.indexOf(_2.SLASH)!==0?_2.SLASH+_1d:_1d,_1c);
};
_2.fromIconUri=function(_1e){
return new _2(String(_1e),null);
};
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.common.ImagePool");


(function(){
var _1=com.ibm.team.rtc.foundation.web.ui.util.sprite.ImageSource;
var _2=dojo.declare("com.ibm.team.workitem.web.ui.internal.view.common.ImagePool",null,{"-chains-":{constructor:"manual"}});
_2._BUNDLE_ID="com.ibm.team.workitem.web";
_2._BASE="ui/internal/view/common/images/";
_2.ADD=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"add.gif");
_2.ARCHIVE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"archive.gif");
_2.ARCHIVE_HOVER=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"archive_hov.gif");
_2.ATTACHMENT=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"attach_obj.gif");
_2.DETAILS=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"flatLayout.gif");
_2.CHECKBOX=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"checkbox.png");
_2.CALENDAR=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"calendar.gif");
_2.DELETE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"delete.gif");
_2.DOWN=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"down.gif");
_2.DOWN_DISABLED=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"down-disabled.gif");
_2.EDIT_LARGE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"edit-current-query.gif");
_2.ERROR=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"error.gif");
_2.ERROR36=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"error_obj36.png");
_2.GUESS_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"guess_cat.gif");
_2.INFO=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"info.gif");
_2.INFO36=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"info_obj36.png");
_2.LIST_ARROW=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"list-arrow.gif");
_2.PIXEL=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"pixel.gif");
_2.PIXEL_16=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"pixel_16.gif");
_2.POPUP_DOWN_ARROW=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"popup-down-arrow.gif");
_2.ROWEDIT=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"row-edit.gif");
_2.REMOVE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"remove.gif");
_2.REMOVE_HOVER=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"remove-hov.gif");
_2.RENAME=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"rename.gif");
_2.RESTORE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"restore.gif");
_2.RESTORE_HOVER=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"restore-hov.gif");
_2.SECTION_TWISTIE_OPEN=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"q-ed_section-twistie-open.gif");
_2.SECTION_TWISTIE_CLOSED=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"q-ed_section-twistie-closed.gif");
_2.SMALLWARNING=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"smallwarning.gif");
_2.SORT_DOWN=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"th-down-arrow.gif");
_2.SORT_UP=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"th-up-arrow.gif");
_2.TITLE_TWISTIE_OPEN=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"q-ed_title-twistie-open.gif");
_2.TITLE_TWISTIE_CLOSED=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"q-ed_title-twistie-closed.gif");
_2.UP=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"up.gif");
_2.UP_DISABLED=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"up-disabled.gif");
_2.USERS=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"users_obj.gif");
_2.USER=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"user.gif");
_2.WARNING=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"warning.gif");
_2.WARNING16=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"warning_obj16.gif");
_2.WARNING36=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"warn_obj36.png");
_2.WORKITEM_QUERY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"query_workitem.gif");
_2.ACTION_MENU=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"actionMenu.gif");
_2.WORKITEM_EDITOR=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitem_editor_obj32.png");
_2.WORKITEM_WELCOME=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitem_welcome.gif");
_2.WORKITEM_TYPE_SELECT=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitems-type-select.png");
_2.EMPTY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"empty.gif");
_2.EDIT_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"edit_category.gif");
_2.DEMOTE_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"increase_indent.gif");
_2.PROMOTE_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"decrease_indent.gif");
_2.ITERATION=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"iteration.gif");
_2.ITERATION_CURRENT=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"iteration_current.gif");
_2.ITERATION_BACKLOG=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"backlog_iteration_obj.gif");
_2.TIMELINE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"develop_line_obj.gif");
_2.TIMELINE_PROJECT=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"project_devline_obj.gif");
_2.PROJECT_AREA=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"projectarea_obj.gif");
_2.TEAM_AREA=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"teamarea_obj.gif");
_2.ARCHIVE_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"archive_co.gif");
_2.UNARCHIVE_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"unarchive_co.gif");
_2.ASSOCIATE_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"associate_co.gif");
_2.DISASSOCIATE_CATEGORY=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"disassociate_co.gif");
_2.CHECKBOX_UNCHECKED=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"checkbox_unchecked.png");
_2.CHECKBOX_CHECKED=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"checkbox_checked.png");
_2.THUMB_UP=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"thumb_up.png");
_2.WORKITEM_CREATE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitem_new.gif");
_2.WORKITEM_CHANGE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitems_obj.png");
_2.WORKITEM_INPROGRESS=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitem_inprogress.gif");
_2.WORKITEM_REOPEN=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitem_reopen.gif");
_2.WORKITEM_RESOLVE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"workitem_resolve.gif");
_2.MESSAGE_RECEIVE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"messagesatme.gif");
_2.COMMENT_ADD=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"comment.gif");
_2.APPROVAL_CHANGE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"approval_change.gif");
_2.APPROVAL_APPROVE=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"approval_approved.gif");
_2.APPROVAL_REJECT=_1.fromBundleImage(_2._BUNDLE_ID,_2._BASE+"approval_rejected.gif");
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.IterationAttributeType");














dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.api.process.model.Iteration.IterationBuilder;
var _4=_2.workitem.web;
var _5=_4.internal.model.types;
var _6=_5.AbstractItemAttributeType;
var _7=_6.AbstractItemBinding;
var _8=_5.ItemAttributeType;
var _9=_8.ItemLabelProvider;
var _a=_8.ItemResolver;
var _b=_4.model.types.AttributeType;
var _c=_4.ui.internal.view.common.ImagePool;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.IterationAttributeType",_6,{constructor:function(_d){
this.inherited(arguments,[_d,new _9(),new _a(),new _e()]);
}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.IterationAttributeType.IterationBinding",_7,{constructor:function(){
this.inherited(arguments,[]);
},_createItem:function(_f){
var dto=_f;
if(dto.id!=null&&dto.id!==""){
var _10=_e._splitIterationPath(dto.arguments);
var _11=dto.current?_c.ITERATION_CURRENT.toUri():(dto.isBacklog?_c.ITERATION_BACKLOG.toUri():_c.ITERATION.toUri());
return new _3(dto.id).id(_10[1].length>0?_10[1]:dto.id).parentId(_10[0]).current(!!dto.current).backlog(!!dto.isBacklog).hasDeliverable(!!dto.hasDeliverable).startDate(dto.startDate!=null?dojo.date.stamp.fromISOString(dto.startDate):null).endDate(dto.endDate!=null?dojo.date.stamp.fromISOString(dto.endDate):null).iconUrl(_11).label(dto.label).build();
}
return this._createUnassignedItem();
},_createUnassignedItem:function(){
return new _3(_b.UNASSIGNED_ITEM_ID).id(_b.UNASSIGNED_ITEM_ID).label(_1.labelUnassigned).isNull(true).build();
},_createDto:function(_12){
var dto={};
dto.id=_b.UNASSIGNED_ITEM_ID===_12.getItemId()?"":_12.getItemId();
dto.label=_12.getLabel();
dto.current=_12.isCurrent();
dto.isBacklog=_12.isBacklog();
dto.arguments=this._toPath(_12);
dto.iconUrl=_12.getIconUrl();
dto.startDate=_12.getStartDate()!=null?dojo.date.stamp.toISOString(_12.getStartDate()):null;
dto.endDate=_12.getEndDate()!=null?dojo.date.stamp.toISOString(_12.getEndDate()):null;
return dto;
},_toPath:function(_13){
var _14=_13.getId();
if(_13.getParentId()!=null&&_13.getParentId().length>0){
_14=_13.getParentId()+"/"+_14;
}
return _14;
}});
_e._splitIterationPath=function(_15){
if(_15==null){
return ["",""];
}
if(_15.indexOf("/")===-1){
return ["",_15];
}
var _16=_15.slice(1);
_16=_16.replace(new RegExp("^[^/]+/"),"");
return [_16.substring(0,_16.lastIndexOf("/")),_16];
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.StringAttributeType");








(function(){
var _1=com.ibm.team;
var _2=_1.rtc.foundation.web.model.Label;
var _3=_1.workitem.web;
var _4=_3.client.internal.ScriptValueResolver;
var _5=_3.internal.model.types.LegacyModelBinding;
var _6=_3.model.types.AttributeType;
var _7=dojo.declare("com.ibm.team.workitem.web.internal.model.types.StringAttributeType",_6,{constructor:function(_8){
this.inherited(arguments,[_8,new _9(),new _a(),new _b()]);
},compareValue:function(_c,_d){
if(_c==null){
return _d==null;
}else{
if(_d==null){
return false;
}
}
return _7.normalize(_c)===_7.normalize(_d);
}});
var _9=dojo.declare("com.ibm.team.workitem.web.internal.model.types.StringAttributeType.StringLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_e){
return new _2(_e);
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _a=dojo.declare("com.ibm.team.workitem.web.internal.model.types.StringAttributeType.StringResolver",_4,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_f,_10){
return dojo.isString(_f)?_f:null;
},_getNullValue:function(){
return "";
}});
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.StringAttributeType.StringBinding",_5,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_11){
var _12=this.getString(_11);
if(_12==null){
console.debug("[Value Conversion]: could not interpret "+_11+" as a string. Returning as empty string.");
_12="";
}
return _12;
},getString:function(_13){
var _14=null;
var _15=_13;
var _16=_13;
if(_15.content!=null){
_14=_15.content;
}else{
if(_16.label!=null){
_14=_16.label;
}else{
if(dojo.isString(_13)){
_14=String(_13);
}
}
}
return _14;
},toLegacy:function(_17){
var _18={};
_18.content=_17;
_18.isHTML=false;
return _18;
},toLegacyId:function(_19){
return this.toLegacy(_19).content;
}});
_7.normalize=function(_1a){
return _1a.replace("\r\n","\n");
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.LongAttributeType");








(function(){
var _1=com.ibm.team.workitem.web;
var _2=_1.client.internal.ScriptValueResolver;
var _3=_1.internal.model.types;
var _4=_3.LegacyModelBinding;
var _5=_3.StringAttributeType.StringLabelProvider;
var _6=_1.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.LongAttributeType",_6,{constructor:function(_7){
this.inherited(arguments,[_7,new _5(),new _8(),new _9()]);
}});
var _8=dojo.declare("com.ibm.team.workitem.web.internal.model.types.LongAttributeType.LongResolver",_2,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_a,_b){
if(isNaN(_a)){
return null;
}
return dojo.isString(_a)?_a:(_a).toString();
},_getNullValue:function(){
return "0";
}});
var _9=dojo.declare("com.ibm.team.workitem.web.internal.model.types.LongAttributeType.LongBinding",_4,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_c){
var _d="";
var _e=_c;
if(_e.id!=null){
_d=_e.id;
}else{
if(_e.label!=null){
_d=_e.label;
}else{
if(dojo.isString(_c)){
_d=String(_c);
}else{
console.debug("[Value Conversion]: could not interpret "+_c+" as a string. Returning as empty string.");
}
}
}
return _d;
},toLegacy:function(_f){
var _10={};
_10.id=_f;
_10.label=_f;
return _10;
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.api.process.model.ProcessArea");


(function(){
var _1=com.ibm.team.rtc.foundation.web.api.model.Item;
var _2=_1.AbstractItemBuilder;
var _3=dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.ProcessArea",_1,{constructor:function(_4,_5){
this.inherited(arguments,[_4,_5]);
},equals:function(o){
if(o==null||!(o instanceof _3)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.rtc.foundation.api.common.process.model.IProcessArea":true}});
dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.ProcessArea.ProcessAreaBuilder",_2,{constructor:function(_6,_7){
this.inherited(arguments,[_6,_7]);
},_create:function(_8,_9){
return new _3(_8,_9);
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.ProcessAreaAttributeType");










dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.api.process.model.ProcessArea.ProcessAreaBuilder;
var _4=_2.workitem.web;
var _5=_4.internal.model.types;
var _6=_5.AbstractItemAttributeType.AbstractItemBinding;
var _7=_5.ItemAttributeType;
var _8=_7.ItemLabelProvider;
var _9=_7.ItemResolver;
var _a=_4.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.ProcessAreaAttributeType",_a,{constructor:function(_b){
this.inherited(arguments,[_b,new _8(),new _9(),new _c()]);
}});
var _c=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ProcessAreaAttributeType.ProcessAreaBinding",_6,{constructor:function(){
this.inherited(arguments,[]);
},_createItem:function(_d){
var _e=_d;
if(_e.id!=null&&_e.id!==""){
return new _3(_e.id).label(_e.label).iconUrl(this._getIconUrl(_e.iconUrl)).build();
}
return this._createUnassignedItem();
},_createUnassignedItem:function(){
return new _3(_a.UNASSIGNED_ITEM_ID).label(_1.labelUnassigned).isNull(true).build();
}});
})();


;define("dojox/uuid/_base",["dojo/_base/kernel","dojo/_base/lang"],function(_1){
_1.getObject("uuid",true,dojox);
dojox.uuid.NIL_UUID="00000000-0000-0000-0000-000000000000";
dojox.uuid.version={UNKNOWN:0,TIME_BASED:1,DCE_SECURITY:2,NAME_BASED_MD5:3,RANDOM:4,NAME_BASED_SHA1:5};
dojox.uuid.variant={NCS:"0",DCE:"10",MICROSOFT:"110",UNKNOWN:"111"};
dojox.uuid.assert=function(_2,_3){
if(!_2){
if(!_3){
_3="An assert statement failed.\n"+"The method dojox.uuid.assert() was called with a 'false' value.\n";
}
throw new Error(_3);
}
};
dojox.uuid.generateNilUuid=function(){
return dojox.uuid.NIL_UUID;
};
dojox.uuid.isValid=function(_4){
_4=_4.toString();
var _5=(_1.isString(_4)&&(_4.length==36)&&(_4==_4.toLowerCase()));
if(_5){
var _6=_4.split("-");
_5=((_6.length==5)&&(_6[0].length==8)&&(_6[1].length==4)&&(_6[2].length==4)&&(_6[3].length==4)&&(_6[4].length==12));
var _7=16;
for(var i in _6){
var _8=_6[i];
var _9=parseInt(_8,_7);
_5=_5&&isFinite(_9);
}
}
return _5;
};
dojox.uuid.getVariant=function(_a){
if(!dojox.uuid._ourVariantLookupTable){
var _b=dojox.uuid.variant;
var _c=[];
_c[0]=_b.NCS;
_c[1]=_b.NCS;
_c[2]=_b.NCS;
_c[3]=_b.NCS;
_c[4]=_b.NCS;
_c[5]=_b.NCS;
_c[6]=_b.NCS;
_c[7]=_b.NCS;
_c[8]=_b.DCE;
_c[9]=_b.DCE;
_c[10]=_b.DCE;
_c[11]=_b.DCE;
_c[12]=_b.MICROSOFT;
_c[13]=_b.MICROSOFT;
_c[14]=_b.UNKNOWN;
_c[15]=_b.UNKNOWN;
dojox.uuid._ourVariantLookupTable=_c;
}
_a=_a.toString();
var _d=_a.charAt(19);
var _e=16;
var _f=parseInt(_d,_e);
dojox.uuid.assert((_f>=0)&&(_f<=16));
return dojox.uuid._ourVariantLookupTable[_f];
};
dojox.uuid.getVersion=function(_10){
var _11="dojox.uuid.getVersion() was not passed a DCE Variant UUID.";
dojox.uuid.assert(dojox.uuid.getVariant(_10)==dojox.uuid.variant.DCE,_11);
_10=_10.toString();
var _12=_10.charAt(14);
var _13=16;
var _14=parseInt(_12,_13);
return _14;
};
dojox.uuid.getNode=function(_15){
var _16="dojox.uuid.getNode() was not passed a TIME_BASED UUID.";
dojox.uuid.assert(dojox.uuid.getVersion(_15)==dojox.uuid.version.TIME_BASED,_16);
_15=_15.toString();
var _17=_15.split("-");
var _18=_17[4];
return _18;
};
dojox.uuid.getTimestamp=function(_19,_1a){
var _1b="dojox.uuid.getTimestamp() was not passed a TIME_BASED UUID.";
dojox.uuid.assert(dojox.uuid.getVersion(_19)==dojox.uuid.version.TIME_BASED,_1b);
_19=_19.toString();
if(!_1a){
_1a=null;
}
switch(_1a){
case "string":
case String:
return dojox.uuid.getTimestamp(_19,Date).toUTCString();
break;
case "hex":
var _1c=_19.split("-");
var _1d=_1c[0];
var _1e=_1c[1];
var _1f=_1c[2];
_1f=_1f.slice(1);
var _20=_1f+_1e+_1d;
dojox.uuid.assert(_20.length==15);
return _20;
break;
case null:
case "date":
case Date:
var _21=3394248;
var _22=16;
var _23=_19.split("-");
var _24=parseInt(_23[0],_22);
var _25=parseInt(_23[1],_22);
var _26=parseInt(_23[2],_22);
var _27=_26&4095;
_27<<=16;
_27+=_25;
_27*=4294967296;
_27+=_24;
var _28=_27/10000;
var _29=60*60;
var _2a=_21;
var _2b=_2a*_29;
var _2c=_2b*1000;
var _2d=_28-_2c;
var _2e=new Date(_2d);
return _2e;
break;
default:
dojox.uuid.assert(false,"dojox.uuid.getTimestamp was not passed a valid returnType: "+_1a);
break;
}
};
return dojox.uuid;
});


;define("dojox/uuid",["dojox/uuid/_base"],function(_1){
return _1;
});


;define("dojox/uuid/generateRandomUuid",["./_base"],function(){
dojox.uuid.generateRandomUuid=function(){
var _1=16;
function _2(){
var _3=Math.floor((Math.random()%1)*Math.pow(2,32));
var _4=_3.toString(_1);
while(_4.length<8){
_4="0"+_4;
}
return _4;
};
var _5="-";
var _6="4";
var _7="8";
var a=_2();
var b=_2();
b=b.substring(0,4)+_5+_6+b.substring(5,8);
var c=_2();
c=_7+c.substring(1,4)+_5+c.substring(4,8);
var d=_2();
var _8=a+_5+b+_5+c+d;
_8=_8.toLowerCase();
return _8;
};
return dojox.uuid.generateRandomUuid;
});


;define("dojox/uuid/generateTimeBasedUuid",["dojo/_base/lang","./_base"],function(_1){
dojox.uuid.generateTimeBasedUuid=function(_2){
var _3=dojox.uuid.generateTimeBasedUuid._generator.generateUuidString(_2);
return _3;
};
dojox.uuid.generateTimeBasedUuid.isValidNode=function(_4){
var _5=16;
var _6=parseInt(_4,_5);
var _7=_1.isString(_4)&&_4.length==12&&isFinite(_6);
return _7;
};
dojox.uuid.generateTimeBasedUuid.setNode=function(_8){
dojox.uuid.assert((_8===null)||this.isValidNode(_8));
this._uniformNode=_8;
};
dojox.uuid.generateTimeBasedUuid.getNode=function(){
return this._uniformNode;
};
dojox.uuid.generateTimeBasedUuid._generator=new function(){
this.GREGORIAN_CHANGE_OFFSET_IN_HOURS=3394248;
var _9=null;
var _a=null;
var _b=null;
var _c=0;
var _d=null;
var _e=null;
var _f=16;
function _10(_11){
_11[2]+=_11[3]>>>16;
_11[3]&=65535;
_11[1]+=_11[2]>>>16;
_11[2]&=65535;
_11[0]+=_11[1]>>>16;
_11[1]&=65535;
dojox.uuid.assert((_11[0]>>>16)===0);
};
function _12(x){
var _13=new Array(0,0,0,0);
_13[3]=x%65536;
x-=_13[3];
x/=65536;
_13[2]=x%65536;
x-=_13[2];
x/=65536;
_13[1]=x%65536;
x-=_13[1];
x/=65536;
_13[0]=x;
return _13;
};
function _14(_15,_16){
dojox.uuid.assert(_1.isArray(_15));
dojox.uuid.assert(_1.isArray(_16));
dojox.uuid.assert(_15.length==4);
dojox.uuid.assert(_16.length==4);
var _17=new Array(0,0,0,0);
_17[3]=_15[3]+_16[3];
_17[2]=_15[2]+_16[2];
_17[1]=_15[1]+_16[1];
_17[0]=_15[0]+_16[0];
_10(_17);
return _17;
};
function _18(_19,_1a){
dojox.uuid.assert(_1.isArray(_19));
dojox.uuid.assert(_1.isArray(_1a));
dojox.uuid.assert(_19.length==4);
dojox.uuid.assert(_1a.length==4);
var _1b=false;
if(_19[0]*_1a[0]!==0){
_1b=true;
}
if(_19[0]*_1a[1]!==0){
_1b=true;
}
if(_19[0]*_1a[2]!==0){
_1b=true;
}
if(_19[1]*_1a[0]!==0){
_1b=true;
}
if(_19[1]*_1a[1]!==0){
_1b=true;
}
if(_19[2]*_1a[0]!==0){
_1b=true;
}
dojox.uuid.assert(!_1b);
var _1c=new Array(0,0,0,0);
_1c[0]+=_19[0]*_1a[3];
_10(_1c);
_1c[0]+=_19[1]*_1a[2];
_10(_1c);
_1c[0]+=_19[2]*_1a[1];
_10(_1c);
_1c[0]+=_19[3]*_1a[0];
_10(_1c);
_1c[1]+=_19[1]*_1a[3];
_10(_1c);
_1c[1]+=_19[2]*_1a[2];
_10(_1c);
_1c[1]+=_19[3]*_1a[1];
_10(_1c);
_1c[2]+=_19[2]*_1a[3];
_10(_1c);
_1c[2]+=_19[3]*_1a[2];
_10(_1c);
_1c[3]+=_19[3]*_1a[3];
_10(_1c);
return _1c;
};
function _1d(_1e,_1f){
while(_1e.length<_1f){
_1e="0"+_1e;
}
return _1e;
};
function _20(){
var _21=Math.floor((Math.random()%1)*Math.pow(2,32));
var _22=_21.toString(_f);
while(_22.length<8){
_22="0"+_22;
}
return _22;
};
this.generateUuidString=function(_23){
if(_23){
dojox.uuid.assert(dojox.uuid.generateTimeBasedUuid.isValidNode(_23));
}else{
if(dojox.uuid.generateTimeBasedUuid._uniformNode){
_23=dojox.uuid.generateTimeBasedUuid._uniformNode;
}else{
if(!_9){
var _24=32768;
var _25=Math.floor((Math.random()%1)*Math.pow(2,15));
var _26=(_24|_25).toString(_f);
_9=_26+_20();
}
_23=_9;
}
}
if(!_a){
var _27=32768;
var _28=Math.floor((Math.random()%1)*Math.pow(2,14));
_a=(_27|_28).toString(_f);
}
var now=new Date();
var _29=now.valueOf();
var _2a=_12(_29);
if(!_d){
var _2b=_12(60*60);
var _2c=_12(dojox.uuid.generateTimeBasedUuid._generator.GREGORIAN_CHANGE_OFFSET_IN_HOURS);
var _2d=_18(_2c,_2b);
var _2e=_12(1000);
_d=_18(_2d,_2e);
_e=_12(10000);
}
var _2f=_2a;
var _30=_14(_d,_2f);
var _31=_18(_30,_e);
if(now.valueOf()==_b){
_31[3]+=_c;
_10(_31);
_c+=1;
if(_c==10000){
while(now.valueOf()==_b){
now=new Date();
}
}
}else{
_b=now.valueOf();
_c=1;
}
var _32=_31[2].toString(_f);
var _33=_31[3].toString(_f);
var _34=_1d(_32,4)+_1d(_33,4);
var _35=_31[1].toString(_f);
_35=_1d(_35,4);
var _36=_31[0].toString(_f);
_36=_1d(_36,3);
var _37="-";
var _38="1";
var _39=_34+_37+_35+_37+_38+_36+_37+_a+_37+_23;
_39=_39.toLowerCase();
return _39;
};
}();
return dojox.uuid.generateTimeBasedUuid;
});


;dojo.provide("com.ibm.team.rtc.foundation.web.api.process.model.ProjectArea");










(function(){
var _1=com.ibm.team.rtc.foundation.web.api;
var _2=_1.model.Item.AbstractItemBuilder;
var _3=_1.process.model.ProcessArea;
var _4=dojox.uuid;
var _5=dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.ProjectArea",_3,{constructor:function(_6,_7){
this.inherited(arguments,[_6,_7]);
},getConfigurationStateId:function(){
if(this._configurationStateId==null){
this._configurationStateId=_4.generateRandomUuid();
}
return this._configurationStateId;
},equals:function(o){
if(o==null||!(o instanceof _5)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.rtc.foundation.api.common.process.model.IProjectArea":true}});
dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.ProjectArea.ProjectAreaBuilder",_2,{constructor:function(_8,_9){
this.inherited(arguments,[_8,_9]);
},configurationStateId:function(_a){
this._item._configurationStateId=_a;
return this;
},_create:function(_b,_c){
return new _5(_b,_c);
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.ProjectAreaAttributeType");












dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.jdojo.lang.Runtime;
var _3=com.ibm.team;
var _4=_3.rtc.foundation.web.api.process.model.ProjectArea;
var _5=_4.ProjectAreaBuilder;
var _6=_3.workitem.web;
var _7=_6.internal.model.types;
var _8=_7.AbstractItemAttributeType.AbstractItemBinding;
var _9=_7.ItemAttributeType;
var _a=_9.ItemLabelProvider;
var _b=_9.ItemResolver;
var _c=_6.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.ProjectAreaAttributeType",_c,{constructor:function(_d){
this.inherited(arguments,[_d,new _a(),new _b(),new _e()]);
}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.ProjectAreaAttributeType.ProjectAreaBinding",_8,{constructor:function(){
this.inherited(arguments,[]);
},_createItem:function(_f){
var dto=_f;
if(dto.id!=null&&dto.id!==""){
return new _5(dto.id).configurationStateId(dto.configurationStateId).label(dto.label).iconUrl(this._getIconUrl(dto.iconUrl)).build();
}
return this._createUnassignedItem();
},_createDto:function(_10){
var dto=this.inherited("_createDto",arguments,[_10]);
if(_2.isInstance(_10,_4)){
dojo.mixin(dto,{configurationStateId:_10.getConfigurationStateId()});
}
return dto;
},_createUnassignedItem:function(){
return new _5(_c.UNASSIGNED_ITEM_ID).label(_1.labelUnassigned).isNull(true).build();
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.views.tags.TagsFormatter");
(function(){
var _1=dojo.declare("com.ibm.team.rtc.foundation.web.ui.views.tags.TagsFormatter",null,{"-chains-":{constructor:"manual"},constructor:function(){
}});
_1.TAGS_SEPARATOR=", ";
_1.TAGS_SEPARATOR_REGEX=new RegExp("["+_1.TAGS_SEPARATOR+"]+");
_1.EMPTY_TAG="";
_1.parse=function(_2){
return _2!=null&&_2!==_1.EMPTY_TAG?dojo.filter(_2.split(_1.TAGS_SEPARATOR_REGEX),function(_3,_4,_5){
return _3!==_1.EMPTY_TAG;
}):[];
};
_1.format=function(_6){
var _7="";
if(_6==null||_6.length===0){
return _7;
}
var _8={};
var _9=false;
for(var i=0;i<_6.length;i++){
var _a=dojo.trim(_6[i]);
_9=_a===_1.EMPTY_TAG;
if(!_9){
_8[_a]=_a;
_7+=_1._anotherTag(_6,i);
}
}
if(_9){
_7=_7.substring(0,_7.length-_1.TAGS_SEPARATOR.length);
}
return _7;
};
_1._anotherTag=function(_b,i){
var _c=_b[i];
if(_b.length>1&&i<_b.length-1){
_c+=_1.TAGS_SEPARATOR;
}
return _c;
};
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.TagsAttributeType");








(function(){
var _1=com.ibm.jdojox.util.ArrayList;
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.ui.views.tags.TagsFormatter;
var _4=_2.workitem.web.internal.model.types;
var _5=_4.ListAttributeType;
var _6=_5.ListBinding;
var _7=_5.ListLabelProvider;
var _8=_4.StringAttributeType.StringBinding;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.TagsAttributeType",_5,{constructor:function(_9,_a){
this.inherited(arguments,[_9,_a,new _7(_a.getLabelProvider()),null,new _b(_a.getLegacyModelBinding())]);
}});
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TagsAttributeType.TagsBinding",_6,{constructor:function(_c){
this.inherited(arguments,[_c]);
this._stringBinding=new _8();
this._listBinding=new _6(this._stringBinding);
},fromLegacy:function(_d){
var _e=this._stringBinding.getString(_d);
if(_e!=null){
return new _1(_3.parse(_e));
}
return this._listBinding.fromLegacy(_d);
},toLegacy:function(_f){
return this._stringBinding.toLegacy(_3.format(_f.toArray()));
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.api.process.model.TeamArea");




(function(){
var _1=com.ibm.team.rtc.foundation.web.api;
var _2=_1.model.Item.AbstractItemBuilder;
var _3=_1.process.model.ProcessArea;
var _4=dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.TeamArea",_3,{constructor:function(_5,_6){
this.inherited(arguments,[_5,_6]);
},equals:function(o){
if(o==null||!(o instanceof _4)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.rtc.foundation.api.common.process.model.ITeamArea":true}});
dojo.declare("com.ibm.team.rtc.foundation.web.api.process.model.TeamArea.TeamAreaBuilder",_2,{constructor:function(_7,_8){
this.inherited(arguments,[_7,_8]);
},_create:function(_9,_a){
return new _4(_9,_a);
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.TeamAreaAttributeType");










dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.api.process.model.TeamArea.TeamAreaBuilder;
var _4=_2.workitem.web;
var _5=_4.internal.model.types;
var _6=_5.AbstractItemAttributeType.AbstractItemBinding;
var _7=_5.ItemAttributeType;
var _8=_7.ItemLabelProvider;
var _9=_7.ItemResolver;
var _a=_4.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.TeamAreaAttributeType",_a,{constructor:function(_b){
this.inherited(arguments,[_b,new _8(),new _9(),new _c()]);
}});
var _c=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TeamAreaAttributeType.TeamAreaBinding",_6,{constructor:function(){
this.inherited(arguments,[]);
},_createItem:function(_d){
var _e=_d;
if(_e.id!=null&&_e.id!==""){
return new _3(_e.id).label(_e.label).iconUrl(this._getIconUrl(_e.iconUrl)).build();
}
return this._createUnassignedItem();
},_createUnassignedItem:function(){
return new _3(_a.UNASSIGNED_ITEM_ID).label(_1.labelUnassigned).isNull(true).build();
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.TimeLineAttributeType");










dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.api.model.Item.ItemBuilder;
var _4=_2.workitem.web;
var _5=_4.internal.model.types;
var _6=_5.AbstractItemAttributeType;
var _7=_6.AbstractItemBinding;
var _8=_5.ItemAttributeType;
var _9=_8.ItemLabelProvider;
var _a=_8.ItemResolver;
var _b=_4.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.TimeLineAttributeType",_6,{constructor:function(_c){
this.inherited(arguments,[_c,new _9(),new _a(),new _d()]);
}});
var _d=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TimeLineAttributeType.TimeLineBinding",_7,{constructor:function(){
this.inherited(arguments,[]);
},_createItem:function(_e){
var _f=_e;
if(_f.id!=null&&_f.id!==""){
return new _3(_f.id).label(_f.label).iconUrl(this._getIconUrl(_f.iconUrl)).build();
}
return this._createUnassignedItem();
},_createUnassignedItem:function(){
return new _3(_b.UNASSIGNED_ITEM_ID).label(_1.labelUnassigned).isNull(true).build();
}});
})();


;dojo.provide("com.ibm.team.workitem.web.model.WorkItemType");


(function(){
var _1=com.ibm.team.workitem.web.model.ConfigurationItem;
var _2=dojo.declare("com.ibm.team.workitem.web.model.WorkItemType",_1,{constructor:function(_3,_4){
this.inherited(arguments,[_3,_4]);
},equals:function(o){
if(o==null||!(o instanceof _2)){
return false;
}
return this.inherited("equals",arguments,[o]);
},$interfaces:{"com.ibm.team.workitem.api.common.IWorkItemType":true}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.TypeAttributeType");














dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.model.Label;
var _4=_2.workitem.web;
var _5=_4.client.internal.ScriptValueResolver;
var _6=_4.internal.model.types.LegacyModelBinding;
var _7=_4.model;
var _8=_7.WorkItemType;
var _9=_7.types.AttributeType;
var _a=dojo.string;
var _b=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TypeAttributeType",_9,{constructor:function(_c){
this.inherited(arguments,[_c,new _d(),new _e(),new _f()]);
}});
var _d=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TypeAttributeType.TypeLabelProvider",null,{"-chains-":{constructor:"manual"},getLabel:function(_10){
return new _3(_10.getLabel()).iconUrl(_10.getIconUrl());
},$interfaces:{"com.ibm.team.rtc.foundation.web.model.ILabelProvider":true}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TypeAttributeType.TypeResolver",_5,{constructor:function(){
this.inherited(arguments,[]);
},_resolve:function(_11,_12){
if(dojo.isString(_11)){
for(var $it=_12.iterator();$it.hasNext();){
var _13=$it.next();
if(_11===_13.getIdentifier()){
return _13;
}
}
return new _8(_11,_11);
}
return null;
}});
var _f=dojo.declare("com.ibm.team.workitem.web.internal.model.types.TypeAttributeType.TypeBinding",_6,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_14){
var _15=_14;
if(_15.id==null||_6._isGenericUnassigned(_14)){
if(_1.labelUnassigned!==_15.label){
console.warn(_a.substitute(_b.INCONSISTENT_UNASSIGNED_WI_TYPE_NAME,[_15.label,_1.labelUnassigned]));
}
return new _8(_9.UNASSIGNED_ITEM_ID,_1.labelUnassigned);
}
return new _8(_15.id,_15.label).iconUrl(this._getIconUrl(_15.iconUrl));
},toLegacy:function(_16){
if(_16.getIdentifier()===_9.UNASSIGNED_ITEM_ID){
var _17={};
_17.id="";
_17.label=_1.labelUnassigned;
return _17;
}
var _18={};
var _19=_16;
_18.id=_19.getIdentifier();
_18.label=_19.getLabel();
_18.iconUrl=_19.getIconUrl();
return _18;
}});
_b.INCONSISTENT_UNASSIGNED_WI_TYPE_NAME="Label of the Unassigned WorkItemType is inconsistent on the server (${0}) and the web client (${1}). Please file a defect for this.";
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.WikiAttributeType");






(function(){
var _1=com.ibm.team.workitem.web;
var _2=_1.internal.model.types;
var _3=_2.LegacyModelBinding;
var _4=_2.StringAttributeType;
var _5=_4.StringLabelProvider;
var _6=_4.StringResolver;
var _7=_1.model.types.AttributeType;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.WikiAttributeType",_7,{constructor:function(_8){
this.inherited(arguments,[_8,new _5(),new _6(),new _9()]);
},compareValue:function(_a,_b){
if(_a==null){
return _b==null;
}else{
if(_b==null){
return false;
}
}
return _4.normalize(_a)===_4.normalize(_b);
}});
var _9=dojo.declare("com.ibm.team.workitem.web.internal.model.types.WikiAttributeType.WikiBinding",_3,{constructor:function(){
this.inherited(arguments,[]);
},fromLegacy:function(_c){
var _d=_c;
return _d.content;
},toLegacy:function(_e){
var _f={};
_f.content=_e;
_f.isHTML=false;
return _f;
},toLegacyId:function(_10){
return this.toLegacy(_10).content;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.internal.model.types.WorkItemAttributeType");










dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WorkItemEditorMessages");
var _2=com.ibm.team.workitem.web;
var _3=_2.internal.model.types;
var _4=_3.AbstractItemAttributeType;
var _5=_3.ItemAttributeType;
var _6=_5.ItemLabelProvider;
var _7=_5.ItemResolver;
var _8=_3.LegacyModelBinding;
var _9=_2.model.WorkItem.WorkItemBuilder;
dojo.declare("com.ibm.team.workitem.web.internal.model.types.WorkItemAttributeType",_4,{constructor:function(_a,_b,_c,_d){
this.inherited(arguments,[_a,new _6(),new _7(),new _e(_b,_c,_d)]);
},compareValue:function(_f,_10){
if(_f==null){
return _10==null;
}else{
if(_10==null){
return false;
}
}
return _f.getItemId()===_10.getItemId();
}});
var _e=dojo.declare("com.ibm.team.workitem.web.internal.model.types.WorkItemAttributeType.WorkItemBinding",_8,{constructor:function(_11,_12,_13){
this.inherited(arguments,[]);
this._htmlTextAttributeType=_11;
this._integerAttributeType=_12;
this._workItemTypeAttributeType=_13;
},fromLegacy:function(_14){
var dto=_14;
if(dto.itemId==null){
return null;
}
var id=0;
var _15=null;
var _16=null;
var _17=dto.attributes;
var _18=_17.length;
for(var _19=0;_19<_18;_19++){
var _1a=_17[_19];
if(_1a.key==="summary"){
_15=this._htmlTextAttributeType.getLegacyModelBinding().fromLegacy2(_1a.value,this._htmlTextAttributeType.getNullValue());
}else{
if(_1a.key==="id"){
id=this._integerAttributeType.getLegacyModelBinding().fromLegacy2(_1a.value,this._integerAttributeType.getNullValue());
}else{
if(_1a.key==="workItemType"){
_16=this._workItemTypeAttributeType.getLegacyModelBinding().fromLegacy2(_1a.value,this._workItemTypeAttributeType.getNullValue());
}
}
}
}
if(id<=0){
console.debug("Legacy bindings should not convert new work items");
return null;
}
if(_15==null){
console.debug("Summary is mandatory value for an existing work item");
return null;
}
return new _9(dto.itemId).id(id).summary(_15).type(_16).url(dto.locationUri).build();
},toLegacy:function(_1b){
var _1c=_1b;
if(_1c!=null){
var dto={};
dto["_eQualifiedClassName"]="com.ibm.team.workitem.rest.dto:WorkItemDTO";
dto.itemId=_1c.getItemId();
dto.attributes=[{key:"summary",value:this._htmlTextAttributeType.getLegacyModelBinding().toLegacy(_1c.getSummary())},{key:"id",value:this._integerAttributeType.getLegacyModelBinding().toLegacy(_1c.getId())}];
dto.locationUri=_1c.getUrl();
return dto;
}else{
var dto={};
dto.label=_1.labelUnassigned;
dto.id="";
return dto;
}
},toLegacyId:function(_1d){
var dto=this.toLegacy(_1d);
return dto.itemId;
}});
})();


;dojo.provide("com.ibm.team.workitem.web.model.types.AttributeTypes");
























































(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.team.workitem.web;
var _3=_2.internal.model.types;
var _4=_3.BooleanAttributeType;
var _5=_3.CategoryAttributeType;
var _6=_3.CommentsAttributeType;
var _7=_3.ContributorAttributeType;
var _8=_7.SubscriberAttributeType;
var _9=_3.DecimalAttributeType;
var _a=_3.DeliverableAttributeType;
var _b=_3.DurationAttributeType;
var _c=_3.ESignatureAttributeType;
var _d=_3.EnumerationAttributeType;
var _e=_3.HTMLAttributeType;
var _f=_3.IntegerAttributeType;
var _10=_3.ItemAttributeType;
var _11=_3.IterationAttributeType;
var _12=_3.LegacyModelBinding;
var _13=_3.ListAttributeType;
var _14=_3.LongAttributeType;
var _15=_3.ProcessAreaAttributeType;
var _16=_3.ProjectAreaAttributeType;
var _17=_3.StringAttributeType;
var _18=_3.TagsAttributeType;
var _19=_3.TeamAreaAttributeType;
var _1a=_3.TimeLineAttributeType;
var _1b=_3.TimestampAttributeType;
var _1c=_3.TypeAttributeType;
var _1d=_3.WikiAttributeType;
var _1e=_3.WorkItemAttributeType;
var _1f=_2.model.WorkItem;
var _20=dojo.declare("com.ibm.team.workitem.web.model.types.AttributeTypes",null,{"-chains-":{constructor:"manual"}});
_20.BOOLEAN="boolean";
_20.BOOLEAN_TYPE=new _4("boolean");
_20.DECIMAL="decimal";
_20.DECIMAL_TYPE=new _9("decimal");
_20.DURATION="duration";
_20.DURATION_TYPE=new _b("duration");
_20.INTEGER="integer";
_20.INTEGER_TYPE=new _f("integer");
_20.LONG="long";
_20.LONG_TYPE=new _14("long");
_20.TIMESTAMP="timestamp";
_20.TIMESTAMP_TYPE=new _1b("timestamp");
_20.SMALL_STRING="smallString";
_20.SMALL_STRING_TYPE=new _17("smallString");
_20.MEDIUM_STRING="mediumString";
_20.MEDIUM_STRING_TYPE=new _17("mediumString");
_20.LARGE_STRING="string";
_20.STRING_TYPE=new _17("string");
_20.STRING_ATTRIBUTE_TYPES=[_20.SMALL_STRING_TYPE,_20.MEDIUM_STRING_TYPE,_20.STRING_TYPE];
_20.MEDIUM_HTML="mediumHtml";
_20.MEDIUM_HTML_TYPE=new _e("mediumHtml");
_20.LARGE_HTML="html";
_20.LARGE_HTML_TYPE=new _e("html");
_20.HTML_ATTRIBUTE_TYPES=[_20.MEDIUM_HTML_TYPE,_20.LARGE_HTML_TYPE];
_20.WIKI="wiki";
_20.WIKI_TYPE=new _1d("wiki");
_20.E_SIGNATURE="eSignature";
_20.E_SIGNATURE_TYPE=new _c("eSignature");
_20.TYPE="type";
_20.TYPE_ATTRIBUTE_TYPE=new _1c("type");
_20.PRIORITY="priority";
_20.PRIORITY_TYPE=new _d("priority");
_20.SEVERITY="severity";
_20.SEVERITY_TYPE=new _d("severity");
_20.ENUMERATION="enumeration";
_20.ENUMERATION_TYPE=new _d("enumeration");
_20.CONTRIBUTOR="contributor";
_20.CONTRIBUTOR_TYPE=new _7("contributor");
_20.ITERATION="interval";
_20.ITERATION_TYPE=new _11("interval");
_20.PROCESS_AREA="processArea";
_20.PROCESS_AREA_TYPE=new _15("processArea");
_20.PROJECT_AREA="projectArea";
_20.PROJECT_AREA_TYPE=new _16("projectArea");
_20.TEAM_AREA="teamArea";
_20.TEAM_AREA_TYPE=new _19("teamArea");
_20.TIMELINE="timeline";
_20.TIMELINE_TYPE=new _1a("timeline");
_20.CATEGORY="category";
_20.CATEGORY_TYPE=new _5("category");
_20.DELIVERABLE="deliverable";
_20.DELIVERABLE_TYPE=new _a("deliverable");
_20.WORK_ITEM="workItem";
_20.WORK_ITEM_TYPE=new _1e("workItem",_20.MEDIUM_HTML_TYPE,_20.INTEGER_TYPE,_20.TYPE_ATTRIBUTE_TYPE);
_20.ITEM="item";
_20.ITEM_TYPE=new _10("item",_20.WORK_ITEM_TYPE,_20.CONTRIBUTOR_TYPE);
_20.TAGS="tags";
_20.TAGS_TYPE=new _18("tags",_20.STRING_TYPE);
_20.COMMENTS="comments";
_20.COMMENTS_TYPE=new _6("comments");
_20.STRING_LIST="stringList";
_20.STRING_LIST_TYPE=new _13("stringList",_20.STRING_TYPE);
_20.ENUMERATION_LIST="enumerationList";
_20.ENUMERATION_LIST_TYPE=new _13("enumerationList",_20.ENUMERATION_TYPE);
_20.ITEM_LIST="itemList";
_20.ITEM_LIST_TYPE=new _13("itemList",_20.ITEM_TYPE);
_20.CONTRIBUTOR_LIST="contributorList";
_20.CONTRIBUTOR_LIST_TYPE=new _13("contributorList",_20.CONTRIBUTOR_TYPE);
_20.PROCESS_AREA_LIST="processAreaList";
_20.PROCESS_AREA_LIST_TYPE=new _13("processAreaList",_20.PROCESS_AREA_TYPE);
_20.PROJECT_AREA_LIST="projectAreaList";
_20.PROJECT_AREA_LIST_TYPE=new _13("projectAreaList",_20.PROJECT_AREA_TYPE);
_20.TEAM_AREA_LIST="teamAreaList";
_20.TEAM_AREA_LIST_TYPE=new _13("teamAreaList",_20.TEAM_AREA_TYPE);
_20.WORK_ITEM_LIST="workItemList";
_20.WORK_ITEM_LIST_TYPE=new _13("workItemList",_20.WORK_ITEM_TYPE);
_20.SUBSCRIBER="subscriber";
_20.SUBSCRIBER_TYPE=new _8("subscriber");
_20.SUBSCRIPTIONS="subscriptions";
_20.SUBSCRIPTIONS_TYPE=new _13("subscriptions",_20.SUBSCRIBER_TYPE);
_20.FLOAT="float";
_20.CUSTOM_ATTRIBUTE="customAttribute";
_20.APPROVAL_DESCRIPTORS="approvalDescriptors";
_20.APPROVALS="approvals";
_20._registry={};
_20._isInitialized=false;
_20._register=function(_21,_22){
_20._registry[_21]=_22;
};
_20.getAttributeType=function(_23){
if(!_20._isInitialized){
_20._initialize();
}
return _20._registry[_20.normalize(_23)];
};
_20.allTypes=function(){
if(!_20._isInitialized){
_20._initialize();
}
return _1.getValues(_20._registry);
};
_20._initialize=function(){
_20._register("boolean",_20.BOOLEAN_TYPE);
_20._register("decimal",_20.DECIMAL_TYPE);
_20._register("duration",_20.DURATION_TYPE);
_20._register("integer",_20.INTEGER_TYPE);
_20._register("long",_20.LONG_TYPE);
_20._register("timestamp",_20.TIMESTAMP_TYPE);
_20._register("smallString",_20.SMALL_STRING_TYPE);
_20._register("mediumString",_20.MEDIUM_STRING_TYPE);
_20._register("string",_20.STRING_TYPE);
_20._register("mediumHtml",_20.MEDIUM_HTML_TYPE);
_20._register("html",_20.LARGE_HTML_TYPE);
_20._register("wiki",_20.WIKI_TYPE);
_20._register("eSignature",_20.E_SIGNATURE_TYPE);
_20._register("type",_20.TYPE_ATTRIBUTE_TYPE);
_20._register("priority",_20.PRIORITY_TYPE);
_20._register("severity",_20.SEVERITY_TYPE);
_20._register("enumeration",_20.ENUMERATION_TYPE);
_20._register("item",_20.ITEM_TYPE);
_20._register("contributor",_20.CONTRIBUTOR_TYPE);
_20._register("interval",_20.ITERATION_TYPE);
_20._register("processArea",_20.PROCESS_AREA_TYPE);
_20._register("projectArea",_20.PROJECT_AREA_TYPE);
_20._register("teamArea",_20.TEAM_AREA_TYPE);
_20._register("timeline",_20.TIMELINE_TYPE);
_20._register("category",_20.CATEGORY_TYPE);
_20._register("deliverable",_20.DELIVERABLE_TYPE);
_20._register("workItem",_20.WORK_ITEM_TYPE);
_20._register("tags",_20.TAGS_TYPE);
_20._register("comments",_20.COMMENTS_TYPE);
_20._register("stringList",_20.STRING_LIST_TYPE);
_20._register("enumerationList",_20.ENUMERATION_LIST_TYPE);
_20._register("itemList",_20.ITEM_LIST_TYPE);
_20._register("contributorList",_20.CONTRIBUTOR_LIST_TYPE);
_20._register("processAreaList",_20.PROCESS_AREA_LIST_TYPE);
_20._register("projectAreaList",_20.PROJECT_AREA_LIST_TYPE);
_20._register("teamAreaList",_20.TEAM_AREA_LIST_TYPE);
_20._register("workItemList",_20.WORK_ITEM_LIST_TYPE);
_20._register("subscriptions",_20.SUBSCRIPTIONS_TYPE);
_20._isInitialized=true;
};
_20.NON_QUERYABLE_LARGE_STRING_EXTENSIONS=["html","string","wiki"];
_20.HTML_TYPES=["mediumHtml","html"];
_20.STRING_TYPES=["smallString","mediumString","string"];
_20.ITEM_TYPES=["teamArea","processArea","projectArea","workItem","deliverable","item","category","contributor","interval"];
_20.LIST_TYPES=["subscriptions","comments","stringList","workItemList","contributorList","processAreaList","projectAreaList","teamAreaList","itemList","tags"];
_20.LIST_CONTAINED_TYPES=["mediumString","workItem","contributor","processArea","processArea","teamArea"];
_20.ITEM_LIST_TYPES=["teamAreaList","processAreaList","projectAreaList","workItemList","itemList","contributorList"];
_20.KNOWN_TYPES=["smallString","mediumString","string","mediumHtml","html","timestamp","timeline","projectArea","teamArea","processArea","item","category","priority","interval","contributor","integer","severity","deliverable","decimal","long","boolean","comments","subscriptions","approvalDescriptors","approvals","workItem","tags","type","customAttribute","duration","itemList","teamAreaList","projectAreaList","processAreaList","contributorList","workItemList","stringList","wiki","eSignature"];
_20.KNOWN_ENUMERATION_TYPES=["priority","severity"];
_20.ENUMERATION_LIST_TYPE_PREFIX="enumerationList$";
_20.CUSTOM_ATTRIBUTE_TYPES=["smallString","mediumString","string","mediumHtml","html","integer","long","decimal","boolean","timeline","timestamp","tags","duration","wiki","eSignature","stringList"];
_20.isStringBasedType=function(_24){
return (dojo.indexOf(_20.HTML_TYPES,_24)>-1)||(dojo.indexOf(_20.STRING_TYPES,_24)>-1)||("tags"===_24)||("wiki"===_24);
};
_20.isStringType=function(_25){
return (dojo.indexOf(_20.STRING_TYPES,_25)>-1);
};
_20.isEnumerationType=function(_26){
if(_26==null||_26.length===0){
return false;
}
if(dojo.indexOf(_20.KNOWN_ENUMERATION_TYPES,_26)>=0){
return true;
}
var _27=_20.ENUMERATION_LIST_TYPE_PREFIX.length;
if(_26.length>_27&&(_26.substring(0,_27)===_20.ENUMERATION_LIST_TYPE_PREFIX)){
return false;
}
if(dojo.indexOf(_20.KNOWN_TYPES,_26)>=0){
return false;
}
return true;
};
_20.isListType=function(_28){
return _28!=null&&(dojo.indexOf(_20.LIST_TYPES,_28)>=0||_20.isEnumerationListType(_28));
};
_20.isNonQueryableLargeString=function(_29){
return _29!=null&&dojo.indexOf(_20.NON_QUERYABLE_LARGE_STRING_EXTENSIONS,_29)>=0;
};
_20.isEnumerationListType=function(_2a){
var _2b=_20.ENUMERATION_LIST_TYPE_PREFIX.length;
return _2a!=null&&(_2a.length>_2b&&(_2a.substring(0,_2b)===_20.ENUMERATION_LIST_TYPE_PREFIX));
};
_20.normalize=function(_2c){
if(_20.isEnumerationType(_2c)){
return "enumeration";
}else{
if(_20.isEnumerationListType(_2c)){
return "enumerationList";
}
}
return _2c;
};
_20.isItemType=function(_2d){
if(_2d!=null&&dojo.indexOf(_20.ITEM_TYPES,_2d)>=0){
return true;
}
return false;
};
_20.isItemListType=function(_2e){
if(_2e!=null&&dojo.indexOf(_20.ITEM_LIST_TYPES,_2e)>=0){
return true;
}
return false;
};
_20.getContainedType=function(_2f){
var _30=dojo.indexOf(_20.LIST_TYPES,_2f);
if(_30>=0&&_30<_20.LIST_CONTAINED_TYPES.length){
return _20.LIST_CONTAINED_TYPES[_30];
}
if(_20.isEnumerationListType(_2f)){
return _2f.substring(_20.ENUMERATION_LIST_TYPE_PREFIX.length);
}
return "";
};
_20.getContainerType=function(_31){
var _32=dojo.indexOf(_20.LIST_CONTAINED_TYPES,_31);
if(_32>=0&&_32<_20.LIST_TYPES.length){
return _20.LIST_TYPES[_32];
}
if(_20.isEnumerationType(_31)){
return _20.ENUMERATION_LIST_TYPE_PREFIX+_31;
}
return "";
};
_20.isSupportedCustomAttributeType=function(_33){
if(("customAttribute"===_33)){
return false;
}
if(dojo.indexOf(_20.CUSTOM_ATTRIBUTE_TYPES,_33)>=0){
return true;
}
if(_20.isEnumerationType(_33)){
return true;
}
if(_20.isItemType(_33)){
return true;
}
if(!("subscriptions"===_33)&&_20.isItemListType(_33)){
return true;
}
if(_20.isEnumerationListType(_33)){
return true;
}
return false;
};
_20.toValue2=function(_34,_35,_36){
if(_35==null){
return null;
}
if(_12._isGenericUnassigned(_35)){
return _36;
}
return _20.toValue(_34,_35);
};
_20.toValue=function(_37,_38){
if(_38==null){
return null;
}
var _39=null;
if(_37.getLegacyModelBinding()!=null){
_39=_37.getLegacyModelBinding().fromLegacy(_38);
}else{
if(!dojo.isFunction(_38["sameValue"])){
console.error("[DEBUG]: "+_37.getTypeId()+" has not been migrated to MVVM framework. Object to migrate: ");
console.debug(_38);
}
_39=_38;
}
return _39;
};
_20.toLegacyValue=function(_3a,_3b){
if(_3a.getLegacyModelBinding()!=null){
if(_3b instanceof _1f){
return _20.getAttributeType("workItem").getLegacyModelBinding().toLegacy(_3b);
}
return _3a.getLegacyModelBinding().toLegacy(_3b);
}else{
return _3b;
}
};
})();


;dojo.cache("com.ibm.team.workitem.web", "ui/internal/view/queryeditor/templates/ConditionSection.html", "<div class=\"conditionSection\">	<div class=\"filters\" dojoattachpoint=\"_filters\"></div>	<div class=\"columns\" dojoattachpoint=\"_columns\">		<div dojoattachpoint=\"_column0\" class=\"leftVarColumn\"></div>		<div dojoattachpoint=\"_column1\" class=\"rightVarColumn\"></div>		<div class=\"clear\"></div>	</div>	<div dojoattachpoint=\"_conditionContent\" class=\"conditionContent\" ></div>	<div dojoattachpoint=\"_loadingMessage\" class=\"loadingMessage\">${textLoading}</div>	<div dojoattachpoint=\"_errorDiv\" style=\"color: red; margin: 0 0.5em 0 0.5em;\"></div></div>");

;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.ConditionSection");






























dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");
(function(){
var _1=com.ibm.team.workitem.web.ui.internal.page.EventTopics;
var _2=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _3=com.ibm.team.workitem.web.client.internal.QueryClient;
var _4=com.ibm.team.workitem.web.ui.internal.view.queryeditor.VariableControl;
var _5=jazz.core.loader;
var _6=com.ibm.team.workitem.web.client.internal.query.AttributeExpression;
var _7=com.ibm.team.workitem.web.client.internal.query.Operator;
var _8=com.ibm.team.workitem.web.client.internal.query.Variable;
var _9=com.ibm.team.workitem.web.client.internal.query.UIItem;
var _a=com.ibm.team.workitem.web.ui.internal.view.queryeditor.ErrorLabel;
var _b=com.ibm.team.workitem.web.ui.internal.view.queryeditor.Presentation;
var _c=com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.ParameterValueWidget;
var _d=com.ibm.team.workitem.web.model.types.AttributeTypes;
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.ConditionSection",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("com.ibm.team.workitem.web","ui/internal/view/queryeditor/templates/ConditionSection.html"),constructor:function(_e){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");
this.textLoading=this.messages.busyLoading;
this.attributeId=_e.attributeId;
this.attributeTypeId=_e.attributeTypeId;
this.parent=_e.parent;
this.expression=_e.expression;
this.projectAreaItemId=(_e.parent)?_e.parent.projectAreaItemId:null;
this.hasParameterValue=false;
this._variableControls=new Array();
this._operator=null;
},getProjectAreaItemId:function(){
return this.projectAreaItemId;
},postCreate:function(){
this._errorLabel=new _a();
this._errorDiv.appendChild(this._errorLabel.domNode);
this._changeHandle=dojo.subscribe(com.ibm.team.workitem.web.ui.internal.page.EventTopics.QUERY_EDITOR_CHANGED,dojo.hitch(this,this._handleConditionChanged));
this._changeHandle2=dojo.subscribe(com.ibm.team.workitem.web.ui.internal.page.EventTopics.QUERY_CONDITION_SECTION_CHANGED,dojo.hitch(this,this._handleConditionChanged));
},destroy:function(){
try{
if(this._errorLabel){
this._errorLabel.destroy();
}
if(this._conditionWidget&&this._conditionWidget.destroy){
this._conditionWidget.destroy();
}
if(this._parameterValueWidget&&this._parameterValueWidget.destroy){
this._parameterValueWidget.destroy();
}
if(this._changeHandle){
dojo.unsubscribe(this._changeHandle);
}
if(this._changeHandle2){
dojo.unsubscribe(this._changeHandle2);
}
dojo.forEach(this._variableControls,function(_f){
if(_f.destroy){
_f.destroy();
}
});
this.inherited(arguments);
}
catch(e){
}
},setSectionSite:function(_10){
this._site=_10;
this._loadPresentation();
},getExpression:function(){
var _11;
var _12;
if(this.hasParameterValue){
_11=this._presentationWidget.getParameterVariables();
_12=[];
}else{
_11=this._getVariables();
_12=this._getValues();
}
if(_12.length>0||_11.length>0||(this._operator&&this._operator.getArity()==0)){
var _13=new _6(this.attributeId,this._operator);
_13.setVariables(_11);
_13.setValues(_12);
return _13;
}else{
if(this.expression&&_d.isNonQueryableLargeString(this.attributeTypeId)){
return this.expression;
}
}
return null;
},clearCondition:function(){
this._site.onClose();
},onClose:function(){
this.parent.deregister(this);
return true;
},setParameterValue:function(_14){
if(this.hasParameterValue===_14){
return;
}
if(_14){
if(this.isEditorPart()){
this._columns.style.display="none";
this._filters.style.display="none";
}
this._conditionContent.replaceChild(this._parameterValueWidget.domNode,this._conditionWidget.domNode);
this._presentationWidget=this._parameterValueWidget;
}else{
if(this.isEditorPart()&&(this._variableControls.length>0||this._filters.hasChildNodes())){
this._columns.style.display="block";
this._filters.style.display="block";
}
this._conditionContent.replaceChild(this._conditionWidget.domNode,this._parameterValueWidget.domNode);
this._presentationWidget=this._conditionWidget;
}
this.hasParameterValue=_14;
},isEditorPart:function(){
return this._site&&this._site.isEditorPart();
},addToolbar:function(_15){
this._filters.style.display="block";
this._columns.style.display="block";
this._filters.appendChild(_15.domNode);
},_loadPresentation:function(){
var srh=new _2(this,"_handlePresentation","_handlePresentationError");
_3.getPresentation(srh,this.attributeId,this.projectAreaItemId);
},_handlePresentation:function(_16){
if(this._destroyed){
return;
}
this._createWidget(_b.createFromDTO(_16));
},_createWidget:function(_17){
if(!_17){
this._hideLoadingMessage();
return;
}
var _18=this._site;
var _19=this.expression?this.expression.getOperator():_17.getOperators()[0];
this._setOperator(_19);
if(_18!=null){
_18.setTitle(_17.getAttribute().getLabel());
_18.setupMenu("label",dojo.hitch(this,this._handleSetOperator));
_18.setMenuItems(_7.createDTOs(_17.getOperators()));
_18.setSelectedMenuItem(_19.createDTO());
}
var _1a=[];
if(_17.getVariables()){
for(var i=0;i<_17.getVariables().length;i++){
if(_17.getVariables()[i].getId()!==_8.PARAMETER_VARIABLE_ID){
var _1b=_17.getVariables()[i];
_1a.push(_1b);
}
}
}
this._createVariableControls(_1a,this.expression?this.expression.getVariables(this.isEditorPart()):[]);
this._loadWidget(_17);
if(_1a.length>0&&!this.hasParameterValue){
this._columns.style.display="block";
this._filters.style.display="block";
}
},_loadWidget:function(_1c){
var _1d=_1c.getWidgetClass();
if(dojo.exists(_1d)){
this._showWidget(_1c);
return;
}
var _1e=this;
_5.load_async(_1d,function(){
try{
_1e._showWidget(_1c);
}
catch(e){
_1e._handleWidgetError(e);
}
});
},_showWidget:function(_1f){
this._hideLoadingMessage();
var _20=[];
var _21=[];
if(this.expression){
_20=_9.createDTOs(this.expression.getValues());
_21=_8.createDTOs(this.expression.getVariables(this.isEditorPart()));
}
var _22=dojo.hitch(this,this._showError);
var _23=dojo.getObject(_1f.getWidgetClass());
var _24={presentation:_1f,selection:_20,variables:_21,errorCallback:_22,section:this};
if(this.parent&&this.parent.queryResultPageControl){
_24.pageControl=this.parent.queryResultPageControl;
}
if(this.projectAreaItemId){
_24.projectAreaItemId=this.projectAreaItemId;
}
var _25=new _23(_24);
_25.container=this;
this._conditionContent.appendChild(_25.domNode);
this._conditionWidget=_25;
this._parameterValueWidget=new _c(_24);
this._presentationWidget=this._conditionWidget;
if(this._hasConditionValues()){
this.setParameterValue(typeof _21!=="undefined"&&_21.length>0&&_21[0].id===_8.PARAMETER_VARIABLE_ID);
}
this._site.setToggleParameterAction(this._hasConditionValues());
this._handleConditionChanged();
},setDerivedValueTitle:function(_26){
var _27=dojo.string.substitute(this.messages.sectionTitleBulkOperationsDerivedValue,[_26.presentation.getAttribute().getLabel(),_26.id]);
this._site.setTitle(_27);
},_hasConditionValues:function(){
return this._conditionWidget.presentation.getWidgetClass()!=="com.ibm.team.workitem.web.ui.internal.view.queryeditor.widgets.MessageWidget";
},_createVariableControls:function(_28,_29){
if(!_28){
_28=[];
}
if(!_29){
_29=[];
}
if(_28.length==0&&!this._filters.hasChildNodes()&&this.isEditorPart()){
this._columns.style.display="none";
return;
}
var _2a={};
var k=0;
for(var i=0;i<_28.length;i++){
if(_28[i].getLabel()){
this._createVariableCheckBox(_28[i].createDTO(),k%2);
_2a[_28[i].getLabel()]=true;
k++;
}
}
for(var i=0;i<_29.length;i++){
if(_29[i].getLabel()&&!_2a[_29[i].getLabel()]&&!(_8.PARAMETER_VARIABLE_ID===_29[i].getId())){
this._createVariableCheckBox(_29[i].createDTO(),k%2);
k++;
}
}
},_createVariableCheckBox:function(_2b,_2c){
var _2d=new _4({variable:_2b,section:this});
var _2e=this["_column"+_2c];
_2e.appendChild(_2d.domNode);
this._variableControls.push(_2d);
if(this._isSelected(_2b)){
_2d.setChecked(true);
}
},_isSelected:function(_2f){
if(this.expression&&this.expression.getVariables(false)){
var _30=this.expression.getVariables(false);
for(var i=0;i<_30.length;i++){
if(_30[i].getId()==_2f.id&&_30[i].getArguments()==_2f.arguments){
return true;
}
}
}
return false;
},_getVariables:function(){
var _31=new Array();
var _32=this._variableControls;
if(_32){
for(var i=0;i<_32.length;i++){
if(_32[i].isChecked()){
_31.push(_32[i].getVariable());
}
}
}
var _33=this._getWidgetVariables();
if(_33){
for(var i=0;i<_33.length;i++){
_31.push(_33[i]);
}
}
return _31;
},_getWidgetVariables:function(){
var _34=this._presentationWidget;
if(!_34||!_34.getVariables){
return [];
}
return _34.getVariables();
},_getValues:function(){
var _35=this._presentationWidget;
if(!_35){
return [];
}
var _36=_35.getValues();
var _37=[];
for(var idx=0;idx<_36.length;idx++){
_37.push(_9.createFromDTO(_36[idx]));
}
return _37;
},_handleConditionChanged:function(){
if(this._conditionWidget&&this._conditionWidget.updateStatusLabel&&this._presentationWidget&&this._presentationWidget._select){
this._conditionWidget.updateStatusLabel(this._operator.getLabel(),this._getValues(),this._getVariables());
}
},_handleSetOperator:function(_38){
this._setOperator(_7.createFromDTO(_38));
if(this._presentationWidget.handleOperatorChanged){
this._presentationWidget.handleOperatorChanged(this._operator);
}
dojo.publish(_1.QUERY_EDITOR_CHANGED,[]);
},_setOperator:function(_39){
this._operator=_39;
},_hideLoadingMessage:function(){
dojox.xml.parser.removeChildren(this._loadingMessage);
this._loadingMessage.style.display="none";
},_handlePresentationError:function(_3a){
this._showError(this.messages.errorFetchingPresentation,_3a);
},_handleWidgetError:function(_3b){
this._showError(this.messages.errorFetchingWidget,_3b);
},_showError:function(_3c,_3d){
dojox.xml.parser.replaceChildren(this._loadingMessage,document.createTextNode(this.messages.errorFetchingWidget));
this._loadingMessage.style.color="red";
this._loadingMessage.style.display="";
this._errorDiv.style.display="";
this._errorLabel.showError(_3c,_3d);
}});
})();


;define("dojox/html/styles",["dojo/_base/lang","dojo/_base/array","dojo/_base/window","dojo/_base/sniff"],function(_1,_2,_3,_4){
var dh=_1.getObject("dojox.html",true);
var _5={};
var _6={};
var _7=[];
dh.insertCssRule=function(_8,_9,_a){
var ss=dh.getDynamicStyleSheet(_a);
var _b=_8+" {"+_9+"}";
console.log("insertRule:",_b);
if(_4("ie")){
ss.cssText+=_b;
console.log("ss.cssText:",ss.cssText);
}else{
if(ss.sheet){
ss.sheet.insertRule(_b,ss._indicies.length);
}else{
ss.appendChild(_3.doc.createTextNode(_b));
}
}
ss._indicies.push(_8+" "+_9);
return _8;
};
dh.removeCssRule=function(_c,_d,_e){
var ss;
var _f=-1;
var nm;
var i;
for(nm in _5){
if(_e&&_e!==nm){
continue;
}
ss=_5[nm];
for(i=0;i<ss._indicies.length;i++){
if(_c+" "+_d===ss._indicies[i]){
_f=i;
break;
}
}
if(_f>-1){
break;
}
}
if(!ss){
console.warn("No dynamic style sheet has been created from which to remove a rule.");
return false;
}
if(_f===-1){
console.warn("The css rule was not found and could not be removed.");
return false;
}
ss._indicies.splice(_f,1);
if(_4("ie")){
ss.removeRule(_f);
}else{
if(ss.sheet){
ss.sheet.deleteRule(_f);
}
}
return true;
};
dh.modifyCssRule=function(_10,_11,_12){
};
dh.getStyleSheet=function(_13){
if(_5[_13||"default"]){
return _5[_13||"default"];
}
if(!_13){
return false;
}
var _14=dh.getStyleSheets();
if(_14[_13]){
return dh.getStyleSheets()[_13];
}
var nm;
for(nm in _14){
if(_14[nm].href&&_14[nm].href.indexOf(_13)>-1){
return _14[nm];
}
}
return false;
};
dh.getDynamicStyleSheet=function(_15){
if(!_15){
_15="default";
}
if(!_5[_15]){
if(_3.doc.createStyleSheet){
_5[_15]=_3.doc.createStyleSheet();
if(_4("ie")<9){
_5[_15].title=_15;
}
}else{
_5[_15]=_3.doc.createElement("style");
_5[_15].setAttribute("type","text/css");
_3.doc.getElementsByTagName("head")[0].appendChild(_5[_15]);
console.log(_15," ss created: ",_5[_15].sheet);
}
_5[_15]._indicies=[];
}
return _5[_15];
};
dh.enableStyleSheet=function(_16){
var ss=dh.getStyleSheet(_16);
if(ss){
if(ss.sheet){
ss.sheet.disabled=false;
}else{
ss.disabled=false;
}
}
};
dh.disableStyleSheet=function(_17){
var ss=dh.getStyleSheet(_17);
if(ss){
if(ss.sheet){
ss.sheet.disabled=true;
}else{
ss.disabled=true;
}
}
};
dh.activeStyleSheet=function(_18){
var _19=dh.getToggledStyleSheets();
var i;
if(arguments.length===1){
_2.forEach(_19,function(s){
s.disabled=(s.title===_18)?false:true;
});
}else{
for(i=0;i<_19.length;i++){
if(_19[i].disabled===false){
return _19[i];
}
}
}
return true;
};
dh.getPreferredStyleSheet=function(){
};
dh.getToggledStyleSheets=function(){
var nm;
if(!_7.length){
var _1a=dh.getStyleSheets();
for(nm in _1a){
if(_1a[nm].title){
_7.push(_1a[nm]);
}
}
}
return _7;
};
dh.getStyleSheets=function(){
if(_6.collected){
return _6;
}
var _1b=_3.doc.styleSheets;
_2.forEach(_1b,function(n){
var s=(n.sheet)?n.sheet:n;
var _1c=s.title||s.href;
if(_4("ie")){
if(s.cssText.indexOf("#default#VML")===-1){
if(s.href){
_6[_1c]=s;
}else{
if(s.imports.length){
_2.forEach(s.imports,function(si){
_6[si.title||si.href]=si;
});
}else{
_6[_1c]=s;
}
}
}
}else{
_6[_1c]=s;
_6[_1c].id=s.ownerNode.id;
var _1d=[];
try{
_1d=s[s.cssRules?"cssRules":"rules"];
}
catch(err){
console.warn("Reading css rules from stylesheet "+s.href+" is forbidden due to same-origin policy. See http://www.w3.org/TR/CSP/#cascading-style-sheet-css-parsing",s);
}
_2.forEach(_1d,function(r){
if(r.href){
_6[r.href]=r.styleSheet;
_6[r.href].id=s.ownerNode.id;
}
});
}
});
_6.collected=true;
return _6;
};
return dh;
});


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.NativeStyleSheetManager");


(function(){
var _1=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.NativeStyleSheetManager",null,{});
var _2=null;
function _3(){
if(_2==null){
if(dojo.doc.createStyleSheet){
_2=dojo.doc.createStyleSheet();
_2.title="GridViewerDynamicStyleManager";
}else{
var _4=dojo.doc.createElement("style");
_4.setAttribute("type","text/css");
_4.setAttribute("title","GridViewerDynamicStyleManager");
dojo.doc.getElementsByTagName("head")[0].appendChild(_4);
_2=_4.sheet;
}
}
return _2;
};
_1.getRules=function(){
var _5=_3();
return _5.cssRules||_5.rules;
};
_1.insertRule=function(_6,_7){
var _8=_3();
if(_8.insertRule){
_8.insertRule(_6+" {"+_7+"}",_8.cssRules.length);
}else{
_8.addRule(_6,_7);
}
};
_1.deleteRule=function(_9){
var _a=_3();
if(_a.deleteRule){
_a.deleteRule(_9);
}else{
_a.removeRule(_9);
}
};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.ImageSizeProvider");
(function(){
var _1=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.ImageSizeProvider",null,{"-chains-":{constructor:"manual"},constructor:function(){
this.fMeasuredImgs={};
},withImgSize:function(_2,_3){
if((_2 in this.fMeasuredImgs)){
var _4=this.fMeasuredImgs[_2];
_3(_4);
return;
}
var _5=dojo.create("img",{});
var _6=null;
_6=dojo.connect(_5,"load",dojo.hitch(this,function(_7){
var _8={w:parseInt(_5.width),h:parseInt(_5.height)};
this.fMeasuredImgs[_2]=_8;
_3(_8);
dojo.disconnect(_6);
}));
_5.src=_2;
}});
_1.fgInstance=new _1();
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.InitializationDataTypes");
(function(){
var _1=dojo.declare("com.ibm.team.rtc.foundation.web.InitializationDataTypes",null,{"-chains-":{constructor:"manual"}});
_1.SPRITE_INITIALIZATION_DATA={name:"com.ibm.team.rtc.common.service.spriteWebInitializer"};
_1.PROJECT_AREA_INITIALIZATION_DATA={name:"com.ibm.team.rtc.common.service.projectAreaWebInitializer"};
_1.CONF_FEATURES_INITIALIZATION_DATA={name:"com.ibm.team.rtc.common.service.componentConfigurations"};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpritedImageInfo");
(function(){
dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpritedImageInfo",null,{"-chains-":{constructor:"manual"},fWidth:0,fHeight:0,fDeltaX:0,fDeltaY:0,constructor:function(_1,w,h,dx,dy){
this.fSpriteUri=_1;
this.fWidth=w;
this.fHeight=h;
this.fDeltaX=dx;
this.fDeltaY=dy;
},getSpriteUri:function(){
return this.fSpriteUri;
},getWidth:function(){
return this.fWidth;
},getHeight:function(){
return this.fHeight;
},getDeltaX:function(){
return this.fDeltaX;
},getDeltaY:function(){
return this.fDeltaY;
}});
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.util.Initialization");
(function(){
var _1=dojo.declare("com.ibm.team.rtc.foundation.web.util.Initialization",null,{"-chains-":{constructor:"manual"}});
_1.getData=function(_2){
var _3=dojo.getObject("com.ibm.team.repository.web.client.init.InitializationData");
if(_3==null){
return null;
}
var _4=_3.get(_2.name);
return _4==null?null:_4;
};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.util.PersistentCache");






(function(){
var _1=com.ibm.jdojox.util.IllegalArgumentException;
var _2=com.ibm.team.rtc.foundation.web.util;
var _3=_2.StorageException;
var _4=_2.Store;
var _5=dojo.declare("com.ibm.team.rtc.foundation.web.util.PersistentCache",null,{"-chains-":{constructor:"manual"},_limit:0,_version:0,constructor:function(_6,_7,_8){
if(_6==null){
throw new _1("name must not be null");
}
_6=_6+"@cache";
this._limit=_8!=null?_8:_5.DEFAULT_LIMIT;
this._store=new _4(_6,false);
this._version=_7;
var _9=this._store.getEntry(_5.CACHE_DETAILS);
if(_9==null||_9.version==null||_9.ids==null){
try{
this.clear();
}
catch(e){
if(e instanceof _3){
this._store=new _4(_6,true);
this.clear();
}else{
throw e;
}
}
}else{
if(_9.version!==this._version){
this.clear();
}
}
},putEntry:function(id,_a,_b){
if(id==null){
throw new _1("id cannot be null");
}
if(_b==null){
throw new _1("value must not be null");
}
if(_a==null){
throw new _1("versionId must not be null");
}
var _c=this._store.getEntry(_5.CACHE_DETAILS);
if(_c.ids.length>=this._limit){
this.clearEntry(_c.ids.shift());
}
while(true){
try{
this._store.putEntry(id,{v:_a,o:_b});
this._updateAccess(id);
break;
}
catch(e){
if(e instanceof _3){
this.clearEntry(id);
if(_c.ids.length===0){
break;
}
this.clearEntry(_c.ids.shift());
}else{
throw e;
}
}
}
_c=this._store.getEntry(_5.CACHE_DETAILS);
while(this.size()>_5.SIZE_LIMIT){
this.clearEntry(_c.ids.shift());
}
},getEntry:function(id,_d){
if(id==null){
throw new _1("id cannot be null");
}
var _e=this._store.getEntry(id);
if(_e==null){
return null;
}
if(_e.v!==_d){
return null;
}
this._updateAccess(id);
return _e.o;
},clearEntry:function(id){
if(id==null){
throw new _1("id cannot be null");
}
this._store.clearEntry(id);
var _f=this._store.getEntry(_5.CACHE_DETAILS);
var i=dojo.indexOf(_f.ids,id);
if(i>-1){
_f.ids.splice(i,1);
this._store.putEntry(_5.CACHE_DETAILS,_f);
}
},clear:function(){
this._store.clear();
this._store.putEntry(_5.CACHE_DETAILS,{version:this._version,ids:[]});
},size:function(){
return this._store.size();
},_updateAccess:function(id){
var _10=this._store.getEntry(_5.CACHE_DETAILS);
var _11=dojo.indexOf(_10.ids,id);
if(_11!==-1){
_10.ids.splice(_11,1);
}
_10.ids.push(id);
this._store.putEntry(_5.CACHE_DETAILS,_10);
}});
_5.CACHE_DETAILS=null;
_5.DEFAULT_LIMIT=7;
_5.SIZE_LIMIT=(((25*1024)/10)|0);
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpriteImageClient");














(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.team;
var _3=_2.repository.web.transport.TeamServerClient;
var _4=_2.rtc.foundation.web;
var _5=_4.InitializationDataTypes;
var _6=_4.ui.util.sprite.SpritedImageInfo;
var _7=_4.util;
var _8=_7.Initialization;
var _9=_7.PersistentCache;
var _a=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpriteImageClient",null,{"-chains-":{constructor:"manual"},constructor:function(){
this.fRequestsInProgress={};
this.fRequestsFinished={};
this.fSprites={};
this.fOngoingRequests={};
this._cache=new _9("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpriteImageClient",0,30);
},getInstance:function(){
return _a.fgInstance;
},withBundleImageInfo:function(_b,_c){
this.withImageInfo(_a.getBundleJavaScriptURI(_b.getBundleId()),_b,_c,this._getBundleCacheKey());
},withProcessAttachmentImageInfo:function(_d,_e){
this.withImageInfo(_a.getProjectAreaAttachmentJavaScriptURI(_d.getProcessAreaId()),_d,_e,this._getProjectAreaCacheKey(_d.getProcessAreaId()));
},withImageInfo:function(_f,_10,_11,_12){
if((_f in this.fRequestsFinished)){
_11(this.getInfoForUrl(_10));
}else{
var _13=this.fOngoingRequests[_f];
if(_13==null){
_13=[];
this.fOngoingRequests[_f]=_13;
}
_13.push(new _14(_10,_11));
if(!(_f in this.fRequestsInProgress)){
this.fRequestsInProgress[_f]=true;
var _15=dojo.hitch(this,function(_16){
this.fRequestsFinished[_f]=true;
var _17=this.fOngoingRequests[_f];
for(var i=0;i<_17.length;i++){
_17[i].fCallback(null);
}
console.log(_16);
return _16;
});
var _18=dojo.hitch(this,function(_19){
this.fRequestsFinished[_f]=true;
if(_12!=null){
this._cache.putEntry(_f,_12,_19);
}
var _1a=dojo.fromJson(_19);
var _1b=_1.getProperties(_1a);
var _1c=_1b.length;
for(var _1d=0;_1d<_1c;_1d++){
var key=_1b[_1d];
var _1e=_1a[key];
var _1f=_1e.contexts;
var _20=_1f.length;
for(var _21=0;_21<_20;_21++){
var _22=_1f[_21];
this.fSprites[_22]=_1e;
}
}
var _23=this.fOngoingRequests[_f];
for(var i=0;i<_23.length;i++){
_23[i].fCallback(this.getInfoForUrl(_23[i].fImageSource));
}
delete this.fOngoingRequests[_f];
return _19;
});
if(_12!=null){
var _24=this._cache.getEntry(_f,_12);
if(_24!=null){
_18(_24);
return;
}
}
var _25={};
_25.url=_a.getServiceURI()+_f+(_12!=null?"&c="+_12:"");
_25.handleAs="text";
var _26=jazz.client.xhrGet(_25);
_26.addCallback(_18);
_26.addErrback(_15);
}
}
},_getBundleCacheKey:function(){
var _27=_8.getData(_5.SPRITE_INITIALIZATION_DATA);
return _27!=null?_27.state:null;
},_getProjectAreaCacheKey:function(_28){
var _29=_8.getData(_5.PROJECT_AREA_INITIALIZATION_DATA);
return _29!=null&&_29.projectArea.id===_28?_29.projectArea.configurationStateId:null;
},getInfoForUrl:function(_2a){
var _2b=_2a.getBundleId();
var _2c=_2a.getProcessAreaId();
var _2d=_2a.getImagePath();
var _2e=_1.getProperties(this.fSprites);
var _2f=_2e.length;
for(var _30=0;_30<_2f;_30++){
var key=_2e[_30];
if((_2a.isBundleImage()&&key===_2b)||(_2a.isProcessAttachment()&&key===_2c)){
var _31=this.fSprites[key];
var _32=_31.images[_2d];
if(_32==null){
if(_a.isDebugMode()){
console.info("SpriteImageClient: Unknown path "+_2d+" inside context "+key);
}
return null;
}else{
return new _6(_a.getServiceURI()+_31.imagePath,_32.w,_32.h,_32.x,_32.y);
}
}
}
if(_a.isDebugMode()){
console.info("SpriteImageClient: Unknown context: "+_2b+" for imgUri: "+_2d);
}
return null;
}});
var _14=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpriteImageClient.ImageInfoRequest",null,{"-chains-":{constructor:"manual"},constructor:function(_33,_34){
this.fImageSource=_33;
this.fCallback=_34;
}});
_a.fgInstance=new _a();
_a.SPRITES_DEBUG="debugsprites=true";
_a.SPRITE_IMAGE_SERVICE="com.ibm.team.rtc.common.internal.service.web.sprite.ISpriteImageService";
_a.fgCachedDebugMode=null;
_a.isDebugMode=function(){
if(_a.fgCachedDebugMode==null){
_a.fgCachedDebugMode=window.location.href.indexOf(_a.SPRITES_DEBUG)>=0;
}
return _a.fgCachedDebugMode;
};
_a.getBundleJavaScriptURI=function(_35){
return "/js/bundle?id="+_35;
};
_a.getProjectAreaAttachmentJavaScriptURI=function(_36){
return "/js/processattachment?pa="+_36;
};
_a.getServiceURI=function(){
return _3._getServicePrefix()+_a.SPRITE_IMAGE_SERVICE;
};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpriteImage");




(function(){
var _1=com.ibm.jdojo.util.Assert;
var _2=com.ibm.team.rtc.foundation.web.ui.util.sprite.SpriteImageClient;
var _3=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.SpriteImage",null,{"-chains-":{constructor:"manual"},constructor:function(_4){
this.fImg=_4;
},fetch:function(){
var _5=dojo.hitch(this,function(_6){
this.onInfo(_6);
});
if(this.fImg.isProcessAttachment()){
_2.fgInstance.withProcessAttachmentImageInfo(this.fImg,_5);
}else{
if(this.fImg.isBundleImage()){
_2.fgInstance.withBundleImageInfo(this.fImg,_5);
}else{
this.onInfo(null);
}
}
return this;
},onInfo:function(_7){
_1.isTrue(false,"Abstract method 'onInfo' invoked");
},getImgSpriteBackgroundTemplate:function(){
return _3.IMG_SPRITE_BACKGROUND_TEMPLATE;
}});
_3.IMG_BACKGROUND_TEMPLATE="url('${0}')";
_3.IMG_SPRITE_BACKGROUND_TEMPLATE="url('${0}') no-repeat ${1}px ${2}px";
_3.isDebugMode=function(){
return _2.isDebugMode();
};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.CSSSpriteImage");








(function(){
var _1=com.ibm.team.rtc.foundation.web.ui.util;
var _2=_1.NativeStyleSheetManager;
var _3=_1.sprite;
var _4=_3.ImageSizeProvider;
var _5=_3.SpriteImage;
var _6=dojo.string;
var _7=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.CSSSpriteImage",_5,{constructor:function(_8){
this.inherited(arguments,[_8]);
},getCSSClassName:function(){
return _7.SPRITE_CLASS_NAME_PREFIX+this.getImgId();
},onInfo:function(_9){
var _a=this.getCSSClassName();
if((_a in _7.fAddedStyles)){
return;
}
_7.fAddedStyles[_a]=true;
var _b="."+_a;
if(_9==null){
_4.fgInstance.withImgSize(this.fImg.toUri(),dojo.hitch(this,function(_c){
_2.insertRule(_b,this.getRuleBody(this.fImg.toUri(),_c.w,_c.h,null,null));
}));
}else{
_2.insertRule(_b,this.getRuleBodyWithInfo(_9));
}
},getRuleBodyWithInfo:function(_d){
return this.getRuleBody(_d.getSpriteUri(),_d.getWidth(),_d.getHeight(),_d.getDeltaX(),_d.getDeltaY());
},fetch:function(){
return this.inherited("fetch",arguments,[]);
},getImgId:function(){
var _e=this.fImg.getImagePath()!=null?this.fImg.getImagePath():this.fImg.toUri();
if((_e in _7.fClassNames)){
return _7.fClassNames[_e];
}
++_7.fLastClassNameId;
if(_e!=null){
_7.fClassNames[_e]=_7.fLastClassNameId;
}
return _7.fLastClassNameId;
},getRuleBody:function(_f,w,h,dx,dy){
var _10;
if(_5.isDebugMode()){
if(dx!=null&&dy!=null){
_10="green";
}else{
_10="orange";
}
}else{
if(dx!=null&&dy!=null){
_10=_6.substitute(this.getImgSpriteBackgroundTemplate(),[_f,-dx,-dy]);
}else{
_10=_6.substitute(_5.IMG_BACKGROUND_TEMPLATE,[_f]);
}
}
return _6.substitute(_7.RULE_BODY_TEMPLATE,[w,h,_10]);
}});
_7.SPRITE_CLASS_NAME_PREFIX="sprite-image-";
_7.RULE_BODY_TEMPLATE="width:${0}px; height:${1}px; background:${2};";
_7.fLastClassNameId=0;
_7.fClassNames={};
_7.fAddedStyles={};
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.DomNodeSpriteImage");






(function(){
var _1=com.ibm.team.rtc.foundation.web.ui.util.sprite;
var _2=_1.ImageSizeProvider;
var _3=_1.SpriteImage;
var _4=dojo.string;
var _5=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.DomNodeSpriteImage",_3,{constructor:function(_6){
this.inherited(arguments,[_6]);
},getDomNode:function(_7,_8,_9){
if(this.fDomNode==null){
this.fDomNode=dojo.create("span",_7,_8,_9);
this.fDomNode.style.display="inline-block";
this.updateDomNode();
}
return this.fDomNode;
},onInfo:function(_a){
this.fInfo=_a;
this.fInfoAvailable=true;
this.updateDomNode();
},updateDomNode:function(){
if(!this.fInfoAvailable||this.fDomNode==null){
return;
}
this.resolveSpriteDomNode(this.fImg,this.fInfo,this.fDomNode);
},resolveSpriteDomNode:function(_b,_c,_d){
if(_c==null){
if(_3.isDebugMode()){
_d.style.background="orange";
console.log("No sprite found: "+_b.toUri());
}else{
_d.style.background=_4.substitute(_3.IMG_BACKGROUND_TEMPLATE,[_b.toUri()]);
}
_2.fgInstance.withImgSize(_b.toUri(),dojo.hitch(this,function(_e){
this.onDomNodeSize(_d,_e.w,_e.h);
}));
}else{
this.onDomNodeSize(_d,_c.getWidth(),_c.getHeight());
if(_3.isDebugMode()){
_d.style.background="green";
}else{
_d.style.background=_4.substitute(this.getImgSpriteBackgroundTemplate(),[_c.getSpriteUri(),-_c.getDeltaX(),-_c.getDeltaY()]);
}
}
},fetch:function(){
return this.inherited("fetch",arguments,[]);
},onDomNodeSize:function(_f,_10,_11){
_f.style.width=_10+_5.PIXELS;
_f.style.height=_11+_5.PIXELS;
}});
_5.PIXELS="px";
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.sprite.OverlayImage");


(function(){
var _1=com.ibm.team.rtc.foundation.web.ui.util.sprite.DomNodeSpriteImage;
var _2=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.sprite.OverlayImage",_1,{constructor:function(_3,_4,_5,_6,_7,_8){
this.inherited(arguments,[_3]);
this.fTopLeft=_4;
this.fTopRight=_5;
this.fBottomLeft=_6;
this.fBottomRight=_7;
this.fDimming=_8;
},resolveSpriteDomNode:function(_9,_a,_b){
var _c=dojo.create("span",{});
_c.style.display="inline-block";
_b.style.position="relative";
if(this.fDimming){
_c.style["mozOpacity"]=String(_2.DIM_OPACITY);
_c.style["opacity"]=String(_2.DIM_OPACITY);
}
dojo.place(_c,_b);
this.placeOverlay(this.fTopLeft,true,false,false,true,_b);
this.placeOverlay(this.fTopRight,true,true,false,false,_b);
this.placeOverlay(this.fBottomLeft,false,false,true,true,_b);
this.placeOverlay(this.fBottomRight,false,true,true,false,_b);
this.inherited("resolveSpriteDomNode",arguments,[_9,_a,_c]);
},placeOverlay:function(_d,_e,_f,_10,_11,_12){
if(_d!=null){
var _13=_d.getDomNode();
_13.style.position="absolute";
if(_e){
_13.style.top=String(0);
}
if(_f){
_13.style.right=String(0);
}
if(_10){
_13.style.bottom=String(0);
}
if(_11){
_13.style.left=String(0);
}
dojo.place(_13,_12);
}
},fetch:function(){
if(this.fTopLeft!=null){
this.fTopLeft.fetch();
}
if(this.fTopRight!=null){
this.fTopRight.fetch();
}
if(this.fBottomLeft!=null){
this.fBottomLeft.fetch();
}
if(this.fBottomRight!=null){
this.fBottomRight.fetch();
}
return this.inherited("fetch",arguments,[]);
},onDomNodeSize:function(_14,_15,_16){
this.inherited("onDomNodeSize",arguments,[_14,_15,_16]);
this.fDomNode.style.width=_15+_1.PIXELS;
this.fDomNode.style.height=_16+_1.PIXELS;
}});
_2.DIM_OPACITY=0.5;
})();


;dojo.provide("com.ibm.team.rtc.foundation.web.ui.util.Sprites");






(function(){
var _1=com.ibm.team.rtc.foundation.web.ui.util.sprite;
var _2=_1.CSSSpriteImage;
var _3=_1.DomNodeSpriteImage;
var _4=_1.OverlayImage;
var _5=dojo.declare("com.ibm.team.rtc.foundation.web.ui.util.Sprites",null,{"-chains-":{constructor:"manual"}});
_5.createDomNodeSpriteImage=function(_6){
if(_6==null){
return null;
}
return new _3(_6);
};
_5.createSpriteImage=function(_7){
if(_7.isComposedImage()){
return new _4(_7,_5.createDomNodeSpriteImage(_7.getTopLeftOverlay()),_5.createDomNodeSpriteImage(_7.getTopRightOverlay()),_5.createDomNodeSpriteImage(_7.getBottomLeftOverlay()),_5.createDomNodeSpriteImage(_7.getBottomRightOverlay()),_7.isDimmed());
}else{
return new _3(_7);
}
};
_5.create=function(_8,_9,_a,_b){
return _5.createSpriteImage(_8).fetch().getDomNode(_9,_a,_b);
};
_5.cssClassName=function(_c){
return new _2(_c).fetch().getCSSClassName();
};
})();


;dojo.cache("com.ibm.team.workitem.web", "ui/internal/view/queryeditor/templates/PopupButton.html", "<span class=\"com-ibm-team-workitem-query-popupButton\"><a dojoattachpoint=\"_menuAnchor\" href=\"\" dojoAttachEvent=\"onclick: onShowMenu\"><span dojoAttachPoint=\"labelSpan\"></span><span class=\"menu\">&nbsp;</span></a></span>");

;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.PopupButton");








(function(){
var _1="__jazzItem";
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.PopupButton",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("com.ibm.team.workitem.web","ui/internal/view/queryeditor/templates/PopupButton.html"),labelSpan:null,_menuWidget:null,_currentSelection:null,_defaultValue:null,constructor:function(_2){
this.labelProperty=_2.labelProperty;
this.callback=_2.callback;
this.menuLabel=_2.menuLabel;
},postCreate:function(){
this._menuWidget=new dijit.Menu({});
this._childWidgets=[];
dojo.addClass(this._menuWidget.domNode,"customDijitMenu");
this.connect(this._menuWidget,"onItemClick","onSelect");
dijit.setWaiRole(this.domNode,"menubar");
},destroy:function(){
if(this._menuWidget){
this._menuWidget.destroy();
}
for(var i=0;i<this._childWidgets.length;i++){
this._childWidgets[i].destroy();
}
this._childWidgets=[];
this.inherited(arguments);
},setValues:function(_3){
if(_3.length>0){
for(var i=0;i<_3.length;i++){
this._menuWidget.addChild(this._createMenuItem(_3[i]));
}
}
},getSelection:function(){
return this._currentSelection;
},setSelection:function(_4){
this._updateSelection(_4);
},_createMenuItem:function(_5){
var _6=_5[this.labelProperty];
var _7=new dijit.MenuItem({label:_6});
_7[_1]=_5;
this._childWidgets.push(_7);
return _7;
},_updateSelection:function(_8){
var _9=_8[this.labelProperty];
dojox.xml.parser.replaceChildren(this.labelSpan,document.createTextNode(_9));
this._currentSelection=_8;
if(this.menuLabel){
this._menuAnchor.setAttribute("aria-label",this.menuLabel+_9);
dijit.setWaiRole(this._menuAnchor,"menuitem");
}
},onShowMenu:function(e){
this._menuWidget._openMyself(e);
dojo.stopEvent(e);
},onSelect:function(_a){
this._updateSelection(_a[_1]);
if(this.callback){
this.callback(this.getSelection());
}
}});
})();


;dojo.provide("jazz.ui.toolbar.TwoStateButton");






(function(){
var _1="jazz-ui-toolbar-Button";
dojo.declare("jazz.ui.toolbar.TwoStateButton",[jazz.ui.toolbar.Button],{classPressed:"",imgSrcPressed:"",imgClassPressed:"",labelPressed:"",titlePressed:"",pressed:false,_onClick:function(_2){
if(!this.get("enabled")){
dojo.stopEvent(_2);
return;
}
if(this.href=="#"){
_2.preventDefault();
}
var _3=!this.pressed;
this.set("pressed",_3);
_2.pressed=_3;
this.onClick(_2);
},_setPressedAttr:function(_4){
var _5=this.pressed;
if(this._created&&_5===_4){
return;
}
if(_4){
dojo.addClass(this.domNode,_1+"-pressed");
this._updateImage(this.imgSrcPressed||this.imgSrc,this.imgClassPressed||this.imgClass);
if(this._created&&this.labelPressed){
this._updateLabel(this.labelPressed);
}
if(this.titlePressed){
this.focusNode.title=this.titlePressed;
}
}else{
dojo.removeClass(this.domNode,_1+"-pressed");
this._updateImage(this.imgSrc,this.imgClass);
if(this._created){
this._updateLabel(this.label);
}
}
this._created&&dijit.setWaiState(this.focusNode,"pressed",_4);
this.pressed=_4;
},_setImgSrcPressedAttr:function(_6){
var _7=jazz.util.moduleResource(_6);
if(this.pressed){
this._updateImage(_7);
}
this.imgSrcPressed=_7;
},_setImgClassPressedAttr:function(_8){
if(this.pressed){
this._updateImage(this.imgSrc,_8);
}
this.imgClassPressed=_8;
},_setImgSrcAttr:function(_9){
var _a=jazz.util.moduleResource(_9);
if(!this.pressed||!this.imgSrcPressed){
this._updateImage(_a);
}
this.imgSrc=_a;
},_setLabelAttr:function(_b){
this.label=_b;
if(!this.pressed||!this.labelPressed){
this._updateLabel(_b);
}
},_setLabelPressedAttr:function(_c){
this.labelPressed=_c;
if(!_c){
_c=this.label;
}
if(this.pressed){
this._updateLabel(_c);
}
},_setClassPressedAttr:function(_d){
if(this.pressed){
if(_d!=this.classPressed){
dojo.removeClass(this.domNode,this.classPressed);
dojo.addClass(this.domNode,_d);
}
}
this.classPressed=_d;
},_setTitlePressedAttr:function(_e){
if(this.pressed){
this.focusNode.title=_e;
}
this.titlePressed=_e;
},postCreate:function(){
dijit.setWaiState(this.focusNode,"pressed",this.pressed);
this.inherited(arguments);
}});
})();


;dojo.cache("com.ibm.team.workitem.web", "ui/internal/view/queryeditor/templates/SectionContainer.html", "<div class=\"com-ibm-team-workitem-query-section\">	<div class=\"top-section\">		<div class=\"header\" dojoattachpoint=\"_header\">			<span class=\"header-text\" dojoattachpoint=\"_headerText\"></span>			<span class=\"header-menu\" dojoattachpoint=\"_headerMenu\"></span>			<span class=\"header-buttons\" dojoattachpoint=\"_headerButtons\"></span>		</div>	</div>	<div class=\"middle-section\" dojoattachpoint=\"_middleSection\">		<div class=\"content\" dojoattachpoint=\"_bodyContainer\"></div>	</div></div>");

;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.queryeditor.SectionContainer");




















dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","QueryMessages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.ui.util;
var _4=_3.Sprites;
var _5=_3.sprite.ImageSource;
var _6=_2.workitem.web.ui.internal;
var _7=_6.page.EventTopics;
var _8=_6.view.queryeditor.PopupButton;
var _9=dijit._Templated;
var _a=dijit._Widget;
var _b=dojo.keys;
var _c=dojox.xml.parser;
var _d=jazz.ui.toolbar;
var _e=_d.Button;
var _f=_d.TwoStateButton;
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.queryeditor.SectionContainer",[_a,_9],{templatePath:dojo.moduleUrl("com.ibm.team.workitem.web","ui/internal/view/queryeditor/templates/SectionContainer.html"),constructor:function(_10){
this._labelProperty="name";
this._isToggleParamActionEnabled=true;
this.sectionWidget=_10.sectionWidget;
this.isOperationsPart=_10.isOperationsPart||false;
this.isTermSection=_10.isTermSection;
},postCreate:function(){
this._bodyContainer.appendChild(this.sectionWidget.domNode);
if(this.isTermSection){
this._headerButtons.style.display="none";
}
var _11={};
_11.title=_1.labelEnableParam;
_11.titlePressed=_1.labelDisableParam;
_11.imgClass=_4.cssClassName(_5.fromBundleImage("com.ibm.team.workitem.web","ui/internal/view/queryeditor/images/assign _values_co.gif"));
_11.onClick=dojo.hitch(this,function(_12){
dojo.stopEvent(_12);
this.onToggleParameterVariable(_12);
});
this._toggleParamButton=new _f(_11);
var _13={};
_13.title=_1.labelClose;
_13.imgClass=_4.cssClassName(_5.fromBundleImage("com.ibm.team.workitem.web","ui/internal/view/queryeditor/images/close-hov-fixed.gif"));
_13.onClick=dojo.hitch(this,function(_14){
dojo.stopEvent(_14);
this.onClose(_14);
});
this._closeButton=new _e(_13);
this._headerButtons.appendChild(this._toggleParamButton.domNode);
this._headerButtons.appendChild(this._closeButton.domNode);
if(dojo.isFunction(this.sectionWidget["setSectionSite"])){
this.sectionWidget.setSectionSite(this);
}
if(this.isOperationsPart){
this._toggleParamButton.domNode.style.display="none";
}
},destroy:function(_15){
if(this._menuWidget!=null){
this._menuWidget.destroy();
}
if(this.sectionWidget!=null){
this.sectionWidget.destroy(_15);
}
if(this._closeButton!=null){
this._closeButton.destroy(_15);
}
if(this._toggleParamButton!=null){
this._toggleParamButton.destroy(_15);
}
this.inherited("destroy",arguments,[_15]);
},setTitle:function(_16){
_c.replaceChildren(this._headerText,dojo.doc.createTextNode(_16));
this._headerText.innerHTML=this._headerText.innerHTML;
this._headerText.title=_16;
this._applyMaxWidth();
},setupMenu:function(_17,_18){
this._labelProperty=_17;
this._callback=_18;
},setMenuItems:function(_19,_1a){
var _1b=this._getMenu();
_1b.setValues(_19);
},_applyMaxWidth:function(){
var _1c=dojo.contentBox(this._header).w;
_1c-=dojo.marginBox(this._headerMenu).w;
_1c-=dojo.marginBox(this._headerButtons).w;
var _1d=dojo.marginBox(this._headerText).w-dojo.contentBox(this._headerText).w;
_1c-=_1d;
if(_1c>0){
_1c-=1;
dojo.style(this._headerText,"maxWidth",_1c+"px");
}
},setSelectedMenuItem:function(_1e){
var _1f=this._getMenu();
_1f.setSelection(_1e);
this._applyMaxWidth();
},setToggleParameterAction:function(_20){
if(this.isEditorPart()){
this._isToggleParamActionEnabled=_20;
this._toggleParamButton.domNode.style.display=_20?"":"none";
}
this._toggleParamButton.set("pressed",this.sectionWidget.hasParameterValue);
},isEditorPart:function(){
return this.isOperationsPart===false;
},getSection:function(){
return this.sectionWidget;
},_getMenu:function(){
if(this._menuWidget==null){
var _21={};
_21.labelProperty=this._labelProperty;
_21.callback=dojo.hitch(this,function(_22){
this._applyMaxWidth();
this._callback(_22);
});
_21.menuLabel=_1.labelConditionTypeMenu;
this._menuWidget=new _8(_21);
this._headerMenu.appendChild(this._menuWidget.domNode);
}
return this._menuWidget;
},onClose:function(e){
if(e!=null){
dojo.stopEvent(e);
}
var _23=true;
if(this.sectionWidget!=null&&dojo.isFunction(this.sectionWidget["onClose"])){
_23=this.sectionWidget.onClose();
}
if(_23){
this.destroy(false);
}
},checkEnterForClose:function(e){
var _24=e.keyCode;
if(_24===_b.ENTER){
this.onClose(null);
}
},onToggleParameterVariable:function(e){
if(dojo.isFunction(this.sectionWidget["setParameterValue"])&&this._isToggleParamActionEnabled){
this.sectionWidget.setParameterValue(!this.sectionWidget.hasParameterValue);
dojo.publish(_7.QUERY_EDITOR_CHANGED,[]);
}
this._toggleParamButton.set("pressed",this.sectionWidget.hasParameterValue);
}});
})();

dojo.provide("com.ibm.team.workitem.web.ui.internal.view.query.nls.Messages")._built=true;
dojo.provide("com.ibm.team.workitem.web.ui.internal.view.query.nls.Messages.en_us");
com.ibm.team.workitem.web.ui.internal.view.query.nls.Messages.en_us={"QueryParameterValueDialog_QUERY":"Query: ${0}","QueryParameterValueDialog_ASSIGN_PARAMETER_VALUES":"Assign Values to Query Parameters","QueryParameterSummaryPage_SECTION_INFO_DESCRIPTION":"Review the selected condition values below, and click \'Run\' to execute the query.","CreateTemplateVariablesPage_LEGEND":"Check Variable Attributes:","AbstractWizardDialog_FINISH":"Finish","QueryResultProblemInfo_HIDE_DETAILS":"Hide Details","CreateTemplateStringVariablesPage_NAME_HEADER":"Variable Name","QueryResultProblemInfo_PROBLEM_MESSAGE":"Could not connect to all linked applications. Result might be incomplete. ","CreateTemplateVariablesPage_VARIABLE_ITERATION_LABEL":"Planned for","CreateTemplateDialog_PRIMARY_TITLE":"Create Work Item Template","QueryParameterConditionPage_INFO":"Select parameter values for attribute: \'${0}\'","QueryParameterValueDialog_CONDITION_VALUE_ANY":"Any","CreateTemplateStringVariablesPage_SECTION_INFO_DESCRIPTION":"Select which string variables to set for each template instantiation.","CreateTemplateSelectPage_SECTION_INFO_DESCRIPTION":"Provide a template name, a description and choose the workitems that should be captured by the template.","QueryParameterValueDialog_FINISH":"Run","CreateTemplateSelectPage_SECTION_INFO_TITLE":"Select Work Items for the Template","CreateTemplateStringVariablesPage_ERROR_ANALYZING_WORKITEMS":"An unexpected exception occurred when attempting to analyze work items.","CreateTemplateStringVariablesPage_ID_WRAPPER1":"{${0}}","CreateTemplateStringVariablesPage_ID_WRAPPER2":"$${0}","CreateTemplateSummaryPage_EMPTY_TEMPLATE_NAME":"Template name can\'t be empty.","QueryResultProblemInfo_SHOW_DETAILS":"Show Details","QueryParameterConditionPage_SECTION_INFO_DESCRIPTION":"Assign values to each parameter before running the query.","CreateTemplateStringVariablesPage_DEFAULT_VALUE_HEADER":"Variable Default Value","QueryParameterValueDialog_BACK":"\x3c Back","QueryParameterSummaryPage_SECTION_INTO_TITLE":"Summary of Selected Values","QueryParameterValueDialog_NOT_AVLBL":"N/A","CreateTemplateVariablesPage_VARIABLE_CATEGORY_LABEL":"Filed Against","CreateTemplateVariablesPage_SECTION_INFO_TITLE":"Define Attribute Variables","QueryParameterValueDialog_NEXT":"Next \x3e","CreateTemplateVariablesPage_SECTION_INFO_DESCRIPTION":"Select which attribute variables to set for each template instantiation.","AbstractWizardDialog_CREATE":"Create","CreateTemplateStringVariablesPage_SECTION_INFO_TITLE":"Define String Variables","CreateTemplateSummaryPage_WORKITEMS_NOT_SELECTED":"No Work Item has been selected.","QueryParameterValueDialog_CANCEL":"Cancel","CreateTemplateSummaryPage_SUMMARY_PROBLEMS":"Operation cannot be finished because of the following problems:","CreateTemplateStringVariablesPage_ID_HEADER":"Variable ID"};

;dojo.cache("com.ibm.team.workitem.web", "ui/internal/view/query/templates/QueryParameterConditionPage.html", "<div class=\"com-ibm-team-workitem-query-parameter-condition-page\">    <div class=\"header-section\">	    <div class=\"info-section\" dojoAttachPoint=\"_infoSection\">		   <span class=\"info-text\" dojoattachpoint=\"_infoTextNode\"></span><br>		   ${_pageSummary}	    </div>    </div>	<div class=\"top-section\">        <div class=\"header\" dojoattachpoint=\"_headerNode\">            <span class=\"header-text\" dojoattachpoint=\"_headerTextNode\"></span> <span class=\"operator-text\" dojoattachpoint=\"_operatorTextNode\"></span>        </div>    </div>    <div class=\"middle-section\" dojoattachpoint=\"_middleSection\">        <div class=\"condition-section\" dojoAttachPoint=\"_currentSectionNode\"></div>    </div></div>");

;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.query.QueryParameterConditionPage");














dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
var _2=com.ibm.team;
var _3=_2.rtc.foundation.web.ui.util;
var _4=_3.Sprites;
var _5=_3.sprite.ImageSource;
var _6=_2.workitem.web.ui.internal.view.queryeditor.SectionContainer;
var _7=dijit._Templated;
var _8=dojox.xml.parser;
dojo.declare("com.ibm.team.workitem.web.ui.internal.view.query.QueryParameterConditionPage",[_6,_7],{templatePath:dojo.moduleUrl("com.ibm.team.workitem.web","ui/internal/view/query/templates/QueryParameterConditionPage.html"),constructor:function(_9){
this._section=_9.section;
if(_9.pageSummary!=null){
this._pageSummary=_9.pageSummary;
}else{
this._pageSummary=_1.QueryParameterConditionPage_SECTION_INFO_DESCRIPTION;
}
},postCreate:function(){
dojo.place(this._section.domNode,this._currentSectionNode,"only");
var _a=_5.fromBundleImage("com.ibm.team.workitem.web","ui/internal/view/queryeditor/images/assign_values_wizban.png");
this._infoSection.insertBefore(_4.create(_a,{className:"wizard-banner"}),this._infoTextNode);
},isEditorPart:function(){
return false;
},getAttributeLabel:function(){
return this._attributeLabel;
},setTitle:function(_b){
this._attributeLabel=_b;
_8.replaceChildren(this._headerTextNode,window.document.createTextNode(_b));
var _c=dojo.string.substitute(_1.QueryParameterConditionPage_INFO,[_b]);
_8.replaceChildren(this._infoTextNode,window.document.createTextNode(_c));
},getSection:function(){
return this._section;
},destroy:function(_d){
if(this._section!=null){
this._section.destroy(_d);
this._section=null;
}
this.inherited("destroy",arguments,[_d]);
},setupMenu:function(_e,_f){
},setMenuItems:function(_10,_11){
},setSelectedMenuItem:function(_12){
if(_12!=null){
_8.replaceChildren(this._operatorTextNode,window.document.createTextNode(_12.label));
}
},setToggleParameterAction:function(_13){
},focus:function(){
if(this.getSection()!=null){
this.getSection()["domNode"].focus();
}
},isPageComplete:function(){
return true;
},updateContents:function(_14){
},$interfaces:{"com.ibm.team.workitem.web.ui.internal.view.IWizardDialogPage":true,"com.ibm.team.workitem.web.ui.internal.view.query.IQueryParameterValuePage":true}});
})();


;dojo.cache("com.ibm.team.workitem.web", "ui/internal/view/query/templates/QueryParameterSummaryPage.html", "<div class=\"com-ibm-team-workitem-query-parameter-summary-page\">    <div class=\"header-section\">	    <div class=\"info-section\" dojoAttachPoint=\"_infoSection\">	       <span class=\"info-text\" dojoattachpoint=\"_infoTextNode\">${_messages.QueryParameterSummaryPage_SECTION_INTO_TITLE}</span><br>	       ${_pageSummary}	    </div>	</div>    <div class=\"middle-section\" dojoattachpoint=\"_middleSection\">	    <div class=\"summary-section\" dojoAttachPoint=\"_summarySectionNode\"></div>    </div></div>");

;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.query.QueryParameterSummaryPage");












dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
var _2=com.ibm.jdojo.lang.Runtime;
var _3=com.ibm.team.rtc.foundation.web.ui.util;
var _4=_3.Sprites;
var _5=_3.sprite.ImageSource;
var _6=dijit._Templated;
var _7=dijit._Widget;
var _8=dojo.declare("com.ibm.team.workitem.web.ui.internal.view.query.QueryParameterSummaryPage",[_7,_6],{templatePath:dojo.moduleUrl("com.ibm.team.workitem.web","ui/internal/view/query/templates/QueryParameterSummaryPage.html"),_messages:_1,constructor:function(_9){
if(_9!=null&&_9.pageSummary!=null){
this._pageSummary=_9.pageSummary;
}else{
this._pageSummary=_1.QueryParameterSummaryPage_SECTION_INFO_DESCRIPTION;
}
},postCreate:function(){
var _a=_5.fromBundleImage("com.ibm.team.workitem.web","ui/internal/view/queryeditor/images/assign_values_wizban.png");
this._infoSection.insertBefore(_4.create(_a,{className:"wizard-banner"}),this._infoTextNode);
},updateContents:function(_b){
var _c=this._summarySectionNode.childNodes;
if(_b!=null){
if(_c.length===0){
var _d=_2.getProperties(_b);
var _e=_d.length;
for(var _f=0;_f<_e;_f++){
var _10=_d[_f];
var _11=this._createSummaryLabels(_10);
var _12=this._createSummaryNode(_11[0],_11[1],_b[_10],this._summarySectionNode.ownerDocument);
this._summarySectionNode.appendChild(_12);
}
}else{
var _13=_2.getProperties(_b);
for(var idx=0;idx<_c.length;idx++){
var _11=this._createSummaryLabels(_13[idx]);
var _12=this._createSummaryNode(_11[0],_11[1],_b[_13[idx]],this._summarySectionNode.ownerDocument);
this._summarySectionNode.replaceChild(_12,_c.item(idx));
}
}
}
},destroy:function(_14){
this._summarySectionNode=null;
this.inherited("destroy",arguments,[_14]);
},getSection:function(){
return null;
},getAttributeLabel:function(){
return null;
},_createSummaryLabels:function(_15){
var _16=_15;
var _17="";
if(_15.indexOf(_8.ATTRIBUTE_LABEL_SEPARATOR)>-1){
_16=_15.substring(0,_15.indexOf(_8.ATTRIBUTE_LABEL_SEPARATOR));
_17=_15.substring(_15.indexOf(_8.ATTRIBUTE_LABEL_SEPARATOR)+1);
}
return [_16,_17];
},_createSummaryNode:function(_18,_19,_1a,doc){
var _1b=doc.createElement("div");
var _1c=doc.createElement("span");
_1c.setAttribute("style","font-weight: bold");
_1c.appendChild(doc.createTextNode(_18));
_1b.appendChild(_1c);
_1b.appendChild(doc.createTextNode(" "+_19));
var _1d=doc.createElement("ul");
var _1e=_1a;
var _1f=_1e.length;
for(var _20=0;_20<_1f;_20++){
var _21=_1e[_20];
var _22=doc.createElement("li");
var _23=_21.getLabel();
if(_23==null){
_23=_21.getArguments();
}
_22.appendChild(doc.createTextNode(_23));
_1d.appendChild(_22);
}
_1b.appendChild(_1d);
_1b.appendChild(doc.createElement("br"));
return _1b;
},focus:function(){
},isPageComplete:function(){
return true;
},$interfaces:{"com.ibm.team.workitem.web.ui.internal.view.IWizardDialogPage":true,"com.ibm.team.workitem.web.ui.internal.view.query.IQueryParameterValuePage":true}});
_8.PAGE_NAME="com.ibm.team.workitem.web.ui.internal.view.query.QueryParameterSummaryPage";
_8.ATTRIBUTE_LABEL_SEPARATOR=":";
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.query.ParameterVariableContext");




(function(){
var _1=com.ibm.jdojo.lang.Runtime;
var _2=com.ibm.team.workitem.web.client.internal.query.AttributeExpression;
var _3=dojo.declare("com.ibm.team.workitem.web.client.internal.query.ParameterVariableContext",null,{"-chains-":{constructor:"manual"},createDTO:function(_4){
var _5={};
var _6=_1.getProperties(this._data);
var _7=_6.length;
for(var _8=0;_8<_7;_8++){
var _9=_6[_8];
var _a=this._data[_9];
var _b=_a!=null?_a._createData(_4):null;
_5[_9]=_b;
}
return _5;
},constructor:function(){
this._data={};
},getVariableNames:function(){
return _1.getProperties(this._data);
},getVariableValue:function(_c){
return this._data[_c];
},addVariableValue:function(_d,_e){
this._data[_d]=_e;
},hasVariableValue:function(_f){
return (_f in this._data);
},serialize:function(_10){
var dto=this.createDTO(_10);
return dojo.toJson(dto,false);
}});
_3.createFromDTO=function(dto){
var _11=new _3();
if(dto==null){
return null;
}
var _12=_1.getProperties(dto);
var _13=_12.length;
for(var _14=0;_14<_13;_14++){
var _15=_12[_14];
var _16=dto[_15];
_11.addVariableValue(_15,_2._createFromData(_16));
}
return _11;
};
_3.deserialize=function(_17){
var dto=eval("("+_17+")");
return _3.createFromDTO(dto);
};
})();


;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.ErrorUtility");
(function(){
com.ibm.team.workitem.viewlets.web.ui.internal.utils.ErrorUtility={logInfo:function(_1,id){
if(djConfig.isDebug){
console.log(this.getErrorMessage("INFO",_1,id));
}
},logError:function(_2,id){
console.error(this.getErrorMessage("ERROR",_2,id));
},logWarning:function(_3,id){
console.warn(this.getErrorMessage("WARNING",_3,id));
},getErrorMessage:function(_4,_5,id){
var _6="";
var _7="";
var _8="";
if(id){
_6=id+": ";
}
if(_5){
if(_5.lineNumber){
_7="(line "+_5.lineNumber+"): ";
}
if(_5.message){
_8=_5.message;
}else{
_8="Message unavailable";
}
if(_5.status===403){
_8=_8+": You do not have permission to read the associated data.";
}
}else{
_8="Undefined exception";
}
var _9="["+_4+"]: "+_6+_7+_8;
return _9;
}};
})();

dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.nls.WorkItemsMessages")._built=true;
dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.nls.WorkItemsMessages.en_us");
com.ibm.team.workitem.viewlets.web.ui.internal.nls.WorkItemsMessages.en_us={"cancel":"Cancel","selectAQuery":"Select a query","resultCount":"Showing 10 of ${0} results.","backToResults":"\x3c Back to Results","noQueriesHelp":"To add queries, select \x3c0\x3eEdit Contents\x3c/0\x3e from the widget menu.","noQuery":"No work item query defined. ","secondIconSelected":"Selected Attributes:","runningQuery":"Running query...","prev":"&lt; Back","noDescription":"No Description.","none":"None","discussion":"Discussion:","resolution":"Resolution: ${0}","viewletNotLoggedIn":"(not logged in)","viewletLogin":"You must log into ${0} to view this content.","unknownError_explanation":"The server encountered an unexpected condition that prevented it from running the work item query.","emptyQueries":"All selected queries are empty. ","loadingL":"loading...","add":"Add","providerNoQuery":"No query selected","summaryPageSummary":"Review the selected condition values below, and click \'Finish\' to proceed.","chooserHeadingTeam":"${0} Team Queries","chooserTitle":"Work Item Queries","noQueries":"No queries defined. ","gadgetLogin":"You must \x3c0\x3elog in\x3c/0\x3e to view this content.","loading":"Loading...","chooserInstructSingle":"Select a query from the tree below.","priority":"Priority: ${0}","iconTooltip":"${0}: ${1}","unknownError":"CRRDV5026E The work item query results could not be retrieved from the server.","selectNewQuery":"Please \x3c0\x3eselect a new query\x3c/0\x3e.","goTo":"Go to work item...","showMore":"Show more","noDiscussion":"No Discussion.","chooserInstructMulti":"Select one or more queries from the tree below. (${0}+click for multi-select)","valueUndefined":"Undefined","selectQuery":"Please \x3c0\x3eselect a query\x3c/0\x3e.","status":"Status: ${0}","next":"Next &gt;","noResultsFilter":"No work items found matching filter.","secondIconUnselected":"Available Attributes:","providerPermissionDenied":"Permission denied","save":"Save","description":"Description: ","noResults2":"There are no related items.","showAll":"Show all","noResults":"No work items found.","noQueriesFound":"No queries were found for the current selection.","chooserHeadingShared":"Queries Shared by Others","ok":"Finish","severity":"Severity: ${0}","secondIconTitle":"Select Additional Icons","showQueriesFor":"Show queries for ","deletedQuery":"The work item query does not exist. ","deleteAll":"Delete All","refresh":"Refresh","chooserHeadingProject":"Predefined Queries","emptyQueriesHelp":"To view them enable the \x3c1\x3eShow empty queries\x3c/1\x3e preference or to add more, select \x3c0\x3eEdit Contents\x3c/0\x3e from the widget menu.","unknownError_useraction":"To find out more about this issue, ask your Jazz system administrator to check the CCM server log.","chooserHeadingPersonal":"My Queries","viewletLogin2":"Log In","conditionPageSummary":"Assign values to each parameter to be saved in the Widget.","showLess":"Show less","showDetails":"Show Details"};

;dojo.cache("com.ibm.team.workitem.viewlets.web", "ui/internal/templates/utils/WorkItemQueryChooser.html", "<div class=\"com-ibm-team-workitem-viewlets-web-ui-internal-utils-WorkItemQueryChooserWidget\">	<div class=\"content-wrapper\" dojoattachpoint=\"_contentWrapper\">		<div dojoattachpoint=\"_queryTree\">			<div class=\"caption\" dojoAttachPoint=\"_caption\"></div>			<div class=\"AreaPicker\">${messages.showQueriesFor}<span dojoAttachPoint=\"_areaPicker\"></span></div>			<div dojoAttachPoint=\"_queryTreeArea\" class=\"QueryTreeArea\"></div>			<div class=\"query-description-title\">${messages.description}</div>			<div class=\"query-description\" dojoAttachPoint=\"_itemDescription\"></div>		</div>		<div class=\"param-page-wrapper\" dojoattachpoint=\"_paramPageWrapper\"></div>	</div>	<div class=\"com-ibm-team-wi-web-qpvd hidden\" dojoattachpoint=\"_progressWrapper\" style=\"display: none\">		<div class=\"buttonBar\">		    <div class=\"progressIndicator\" dojoAttachPoint=\"_progressIndicatorNode\">		        <div class=\"progressBar\" dojoAttachPoint=\"_progressBarNode\"></div>		    </div>		</div>	</div>	<div class=\"j-buttonGroup-bleed-four\" dojoAttachPoint=\"ftFooterNode\">		<button class=\"j-button-ghost\" dojoAttachPoint=\"_cancelCmd\">${messages.cancel}</button>			<button class=\"j-button-secondary\" dojoAttachPoint=\"_prevCmd\" dojoattachevent=\"onclick: _doPrev\" disabled=\"disabled\">${!messages.prev}</button>		<button class=\"j-button-primary\" dojoAttachPoint=\"_nextCmd\" dojoattachevent=\"onclick: _doNext\" disabled=\"disabled\">${!messages.next}</button>		<button class=\"j-button-primary\" dojoAttachPoint=\"_okCmd\" dojoattachevent=\"onclick: _doOnOk\" disabled=\"disabled\">${messages.ok}</button>	</div></div>");

;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooser");












































dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","WorkItemsMessages");
dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
(function(){
var _1=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _2=com.ibm.team.dashboard.web.ui.DashboardConstants;
var _3=com.ibm.team.workitem.viewlets.web.ui.internal.utils.ErrorUtility;
var _4=com.ibm.team.workitem.web.client.internal.QueryClient;
var _5=com.ibm.team.process.web.client.internal.ProcessClient;
var _6=com.ibm.team.workitem.web.client.internal.query.QueryDescriptor;
var _7=com.ibm.team.workitem.web.ui.internal.view.queryeditor.ConditionSection;
var _8=com.ibm.team.workitem.web.ui.internal.view.query.QueryParameterConditionPage;
var _9=com.ibm.team.workitem.web.ui.internal.view.query.QueryParameterSummaryPage;
var _a=com.ibm.team.workitem.web.client.internal.query.ParameterVariableContext;
var _b=com.ibm.team.workitem.web.client.internal.query.AttributeExpression;
var _c=com.ibm.team.workitem.web.client.internal.query.UIItem;
var _d=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","WorkItemsMessages");
var _e=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
var _f=[new _c("ANY",_e.QueryParameterValueDialog_CONDITION_VALUE_ANY)];
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooser",null,{constructor:function(_10){
if(!dojo.isFunction(_10.onOk)){
throw new Error("Missing function for 'onOk' parameter");
}
if(_10.scope!=_2.SCOPE_CONTRIBUTOR&&_10.scope!=_2.SCOPE_TEAM_AREA&&_10.scope!=_2.SCOPE_PROJECT_AREA){
throw new Error("Missing or invalid required parameter 'scope'");
}
this._multiSelect=_10.multiSelect==null||_10.multiSelect;
this._onOk=_10.onOk;
this._defaultValue=_10.defaultValue?_10.defaultValue:null;
this._defaultCategory=_10.defaultCategory?_10.defaultCategory:null;
this._defaultParams=_10.defaultParams?_10.defaultParams:null;
this._suppressCrossRepoQueries=_10.suppressCrossRepoQueries||false;
this._suppressParameterizedQueries=_10.suppressParameterizedQueries||false;
switch(_10.scope){
case _2.SCOPE_CONTRIBUTOR:
_10.scope=_4.SCOPE_PERSONAL;
break;
case _2.SCOPE_TEAM_AREA:
_10.scope=_4.SCOPE_TEAM_AREA;
break;
case _2.SCOPE_PROJECT_AREA:
_10.scope=_4.SCOPE_PROJECT_AREA;
break;
}
var _11={destroyContents:true};
_11.heading=_10.title?_10.title:_d.chooserTitle;
var _12=dojo.hitch(this,function(_13,_14){
this._onOk(_13,_14);
_15();
});
var _15=dojo.hitch(this,function(){
this.floatingPane.close();
});
var _16=dojo.hitch(this,function(){
this.floatingPane.updatePosition();
});
this.contentWidget=new com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooserContent({onOk:_12,onCancel:_15,onLoad:_16,multiSelect:this._multiSelect,scope:_10.scope,scopeItemId:_10.scopeItemId,defaultValue:this._defaultValue,defaultCategory:this._defaultCategory,defaultParams:this._defaultParams,suppressCrossRepoQueries:this._suppressCrossRepoQueries,suppressParameterizedQueries:this._suppressParameterizedQueries});
_11.contentNode=this.contentWidget.domNode;
_11.footerNode=this.contentWidget.ftFooterNode;
this.floatingPane=new jazz.ui.Dialog(_11);
this.contentWidget.init();
}});
var _17=0;
var _18=1;
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooserContent",[dijit._Widget,dijit._Templated],{templatePath:dojo.moduleUrl("com.ibm.team.workitem.viewlets.web","ui/internal/templates/utils/WorkItemQueryChooser.html"),constructor:function(_19){
this.messages=_d;
this._onOk=_19.onOk;
this._onCancel=_19.onCancel;
this._multiSelect=_19.multiSelect;
this._loadedCallback=_19.loadedCallback;
this._scope=_19.scope;
this._scopeItemId=_19.scopeItemId;
this._defaultValue=_19.defaultValue;
this._defaultCategory=_19.defaultCategory?_19.defaultCategory.split("|"):[];
this._defaultParams=_19.defaultParams;
this._suppressCrossRepoQueries=_19.suppressCrossRepoQueries;
this._suppressParameterizedQueries=_19.suppressParameterizedQueries;
this._itemNames=new Object();
this._result={};
this._categoryId=1;
},postCreate:function(){
if(this._onCancel){
this.connect(this._cancelCmd,"onclick",this._onCancel);
}else{
this._cancelCmd.parentNode.removeChild(this._cancelCmd);
}
if(this._multiSelect){
this._caption.innerHTML=dojo.string.substitute(_d.chooserInstructMulti,[dojo.isMac?"CMD":"CTRL"]);
}else{
this._caption.innerHTML=_d.chooserInstructSingle;
}
this._populatePicker();
},onError:function(_1a){
_3.logError(_1a,this.id);
},isMultiSelect:function(){
return this._multiSelect;
},init:function(){
var _1b=(this._scope==_4.SCOPE_TEAM_AREA&&this._defaultCategory[_18]&&this._defaultCategory[_18]==this._scopeItemId)?this._defaultCategory[_18]:(this._defaultCategory[_17]||(this._scope==_4.SCOPE_PERSONAL?jazz.app.context.get().itemId:this._scopeItemId||null));
if(_1b){
this._runQuery(_1b);
}else{
this._needsInitialScope=true;
}
},treeSelectionChanged:function(){
this._destroyQueryPages();
var _1c=this._tree.getSelection();
var _1d=false;
for(var i=0;i<_1c.length;i++){
if(_1c[i].itemId){
var _1e=true;
}
if(_1c[i].hasParameters){
_1d=true;
}
if(_1e&&_1d){
break;
}
}
if(_1e){
this._okCmd.disabled=_1d;
this._nextCmd.disabled=!_1d;
if(_1c.length===1){
this._itemDescription.innerHTML=_1c[0].description;
}else{
dojo.empty(this._itemDescription);
}
}else{
this._okCmd.disabled=true;
this._nextCmd.disabled=true;
dojo.empty(this._itemDescription);
}
},getCurrentProjectArea:function(){
if(this.areaSelect&&this.areaSelect.value){
return this.areaSelect.value;
}
},getSelection:function(){
if(this.isMultiSelect()){
var _1f=new Array();
var _20=this._tree.getSelection();
for(var i=0;i<_20.length;i++){
var _21=this._queriesMap[this._tree.getSelection()[i].getId()];
if(_21){
_1f.push(_21);
}
}
return _1f;
}
return this._queriesMap[this._tree.getSelection()[0].getId()];
},_runQuery:function(_22){
this._currentQuery=_22;
if(this._result[_22]){
if(this._result[_22]=="empty"){
this._showEmpty();
}else{
if(this._result[_22]!="pending"){
this._tree=this._result[_22];
this._showTree();
}
}
return;
}
var _23=this._scope==_4.SCOPE_TEAM_AREA&&this._scopeItemId==_22;
this._showLoading();
this._result[_22]="pending";
var _24={self:this,scopeItemId:_22,_successCallback:function(_25){
if(!this.self.domNode){
return;
}
var _26=false;
for(var i=0;i<_25.length;i++){
if(_25[i].queries&&_25[i].queries.length>0){
_26=true;
break;
}
}
if(_26){
var _27=this.self._createTree(_25,_23?jazz.app.context.get().itemId+"|"+this.scopeItemId:this.scopeItemId);
if(this.self._currentQuery==this.scopeItemId){
this.self._tree=_27;
this.self._showTree();
}
this.self._result[this.scopeItemId]=_27;
}else{
this.self._showEmpty();
this.self._result[this.scopeItemId]="empty";
}
},_errorCallback:function(_28){
if(!this.self.domNode){
return;
}
this.self.onError(_28);
}};
var _29=new _1(_24,"_successCallback","_errorCallback");
if(this._scope==_4.SCOPE_TEAM_AREA&&_23){
_4.getScopedQueries(_29,this._scope,_22,false,false);
}else{
_4.getScopedQueries(_29,_4.SCOPE_PROJECT_AREA,null,false,true,_22,this._suppressCrossRepoQueries);
}
},_showTree:function(){
this._clearContent();
this._queryTreeArea.appendChild(this._tree.domNode);
this.treeSelectionChanged();
dojo.removeClass(this._queryTreeArea,"loading");
dojo.removeClass(this._queryTreeArea,"padded");
},_showLoading:function(){
this._clearContent();
this._queryTreeArea.appendChild(document.createTextNode(_d.loading));
dojo.addClass(this._queryTreeArea,"loading");
dojo.addClass(this._queryTreeArea,"padded");
},_showEmpty:function(){
this._clearContent();
this._queryTreeArea.appendChild(document.createTextNode(_d.noQueriesFound));
dojo.removeClass(this._queryTreeArea,"loading");
dojo.addClass(this._queryTreeArea,"padded");
},_showError:function(_2a){
dojo.removeClass(this._queryTreeArea,"loading");
dojo.addClass(this._queryTreeArea,"padded");
var _2b=dojo.create("select",{disabled:"disabled"},this._areaPicker,"only");
dojo.create("option",{value:"error",selected:"true",innerHTML:"Error"},_2b);
if(_2a){
dojo.create("div",{innerHTML:_2a},this._queryTreeArea,"only");
}
},_clearContent:function(){
while(this._queryTreeArea.firstChild){
this._queryTreeArea.removeChild(this._queryTreeArea.firstChild);
}
},_populatePicker:function(){
var _2c={self:this,_deferredCallback:function(){
if(this.deferred){
this._successCallback(this.deferred);
this.deferred=false;
}
},_successCallback:function(_2d){
if(!this.self.domNode){
return;
}
_2d.sort(function(a,b){
return a.name<b.name?-1:1;
});
if(this.self._needsInitialScope){
this.self._needsInitialScope=false;
this.self._runQuery(_2d[0].itemId);
}
var _2e=document.createElement("select");
if(this.self._scope==_4.SCOPE_PERSONAL||this.self._scope==_4.SCOPE_PROJECT_AREA||!this.self._scopeItemId){
var _2f=this.self._defaultCategory[_17]||jazz.app.context.get().itemId;
}else{
if(!this.self._itemNames[this.self._scopeItemId]){
this.deferred=_2d;
return;
}else{
if(this.self._defaultCategory[_17]&&(!this.self._defaultCategory[_18]||this.self._defaultCategory[_18]!=this.self._scopeItemId)){
var _2f=this.self._defaultCategory[_17]||jazz.app.context.get().itemId;
}
var _30=document.createElement("option");
_30.value=this.self._scopeItemId;
if(!_2f){
_30.selected="selected";
}
_30.appendChild(document.createTextNode(this.self._itemNames[this.self._scopeItemId]));
_2e.appendChild(_30);
var sep=document.createElement("optgroup");
sep.label="--------------------";
_2e.appendChild(sep);
}
}
for(var i=0;i<_2d.length;i++){
var _30=document.createElement("option");
_30.value=_2d[i].itemId;
if(_2f==_2d[i].itemId){
_30.selected="selected";
}
_30.appendChild(document.createTextNode(_2d[i].name));
_2e.appendChild(_30);
}
this.self._areaPicker.innerHTML="";
this.self._areaPicker.appendChild(_2e);
this.self.connect(_2e,"onchange",this.self._areaPickerChanged);
this.self.areaSelect=_2e;
if(this.self.onLoad){
this.self.onLoad();
}
},_errorCallback:dojo.hitch(this,function(_31){
if(!this.domNode){
return;
}
this.onError(_31);
this._showError(_31.message);
})};
var _32={hideArchivedProjects:true};
var _33=new _1(_2c,"_successCallback","_errorCallback");
_5.getAllProjectAreas(_33,_32);
if(this._scope==_4.SCOPE_TEAM_AREA&&this._scopeItemId&&!this._itemNames[this._scopeItemId]){
var _34={self:this,serviceObject:_2c,_successCallback:function(_35){
if(!this.self.domNode){
return;
}
this.self._itemNames[_35.itemId]=_35.name;
this.serviceObject._deferredCallback();
},_errorCallback:function(_36){
if(!this.self.domNode){
return;
}
this.self.onError(_36);
}};
var _33=new _1(_34,"_successCallback","_errorCallback");
_5.getTeamAreaByUUID({uuid:this._scopeItemId},_33);
}
this._areaPicker.innerHTML="<select disabled='disabled'><option value='loading' selected='true'>"+_d.loading+"</option></select>";
},_areaPickerChanged:function(e){
this._runQuery(e.target.value);
},_doOnOk:function(_37){
if(this._queryPages){
var _38=[];
var _39;
for(var i=0;i<this._queryPages.length;i++){
var obj=this._queryPages[i];
if(obj.page instanceof _9){
continue;
}
var _3a=obj.descriptor.getItemId();
if(_3a!==_39){
_38.push(new _a());
_39=_3a;
}
var _3b=obj.page.getSection().getExpression();
_38[_38.length-1].addVariableValue(obj.attributeId,_3b);
}
for(var i=0;i<_38.length;i++){
_38[i]=dojo.toJson(_38[i].createDTO());
}
this._onOk(this.getSelection(),this.isMultiSelect()?_38:_38[0]);
}else{
this._onOk(this.getSelection());
}
},_doNext:function(_3c){
this._updateMinHeight();
if(!this._queryPages){
this._nextCmd.disabled=true;
jazz.core.loader.load_async("com.ibm.team.workitem.web.ui.internal.page.WorkItemPageView",dojo.hitch(this,function(){
var _3d=this.getSelection();
var _3e=[];
var _3f={};
if(this.isMultiSelect()){
for(var i=0;i<_3d.length;i++){
_3e.push(_6.createFromQueryDTO(_3d[i]));
}
}else{
_3e.push(_6.createFromQueryDTO(_3d));
if(this._defaultValue&&this._defaultParams&&this._defaultValue===_3d.itemId){
_3f=dojo.fromJson(this._defaultParams);
}
}
var _40=(dojo.isArray(_3d)?_3d[0]:_3d).queryCategory.split("|")[0];
this._queryPages=[];
for(i=0;i<_3e.length;i++){
var _41=_3e[i].getUnresolvedVariables();
for(var id in _41){
var _42=_3f[id]?_b._createFromData(_3f[id]):this._removeParameterVariable(_41[id]);
if(_41[id]._operator){
_42._operator=_41[id]._operator;
}
this._queryPages.push({page:this._createParameterConditionPage(_42,_40),descriptor:_3e[i],attributeId:id,state:this._appendState()});
}
this._queryPages.push({page:new _9({pageSummary:_d.summaryPageSummary}),state:this._appendState(true)});
}
this._initializeProgressIndicator();
this._nextCmd.disabled=false;
this._handleNext();
}));
}else{
this._handleNext();
}
},_handleNext:function(){
this._prevCmd.disabled=false;
if(typeof this._currentQueryPageIndex!=="number"){
this._currentQueryPageIndex=0;
}
if(this._currentQueryPageIndex===0){
this._queryTree.style.display="none";
this._progressWrapper.style.display="block";
}else{
var _43=this._queryPages[this._currentQueryPageIndex-1];
this._paramPageWrapper.removeChild(_43.page.domNode);
dojo.removeClass(_43.state,"current");
}
this._currentQueryPageIndex++;
_43=this._queryPages[this._currentQueryPageIndex-1];
this._paramPageWrapper.appendChild(_43.page.domNode);
dojo.addClass(_43.state,"current");
if(this._currentQueryPageIndex===this._queryPages.length){
this._nextCmd.disabled=true;
this._okCmd.disabled=false;
}
if(_43.page instanceof _9){
var _44=[];
for(var i=this._currentQueryPageIndex-1;i>0&&!(this._queryPages[i-1].page instanceof _9);i--){
_44.splice(0,0,this._queryPages[i-1]);
}
_43.page.updateContents(this._getConditionValues(_44));
}
},_appendState:function(_45){
return dojo.create("div",{className:_45?"step end":"step normal"},this._progressBarNode);
},_getConditionValues:function(_46){
var _47={};
for(var i=0;i<_46.length;i++){
var _48=_46[i].page;
var _49=_48.getSection().getExpression();
var _4a=[];
if(_49!=null){
var _4b=_49.getVariables(false);
var _4c=_4b;
var _4d=_4c.length;
for(var _4e=0;_4e<_4d;_4e++){
var cur=_4c[_4e];
var _4f=new _c(cur.getId());
_4f.setLabel(cur.getLabel());
_4a.push(_4f);
}
Array.prototype.push.apply(_4a,_49.getValues());
}
if(!_4a.length){
_4a=_f;
}
_47[_48.getAttributeLabel()+_9.ATTRIBUTE_LABEL_SEPARATOR+_48.getSection()["_operator"].getLabel()]=_4a;
}
return _47;
},_initializeProgressIndicator:function(){
var _50=(this._queryPages.length-1)*17+10;
this._progressIndicatorNode.style.width=_50+"px";
},_removeParameterVariable:function(_51){
_51.setVariables(_51.getVariables(false));
return _51;
},_doPrev:function(_52){
this._nextCmd.disabled=false;
this._okCmd.disabled=true;
var _53=this._queryPages[this._currentQueryPageIndex-1];
dojo.removeClass(_53.state,"current");
this._paramPageWrapper.removeChild(_53.page.domNode);
this._currentQueryPageIndex--;
if(this._currentQueryPageIndex===0){
this._queryTree.style.display="";
this._progressWrapper.style.display="";
this._prevCmd.disabled=true;
}else{
_53=this._queryPages[this._currentQueryPageIndex-1];
this._paramPageWrapper.appendChild(_53.page.domNode);
dojo.addClass(_53.state,"current");
}
},_createParameterConditionPage:function(_54,_55){
var _56={};
_56.attributeId=_54.getAttributeId();
_56.parent=this;
_56.expression=_54;
_56.projectAreaItemId=_55;
var _57=new _7(_56);
var _58={};
_58.section=_57;
_58.pageSummary=_d.conditionPageSummary;
var _59=new _8(_58);
_57.setSectionSite(_59);
return _59;
},_destroyQueryPages:function(){
if(!this._queryPages){
return;
}
for(var i=0;i<this._queryPages.length;i++){
this._queryPages[i].page.destroy();
}
delete this._queryPages;
dojo.empty(this._progressBarNode);
},_updateMinHeight:function(){
var _5a=this._contentWrapper.clientHeight;
this._minHeight=Math.max(_5a,this._minHeight||0);
this._contentWrapper.style.minHeight=this._minHeight+"px";
},_createTree:function(_5b,_5c){
var _5d=this._createDataStore(_5b,_5c);
this._tree=new com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooserTree({model:_5d,chooser:this,selection:this.isMultiSelect()?"multi":true});
if(this._defaultValue&&this._defaultItemValue){
this._tree.expandTo(this._defaultValue,function(obj){
return obj.itemId||obj.label;
});
this._tree.setSelection(this._tree.getItem(this._defaultItemValue));
}
return this._tree;
},_createDataStore:function(_5e,_5f){
var _60=new Array();
var _61,_62;
if(!this._queriesMap){
this._queriesMap={};
}
for(var i=_5e.length-1;i>=0;i--){
var _63=this._createCategory(_5e[i],_5f);
if(_63.children.length>0){
if(_5e[i].scope==_4.SCOPE_CROSS_REPOSITORY){
_61=_63;
}else{
if(_5e[i].scope==_4.SCOPE_PERSONAL){
_62=_63;
}else{
_60.push(_63);
}
}
}
}
_60.reverse();
if(_61){
_60.push(_61);
}
if(_62){
_60.splice(0,0,_62);
}
return _60;
},_createCategory:function(_64,_65){
var _66=new Object();
_66.label=this._getCategoryName(_64);
_66.iconClass=this._getCategoryClass(_64);
var _67=new Array();
for(var i in _64.queries){
if(this._suppressParameterizedQueries&&_64.queries[i].hasParameters){
continue;
}
_67.push({label:jazz.util.html.escape(_64.queries[i].name),description:jazz.util.html.escape(_64.queries[i].description),itemId:_64.queries[i].itemId,iconClass:"query",categoryId:this._categoryId,hasParameters:_64.queries[i].hasParameters});
_64.queries[i].queryCategory=_65;
this._queriesMap[_64.queries[i].itemId+this._categoryId]=_64.queries[i];
if(!this._defaultItemValue&&this._defaultValue===_64.queries[i].itemId){
this._defaultItemValue=this._defaultValue+this._categoryId;
}
}
_66.children=_67.sort(function(a,b){
return a.name<b.name?-1:a.name>b.name?1:0;
});
this._categoryId++;
return _66;
},_getCategoryName:function(_68){
switch(_68.scope){
case _4.SCOPE_PERSONAL:
return _d.chooserHeadingPersonal;
case _4.SCOPE_OTHER_CONTRIBUTORS:
return _d.chooserHeadingShared;
case _4.SCOPE_TEAM_AREA:
return dojo.string.substitute(_d.chooserHeadingTeam,[_68.scopeName]);
case _4.SCOPE_PROJECT_AREA:
return _d.chooserHeadingProject;
default:
return _68.scopeName;
}
},_getCategoryClass:function(_69){
if(_69.scope==_4.SCOPE_TEAM_AREA){
return "teamFolder";
}
return "simpleFolder";
},destroy:function(){
for(var i in this._result){
if(this._result[i]!="pending"&&this._result[i].destroy){
this._result[i].destroy();
}
}
this.inherited(arguments);
}});
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooserTree",jazz.ui.ModeledTree,{createTreeItem:function(obj){
return new com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooserTreeItem(obj);
},_doSelection:function(e,_6a){
this.inherited(arguments);
this.chooser.treeSelectionChanged();
},onDblClick:function(_6b){
if(_6b.isLeaf()){
if(this.chooser._queriesMap[_6b.getId()].hasParameters){
this.chooser._doNext();
}else{
this.chooser._doOnOk();
}
}
this.inherited(arguments);
}});
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooserTreeItem",jazz.ui.tree.IconItem,{getId:function(){
return (this.itemId||this.label)+(this.categoryId||"");
}});
})();


;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryPreferenceProvider");
















dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","WorkItemsMessages");
(function(){
var _1=com.ibm.team.dashboard.web.ui.CustomPreferenceProvider;
var _2=com.ibm.team.dashboard.web.ui.DashboardConstants;
var _3=com.ibm.team.workitem.web.client.internal.QueryClient;
var _4=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _5=com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooser;
var _6=com.ibm.team.workitem.viewlets.web.ui.internal.utils.UUIDUtility;
var _7=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","WorkItemsMessages");
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryPreferenceProvider",_1,{constructor:function(_8){
this._labelMap=new Array();
this._fetchingMap=new Array();
this._prefId=_8.prefId;
this._queryCategoryPrefId=_8.queryCategoryPrefId;
this._queryParametersPrefId=_8.queryParametersPrefId;
this._suppressCrossRepoQueries=_8.suppressCrossRepoQueries||false;
},initDefault:function(_9){
this._cacheLabel(_9);
this._defaultValue=_9.itemId;
},getLabel:function(_a){
var _b=this.getTextLabel(_a);
if(_b!=""){
return this._buildLabel(_b);
}
this._fetchLabel(_a);
return null;
},getTextLabel:function(_c){
if(!_c||!_6.isValidUUID(_c.substring(0,23))){
if(this._defaultValue){
_c=this._defaultValue;
}else{
return _7.providerNoQuery;
}
}
if(_c in this._labelMap){
return this._labelMap[_c];
}
return "";
},getQueryName:function(_d,_e){
if(!_d||!_6.isValidUUID(_d.substring(0,23))){
return;
}
delete this._labelMap[_d];
if(!this._cacheCallbacks){
this._cacheCallbacks={};
}
if(!this._cacheCallbacks[_d]){
this._cacheCallbacks[_d]=[];
}
this._cacheCallbacks[_d].push(_e);
this._fetchLabel(_d);
},getLoadingLabel:function(){
return this._buildLabel(_7.loading);
},_buildLabel:function(_f){
return "<input type='text' readonly='readonly' value='"+jazz.util.html.escape(_f).replace(/'/g,"&#39;")+"'/>";
},createChooser:function(_10,_11,_12){
var _13=_12.getScope()||_2.SCOPE_CONTRIBUTOR;
var _14=_12.getScopeItem();
_14=_14?_14.itemId:null;
var _15=_11.preferences[this._prefId];
if((!_15||!_6.isValidUUID(_15.substring(0,23)))&&this._defaultValue){
_15=this._defaultValue;
}
var _16={scope:_13,scopeItemId:_14,onOk:dojo.hitch(this,function(_17,_18){
this._cacheLabel(_17);
_10(_17.itemId,this._prefId);
if(this._queryCategoryPrefId&&_17.queryCategory!==_11.preferences[this._queryCategoryPrefId]){
_10(_17.queryCategory,this._queryCategoryPrefId);
}
if(this._queryParametersPrefId&&_18!==_11.preferences[this._queryParametersPrefId]){
_10(_18,this._queryParametersPrefId);
}
}),multiSelect:false,defaultValue:_15,defaultCategory:_11.preferences[this._queryCategoryPrefId],defaultParams:_11.preferences[this._queryParametersPrefId],suppressCrossRepoQueries:this._suppressCrossRepoQueries};
new _5(_16);
},createDOMChooser:function(_19,_1a,_1b,_1c){
var _1d=_1b.getScope()||_2.SCOPE_CONTRIBUTOR;
var _1e=_1b.getScopeItem();
_1e=_1e?_1e.itemId:null;
var _1f=_1a.preferences[this._prefId];
if((!_1f||!_6.isValidUUID(_1f.substring(0,23)))&&this._defaultValue){
_1f=this._defaultValue;
}
var _20={scope:_1d,scopeItemId:_1e,onOk:dojo.hitch(this,function(_21){
this._cacheLabel(_21);
_19(_21.itemId,this._prefId);
if(this._queryCategoryPrefId&&_21.queryCategory!==_1a.preferences[this._queryCategoryPrefId]){
_19(_21.queryCategory,this._queryCategoryPrefId);
}
}),onCancel:_1c,multiSelect:false,defaultValue:_1f,defaultCategory:_1a.preferences[this._queryCategoryPrefId],suppressCrossRepoQueries:this._suppressCrossRepoQueries};
switch(_20.scope){
case _2.SCOPE_CONTRIBUTOR:
_20.scope=_3.SCOPE_PERSONAL;
break;
case _2.SCOPE_TEAM_AREA:
_20.scope=_3.SCOPE_TEAM_AREA;
break;
case _2.SCOPE_PROJECT_AREA:
_20.scope=_3.SCOPE_PROJECT_AREA;
break;
}
var _22=new com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryChooserContent({onOk:_20.onOk,onCancel:_20.onCancel,onLoad:_20.onLoad,multiSelect:_20.multiSelect==null||_20.multiSelect,scope:_20.scope,scopeItemId:_20.scopeItemId,defaultValue:_20.defaultValue?_20.defaultValue:null,defaultCategory:_20.defaultCategory?_20.defaultCategory:null,suppressCrossRepoQueries:_20.suppressCrossRepoQueries||false});
_22.init();
return _22.domNode;
},_fetchLabel:function(_23){
if(_23 in this._fetchingMap){
return;
}
this._fetchingMap[_23]=true;
var _24=this;
var _25={_successCallback:function(_26){
if(_26==null){
_24._cacheLabel({itemId:_23,name:_7.providerNoQuery});
}else{
_24._cacheLabel(_26);
}
},_errorCallback:function(_27){
if(_27&&_27.status==403){
_24._cacheLabel({itemId:_23,name:_7.providerPermissionDenied});
}else{
console.error(_27);
}
}};
var _28=new _4(_25,"_successCallback","_errorCallback");
_3.getQuery2(_28,{itemId:_23,projectAreaItemId:true});
},_cacheLabel:function(_29){
delete this._fetchingMap[_29.itemId];
this._labelMap[_29.itemId]=_29.name;
if(this._cacheCallbacks&&this._cacheCallbacks[_29.itemId]){
for(var i=0;i<this._cacheCallbacks[_29.itemId].length;i++){
this._cacheCallbacks[_29.itemId][i](_29.name);
}
delete this._cacheCallbacks[_29.itemId];
}
}});
})();


;dojo.cache("com.ibm.team.workitem.viewlets.web", "ui/internal/templates/utils/MetagroupsDialog.html", "<div class=\"com-ibm-team-workitem-viewlets-web-ui-internal-utils-MetagroupsDialog\">	<!-- Description -->	<div class=\"instruction-area\">		${messages.msgMetagroupDesc}	</div>	<div class=\"instruction-area\">		${messages.msgMetagroupDesc2}	</div>			<!-- Content Site -->	<div>		<div class=\"row\">			<div class=\"label-header\">${messages.msgLabel}</div>			<div class=\"pattern-header\">${messages.msgPattern}</div>		</div>		<div dojoAttachPoint=\"_contentSite\"></div>	</div>	<div class=\"add-link-site\">		<a href=\"javascript:void(0);\" dojoAttachPoint=\"_addLink\">${messages.msgAdd}</a>	</div>			<!-- Button Site -->    <div class=\"j-buttonGroup-bleed-two\" dojoAttachPoint=\"ftFooterNode\">		<button class=\"j-button-secondary\" dojoAttachPoint=\"_cancelButton\">${messages.msgButtonCancel}</button>				<button class=\"j-button-primary\" dojoAttachPoint=\"_okButton\">${messages.msgButtonOK}</button>	</div></div>");

;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.MetagroupsDialog");








dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
var Dialog=jazz.ui.Dialog;
(function(){
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.MetagroupsDialog",[dijit._Widget,dijit._Templated],{metagroups:[],onOK:null,onCancel:null,_static:function(){
},templatePath:dojo.moduleUrl("com.ibm.team.workitem.viewlets.web","ui/internal/templates/utils/MetagroupsDialog.html"),constructor:function(_1){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
},postCreate:function(){
this.inherited(arguments);
this._initializeStaticConstants();
this._dialog=null;
this._doIt=false;
this._DOM_ID_PREFIX="wis-mgd_";
this._domIDCount=0;
this._metagroupModel={};
this._createDialogContents();
this._connectDialogHandlers();
},destroy:function(){
this._disconnectDialogHandlers();
if(this._dialog){
this._dialog.destroy();
delete this._dialog;
}
this.inherited(arguments);
},show:function(){
this._dialog=new Dialog({contentNode:this.domNode,primaryTitle:this.messages.msgMetagroups,width:"452px",footerNode:this.ftFooterNode,onClose:dojo.hitch(this,this._handleEventDialogClosed)});
},hide:function(){
if(this._dialog){
this._dialog.close();
}else{
this._handleEventDialogClosed();
}
},_handleEventDialogClosed:function(){
if(this._doIt&&this.onOK){
var _2=this._getMetagroups();
this.onOK(_2);
}else{
if(this.onCancel){
this.onCancel();
}
}
var _3=this;
setTimeout(function(){
_3.destroy();
},1000);
return true;
},_getMetagroups:function(){
var _4=[];
for(var id in this._metagroupModel){
var _5=this._metagroupModel[id];
if(!_5){
continue;
}else{
if(_5.hasChildNodes()===false){
continue;
}
}
var _6=_5.childNodes;
if(_6.length<3){
continue;
}else{
if(!_6[0]){
continue;
}else{
if(!_6[1]){
continue;
}
}
}
var _7=_6[0].firstChild;
var _8=_6[1].firstChild;
if(!_7){
continue;
}else{
if(!_8){
continue;
}else{
if(!_7.value){
continue;
}else{
if(!_8.value){
continue;
}
}
}
}
try{
var re=new RegExp(_8.value,"i");
re.test("_");
}
catch(errorObject){
continue;
}
_4.push({label:_7.value,pattern:_8.value});
}
return _4;
},_createDialogContents:function(){
if(this.metagroups.length===0){
this._createRow({label:"",pattern:""});
}else{
for(var _9=0;_9<this.metagroups.length;_9++){
this._createRow(this.metagroups[_9]);
}
}
},_createRow:function(_a){
this._domIDCount++;
var _b=this._DOM_ID_PREFIX+this._domIDCount;
var _c=document.createElement("input");
_c.type="text";
_c.maxlength=50;
_c.value=_a.label;
dojo.addClass(_c,"labelField");
var _d=document.createElement("input");
_d.type="text";
_d.maxlength=50;
_d.value=_a.pattern;
dojo.addClass(_d,"patternField");
var _e=document.createElement("a");
_e.href="javascript:void(0);";
_e.id=_b;
_e.innerHTML=this.messages.msgRemove;
this.connect(_e,"onclick",this._handleEventRemoveClicked);
var _f=document.createElement("div");
dojo.addClass(_f,"column");
_f.appendChild(_c);
var _10=document.createElement("div");
dojo.addClass(_10,"column");
_10.appendChild(_d);
var _11=document.createElement("div");
_11.appendChild(_e);
var row=document.createElement("div");
dojo.addClass(row,"row");
row.appendChild(_f);
row.appendChild(_10);
row.appendChild(_11);
this._contentSite.appendChild(row);
this._metagroupModel[_b]=row;
},_handleEventRemoveClicked:function(_12){
if(_12){
dojo.stopEvent(_12);
}else{
return true;
}
if(!_12.target){
return true;
}
var _13=_12.target.id;
if(!_13){
return true;
}
var row=this._metagroupModel[_13];
if(!row){
return true;
}
if(this._contentSite.hasChildNodes()&&this._contentSite.childNodes.length===1){
this._clearRow(row);
}else{
this._contentSite.removeChild(row);
delete this._metagroupModel[_13];
}
return true;
},_clearRow:function(row){
if(!row){
return;
}else{
if(row.hasChildNodes()===false){
return;
}
}
var _14=row.childNodes;
if(_14.length<3){
return;
}else{
if(!_14[0]){
return;
}else{
if(!_14[1]){
return;
}
}
}
var _15=_14[0].firstChild;
var _16=_14[1].firstChild;
if(!_15){
return;
}else{
if(!_16){
return;
}
}
_15.value="";
_16.value="";
},_connectDialogHandlers:function(){
this._addLinkHandler=this.connect(this._addLink,"onclick",this._handleEventAddLinkClicked);
this._clickOKHandler=this.connect(this._okButton,"onclick",this._handleEventOKButtonClicked);
this._clickCancelHandler=this.connect(this._cancelButton,"onclick",this._handleEventCancelButtonClicked);
},_disconnectDialogHandlers:function(){
if(this._addLinkHandler){
this.disconnect(this._addLinkHandler);
delete this._addLinkHandler;
}
if(this._clickOKHandler){
this.disconnect(this._clickOKHandler);
delete this._clickOKHandler;
}
if(this._clickCancelHandler){
this.disconnect(this._clickCancelHandler);
delete this._clickCancelHandler;
}
},_handleEventAddLinkClicked:function(_17){
if(_17){
dojo.stopEvent(_17);
}
this._createRow({label:"",pattern:""});
return true;
},_handleEventOKButtonClicked:function(_18){
if(_18){
dojo.stopEvent(_18);
}
this._doIt=true;
this.hide();
return true;
},_handleEventCancelButtonClicked:function(_19){
if(_19){
dojo.stopEvent(_19);
}
this._doIt=false;
this.hide();
return true;
},_initializeStaticConstants:function(){
if(this._static._instanceCount){
this._static._instanceCount++;
return;
}
this._static._instanceCount=1;
}});
})();


;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.MetagroupsPreferenceProvider");






dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","WorkItemsMessages");
(function(){
var _1=com.ibm.team.dashboard.web.ui.CustomPreferenceProvider;
var _2=com.ibm.team.workitem.viewlets.web.ui.internal.utils.MetagroupsDialog;
var _3=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","WorkItemsMessages");
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.MetagroupsPreferenceProvider",_1,{constructor:function(_4){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
this._metagroups=[];
},getLabel:function(_5){
var _6;
if(!_5){
this._metagroups=[];
_6=this.messages.msgNoMetagroupsDefined;
}else{
this._metagroups=this._deserializeMetagroups(_5);
_6=this._getMetagroupsLabel(this._metagroups);
}
return this._buildLabel(_6);
},getLoadingLabel:function(){
return this._buildLabel(this.messages.msgLoading);
},createChooser:function(_7,_8,_9){
var _a=new _2({metagroups:this._metagroups,onOK:dojo.hitch(this,function(_b){
var _c=this._serializeMetagroups(_b);
_7(_c,_9._static._PREFERENCE_ID_METAGROUPS);
})});
_a.show();
},createDOMChooser:function(_d,_e,_f,_10){
var _11=new _2({metagroups:this._metagroups,onOK:dojo.hitch(this,function(_12){
var _13=this._serializeMetagroups(_12);
_d(_13,_f._static._PREFERENCE_ID_METAGROUPS);
}),onCancel:_10});
return _11.domNode;
},_buildLabel:function(_14){
return "<input type='text' readonly='readonly' value='"+_14.replace("'","&#39;")+"'/>";
},_getMetagroupsLabel:function(_15){
var _16;
var _17=[];
for(var _18=0;_18<_15.length;_18++){
var _19=_15[_18];
if(!_19){
continue;
}else{
if(!_19.label){
continue;
}
}
_17.push(_19.label);
}
if(_17.length>0){
_16=_17.join(", ");
}else{
_16=this.messages.msgNoMetagroupsDefined;
}
return _16;
},_serializeMetagroups:function(_1a){
var _1b;
var _1c=[];
for(var _1d=0;_1d<_1a.length;_1d++){
var _1e=_1a[_1d];
if(!_1e){
continue;
}else{
if(!_1e.label){
continue;
}else{
if(!_1e.pattern){
continue;
}
}
}
var _1f=_1e.label+"~~"+_1e.pattern;
_1c.push(_1f);
}
if(_1c.length>0){
_1b=_1c.join("@@");
}else{
_1b="";
}
return _1b;
},_deserializeMetagroups:function(_20){
if(!_20){
return [];
}
var _21=_20.split("@@");
var _22=[];
for(var _23=0;_23<_21.length;_23++){
var _24=_21[_23];
if(!_24){
continue;
}
var _25=_24.split("~~",2);
if(_25.length!==2){
continue;
}
var _26=_25[0];
var _27=_25[1];
_22.push({label:_26,pattern:_27});
}
return _22;
}});
})();


;define("dojo/dnd/common",["../sniff","../_base/kernel","../_base/lang","../dom"],function(_1,_2,_3,_4){
var _5=_3.getObject("dojo.dnd",true);
_5.getCopyKeyState=function(_6){
return _6[_1("mac")?"metaKey":"ctrlKey"];
};
_5._uniqueId=0;
_5.getUniqueId=function(){
var id;
do{
id=_2._scopeName+"Unique"+(++_5._uniqueId);
}while(_4.byId(id));
return id;
};
_5._empty={};
_5.isFormElement=function(e){
var t=e.target;
if(t.nodeType==3){
t=t.parentNode;
}
return " a button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;
};
return _5;
});


;define("dojo/dnd/autoscroll",["../_base/lang","../sniff","../_base/window","../dom-geometry","../dom-style","../window"],function(_1,_2,_3,_4,_5,_6){
var _7={};
_1.setObject("dojo.dnd.autoscroll",_7);
_7.getViewport=_6.getBox;
_7.V_TRIGGER_AUTOSCROLL=32;
_7.H_TRIGGER_AUTOSCROLL=32;
_7.V_AUTOSCROLL_VALUE=16;
_7.H_AUTOSCROLL_VALUE=16;
var _8,_9=_3.doc,_a=Infinity,_b=Infinity;
_7.autoScrollStart=function(d){
_9=d;
_8=_6.getBox(_9);
var _c=_3.body(_9).parentNode;
_a=Math.max(_c.scrollHeight-_8.h,0);
_b=Math.max(_c.scrollWidth-_8.w,0);
};
_7.autoScroll=function(e){
var v=_8||_6.getBox(_9),_d=_3.body(_9).parentNode,dx=0,dy=0;
if(e.clientX<_7.H_TRIGGER_AUTOSCROLL){
dx=-_7.H_AUTOSCROLL_VALUE;
}else{
if(e.clientX>v.w-_7.H_TRIGGER_AUTOSCROLL){
dx=Math.min(_7.H_AUTOSCROLL_VALUE,_b-_d.scrollLeft);
}
}
if(e.clientY<_7.V_TRIGGER_AUTOSCROLL){
dy=-_7.V_AUTOSCROLL_VALUE;
}else{
if(e.clientY>v.h-_7.V_TRIGGER_AUTOSCROLL){
dy=Math.min(_7.V_AUTOSCROLL_VALUE,_a-_d.scrollTop);
}
}
window.scrollBy(dx,dy);
};
_7._validNodes={"div":1,"p":1,"td":1};
_7._validOverflow={"auto":1,"scroll":1};
_7.autoScrollNodes=function(e){
var b,t,w,h,rx,ry,dx=0,dy=0,_e,_f;
for(var n=e.target;n;){
if(n.nodeType==1&&(n.tagName.toLowerCase() in _7._validNodes)){
var s=_5.getComputedStyle(n),_10=(s.overflowX.toLowerCase() in _7._validOverflow),_11=(s.overflowY.toLowerCase() in _7._validOverflow);
if(_10||_11){
b=_4.getContentBox(n,s);
t=_4.position(n,true);
}
if(_10){
w=Math.min(_7.H_TRIGGER_AUTOSCROLL,b.w/2);
rx=e.pageX-t.x;
if(_2("webkit")||_2("opera")){
rx+=_3.body().scrollLeft;
}
dx=0;
if(rx>0&&rx<b.w){
if(rx<w){
dx=-w;
}else{
if(rx>b.w-w){
dx=w;
}
}
_e=n.scrollLeft;
n.scrollLeft=n.scrollLeft+dx;
}
}
if(_11){
h=Math.min(_7.V_TRIGGER_AUTOSCROLL,b.h/2);
ry=e.pageY-t.y;
if(_2("webkit")||_2("opera")){
ry+=_3.body().scrollTop;
}
dy=0;
if(ry>0&&ry<b.h){
if(ry<h){
dy=-h;
}else{
if(ry>b.h-h){
dy=h;
}
}
_f=n.scrollTop;
n.scrollTop=n.scrollTop+dy;
}
}
if(dx||dy){
return;
}
}
try{
n=n.parentNode;
}
catch(x){
n=null;
}
}
_7.autoScroll(e);
};
return _7;
});


;define("dojo/dnd/Mover",["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,on,_a,_b,_c){
return _2("dojo.dnd.Mover",[_9],{constructor:function(_d,e,_e){
this.node=_6.byId(_d);
this.marginBox={l:e.pageX,t:e.pageY};
this.mouseButton=e.button;
var h=(this.host=_e),d=_d.ownerDocument;
function _f(e){
e.preventDefault();
e.stopPropagation();
};
this.events=[on(d,_a.move,_3.hitch(this,"onFirstMove")),on(d,_a.move,_3.hitch(this,"onMouseMove")),on(d,_a.release,_3.hitch(this,"onMouseUp")),on(d,"dragstart",_f),on(d.body,"selectstart",_f)];
_c.autoScrollStart(d);
if(h&&h.onMoveStart){
h.onMoveStart(this);
}
},onMouseMove:function(e){
_c.autoScroll(e);
var m=this.marginBox;
this.host.onMove(this,{l:m.l+e.pageX,t:m.t+e.pageY},e);
e.preventDefault();
e.stopPropagation();
},onMouseUp:function(e){
if(_4("webkit")&&_4("mac")&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){
this.destroy();
}
e.preventDefault();
e.stopPropagation();
},onFirstMove:function(e){
var s=this.node.style,l,t,h=this.host;
switch(s.position){
case "relative":
case "absolute":
l=Math.round(parseFloat(s.left))||0;
t=Math.round(parseFloat(s.top))||0;
break;
default:
s.position="absolute";
var m=_7.getMarginBox(this.node);
var b=_5.doc.body;
var bs=_8.getComputedStyle(b);
var bm=_7.getMarginBox(b,bs);
var bc=_7.getContentBox(b,bs);
l=m.l-(bc.l-bm.l);
t=m.t-(bc.t-bm.t);
break;
}
this.marginBox.l=l-this.marginBox.l;
this.marginBox.t=t-this.marginBox.t;
if(h&&h.onFirstMove){
h.onFirstMove(this,e);
}
this.events.shift().remove();
},destroy:function(){
_1.forEach(this.events,function(_10){
_10.remove();
});
var h=this.host;
if(h&&h.onMoveStop){
h.onMoveStop(this);
}
this.events=this.node=this.host=null;
}});
});


;define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../has","../on","../topic","../touch","./common","./Mover","../_base/window"],function(_1,_2,_3,_4,_5,_6,_7,on,_8,_9,_a,_b,_c){
var _d;
var _e=function(){
};
function _f(){
if("touchAction" in document.body.style){
_d="touchAction";
}else{
if("msTouchAction" in document.body.style){
_d="msTouchAction";
}
}
_e=function _e(_10,_11){
_10.style[_d]=_11;
};
_e(arguments[0],arguments[1]);
};
if(_7("touch-action")){
_e=_f;
}
var _12=_2("dojo.dnd.Moveable",[_6],{handle:"",delay:0,skip:false,constructor:function(_13,_14){
this.node=_4.byId(_13);
_e(this.node,"none");
if(!_14){
_14={};
}
this.handle=_14.handle?_4.byId(_14.handle):null;
if(!this.handle){
this.handle=this.node;
}
this.delay=_14.delay>0?_14.delay:0;
this.skip=_14.skip;
this.mover=_14.mover?_14.mover:_b;
this.events=[on(this.handle,_9.press,_3.hitch(this,"onMouseDown")),on(this.handle,"dragstart",_3.hitch(this,"onSelectStart")),on(this.handle,"selectstart",_3.hitch(this,"onSelectStart"))];
},markupFactory:function(_15,_16,_17){
return new _17(_16,_15);
},destroy:function(){
_1.forEach(this.events,function(_18){
_18.remove();
});
_e(this.node,"");
this.events=this.node=this.handle=null;
},onMouseDown:function(e){
if(this.skip&&_a.isFormElement(e)){
return;
}
if(this.delay){
this.events.push(on(this.handle,_9.move,_3.hitch(this,"onMouseMove")),on(this.handle.ownerDocument,_9.release,_3.hitch(this,"onMouseUp")));
this._lastX=e.pageX;
this._lastY=e.pageY;
}else{
this.onDragDetected(e);
}
e.stopPropagation();
e.preventDefault();
},onMouseMove:function(e){
if(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay){
this.onMouseUp(e);
this.onDragDetected(e);
}
e.stopPropagation();
e.preventDefault();
},onMouseUp:function(e){
for(var i=0;i<2;++i){
this.events.pop().remove();
}
e.stopPropagation();
e.preventDefault();
},onSelectStart:function(e){
if(!this.skip||!_a.isFormElement(e)){
e.stopPropagation();
e.preventDefault();
}
},onDragDetected:function(e){
new this.mover(this.node,e,this);
},onMoveStart:function(_19){
_8.publish("/dnd/move/start",_19);
_5.add(_c.body(),"dojoMove");
_5.add(this.node,"dojoMoveItem");
},onMoveStop:function(_1a){
_8.publish("/dnd/move/stop",_1a);
_5.remove(_c.body(),"dojoMove");
_5.remove(this.node,"dojoMoveItem");
},onFirstMove:function(){
},onMove:function(_1b,_1c){
this.onMoving(_1b,_1c);
var s=_1b.node.style;
s.left=_1c.l+"px";
s.top=_1c.t+"px";
this.onMoved(_1b,_1c);
},onMoving:function(){
},onMoved:function(){
}});
return _12;
});


;define("dojo/dnd/move",["../_base/declare","../dom-geometry","../dom-style","./common","./Mover","./Moveable"],function(_1,_2,_3,_4,_5,_6){
var _7=_1("dojo.dnd.move.constrainedMoveable",_6,{constraints:function(){
},within:false,constructor:function(_8,_9){
if(!_9){
_9={};
}
this.constraints=_9.constraints;
this.within=_9.within;
},onFirstMove:function(_a){
var c=this.constraintBox=this.constraints.call(this,_a);
c.r=c.l+c.w;
c.b=c.t+c.h;
if(this.within){
var mb=_2.getMarginSize(_a.node);
c.r-=mb.w;
c.b-=mb.h;
}
},onMove:function(_b,_c){
var c=this.constraintBox,s=_b.node.style;
this.onMoving(_b,_c);
_c.l=_c.l<c.l?c.l:c.r<_c.l?c.r:_c.l;
_c.t=_c.t<c.t?c.t:c.b<_c.t?c.b:_c.t;
s.left=_c.l+"px";
s.top=_c.t+"px";
this.onMoved(_b,_c);
}});
var _d=_1("dojo.dnd.move.boxConstrainedMoveable",_7,{box:{},constructor:function(_e,_f){
var box=_f&&_f.box;
this.constraints=function(){
return box;
};
}});
var _10=_1("dojo.dnd.move.parentConstrainedMoveable",_7,{area:"content",constructor:function(_11,_12){
var _13=_12&&_12.area;
this.constraints=function(){
var n=this.node.parentNode,s=_3.getComputedStyle(n),mb=_2.getMarginBox(n,s);
if(_13=="margin"){
return mb;
}
var t=_2.getMarginExtents(n,s);
mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;
if(_13=="border"){
return mb;
}
t=_2.getBorderExtents(n,s);
mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;
if(_13=="padding"){
return mb;
}
t=_2.getPadExtents(n,s);
mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;
return mb;
};
}});
return {constrainedMoveable:_7,boxConstrainedMoveable:_d,parentConstrainedMoveable:_10};
});


;define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","dojo/window","../a11y"],function(_1,_2,_3,_4,_5,_6,on,_7,_8,_9){
return _2("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_a){
this._set("disabled",_a);
if(/^(button|input|select|textarea|optgroup|option|fieldset)$/i.test(this.focusNode.tagName)){
_3.set(this.focusNode,"disabled",_a);
if(_7("trident")&&"readOnly" in this){
_3.set(this.focusNode,"readonly",_a||this.readOnly);
}
}else{
this.focusNode.setAttribute("aria-disabled",_a?"true":"false");
}
if(this.valueNode){
_3.set(this.valueNode,"disabled",_a);
}
if(_a){
this._set("hovering",false);
this._set("active",false);
var _b="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";
_1.forEach(_5.isArray(_b)?_b:[_b],function(_c){
var _d=this[_c];
if(_7("webkit")||_9.hasDefaultTabStop(_d)){
_d.setAttribute("tabIndex","-1");
}else{
_d.removeAttribute("tabIndex");
}
},this);
}else{
if(this.tabIndex!=""){
this.set("tabIndex",this.tabIndex);
}
}
},_onFocus:function(by){
if(by=="mouse"&&this.isFocusable()){
var _e=this.own(on(this.focusNode,"focus",function(){
_f.remove();
_e.remove();
}))[0];
var _10=_7("pointer-events")?"pointerup":_7("MSPointer")?"MSPointerUp":_7("touch-events")?"touchend, mouseup":"mouseup";
var _f=this.own(on(this.ownerDocumentBody,_10,_5.hitch(this,function(evt){
_f.remove();
_e.remove();
if(this.focused){
if(evt.type=="touchend"){
this.defer("focus");
}else{
this.focus();
}
}
})))[0];
}
if(this.scrollOnFocus){
this.defer(function(){
_8.scrollIntoView(this.domNode);
});
}
this.inherited(arguments);
},isFocusable:function(){
return !this.disabled&&this.focusNode&&(_4.get(this.domNode,"display")!="none");
},focus:function(){
if(!this.disabled&&this.focusNode.focus){
try{
this.focusNode.focus();
}
catch(e){
}
}
},compare:function(_11,_12){
if(typeof _11=="number"&&typeof _12=="number"){
return (isNaN(_11)&&isNaN(_12))?0:_11-_12;
}else{
if(_11>_12){
return 1;
}else{
if(_11<_12){
return -1;
}else{
return 0;
}
}
}
},onChange:function(){
},_onChangeActive:false,_handleOnChange:function(_13,_14){
if(this._lastValueReported==undefined&&(_14===null||!this._onChangeActive)){
this._resetValue=this._lastValueReported=_13;
}
this._pendingOnChange=this._pendingOnChange||(typeof _13!=typeof this._lastValueReported)||(this.compare(_13,this._lastValueReported)!=0);
if((this.intermediateChanges||_14||_14===undefined)&&this._pendingOnChange){
this._lastValueReported=_13;
this._pendingOnChange=false;
if(this._onChangeActive){
if(this._onChangeHandle){
this._onChangeHandle.remove();
}
this._onChangeHandle=this.defer(function(){
this._onChangeHandle=null;
this.onChange(_13);
});
}
}
},create:function(){
this.inherited(arguments);
this._onChangeActive=true;
},destroy:function(){
if(this._onChangeHandle){
this._onChangeHandle.remove();
this.onChange(this._lastValueReported);
}
this.inherited(arguments);
}});
});


;define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/sniff","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin","jazz/inverted!./_FormValueWidget"],function(_1,_2,_3,_4,_5,_6,_7,_8){
return _1("dijit.form._FormWidget",[_5,_7,_6,_8],{setDisabled:function(_9){
_3.deprecated("setDisabled("+_9+") is deprecated. Use set('disabled',"+_9+") instead.","","2.0");
this.set("disabled",_9);
},setValue:function(_a){
_3.deprecated("dijit.form._FormWidget:setValue("+_a+") is deprecated.  Use set('value',"+_a+") instead.","","2.0");
this.set("value",_a);
},getValue:function(){
_3.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");
return this.get("value");
},postMixInProperties:function(){
this.nameAttrSetting=(this.name&&!_2("msapp"))?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";
this.inherited(arguments);
}});
});


;define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./_FormWidgetMixin"],function(_1,_2,_3,_4,on,_5,_6){
return _1("dijit.form._FormValueMixin",_6,{readOnly:false,_setReadOnlyAttr:function(_7){
if(_5("trident")&&"disabled" in this){
_2.set(this.focusNode,"readOnly",_7||this.disabled);
}else{
_2.set(this.focusNode,"readOnly",_7);
}
this._set("readOnly",_7);
},postCreate:function(){
this.inherited(arguments);
if(this._resetValue===undefined){
this._lastValueReported=this._resetValue=this.value;
}
},_setValueAttr:function(_8,_9){
this._handleOnChange(_8,_9);
},_handleOnChange:function(_a,_b){
this._set("value",_a);
this.inherited(arguments);
},undo:function(){
this._setValueAttr(this._lastValueReported,false);
},reset:function(){
this._hasBeenBlurred=false;
this._setValueAttr(this._resetValue,true);
}});
});


;define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_1,_2,_3,_4){
return _1("dijit.form._FormValueWidget",[_3,_4],{_layoutHackIE7:function(){
if(_2("ie")==7){
var _5=this.domNode;
var _6=_5.parentNode;
var _7=_5.firstChild||_5;
var _8=_7.style.filter;
var _9=this;
while(_6&&_6.clientHeight==0){
(function ping(){
var _a=_9.connect(_6,"onscroll",function(){
_9.disconnect(_a);
_7.style.filter=(new Date()).getMilliseconds();
_9.defer(function(){
_7.style.filter=_8;
});
});
})();
_6=_6.parentNode;
}
}
}});
});


;define("dojox/main",["dojo/_base/kernel"],function(_1){
return _1.dojox;
});


;define("dojo/colors",["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(_1,_2,_3,_4){
var _5={};
_2.setObject("dojo.colors",_5);
var _6=function(m1,m2,h){
if(h<0){
++h;
}
if(h>1){
--h;
}
var h6=6*h;
if(h6<1){
return m1+(m2-m1)*h6;
}
if(2*h<1){
return m2;
}
if(3*h<2){
return m1+(m2-m1)*(2/3-h)*6;
}
return m1;
};
_1.colorFromRgb=_3.fromRgb=function(_7,_8){
var m=_7.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);
if(m){
var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;
if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){
var r=c[0];
if(r.charAt(r.length-1)=="%"){
a=_4.map(c,function(x){
return parseFloat(x)*2.56;
});
if(l==4){
a[3]=c[3];
}
return _3.fromArray(a,_8);
}
return _3.fromArray(c,_8);
}
if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){
var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;
a=[_6(m1,m2,H+1/3)*256,_6(m1,m2,H)*256,_6(m1,m2,H-1/3)*256,1];
if(l==4){
a[3]=c[3];
}
return _3.fromArray(a,_8);
}
}
return null;
};
var _9=function(c,_a,_b){
c=Number(c);
return isNaN(c)?_b:c<_a?_a:c>_b?_b:c;
};
_3.prototype.sanitize=function(){
var t=this;
t.r=Math.round(_9(t.r,0,255));
t.g=Math.round(_9(t.g,0,255));
t.b=Math.round(_9(t.b,0,255));
t.a=_9(t.a,0,1);
return this;
};
_5.makeGrey=_3.makeGrey=function(g,a){
return _3.fromArray([g,g,g,a]);
};
_2.mixin(_3.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});
return _3;
});


;define("dojox/color/_base",["../main","dojo/_base/lang","dojo/_base/Color","dojo/colors"],function(_1,_2,_3,_4){
var cx=_2.getObject("color",true,_1);
cx.Color=_3;
cx.blend=_3.blendColors;
cx.fromRgb=_3.fromRgb;
cx.fromHex=_3.fromHex;
cx.fromArray=_3.fromArray;
cx.fromString=_3.fromString;
cx.greyscale=_4.makeGrey;
_2.mixin(cx,{fromCmy:function(_5,_6,_7){
if(_2.isArray(_5)){
_6=_5[1],_7=_5[2],_5=_5[0];
}else{
if(_2.isObject(_5)){
_6=_5.m,_7=_5.y,_5=_5.c;
}
}
_5/=100,_6/=100,_7/=100;
var r=1-_5,g=1-_6,b=1-_7;
return new _3({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});
},fromCmyk:function(_8,_9,_a,_b){
if(_2.isArray(_8)){
_9=_8[1],_a=_8[2],_b=_8[3],_8=_8[0];
}else{
if(_2.isObject(_8)){
_9=_8.m,_a=_8.y,_b=_8.b,_8=_8.c;
}
}
_8/=100,_9/=100,_a/=100,_b/=100;
var r,g,b;
r=1-Math.min(1,_8*(1-_b)+_b);
g=1-Math.min(1,_9*(1-_b)+_b);
b=1-Math.min(1,_a*(1-_b)+_b);
return new _3({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});
},fromHsl:function(_c,_d,_e){
if(_2.isArray(_c)){
_d=_c[1],_e=_c[2],_c=_c[0];
}else{
if(_2.isObject(_c)){
_d=_c.s,_e=_c.l,_c=_c.h;
}
}
_d/=100;
_e/=100;
while(_c<0){
_c+=360;
}
while(_c>=360){
_c-=360;
}
var r,g,b;
if(_c<120){
r=(120-_c)/60,g=_c/60,b=0;
}else{
if(_c<240){
r=0,g=(240-_c)/60,b=(_c-120)/60;
}else{
r=(_c-240)/60,g=0,b=(360-_c)/60;
}
}
r=2*_d*Math.min(r,1)+(1-_d);
g=2*_d*Math.min(g,1)+(1-_d);
b=2*_d*Math.min(b,1)+(1-_d);
if(_e<0.5){
r*=_e,g*=_e,b*=_e;
}else{
r=(1-_e)*r+2*_e-1;
g=(1-_e)*g+2*_e-1;
b=(1-_e)*b+2*_e-1;
}
return new _3({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});
}});
cx.fromHsv=function(_f,_10,_11){
if(_2.isArray(_f)){
_10=_f[1],_11=_f[2],_f=_f[0];
}else{
if(_2.isObject(_f)){
_10=_f.s,_11=_f.v,_f=_f.h;
}
}
if(_f==360){
_f=0;
}
_10/=100;
_11/=100;
var r,g,b;
if(_10==0){
r=_11,b=_11,g=_11;
}else{
var _12=_f/60,i=Math.floor(_12),f=_12-i;
var p=_11*(1-_10);
var q=_11*(1-(_10*f));
var t=_11*(1-(_10*(1-f)));
switch(i){
case 0:
r=_11,g=t,b=p;
break;
case 1:
r=q,g=_11,b=p;
break;
case 2:
r=p,g=_11,b=t;
break;
case 3:
r=p,g=q,b=_11;
break;
case 4:
r=t,g=p,b=_11;
break;
case 5:
r=_11,g=p,b=q;
break;
}
}
return new _3({r:Math.round(r*255),g:Math.round(g*255),b:Math.round(b*255)});
};
_2.extend(_3,{toCmy:function(){
var _13=1-(this.r/255),_14=1-(this.g/255),_15=1-(this.b/255);
return {c:Math.round(_13*100),m:Math.round(_14*100),y:Math.round(_15*100)};
},toCmyk:function(){
var _16,_17,_18,_19;
var r=this.r/255,g=this.g/255,b=this.b/255;
_19=Math.min(1-r,1-g,1-b);
_16=(1-r-_19)/(1-_19);
_17=(1-g-_19)/(1-_19);
_18=(1-b-_19)/(1-_19);
return {c:Math.round(_16*100),m:Math.round(_17*100),y:Math.round(_18*100),b:Math.round(_19*100)};
},toHsl:function(){
var r=this.r/255,g=this.g/255,b=this.b/255;
var min=Math.min(r,b,g),max=Math.max(r,g,b);
var _1a=max-min;
var h=0,s=0,l=(min+max)/2;
if(l>0&&l<1){
s=_1a/((l<0.5)?(2*l):(2-2*l));
}
if(_1a>0){
if(max==r&&max!=g){
h+=(g-b)/_1a;
}
if(max==g&&max!=b){
h+=(2+(b-r)/_1a);
}
if(max==b&&max!=r){
h+=(4+(r-g)/_1a);
}
h*=60;
}
return {h:h,s:Math.round(s*100),l:Math.round(l*100)};
},toHsv:function(){
var r=this.r/255,g=this.g/255,b=this.b/255;
var min=Math.min(r,b,g),max=Math.max(r,g,b);
var _1b=max-min;
var h=null,s=(max==0)?0:(_1b/max);
if(s==0){
h=0;
}else{
if(r==max){
h=60*(g-b)/_1b;
}else{
if(g==max){
h=120+60*(b-r)/_1b;
}else{
h=240+60*(r-g)/_1b;
}
}
if(h<0){
h+=360;
}
}
return {h:h,s:Math.round(s*100),v:Math.round(max*100)};
}});
return cx;
});


;define("dojox/color",["./color/_base"],function(_1){
return _1;
});


;define("dojo/i18n!dojox/widget/nls/ColorPicker", {"greenLabel":"g","degLabel":"\xb0","valueLabel":"v","hueLabel":"h","hexLabel":"hex","blueLabel":"b","saturationLabel":"s","saturationPickerTitle":"Saturation Selector","redLabel":"r","huePickerTitle":"Hue Selector"});

;define("dojo/text!dojox/widget/ColorPicker/ColorPicker.html", '<table class="dojoxColorPicker" dojoAttachEvent="onkeypress: _handleKey" cellpadding="0" cellspacing="0" role="presentation">	<tr>		<td valign="top" class="dojoxColorPickerRightPad">			<div class="dojoxColorPickerBox">				<!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. -->				<img title="${saturationPickerTitle}" alt="${saturationPickerTitle}" class="dojoxColorPickerPoint" src="${_pickerPointer}" tabIndex="0" dojoAttachPoint="cursorNode" style="position: absolute; top: 0px; left: 0px;">				<img role="presentation" alt="" dojoAttachPoint="colorUnderlay" dojoAttachEvent="onclick: _setPoint, onmousedown: _stopDrag" class="dojoxColorPickerUnderlay" src="${_underlay}" ondragstart="return false">			</div>		</td>		<td valign="top" class="dojoxColorPickerRightPad">			<div class="dojoxHuePicker">				<!-- Forcing ABS in style attr due to dojo DND issue with not picking it up form the class. -->				<img dojoAttachPoint="hueCursorNode" tabIndex="0" class="dojoxHuePickerPoint" title="${huePickerTitle}" alt="${huePickerTitle}" src="${_huePickerPointer}" style="position: absolute; top: 0px; left: 0px;">				<div class="dojoxHuePickerUnderlay" dojoAttachPoint="hueNode">				    <img role="presentation" alt="" dojoAttachEvent="onclick: _setHuePoint, onmousedown: _stopDrag" src="${_hueUnderlay}">				</div>			</div>		</td>		<td valign="top">			<table cellpadding="0" cellspacing="0" role="presentation">				<tr>					<td valign="top" class="dojoxColorPickerPreviewContainer">						<table cellpadding="0" cellspacing="0" role="presentation">							<tr>								<td valign="top" class="dojoxColorPickerRightPad">									<div dojoAttachPoint="previewNode" class="dojoxColorPickerPreview"></div>								</td>								<td valign="top">									<div dojoAttachPoint="safePreviewNode" class="dojoxColorPickerWebSafePreview"></div>								</td>							</tr>						</table>					</td>				</tr>				<tr>					<td valign="bottom">						<table class="dojoxColorPickerOptional" cellpadding="0" cellspacing="0" role="presentation">							<tr>								<td>									<div class="dijitInline dojoxColorPickerRgb" dojoAttachPoint="rgbNode">										<table cellpadding="1" cellspacing="1" role="presentation">										<tr><td><label for="${_uId}_r">${redLabel}</label></td><td><input id="${_uId}_r" dojoAttachPoint="Rval" size="1" dojoAttachEvent="onchange: _colorInputChange"></td></tr>										<tr><td><label for="${_uId}_g">${greenLabel}</label></td><td><input id="${_uId}_g" dojoAttachPoint="Gval" size="1" dojoAttachEvent="onchange: _colorInputChange"></td></tr>										<tr><td><label for="${_uId}_b">${blueLabel}</label></td><td><input id="${_uId}_b" dojoAttachPoint="Bval" size="1" dojoAttachEvent="onchange: _colorInputChange"></td></tr>										</table>									</div>								</td>								<td>									<div class="dijitInline dojoxColorPickerHsv" dojoAttachPoint="hsvNode">										<table cellpadding="1" cellspacing="1" role="presentation">										<tr><td><label for="${_uId}_h">${hueLabel}</label></td><td><input id="${_uId}_h" dojoAttachPoint="Hval"size="1" dojoAttachEvent="onchange: _colorInputChange"> ${degLabel}</td></tr>										<tr><td><label for="${_uId}_s">${saturationLabel}</label></td><td><input id="${_uId}_s" dojoAttachPoint="Sval" size="1" dojoAttachEvent="onchange: _colorInputChange"> ${percentSign}</td></tr>										<tr><td><label for="${_uId}_v">${valueLabel}</label></td><td><input id="${_uId}_v" dojoAttachPoint="Vval" size="1" dojoAttachEvent="onchange: _colorInputChange"> ${percentSign}</td></tr>										</table>									</div>								</td>							</tr>							<tr>								<td colspan="2">									<div class="dojoxColorPickerHex" dojoAttachPoint="hexNode" aria-live="polite">											<label for="${_uId}_hex">&nbsp;${hexLabel}&nbsp;</label><input id="${_uId}_hex" dojoAttachPoint="hexCode, focusNode, valueNode" size="6" class="dojoxColorPickerHexCode" dojoAttachEvent="onchange: _colorInputChange">									</div>								</td>							</tr>						</table>					</td>				</tr>			</table>		</td>	</tr></table>');

;define("dojox/widget/ColorPicker",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/html","dojo/_base/connect","dojo/_base/sniff","dojo/_base/window","dojo/_base/event","dojo/dom","dojo/dom-class","dojo/keys","dojo/fx","dojo/dnd/move","dijit/registry","dijit/_base/focus","dijit/form/_FormWidget","dijit/typematic","dojox/color","dojo/i18n","dojo/i18n!./nls/ColorPicker","dojo/i18n!dojo/cldr/nls/number","dojo/text!./ColorPicker/ColorPicker.html"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b,_c,fx,_d,_e,_f,_10,_11,_12,_13,_14,_15,_16){
_1.experimental("dojox.widget.ColorPicker");
var _17=function(hex){
return hex;
};
return _2("dojox.widget.ColorPicker",_10,{showRgb:true,showHsv:true,showHex:true,webSafe:true,animatePoint:true,slideDuration:250,liveUpdate:false,PICKER_HUE_H:150,PICKER_SAT_VAL_H:150,PICKER_SAT_VAL_W:150,PICKER_HUE_SELECTOR_H:8,PICKER_SAT_SELECTOR_H:10,PICKER_SAT_SELECTOR_W:10,value:"#ffffff",_underlay:require.toUrl("dojox/widget/ColorPicker/images/underlay.png?etag=dImeKmE"),_hueUnderlay:require.toUrl("dojox/widget/ColorPicker/images/hue.png?etag=dImeKmE"),_pickerPointer:require.toUrl("dojox/widget/ColorPicker/images/pickerPointer.png?etag=dImeKmE"),_huePickerPointer:require.toUrl("dojox/widget/ColorPicker/images/hueHandle.png?etag=dImeKmE"),_huePickerPointerAlly:require.toUrl("dojox/widget/ColorPicker/images/hueHandleA11y.png?etag=dImeKmE"),templateString:_16,postMixInProperties:function(){
if(_b.contains(_8.body(),"dijit_a11y")){
this._huePickerPointer=this._huePickerPointerAlly;
}
this._uId=_e.getUniqueId(this.id);
_3.mixin(this,_13.getLocalization("dojox.widget","ColorPicker"));
_3.mixin(this,_13.getLocalization("dojo.cldr","number"));
this.inherited(arguments);
},postCreate:function(){
this.inherited(arguments);
if(_7("ie")<7){
this.colorUnderlay.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+this._underlay+"', sizingMethod='scale')";
this.colorUnderlay.src=this._blankGif.toString();
}
if(!this.showRgb){
this.rgbNode.style.visibility="hidden";
}
if(!this.showHsv){
this.hsvNode.style.visibility="hidden";
}
if(!this.showHex){
this.hexNode.style.visibility="hidden";
}
if(!this.webSafe){
this.safePreviewNode.style.visibility="hidden";
}
},startup:function(){
if(this._started){
return;
}
this._started=true;
this.set("value",this.value);
this._mover=new _d.boxConstrainedMoveable(this.cursorNode,{box:{t:-(this.PICKER_SAT_SELECTOR_H/2),l:-(this.PICKER_SAT_SELECTOR_W/2),w:this.PICKER_SAT_VAL_W,h:this.PICKER_SAT_VAL_H}});
this._hueMover=new _d.boxConstrainedMoveable(this.hueCursorNode,{box:{t:-(this.PICKER_HUE_SELECTOR_H/2),l:0,w:0,h:this.PICKER_HUE_H}});
this._subs=[];
this._subs.push(_6.subscribe("/dnd/move/stop",_3.hitch(this,"_clearTimer")));
this._subs.push(_6.subscribe("/dnd/move/start",_3.hitch(this,"_setTimer")));
this._keyListeners=[];
this._connects.push(_11.addKeyListener(this.hueCursorNode,{charOrCode:_c.UP_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,_3.hitch(this,this._updateHueCursorNode),25,25));
this._connects.push(_11.addKeyListener(this.hueCursorNode,{charOrCode:_c.DOWN_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,_3.hitch(this,this._updateHueCursorNode),25,25));
this._connects.push(_11.addKeyListener(this.cursorNode,{charOrCode:_c.UP_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,_3.hitch(this,this._updateCursorNode),25,25));
this._connects.push(_11.addKeyListener(this.cursorNode,{charOrCode:_c.DOWN_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,_3.hitch(this,this._updateCursorNode),25,25));
this._connects.push(_11.addKeyListener(this.cursorNode,{charOrCode:_c.LEFT_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,_3.hitch(this,this._updateCursorNode),25,25));
this._connects.push(_11.addKeyListener(this.cursorNode,{charOrCode:_c.RIGHT_ARROW,shiftKey:false,metaKey:false,ctrlKey:false,altKey:false},this,_3.hitch(this,this._updateCursorNode),25,25));
},_setValueAttr:function(_18,_19){
if(!this._started){
return;
}
this.setColor(_18,_19);
},setColor:function(col,_1a){
col=_12.fromString(col);
this._updatePickerLocations(col);
this._updateColorInputs(col);
this._updateValue(col,_1a);
},_setTimer:function(_1b){
if(_1b.node!=this.cursorNode&&_1b.node!=this.hueCursorNode){
return;
}
_f.focus(_1b.node);
_a.setSelectable(this.domNode,false);
this._timer=setInterval(_3.hitch(this,"_updateColor"),45);
},_clearTimer:function(_1c){
if(!this._timer){
return;
}
clearInterval(this._timer);
this._timer=null;
this.onChange(this.value);
_a.setSelectable(this.domNode,true);
},_setHue:function(h){
_5.style(this.colorUnderlay,"backgroundColor",_12.fromHsv(h,100,100).toHex());
},_updateHueCursorNode:function(_1d,_1e,e){
if(_1d!==-1){
var y=_5.style(this.hueCursorNode,"top");
var _1f=this.PICKER_HUE_SELECTOR_H/2;
y+=_1f;
var _20=false;
if(e.charOrCode==_c.UP_ARROW){
if(y>0){
y-=1;
_20=true;
}
}else{
if(e.charOrCode==_c.DOWN_ARROW){
if(y<this.PICKER_HUE_H){
y+=1;
_20=true;
}
}
}
y-=_1f;
if(_20){
_5.style(this.hueCursorNode,"top",y+"px");
}
}else{
this._updateColor(true);
}
},_updateCursorNode:function(_21,_22,e){
var _23=this.PICKER_SAT_SELECTOR_H/2;
var _24=this.PICKER_SAT_SELECTOR_W/2;
if(_21!==-1){
var y=_5.style(this.cursorNode,"top");
var x=_5.style(this.cursorNode,"left");
y+=_23;
x+=_24;
var _25=false;
if(e.charOrCode==_c.UP_ARROW){
if(y>0){
y-=1;
_25=true;
}
}else{
if(e.charOrCode==_c.DOWN_ARROW){
if(y<this.PICKER_SAT_VAL_H){
y+=1;
_25=true;
}
}else{
if(e.charOrCode==_c.LEFT_ARROW){
if(x>0){
x-=1;
_25=true;
}
}else{
if(e.charOrCode==_c.RIGHT_ARROW){
if(x<this.PICKER_SAT_VAL_W){
x+=1;
_25=true;
}
}
}
}
}
if(_25){
y-=_23;
x-=_24;
_5.style(this.cursorNode,"top",y+"px");
_5.style(this.cursorNode,"left",x+"px");
}
}else{
this._updateColor(true);
}
},_updateColor:function(_26){
var _27=this.PICKER_HUE_SELECTOR_H/2,_28=this.PICKER_SAT_SELECTOR_H/2,_29=this.PICKER_SAT_SELECTOR_W/2;
var _2a=_5.style(this.hueCursorNode,"top")+_27,_2b=_5.style(this.cursorNode,"top")+_28,_2c=_5.style(this.cursorNode,"left")+_29,h=Math.round(360-(_2a/this.PICKER_HUE_H*360)),col=_12.fromHsv(h,_2c/this.PICKER_SAT_VAL_W*100,100-(_2b/this.PICKER_SAT_VAL_H*100));
this._updateColorInputs(col);
this._updateValue(col,_26);
if(h!=this._hue){
this._setHue(h);
}
},_colorInputChange:function(e){
var col,_2d=false;
switch(e.target){
case this.hexCode:
col=_12.fromString(e.target.value);
_2d=true;
break;
case this.Rval:
case this.Gval:
case this.Bval:
col=_12.fromArray([this.Rval.value,this.Gval.value,this.Bval.value]);
_2d=true;
break;
case this.Hval:
case this.Sval:
case this.Vval:
col=_12.fromHsv(this.Hval.value,this.Sval.value,this.Vval.value);
_2d=true;
break;
}
if(_2d){
this._updatePickerLocations(col);
this._updateColorInputs(col);
this._updateValue(col,true);
}
},_updateValue:function(col,_2e){
var hex=col.toHex();
this.value=this.valueNode.value=hex;
if(_2e&&(!this._timer||this.liveUpdate)){
this.onChange(hex);
}
},_updatePickerLocations:function(col){
var _2f=this.PICKER_HUE_SELECTOR_H/2,_30=this.PICKER_SAT_SELECTOR_H/2,_31=this.PICKER_SAT_SELECTOR_W/2;
var hsv=col.toHsv(),_32=Math.round(this.PICKER_HUE_H-hsv.h/360*this.PICKER_HUE_H)-_2f,_33=Math.round(hsv.s/100*this.PICKER_SAT_VAL_W)-_31,_34=Math.round(this.PICKER_SAT_VAL_H-hsv.v/100*this.PICKER_SAT_VAL_H)-_30;
if(this.animatePoint){
fx.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:_32,left:0}).play();
fx.slideTo({node:this.cursorNode,duration:this.slideDuration,top:_34,left:_33}).play();
}else{
_5.style(this.hueCursorNode,"top",_32+"px");
_5.style(this.cursorNode,{left:_33+"px",top:_34+"px"});
}
if(hsv.h!=this._hue){
this._setHue(hsv.h);
}
},_updateColorInputs:function(col){
var hex=col.toHex();
if(this.showRgb){
this.Rval.value=col.r;
this.Gval.value=col.g;
this.Bval.value=col.b;
}
if(this.showHsv){
var hsv=col.toHsv();
this.Hval.value=Math.round((hsv.h));
this.Sval.value=Math.round(hsv.s);
this.Vval.value=Math.round(hsv.v);
}
if(this.showHex){
this.hexCode.value=hex;
}
this.previewNode.style.backgroundColor=hex;
if(this.webSafe){
this.safePreviewNode.style.backgroundColor=_17(hex);
}
},_setHuePoint:function(evt){
var _35=this.PICKER_HUE_SELECTOR_H/2;
var _36=evt.layerY||(evt.y-evt.target.getBoundingClientRect().top);
_36-=_35;
if(this.animatePoint){
fx.slideTo({node:this.hueCursorNode,duration:this.slideDuration,top:_36,left:0,onEnd:_3.hitch(this,function(){
this._updateColor(true);
_f.focus(this.hueCursorNode);
})}).play();
}else{
_5.style(this.hueCursorNode,"top",_36+"px");
this._updateColor(true);
}
},_setPoint:function(evt){
var _37=this.PICKER_SAT_SELECTOR_H/2;
var _38=this.PICKER_SAT_SELECTOR_W/2;
var _39=evt.layerY||(evt.y-evt.target.getBoundingClientRect().top);
_39-=_37;
var _3a=evt.layerX||(evt.x-evt.target.getBoundingClientRect().left);
_3a-=_38;
if(evt){
_f.focus(evt.target);
}
if(this.animatePoint){
fx.slideTo({node:this.cursorNode,duration:this.slideDuration,top:_39,left:_3a,onEnd:_3.hitch(this,function(){
this._updateColor(true);
_f.focus(this.cursorNode);
})}).play();
}else{
_5.style(this.cursorNode,{left:_3a+"px",top:_39+"px"});
this._updateColor(true);
}
},_handleKey:function(e){
},focus:function(){
if(!this.focused){
_f.focus(this.focusNode);
}
},_stopDrag:function(e){
_9.stop(e);
},destroy:function(){
this.inherited(arguments);
_4.forEach(this._subs,function(sub){
_6.unsubscribe(sub);
});
delete this._subs;
}});
});


;dojo.cache("com.ibm.team.workitem.viewlets.web", "ui/internal/templates/utils/ColourPaletteDialog.html", "<div class=\"com-ibm-team-workitem-viewlets-web-ui-internal-utils-ColourPaletteDialog\">	<!-- Message Site -->	<div dojoAttachPoint=\"_messageSite\" class=\"message-site\"></div>	<!-- Content Site -->	<div class=\"content-wrapper\">		<div class=\"content-site\">			<div class=\"colour-picker-site\">				<div dojoType=\"dojox.widget.ColorPicker\" dojoAttachPoint=\"_colourPicker\" animatePoint=\"false\"></div>			</div>					<div dojoAttachPoint=\"_parameterSite\" class=\"parameter-site\">				<div class=\"loading-site\">${messages.msgLoading}</div>			</div>		</div>	</div>			<!-- Button Site -->    <div class=\"j-buttonGroup-bleed-two\" dojoAttachPoint=\"ftFooterNode\">		<button class=\"j-button-secondary\" dojoattachevent=\"onclick: _handleEventCancelButtonClicked\">${messages.msgButtonCancel}</button>		<button class=\"j-button-primary\" dojoattachevent=\"onclick: _handleEventOKButtonClicked\">${messages.msgButtonOK}</button>	</div>	</div>");

;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.ColourPaletteDialog");










dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
(function(){
var _1=jazz.ui.Dialog;
var _2=jazz.ui.MessageBox;
var _3=jazz.ui.MessageBox.STATUS_TYPES;
var _4=dojox.widget.ColorPicker;
var _5=com.ibm.team.workitem.viewlets.web.ui.internal.utils.ErrorUtility;
var _6="color:#BBBBBB;";
var _7="#ebf3f5";
var _8=30;
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.ColourPaletteDialog",[dijit._Widget,dijit._Templated],{onOK:null,onCancel:null,getModel:null,widgetsInTemplate:true,templatePath:dojo.moduleUrl("com.ibm.team.workitem.viewlets.web","ui/internal/templates/utils/ColourPaletteDialog.html"),constructor:function(_9){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
},postCreate:function(){
this.inherited(arguments);
this._dialog=null;
this._colourModel={};
this._parameterOrder=[];
this._currentSelection=null;
this._messageBox=null;
this._initModel();
},_initModel:function(){
if(!this.getModel){
return;
}
var _a=this.getModel();
_a.addCallback(dojo.hitch(this,function(_b){
this._colourModel=_b.colourModel;
this._parameterOrder=_b.parameterOrder;
this._initParameterSite();
this._initColourPicker();
return _b;
}));
_a.addErrback(dojo.hitch(this,function(_c){
this._showNoResultsMessage();
this._showStatusMessage(_3.ERROR,this.messages.msgErrorGetValues,this.messages.msgErrorGetValues_explanation,this.messages.msgErrorGetValues_useraction,_c);
return _c;
}));
},_initParameterSite:function(){
if(this._parameterOrder.length===0){
this._showNoResultsMessage();
return;
}
var _d=dojo.create("div");
for(var _e=0;_e<this._parameterOrder.length;_e++){
var _f=this._parameterOrder[_e];
var _10=this._createEntryNode(_f);
dojo.place(_10,_d,"last");
if(_e===0){
this._currentSelection={id:_f,node:_10};
this._setSelected(_10,true);
}
}
dojo.place(_d,this._parameterSite,"only");
},_showNoResultsMessage:function(){
var _11=dojo.create("div",{innerHTML:this.messages.msgNoValuesFound});
dojo.addClass(_11,"info-site");
dojo.place(_11,this._parameterSite,"only");
},_createEntryNode:function(_12){
var _13=dojo.create("div");
dojo.addClass(_13,"entry-node");
_13.parameterID=_12;
this.connect(_13,"onclick",dojo.hitch(this,this._handleEventEntryClicked));
var _14=dojo.create("div");
dojo.addClass(_14,"swatch-node");
this._updateSwatchColour(_14,this._getColour(_12));
dojo.place(_14,_13,"last");
var _15=dojo.create("div");
dojo.addClass(_15,"label-node");
_15.innerHTML=jazz.util.html.escape(this._getLabel(_12));
dojo.place(_15,_13,"last");
return _13;
},_handleEventEntryClicked:function(_16){
if(!_16){
_5.logError(new Error("Empty entry click event encountered"),this.id);
return true;
}
dojo.stopEvent(_16);
var _17=_16.currentTarget;
if(!_17){
_5.logError(new Error("Cannot determine target element for entry click event"),this.id);
return true;
}
var _18=_17.parameterID;
if(!_18){
_5.logError(new Error("Cannot identify parameter ID for entry click event"),this.id);
return true;
}
var _19=this._getColour(_18);
this._colourPicker.setColor(_19);
var _1a=this._currentSelection;
if(_1a&&_1a.node){
this._setSelected(_1a.node,false);
}
this._currentSelection={id:_18,node:_17};
this._setSelected(_17,true);
return true;
},_setSelected:function(_1b,_1c){
if(_1c){
dojo.addClass(_1b,"selected-entry-node");
}else{
dojo.removeClass(_1b,"selected-entry-node");
}
},_initColourPicker:function(){
this._colourPicker.startup();
if(this._parameterOrder.length===0){
return;
}
var _1d=this._parameterOrder[0];
var _1e=this._getColour(_1d);
this._colourPicker.setColor(_1e);
this._colourPicker.onChange=dojo.hitch(this,this._handleEventColourChanged);
},_getColour:function(_1f){
if(!this._colourModel.hasOwnProperty(_1f)){
_5.logError(new Error("Expected parameter ID missing from colour model: "+_1f),this.id);
return _7;
}
var _20=this._colourModel[_1f];
var _21=_20.colour;
if(!_21){
return _7;
}
return _21;
},_setColour:function(_22,_23){
if(!_23){
_5.logError(new Error("Colour not specified: "+_22),this.id);
return;
}else{
if(!this._colourModel.hasOwnProperty(_22)){
_5.logError(new Error("Expected parameter ID missing from colour model: "+_22),this.id);
return;
}
}
this._colourModel[_22].colour=_23;
},_getLabel:function(_24){
if(!this._colourModel.hasOwnProperty(_24)){
_5.logError(new Error("Expected parameter ID missing from colour model: "+_24),this.id);
return this.messages.msgUndefined;
}
var _25=this._colourModel[_24];
var _26=_25.label;
if(!_26){
_5.logError(new Error("Expected label missing from colour model: "+_24),this.id);
return this.messages.msgUndefined;
}
return _26;
},_hexToRGBDecimal:function(_27){
return "R"+parseInt(_27.slice(1,3),16)+"G"+parseInt(_27.slice(3,5),16)+"B"+parseInt(_27.slice(5,7),16);
},_hexToRGBColour:function(_28){
var red=parseInt(_28.slice(1,3),16);
var _29=parseInt(_28.slice(3,5),16);
var _2a=parseInt(_28.slice(5,7),16);
return {red:red,green:_29,blue:_2a};
},_RGBColourToHex:function(_2b){
var red=("0"+parseInt(_2b.red,10).toString(16)).slice(-2);
var _2c=("0"+parseInt(_2b.green,10).toString(16)).slice(-2);
var _2d=("0"+parseInt(_2b.blue,10).toString(16)).slice(-2);
return "#"+red+_2c+_2d;
},_RGBDecimalToHex:function(_2e){
var _2f=_2e.match(/R(\d+)G(\d+)B(\d+)/);
var red=("0"+parseInt(_2f[1],10).toString(16)).slice(-2),_30=("0"+parseInt(_2f[2],10).toString(16)).slice(-2),_31=("0"+parseInt(_2f[3],10).toString(16)).slice(-2);
return "#"+red+_30+_31;
},_darkenColour:function(_32,_33){
var _34;
var _35=this._hexToRGBColour(_32);
var _36={};
for(var _37 in _35){
var _38=_35[_37];
var _39=_38-Math.round((_38/100)*_33);
_36[_37]=_39;
}
_34=this._RGBColourToHex(_36);
return _34;
},show:function(){
this._dialog=new _1({contentNode:this.domNode,primaryTitle:this.messages.msgColourChooserTitle,width:"650px",footerNode:this.ftFooterNode,onClose:dojo.hitch(this,this._handleEventDialogClosed),destroyContents:true});
},hide:function(){
if(this._dialog){
this._dialog.close();
}else{
this._handleEventDialogClosed();
}
},_handleEventColourChanged:function(_3a){
if(!_3a){
_5.logError(new Error("Undefined colour encountered in colour change event"),this.id);
return;
}
var _3b=this._currentSelection;
if(_3b&&_3b.id&&_3b.node&&_3b.node.firstChild){
this._setColour(_3b.id,_3a);
this._updateSwatchColour(_3b.node.firstChild,_3a);
}
},_updateSwatchColour:function(_3c,_3d){
dojo.style(_3c,"backgroundColor",_3d);
var _3e=this._darkenColour(_3d,_8);
dojo.style(_3c,"borderColor",_3e);
},_showStatusMessage:function(_3f,_40,_41,_42,_43){
var _44=_40+" "+_41+" "+_42;
var _45=this._getMessageBox();
_45.showMessage({type:_3f,summary:_44,errorObject:_43,closable:true});
},_getMessageBox:function(){
if(!this._messageBox){
this._messageBox=new _2().placeAt(this._messageSite);
}
return this._messageBox;
},_handleEventDialogClosed:function(){
if(this._doIt&&this.onOK){
this.onOK(this._colourModel);
}else{
if(this.onCancel){
this.onCancel();
}
}
return true;
},_handleEventOKButtonClicked:function(_46){
if(_46){
dojo.stopEvent(_46);
}
this._doIt=true;
this.hide();
return true;
},_handleEventCancelButtonClicked:function(_47){
if(_47){
dojo.stopEvent(_47);
}
this._doIt=false;
this.hide();
return true;
},destroy:function(){
if(this._messageBox){
this._messageBox.destroy();
delete this._messageBox;
}
if(this._dialog){
this._dialog.destroy();
delete this._dialog;
}
this.inherited(arguments);
}});
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.SimpleCache");
(function(){
var _1=-1;
dojo.declare("com.ibm.team.workitem.web.client.internal.SimpleCache",null,{constructor:function(){
this._cache=new Object();
},get:function(_2){
var _3=this._cache[_2];
if(_3!=null){
var _4=(new Date()).getTime();
if(_3.ttl==_1||(_3.timestamp+_3.ttl>_4)){
return _3.result;
}
}
return null;
},put:function(_5,_6,_7){
var _8={result:_6,timestamp:(new Date()).getTime(),ttl:_7};
this._cache[_5]=_8;
return _8;
},clear:function(_9){
this._cache[_9]=null;
}});
com.ibm.team.workitem.web.client.internal.SimpleCache.TTL_INFINITE=_1;
com.ibm.team.workitem.web.client.internal.SimpleCache.TTL_MINUTE=60000;
})();


;define("dojox/date/posix",["dojo/_base/kernel","dojo/date","dojo/date/locale","dojo/string","dojo/cldr/supplemental"],function(_1,_2,_3,_4,_5){
var _6=_1.getObject("date.posix",true,dojox);
_6.strftime=function(_7,_8,_9){
var _a=null;
var _b=function(s,n){
return _4.pad(s,n||2,_a||"0");
};
var _c=_3._getGregorianBundle(_9);
var $=function(_d){
switch(_d){
case "a":
return _3.getNames("days","abbr","format",_9)[_7.getDay()];
case "A":
return _3.getNames("days","wide","format",_9)[_7.getDay()];
case "b":
case "h":
return _3.getNames("months","abbr","format",_9)[_7.getMonth()];
case "B":
return _3.getNames("months","wide","format",_9)[_7.getMonth()];
case "c":
return _3.format(_7,{formatLength:"full",locale:_9});
case "C":
return _b(Math.floor(_7.getFullYear()/100));
case "d":
return _b(_7.getDate());
case "D":
return $("m")+"/"+$("d")+"/"+$("y");
case "e":
if(_a==null){
_a=" ";
}
return _b(_7.getDate());
case "f":
if(_a==null){
_a=" ";
}
return _b(_7.getMonth()+1);
case "g":
break;
case "G":
console.warn("unimplemented modifier 'G'");
break;
case "F":
return $("Y")+"-"+$("m")+"-"+$("d");
case "H":
return _b(_7.getHours());
case "I":
return _b(_7.getHours()%12||12);
case "j":
return _b(_3._getDayOfYear(_7),3);
case "k":
if(_a==null){
_a=" ";
}
return _b(_7.getHours());
case "l":
if(_a==null){
_a=" ";
}
return _b(_7.getHours()%12||12);
case "m":
return _b(_7.getMonth()+1);
case "M":
return _b(_7.getMinutes());
case "n":
return "\n";
case "p":
return _c["dayPeriods-format-wide-"+(_7.getHours()<12?"am":"pm")];
case "r":
return $("I")+":"+$("M")+":"+$("S")+" "+$("p");
case "R":
return $("H")+":"+$("M");
case "S":
return _b(_7.getSeconds());
case "t":
return "\t";
case "T":
return $("H")+":"+$("M")+":"+$("S");
case "u":
return String(_7.getDay()||7);
case "U":
return _b(_3._getWeekOfYear(_7));
case "V":
return _b(_6.getIsoWeekOfYear(_7));
case "W":
return _b(_3._getWeekOfYear(_7,1));
case "w":
return String(_7.getDay());
case "x":
return _3.format(_7,{selector:"date",formatLength:"full",locale:_9});
case "X":
return _3.format(_7,{selector:"time",formatLength:"full",locale:_9});
case "y":
return _b(_7.getFullYear()%100);
case "Y":
return String(_7.getFullYear());
case "z":
var _e=_7.getTimezoneOffset();
return (_e>0?"-":"+")+_b(Math.floor(Math.abs(_e)/60))+":"+_b(Math.abs(_e)%60);
case "Z":
return _2.getTimezoneName(_7);
case "%":
return "%";
}
};
var _f="",i=0,_10=0,_11=null;
while((_10=_8.indexOf("%",i))!=-1){
_f+=_8.substring(i,_10++);
switch(_8.charAt(_10++)){
case "_":
_a=" ";
break;
case "-":
_a="";
break;
case "0":
_a="0";
break;
case "^":
_11="upper";
break;
case "*":
_11="lower";
break;
case "#":
_11="swap";
break;
default:
_a=null;
_10--;
break;
}
var _12=$(_8.charAt(_10++));
switch(_11){
case "upper":
_12=_12.toUpperCase();
break;
case "lower":
_12=_12.toLowerCase();
break;
case "swap":
var _13=_12.toLowerCase();
var _14="";
var ch="";
for(var j=0;j<_12.length;j++){
ch=_12.charAt(j);
_14+=(ch==_13.charAt(j))?ch.toUpperCase():ch.toLowerCase();
}
_12=_14;
break;
default:
break;
}
_11=null;
_f+=_12;
i=_10;
}
_f+=_8.substring(i);
return _f;
};
_6.getStartOfWeek=function(_15,_16){
if(isNaN(_16)){
_16=_5.getFirstDayOfWeek?_5.getFirstDayOfWeek():0;
}
var _17=_16;
if(_15.getDay()>=_16){
_17-=_15.getDay();
}else{
_17-=(7-_15.getDay());
}
var _18=new Date(_15);
_18.setHours(0,0,0,0);
return _2.add(_18,"day",_17);
};
_6.setIsoWeekOfYear=function(_19,_1a){
if(!_1a){
return _19;
}
var _1b=_6.getIsoWeekOfYear(_19);
var _1c=_1a-_1b;
if(_1a<0){
var _1d=_6.getIsoWeeksInYear(_19);
_1c=(_1d+_1a+1)-_1b;
}
return _2.add(_19,"week",_1c);
};
_6.getIsoWeekOfYear=function(_1e){
var _1f=_6.getStartOfWeek(_1e,1);
var _20=new Date(_1e.getFullYear(),0,4);
_20=_6.getStartOfWeek(_20,1);
var _21=_1f.getTime()-_20.getTime();
if(_21<0){
return _6.getIsoWeeksInYear(_1f);
}
return Math.ceil(_21/604800000)+1;
};
_6.getIsoWeeksInYear=function(_22){
function p(y){
return y+Math.floor(y/4)-Math.floor(y/100)+Math.floor(y/400);
};
var y=_22.getFullYear();
return (p(y)%7==4||p(y-1)%7==3)?53:52;
};
return _6;
});


;define("dojox/string/Builder",["dojo/_base/lang"],function(_1){
var _2=_1.getObject("string",true,dojox).Builder=function(_3){
var b="";
this.length=0;
this.append=function(s){
if(arguments.length>1){
var _4="",l=arguments.length;
switch(l){
case 9:
_4=""+arguments[8]+_4;
case 8:
_4=""+arguments[7]+_4;
case 7:
_4=""+arguments[6]+_4;
case 6:
_4=""+arguments[5]+_4;
case 5:
_4=""+arguments[4]+_4;
case 4:
_4=""+arguments[3]+_4;
case 3:
_4=""+arguments[2]+_4;
case 2:
b+=""+arguments[0]+arguments[1]+_4;
break;
default:
var i=0;
while(i<arguments.length){
_4+=arguments[i++];
}
b+=_4;
}
}else{
b+=s;
}
this.length=b.length;
return this;
};
this.concat=function(s){
return this.append.apply(this,arguments);
};
this.appendArray=function(_5){
return this.append.apply(this,_5);
};
this.clear=function(){
b="";
this.length=0;
return this;
};
this.replace=function(_6,_7){
b=b.replace(_6,_7);
this.length=b.length;
return this;
};
this.remove=function(_8,_9){
if(_9===undefined){
_9=b.length;
}
if(_9==0){
return this;
}
b=b.substr(0,_8)+b.substr(_8+_9);
this.length=b.length;
return this;
};
this.insert=function(_a,_b){
if(_a==0){
b=_b+b;
}else{
b=b.slice(0,_a)+_b+b.slice(_a);
}
this.length=b.length;
return this;
};
this.toString=function(){
return b;
};
if(_3){
this.append(_3);
}
};
return _2;
});

dojo.provide("com.ibm.team.workitem.web.ui.internal.nls.ItemProxyMessages")._built=true;
dojo.provide("com.ibm.team.workitem.web.ui.internal.nls.ItemProxyMessages.en_us");
com.ibm.team.workitem.web.ui.internal.nls.ItemProxyMessages.en_us={"debugUseCountLessThanZero":"Error: The use count for item ${0} was decremented to less than zero."};

;dojo.provide("com.ibm.team.workitem.web.cache.internal.Cache");
dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal","ItemProxyMessages");
(function(){
com.ibm.team.workitem.web.cache.internal.Cache={addItem:function(id,_1){
var _2=this.getCache();
var id=this.getId(id);
if(_2[id]){
return _2[id];
}
_1._cacheId=id;
_2[id]=_1;
this.useCounts[id]=0;
return _2[id];
},removeItem:function(id){
if(id==null){
return;
}
var _3=this.getCache();
var id=this.getId(id);
if(_3[id]){
_3[id]=false;
delete _3[id];
this.useCounts[id]=0;
delete this.useCounts[id];
return true;
}
return false;
},renameItem:function(_4,_5){
if(_4==_5){
return;
}
_4=this.getId(_4);
_5=this.getId(_5);
var _6=this.getCache();
if(_6[_4]){
_6[_5]=_6[_4];
_6[_4]=false;
delete _6[_4];
this.useCounts[_5]=this.useCounts[_4];
this.useCounts[_4]=0;
delete this.useCounts[_4];
}
return false;
},getCache:function(){
if(!this.cache){
this.cache={};
this.useCounts={};
}
return this.cache;
},getId:function(id){
return id+"";
},getItem:function(id,_7){
var _8=this.getCache();
var id=this.getId(id);
if(_8[id]){
this._showDebugMessage("getItem("+id+")=found");
return _8[id];
}
if(_7){
this.addItem(id,_7);
this._showDebugMessage("getItem("+id+")=add item");
return _7;
}
this._showDebugMessage("getItem("+id+")=null");
return null;
},getItemByItemId:function(_9){
var _a=this.getCache();
for(var _b in _a){
if(_a[_b].getItemId&&_a[_b].getItemId()==_9){
return _a[_b];
}
}
return null;
},getAllItems:function(_c){
_c=_c||{};
var _d;
if(_c.cacheMap){
_d=_c.cacheMap;
}else{
_d=this.getCache();
}
var _e=[];
for(var _f in _d){
if(_d[_f]){
var _10=false;
if(_c.filterSelectors){
for(var i=0;i<_c.filterSelectors.length;i++){
var _11=_c.filterSelectors[i];
if(!dojo.isFunction(_d[_f][_11])||!_d[_f][_11]()){
_10=true;
break;
}
}
}
if(!_10){
if(_c.filterAttributes){
for(var i=0;i<_c.filterAttributes.length;i++){
var _12=_c.filterAttributes[i];
if(!_d[_f][_12]){
_10=true;
break;
}
}
}
}
if(!_10){
_e.push(_d[_f]);
}
}
}
if(!_c.excludeSelectors){
return _e;
}
var _13=[];
for(var i=0;i<_e.length;i++){
var _10=false;
for(var j=0;j<_c.excludeSelectors.length;j++){
var _11=_c.excludeSelectors[j];
if(dojo.isFunction(_e[i][_11])&&_e[i][_11]()){
_10=true;
break;
}
}
if(!_10){
_13.push(_e[i]);
}
}
return _13;
},getUseCount:function(id){
var _14=this.getCache();
return this.useCounts[id];
},incrementUseCount:function(id){
var _15=this.getCache();
var _16=_15[id];
if(!_16){
return;
}
this.useCounts[id]++;
this._showDebugMessage("increment("+id+")="+this.useCounts[id]);
},decrementUseCount:function(id,_17){
var _18=this.getCache();
var _19=_18[id];
if(!_19){
return;
}
this.useCounts[id]--;
if(this.useCounts[id]<0){
this.useCounts[id];
console.debug(dojo.string.substitute(this._getMessages().debugUseCountLessThanZero,[id]));
}
var _1a=_19.isChanged;
if(dojo.isFunction(_19.isChanged)){
_1a=_19.isChanged();
}
var _1b=_19.isNew;
if(dojo.isFunction(_1b)){
_1b=_19.isNew();
}
if(!_17&&_1a&&!_1b){
return;
}
if(this.useCounts[id]<=0){
this._showDebugMessage("decrement("+id+")="+this.useCounts[id]+" (removed)");
if(_18[id].destroy){
_18[id].destroy();
}
_18[id]=false;
this.useCounts[id]=0;
}else{
this._showDebugMessage("decrement("+id+")="+this.useCounts[id]);
}
},_showDebugMessage:function(msg){
if(this._isDebugging===false){
return;
}
if(this._isDebugging===true||window.location.href.indexOf("debugCache")!=-1){
this._isDebugging=true;
console.debug(msg);
}else{
this._isDebugging=false;
}
},_getMessages:function(){
if(this.messages){
return this.messages;
}
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","ItemProxyMessages");
return this.messages;
}};
})();


;dojo.provide("com.ibm.team.workitem.web.client.util");
















(function(){
var _1=net.jazz.ajax.toolbox.lang.checkNotNull;
var _2=com.ibm.team.workitem.web.client.internal.query.QueryDescriptor;
var _3=com.ibm.team.workitem.web.cache.internal.Cache;
var _4=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];
var _5=/^\d+$/;
var _6=23;
var _7="_tuUNgFU_EeCjQbYWf-8ryQ";
if(dojo.isIE&&dojo.isIE<7){
var _8=32;
var _9=40;
}else{
var _8=40;
var _9=52;
}
var _a=[".","-","_","/","?","#"];
var _b="com.ibm.team.workitem.";
com.ibm.team.workitem.web.client.util={_basicPrefix:"#action="+_b,_viewWorkItemUriPrefix:"#action=com.ibm.team.workitem.viewWorkItem&id=",getEditQueryUri:function(_c){
_1(_c,"queryId");
return this._basicPrefix+"editQuery&id="+_c;
},getWelcomePageUri:function(_d){
var _e="";
if(_d){
_e="&error="+encodeURI(_d);
}
return this._basicPrefix+"viewWelcome"+_e;
},getImportPageUri:function(){
return this._basicPrefix+"viewImporter";
},getNewWorkItemUri:function(_f,_10){
var _11=_10?"&type="+_10:"";
if(!_f){
return this._basicPrefix+"newWorkItem"+_11;
}
if(window.location.href.indexOf(this._basicPrefix+"newWorkItem")!=-1&&window.location.href.indexOf("&ts="+_f)!=-1){
return window.location.href;
}
return this._basicPrefix+"newWorkItem"+_11+"&ts="+_f;
},getNewWorkItemUri2:function(_12){
_12.typeId=_12.typeId||_12.typeName;
var _13=_12.typeId?"&type="+_12.typeId:"";
if(_12.newWorkItemProjectAreaItemId){
_13+="&projectAreaItemId="+_12.newWorkItemProjectAreaItemId;
}
if(_12.tempId){
_13=_13+"&ts="+_12.tempId;
}else{
_13=_13+"&ts="+this.getUniqueId();
}
if(_12.addLinkType&&_12.addLinkedItemId&&_12.addLinkedProjectAreaItemId){
_13=_13+"&addLinkedItemId="+_12.addLinkedItemId+"&addLinkType="+_12.addLinkType+"&addLinkIsSource="+(_12.addLinkIsSource==true)+"&addLinkedProjectAreaItemId="+_12.addLinkedProjectAreaItemId;
}
return this._basicPrefix+"newWorkItem"+_13;
},getNewWorkItemSetUri:function(){
return this.reuniquifyUrl(this._basicPrefix+"newWorkItemSet");
},getNewQueryUriSegment:function(){
return this.reuniquifyUrl(_b+"newQuery");
},getNewQueryUri:function(_14){
if(!_14){
return this._basicPrefix+"newQuery";
}
return this.reuniquifyUrl(this._basicPrefix+"newQuery");
},getShowQueriesUri:function(){
return this._basicPrefix+"viewQueries";
},getCurrentShowQueriesUri:function(_15,_16,_17){
var tab=_3.getItem("com-ibm-team-workitem-query-filter");
var tag=_3.getItem("com-ibm-team-workitem-query-explorer-tag");
var _18=_15;
if(_18==null){
_18=_3.getItem("com-ibm-team-workitem-query-explorer-query-id");
}
return this.createShowQueriesUri(tab,tag,_18,_16,_17);
},createShowQueriesUri:function(tab,tag,_19,_1a,_1b){
var uri=this.getShowQueriesUri();
if(tab!=null){
uri+="&tab="+tab;
}
if(tag!=null&&tag.length>0){
uri+="&tag="+encodeURIComponent(tag);
}
if(_19!=null&&_19.length>0){
uri+="&queryItemId="+_19;
}
if(_1a!=null&&_1a.length>0){
uri+="&queryAction="+_1a;
}
if(_1b==true){
uri+="&refresh=true";
}
return uri;
},getMyQueriesUri:function(){
return this.getShowQueriesUri()+"&tab=owned";
},getSharedQueriesUri:function(){
return this.getShowQueriesUri()+"&tab=shared";
},getRunDefaultQueryUri:function(_1c){
if(_1c){
return this.reuniquifyUrl(this._basicPrefix+"runDefaultQuery");
}
return this._basicPrefix+"runDefaultQuery";
},getBasicShowTemplateQueryUri:function getBasicShowTemplateQueryUri(){
return this._basicPrefix+"showTemplateQuery";
},getShowTemplateQueryUri:function getShowTemplateQueryUri(){
return this.reuniquifyUrl(this.getBasicShowTemplateQueryUri())+"&sortable=false";
},getBackgroundImageUrl:function(_1d){
_1d=_1d||"";
if(!window.location.href){
return _1d;
}
var _1e=window.location.href.split("/");
if(_1e.length<3){
return _1d;
}
var _1f=_1e[0]+"//";
_1f+=_1e[2];
if(_1d.indexOf("/")!=0){
_1f+="/";
}
return _1f+_1d;
},isChildOf:function(_20,_21){
var _22=_20;
if(_21==_22){
return true;
}
var _23=null;
while(_22!=null&&_22!=_23&&_22!=document.body&&_22!=document){
_23=_22;
if(_22==_21){
return true;
}
_22=_22.parentNode;
}
return false;
},isChildOfPopup:function(_24){
var _25=_24;
var _26=null;
while(_25!=null&&_25!=_26&&_25!=document.body&&_25!=document){
_26=_25;
if(_25.dijitPopupParent){
return true;
}
_25=_25.parentNode;
}
return false;
},getRunSavedQueryUri:function(_27,_28,_29,_2a,_2b,_2c,_2d,_2e,_2f,_30,_31,_32){
_1(_27,"queryId");
var _33;
if(_32==true){
_33=this.getCurrentShowQueriesUri(_27,_b+"runSavedQuery");
}else{
_33=this._basicPrefix+"runSavedQuery&id="+_27;
}
return _33+(_28?"&index="+_28:"")+this._multipleQueryStringParameter("orderBy",_29)+this._multipleQueryStringParameter("direction",_2a)+(_2b?"&itemsPerPage="+_2b:"")+(_2d?"&preserveFilter=true":"")+(_2e?"&filterAttribute="+encodeURIComponent(_2e):"")+(_2f?"&filterValue="+encodeURIComponent(_2f):"")+(_30?"&jsonParameterValues="+encodeURIComponent(_30):"")+(_31?"&filterByExactMatch=true":"")+this._getUniqueSuffix(_2c);
},_multipleQueryStringParameter:function(_34,_35){
var _36="";
if(_35&&dojo.isArray(_35)&&_35.length>0){
for(var i=0;i<_35.length;i++){
_36+="&"+_34+"="+_35[i];
}
}
return _36;
},getRelativeQueryLocationUri:function(_37){
var _38=_37;
var _39="";
if(_37.length>_6){
var _3a=_37.substring(0,_6);
var _3b=_37.substring(_6);
_38=_7;
_39="?itemId="+_3a+"&projectAreaItemId="+_3b;
}
return "/resource/itemOid/com.ibm.team.workitem.query.QueryDescriptor/"+_38+_39;
},getRefreshSavedQueryUri:function(_3c){
var uri=this.getRunSavedQueryUri(_3c);
return uri+"&refresh=true";
},getRunNewQueryUri:function(_3d,_3e,_3f,_40,_41,_42,_43){
_1(_3d,"query");
var _44=encodeURIComponent(_3d.serialize());
var _45;
if(_43==true){
_45=this.getCurrentShowQueriesUri(null,_b+"runNewQuery");
}else{
_45=this._basicPrefix+"runNewQuery";
}
var _46=_45+"&q="+_44+(_3e?"&index="+_3e:"")+this._multipleQueryStringParameter("orderBy",_3f)+this._multipleQueryStringParameter("direction",_40)+(_42?"&preserveFilter=true":"")+(_41?"&itemsPerPage="+_41:"");
return _3d.addParametersToUrl(_46);
},getSimilarityQueryUri:function(_47){
var _48=_47.projectAreaItemId?"&projectAreaItemId="+_47.projectAreaItemId:"";
if(_47.itemId){
return this._basicPrefix+"similarityQuery&itemId="+_47.itemId+_48;
}
var _49,_4a;
if(_47.summary&&_47.summary.length>0){
_49="&summary="+encodeURIComponent(dojo.trim(_47.summary));
}else{
_49="";
}
if(_47.content&&_47.content.length>0){
_4a="&content="+encodeURIComponent(dojo.trim(_47.content));
}else{
_4a="";
}
return this._basicPrefix+"similarityQuery"+_48+_49+_4a;
},getViewWorkItemUri:function(id,tab){
_1(id,"id-util3");
return this._getViewSingleWorkItemUri(id,tab);
},getUrlParam:function(url,_4b){
var exp="[.*&]"+_4b+"=([^&#]*)";
var _4c=new RegExp(exp);
var _4d=_4c.exec(url);
if(!_4d||_4d.length<2){
return null;
}
return _4d[1];
},_getViewSingleWorkItemUri:function(id,tab){
_1(id,"id-util2");
var _4e=parseInt(id,10);
if(isNaN(_4e)||_4e<0){
return null;
}
return this._basicPrefix+"viewWorkItem&id="+id+(tab?"&tab="+tab:"");
},getQueryURI:function(_4f,_50,_51,_52,_53,_54,_55){
return this.getQueryUri(_4f,_50,_51,_52,_53,_54);
},getQueryUri:function(_56,_57,_58,_59,_5a,_5b,_5c){
_1(_56,"query");
if(!_56.isNew&&_56.getItemId()){
return this.getRunSavedQueryUri(_56.getItemId(),_57,_58,_59,_5a,false,_5b,null,null,null,null,_5c);
}
return this.getRunNewQueryUri(_56,_57,_58,_59,_5a,_5b,_5c);
},getFragment:function(url){
return new dojo._Url(url).fragment;
},getSearchUri:function(_5d,_5e,_5f){
_1(_5d,"unencodedStr");
var _60=encodeURIComponent(dojo.trim(_5d));
if(_5e){
return this._basicPrefix+"search&q="+_60+"&o="+_5e+this._getUniqueSuffix(_5f);
}else{
return this._basicPrefix+"search&q="+_60+this._getUniqueSuffix(_5f);
}
},reuniquifyUrl:function(url,_61){
if(_61){
url=url.replace(/&preserveFilter=true/,"");
}
return url.replace(/&tq=([0-9]+)/,"")+"&tq="+this.getUniqueId();
},reuniquifyUrlWithTimestamp:function(url){
var ts=this.getUniqueId();
return {url:url.replace(/&ts=([0-9]+)/,"")+"&ts="+ts,timestamp:ts};
},getTagRegex:function(){
var _62=/\s*\/?(?!\/)([^,\s\|\\]+)/;
return _62;
},_getUniqueSuffix:function(_63){
if(!_63){
return "";
}
return "&tq="+this.getUniqueId();
},getUniqueId:function(){
return Date.parse(new Date().toString());
},getScrollPoint:function(){
var _64={x:window.pageXOffset,y:window.pageYOffset};
if(_64.x==null){
_64.x=window.document.body.scrollLeft||0;
_64.y=window.document.body.scrollTop||0;
}
return _64;
},_getDefaultQueryPageSize:function(){
return 50;
},_getMaximumQueryPageSize:function(){
return 500;
},_getHashRequestParams:function(_65){
return this.getHashRequestParams(_65);
},getHashRequestParams:function(_66){
if(!_66){
_66=document.location.href;
}
var _67=[];
var _68=this.getFragment(_66);
if(_68){
var _69=_68.split("&");
for(var i=0;i<_69.length;i++){
var nvp=_69[i].split("=");
if(nvp.length===2){
_67.push({name:nvp[0],value:nvp[1]});
}
}
}
return _67;
},isWorkItemId:function(id){
return _5.test(id);
},getWorkItemId:function(id){
var _6a=_5.exec(id);
return parseInt(_6a[0]);
},_breakupAllLongWords:function(_6b,_6c,_6d){
if(!_6c){
_6c=_8;
}
var _6e=_6b.split(" ");
var _6f=false;
for(var i=0;i<_6e.length;i++){
if(_6e[i].length>_6c){
_6f=true;
break;
}
}
if(!_6f){
return _6b;
}
var sep=_6d==true?"<wbr/>":" ";
if((dojo.isIE&&dojo.isIE<7)){
sep=" ";
}
var _70="";
var _71="";
for(var i=0;i<_6e.length;i++){
if(_6e[i].length<_6c){
_70=_70+_71+_6e[i];
}else{
_70=_70+_71+this._breakupLongWord(_6e[i],_6c,sep);
}
_71=" ";
}
return _70;
},_breakupLongWord:function(_72,_73,sep){
if(!_73){
_73=_8;
}
var _74=_72;
var _75="";
while(_74.length>_73){
var _76=_73+1;
_75+=_74.substring(0,_76)+sep;
_74=_74.substring(_76,_74.length);
}
_75+=_74;
return _75;
},isDebugMode:function(){
return location.href.indexOf("debug=true")!=-1;
},fromISOString:function(_77){
if(_77.length==28){
_77=_77.substring(0,19)+"-"+_77.substring(24,26)+":"+_77.substring(26,28);
}
return dojo.date.stamp.fromISOString(_77);
},getAllTimestamps:function(_78){
var _79={};
_79.sortDate=this.fromISOString(_78);
_79.formattedTimestamp=this.getDateLabel(_79.sortDate);
_79.modifiedTimestamp=_78;
return _79;
},getDateLabel:function(_7a){
var _7b=new jazz.app.i18n.Date(_7a);
return jazz.app.i18n.date.locale.format(_7b,{formatLength:"medium"});
},isStringDefined:function(_7c){
if(_7c==null){
return false;
}else{
if(typeof (_7c)!="string"){
return false;
}else{
if(_7c.length==0){
return false;
}
}
}
return true;
},plainToHTML:function(_7d){
var _7e=document.createElement("span");
var _7f=document.createTextNode(_7d);
_7e.appendChild(_7f);
return _7e.innerHTML;
},HTMLToPlain:function(_80){
var _81=document.createElement("span");
_81.innerHTML=_80;
return _81.innerText;
},buildMap:function(_82,_83,_84){
if(!_82){
return {};
}
if(!_83){
_83="key";
}
if(!_84){
_84="value";
}
var map=new Object();
for(var i in _82){
var _85=_82[i];
map[_85[_83]]=_85[_84];
}
return map;
},isInArray:function(_86,_87,_88){
for(var i=0;i<_87.length;i++){
if(_88){
if(_86.itemId==_87[i][_88]){
return true;
}
}else{
if(_86.itemId==_87[i]){
return true;
}
}
}
return false;
},isCurrentContributorAnAdmin:function(){
var _89=dojo.getObject("com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR_ROLES");
if(_89){
for(var i=0;i<_89.length;i++){
if(_89[i]==="JazzAdmins"){
return true;
}
}
}
return false;
},hasAdministratorRole:function(){
var _8a=dojo.getObject("com.ibm.team.repository.web.client.internal.AUTHENTICATED_CONTRIBUTOR_ROLES");
if(_8a){
for(var i=0;i<_8a.length;i++){
if(_8a[i]==="JazzAdmins"||_8a[i]==="JazzProjectAdmins"){
return true;
}
}
}
return false;
},deferInteractionFunction:function(_8b){
var id=_8b.id;
var _8c=_8b.timingObject;
var _8d=_8b.deferredFunction;
var _8e=_8b.interval;
var _8f;
var _90="_SYNTHETIC_TIMING_"+id;
_8e=_8e||400;
var _8f=_8b.timingObject[_90];
var _91=this;
var _92=(new Date()).valueOf();
if(_8f==null){
_8b.timingObject[_90]=_92;
setTimeout(function(){
_91.deferInteractionFunction({timingObject:_8c,deferredFunction:_8d,id:id,interval:_8e});
},_8e);
}else{
if(_92-_8f<_8e){
setTimeout(function(){
_91.deferInteractionFunction({timingObject:_8c,deferredFunction:_8d,id:id,interval:_8e});
},_8e);
}else{
_8b.timingObject[_90]=_92;
_8d.call(_8c);
}
}
return null;
},BIDI_STORAGE_CHANGED:"bidiStorageChanged",LRM:"\u200e",RLM:"\u200f",LRE:"\u202a",RLE:"\u202b",PDF:"\u202c",getWidgetBaseTextDir:function(){
return jazz.app.i18n.getWidgetBaseTextDir();
},getStringBaseTextDir:function(_93,_94){
if(!_94){
_94=dojo.style(dojo.body(),"direction");
}
if(!_93){
return _94;
}
var _95=function(c){
if(c>=1488&&c<=1535||c>=1536&&c<=1631||c>=1786&&c<=2047||c>=64336&&c<=65023||c>=65136&&c<=65276){
return true;
}else{
return false;
}
};
var _96=function(c){
if((c>64&&c<91)||(c>96&&c<123)){
return true;
}else{
return false;
}
};
var len=_93.length;
for(var i=0;i<len;i++){
var _97=_93.charCodeAt(i);
if(_95(_97)){
return "rtl";
}else{
if(_96(_97)){
return "ltr";
}
}
}
return _94;
},getSegmentSeparator:function(dir){
if(!dir){
dir=dojo.style(dojo.body(),"direction");
}
if(dir=="rtl"){
return "\u200f";
}else{
return "\u200e";
}
},setSegmentBaseTextDir:function(_98,dir,_99){
if(!!_98){
_98=_98.replace(/[\u200e\u200f\u202a\u202b\u202c]/g,"");
if(dir!="none"){
var _9a=dojo.style(dojo.body(),"direction");
if(!!_99&&_99.length>0&&_98.indexOf(_99)>=0){
var pos=_98.indexOf(_99)+_99.length;
if(dir=="auto"){
dir=this.getStringBaseTextDir(_98.substring(pos),_9a);
}
_98=_98.substring(0,pos)+this.getSegmentSeparator(_9a)+(dir=="rtl"?"\u202b":"\u202a")+_98.substring(pos)+"\u202c";
}else{
if(dir=="auto"){
dir=this.getStringBaseTextDir(_98,_9a);
}
_98=(dir=="rtl"?this.RLE:this.LRE)+_98+this.PDF;
}
}
}
return _98;
},setSomeSegmentsBaseTextDir:function(_9b,dir,_9c,_9d){
if(!_9b){
return _9b;
}
var str=_9b;
var _9e="";
while(!!_9c&&_9c.length>0&&str.indexOf(_9c)>0){
var txt=str.substring(0,str.indexOf(_9c));
_9e=_9e+this.setSegmentBaseTextDir(txt,dir,_9d)+_9c+this.getSegmentSeparator();
str=str.substring(str.indexOf(_9c)+_9c.length);
}
_9e=_9e+this.setSegmentBaseTextDir(str,dir,_9d);
return _9e;
},removeAllMarks:function(_9f){
if(!_9f){
return _9f;
}
return _9f.replace(/[\u200e\u200f\u202a\u202b\u202c]/g,"");
},_showMarks:function(txt){
var res="";
if(!txt){
return res;
}
for(var i=0;i<txt.length;i++){
if(txt.charAt(i)=="\u202a"){
res+="{LRE}";
}else{
if(txt.charAt(i)=="\u202b"){
res+="{RLE}";
}else{
if(txt.charAt(i)=="\u202c"){
res+="{PDF}";
}else{
if(txt.charAt(i)=="\u200e"){
res+="{LRM}";
}else{
if(txt.charAt(i)=="\u200f"){
res+="{RLM}";
}else{
res+=txt.charAt(i);
}
}
}
}
}
}
return res;
}};
})();


;dojo.provide("com.ibm.team.workitem.api.common.DynaCacheConstants");


(function(){
var _1=com.ibm.jdojo.lang.Runtime;
_1.declareInterface("com.ibm.team.workitem.api.common.DynaCacheConstants",{WORK_ITEM_CACHE_TOKEN_HEADER:"X-com-ibm-workitem-cache-token",WORK_ITEM_CACHE_STATE_ID_HEADER:"X-com-ibm-workitem-cache-state-id",WORK_ITEM_CACHE_TYPE_ID_HEADER:"X-com-ibm-workitem-cache-type-id",CACHED_RESPONSE_HEADER:"CACHED_RESPONSE"});
})();

var LZString={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_f:String.fromCharCode,compressToBase64:function(e){if(e==null)return"";var t="";var n,r,i,s,o,u,a;var f=0;e=LZString.compress(e);while(f<e.length*2){if(f%2==0){n=e.charCodeAt(f/2)>>8;r=e.charCodeAt(f/2)&255;if(f/2+1<e.length)i=e.charCodeAt(f/2+1)>>8;else i=NaN}else{n=e.charCodeAt((f-1)/2)&255;if((f+1)/2<e.length){r=e.charCodeAt((f+1)/2)>>8;i=e.charCodeAt((f+1)/2)&255}else r=i=NaN}f+=3;s=n>>2;o=(n&3)<<4|r>>4;u=(r&15)<<2|i>>6;a=i&63;if(isNaN(r)){u=a=64}else if(isNaN(i)){a=64}t=t+LZString._keyStr.charAt(s)+LZString._keyStr.charAt(o)+LZString._keyStr.charAt(u)+LZString._keyStr.charAt(a)}return t},decompressFromBase64:function(e){if(e==null)return"";var t="",n=0,r,i,s,o,u,a,f,l,c=0,h=LZString._f;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length){u=LZString._keyStr.indexOf(e.charAt(c++));a=LZString._keyStr.indexOf(e.charAt(c++));f=LZString._keyStr.indexOf(e.charAt(c++));l=LZString._keyStr.indexOf(e.charAt(c++));i=u<<2|a>>4;s=(a&15)<<4|f>>2;o=(f&3)<<6|l;if(n%2==0){r=i<<8;if(f!=64){t+=h(r|s)}if(l!=64){r=o<<8}}else{t=t+h(r|i);if(f!=64){r=s<<8}if(l!=64){t+=h(r|o)}}n+=3}return LZString.decompress(t)},compressToUTF16:function(e){if(e==null)return"";var t="",n,r,i,s=0,o=LZString._f;e=LZString.compress(e);for(n=0;n<e.length;n++){r=e.charCodeAt(n);switch(s++){case 0:t+=o((r>>1)+32);i=(r&1)<<14;break;case 1:t+=o(i+(r>>2)+32);i=(r&3)<<13;break;case 2:t+=o(i+(r>>3)+32);i=(r&7)<<12;break;case 3:t+=o(i+(r>>4)+32);i=(r&15)<<11;break;case 4:t+=o(i+(r>>5)+32);i=(r&31)<<10;break;case 5:t+=o(i+(r>>6)+32);i=(r&63)<<9;break;case 6:t+=o(i+(r>>7)+32);i=(r&127)<<8;break;case 7:t+=o(i+(r>>8)+32);i=(r&255)<<7;break;case 8:t+=o(i+(r>>9)+32);i=(r&511)<<6;break;case 9:t+=o(i+(r>>10)+32);i=(r&1023)<<5;break;case 10:t+=o(i+(r>>11)+32);i=(r&2047)<<4;break;case 11:t+=o(i+(r>>12)+32);i=(r&4095)<<3;break;case 12:t+=o(i+(r>>13)+32);i=(r&8191)<<2;break;case 13:t+=o(i+(r>>14)+32);i=(r&16383)<<1;break;case 14:t+=o(i+(r>>15)+32,(r&32767)+32);s=0;break}}return t+o(i+32)},decompressFromUTF16:function(e){if(e==null)return"";var t="",n,r,i=0,s=0,o=LZString._f;while(s<e.length){r=e.charCodeAt(s)-32;switch(i++){case 0:n=r<<1;break;case 1:t+=o(n|r>>14);n=(r&16383)<<2;break;case 2:t+=o(n|r>>13);n=(r&8191)<<3;break;case 3:t+=o(n|r>>12);n=(r&4095)<<4;break;case 4:t+=o(n|r>>11);n=(r&2047)<<5;break;case 5:t+=o(n|r>>10);n=(r&1023)<<6;break;case 6:t+=o(n|r>>9);n=(r&511)<<7;break;case 7:t+=o(n|r>>8);n=(r&255)<<8;break;case 8:t+=o(n|r>>7);n=(r&127)<<9;break;case 9:t+=o(n|r>>6);n=(r&63)<<10;break;case 10:t+=o(n|r>>5);n=(r&31)<<11;break;case 11:t+=o(n|r>>4);n=(r&15)<<12;break;case 12:t+=o(n|r>>3);n=(r&7)<<13;break;case 13:t+=o(n|r>>2);n=(r&3)<<14;break;case 14:t+=o(n|r>>1);n=(r&1)<<15;break;case 15:t+=o(n|r);i=0;break}s++}return LZString.decompress(t)},compress:function(e){if(e==null)return"";var t,n,r={},i={},s="",o="",u="",a=2,f=3,l=2,c="",h=0,p=0,d,v=LZString._f;for(d=0;d<e.length;d+=1){s=e.charAt(d);if(!Object.prototype.hasOwnProperty.call(r,s)){r[s]=f++;i[s]=true}o=u+s;if(Object.prototype.hasOwnProperty.call(r,o)){u=o}else{if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}r[o]=f++;u=String(s)}}if(u!==""){if(Object.prototype.hasOwnProperty.call(i,u)){if(u.charCodeAt(0)<256){for(t=0;t<l;t++){h=h<<1;if(p==15){p=0;c+=v(h);h=0}else{p++}}n=u.charCodeAt(0);for(t=0;t<8;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}else{n=1;for(t=0;t<l;t++){h=h<<1|n;if(p==15){p=0;c+=v(h);h=0}else{p++}n=0}n=u.charCodeAt(0);for(t=0;t<16;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}delete i[u]}else{n=r[u];for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}}a--;if(a==0){a=Math.pow(2,l);l++}}n=2;for(t=0;t<l;t++){h=h<<1|n&1;if(p==15){p=0;c+=v(h);h=0}else{p++}n=n>>1}while(true){h=h<<1;if(p==15){c+=v(h);break}else p++}return c},decompress:function(e){if(e==null)return"";if(e=="")return null;var t=[],n,r=4,i=4,s=3,o="",u="",a,f,l,c,h,p,d,v=LZString._f,m={string:e,val:e.charCodeAt(0),position:32768,index:1};for(a=0;a<3;a+=1){t[a]=a}l=0;h=Math.pow(2,2);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(n=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}d=v(l);break;case 2:return""}t[3]=d;f=u=d;while(true){if(m.index>m.string.length){return""}l=0;h=Math.pow(2,s);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}switch(d=l){case 0:l=0;h=Math.pow(2,8);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 1:l=0;h=Math.pow(2,16);p=1;while(p!=h){c=m.val&m.position;m.position>>=1;if(m.position==0){m.position=32768;m.val=m.string.charCodeAt(m.index++)}l|=(c>0?1:0)*p;p<<=1}t[i++]=v(l);d=i-1;r--;break;case 2:return u}if(r==0){r=Math.pow(2,s);s++}if(t[d]){o=t[d]}else{if(d===i){o=f+f.charAt(0)}else{return null}}u+=o;t[i++]=f+o.charAt(0);r--;f=o;if(r==0){r=Math.pow(2,s);s++}}}};if(typeof module!=="undefined"&&module!=null){module.exports=LZString}


;dojo.provide("com.ibm.team.rtc.foundation.web.util.Compression");




(function(){
var _1=com.ibm.team.rtc.foundation.web.util.JsonIO;
var _2=dojo.declare("com.ibm.team.rtc.foundation.web.util.Compression",null,{"-chains-":{constructor:"manual"}});
_2.compress=function(_3){
var _4=_1.stringify(_3);
return dojo.isWebKit?LZString.compress(_4):LZString.compressToUTF16(_4);
};
_2.decompress=function(_5){
var _6=dojo.isWebKit?LZString.decompress(_5):LZString.decompressFromUTF16(_5);
return _6!=null?_1.parse(_6):null;
};
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.WorkItemClient");




























(function(){
var _1=com.ibm.team.repository.web.transport.ServiceRequest;
var _2=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _3=com.ibm.team.repository.web.transport.TeamServerClient;
var _4=com.ibm.team.workitem.web.client.internal.QueryClient;
var _5=com.ibm.team.workitem.web.client.internal.SimpleCache;
var _6=com.ibm.team.rtc.foundation.web.util.PersistentCache;
var _7=com.ibm.team.workitem.web.client.util;
var _8=com.ibm.team.rtc.foundation.web.InitializationDataTypes;
var _9=com.ibm.team.rtc.foundation.web.util.Initialization;
var _a=com.ibm.team.rtc.foundation.web.util.Compression;
var _b=com.ibm.team.workitem.api.common.DynaCacheConstants;
var _c=com.ibm.team.workitem.web.client.internal.ClientConstants;
var _d=com.ibm.team.rtc.foundation.web.util.ConfigurationManagementUtil;
function _e(_f,_10){
if(!_f){
throw new Error("WorkItemClient#"+_10+": missing request parameters.");
}
var _11=0;
var _12;
dojo.forEach(["id","itemId","newWorkItem"],function(x){
if(_f[x]){
_11++;
_12=x+" ";
}
});
if(_11>1){
throw new Error("WorkItemClient#"+_10+": may only set one of 'id', 'itemId', or 'newWorkItem' (saw: ["+_12+"]");
}
};
com.ibm.team.workitem.web.client.internal.WorkItemClient={SERVICE_URI:"com.ibm.team.workitem.common.internal.rest.IWorkItemRestService",GET_VALUES_METHOD:"getValues",GET_CONTRIBUTORS_METHOD:"getContributors",FILTER_HISTOGRAM:"histogram",_persistentCache:new _6("com.ibm.team.workitem.web.client.internal.WorkItemClient",2,10),_sessionCache:new _5(),_invokeWorkItemService:function(_13,_14,_15,_16){
if(navigator.userAgent.toLowerCase().search("edge")>=0){
if(!_15){
var _15={};
}
_15.now=Date.now();
}
var _17=dojo.mixin({},_c.CACHE_CONTROL_HEADERS,_16||{});
var _18=_15?new _1(_19.SERVICE_URI,_14,_15):new _1(_19.SERVICE_URI,_14);
_3.invokeService(_18,_13,{headers:_17});
},_invokeProcessService:function(_1a,_1b,_1c){
var _1d=new _1("com.ibm.team.process.internal.service.web.IProcessWebUIService",_1b,_1c);
_3.invokeService(_1d,_1a);
},_invokeCachingWorkItemService:function(_1e,_1f,_20,_21,ttl,_22,_23){
var pId=null;
var _24=null;
if(_20!=null){
pId=_20.projectAreaItemId;
_24=_20.projectAreaConfigurationStateId;
}
if(_24!=null){
_24=_24+"-"+dojo.locale;
}
var _25=this;
var _26=function(_27){
_25._invokeWorkItemService(_27,_1f,_20,_22);
};
this._invokeCachingService(_1e,pId,_24,_21,ttl,_26,_23);
},_invokeCachingService:function(_28,_29,_2a,_2b,ttl,_2c,_2d){
var _2e=this._getFromCache(_29,_2a,_2b,ttl,_2d);
if(_2e!=null){
_28.doCallback(_2e);
return;
}
var _2f=this;
var _30={success:function(_31){
_2f._updateCache(_31,_29,_2a,_2b,ttl);
_28.doCallback(_2f._copy(_31,_2d));
},failure:function(_32){
_28.doErrorCallback(_32);
}};
var _33=new _2(_30,"success","failure");
_2c(_33);
},_getFromCache:function(_34,_35,_36,ttl,_37){
var _38=_36;
if(_34!=null){
_38=_36+"/projectAreaItemId:"+_34;
}
var _39=this._sessionCache.get(_38);
if(_39!=null){
return this._copy(_39,_37);
}
if(_35!=null){
var _3a=this._persistentCache.getEntry(_34,_35);
if(_3a!=null&&_3a[_36]!=null){
var _3b=_3a[_36];
var _3c=this._isMSEdge()?_3b:_a.decompress(_3b);
this._sessionCache.put(_38,_3c,ttl);
return this._copy(_3c,_37);
}
}
return null;
},_isMSEdge:function(){
var ua=window.navigator.userAgent;
var _3d=ua.indexOf("Edge/");
return (_3d>=0);
},_updateCache:function(_3e,_3f,_40,_41,ttl){
if(ttl==_5.TTL_INFINITE&&_3f!=null&&_40!=null){
var e=this._persistentCache.getEntry(_3f,_40);
if(e==null){
e={};
}
e[_41]=this._isMSEdge()?_3e:_a.compress(_3e);
this._persistentCache.putEntry(_3f,_40,e);
}
var _42=_41;
if(_3f!=null){
_42=_41+"/projectAreaItemId:"+_3f;
}
this._sessionCache.put(_42,_3e,ttl);
},_setAppArgsProjectAreaItemId:function(_43){
if(!_43){
_43={};
}
if(_43.projectAreaConfigurationStateId===null){
delete _43.projectAreaConfigurationStateId;
}
try{
if(_43.projectAreaItemId){
_43.projectAreaItemId=_43.projectAreaItemId.replace(/\"\"/gi,"\"");
return;
}
var _44=jazz.app.context.get();
if(_44.itemId){
_43.projectAreaItemId=_44.itemId;
}
}
finally{
if(_43.projectAreaConfigurationStateId==null){
var _45=_9.getData(_8.PROJECT_AREA_INITIALIZATION_DATA);
if(_45!=null){
var _46=_45.projectArea;
if(_46.id==_43.projectAreaItemId&&_46.configurationStateId!=null){
_43.projectAreaConfigurationStateId=_46.configurationStateId;
}
}
}
}
},getWorkItemEditableProperties:function(_47,_48){
_e(_48,"postGetWorkItemEditableProperties");
if(_48.newWorkItem){
this._setAppArgsProjectAreaItemId(_48);
}
this._getDynaCacheTokenDeferred(this._createDynaCacheTokenArgs(_48)).then(dojo.hitch(this,function(_49){
var _4a={};
if(_49!=null&&!_48.typeId){
_4a[_b.WORK_ITEM_CACHE_TOKEN_HEADER]=_49;
}
if(_48[_b.WORK_ITEM_CACHE_TYPE_ID_HEADER]){
_4a[_b.WORK_ITEM_CACHE_TYPE_ID_HEADER]=encodeURIComponent(_48[_b.WORK_ITEM_CACHE_TYPE_ID_HEADER]);
delete _48[_b.WORK_ITEM_CACHE_TYPE_ID_HEADER];
}
if(_48[_b.WORK_ITEM_CACHE_STATE_ID_HEADER]){
_4a[_b.WORK_ITEM_CACHE_STATE_ID_HEADER]=encodeURIComponent(_48[_b.WORK_ITEM_CACHE_STATE_ID_HEADER]);
delete _48[_b.WORK_ITEM_CACHE_STATE_ID_HEADER];
}
_19._invokeWorkItemService(_47,"postGetWorkItemEditableProperties",_48,_4a);
}));
},getProjectAreaConfig:function(_4b,_4c){
this._invokeCachingWorkItemService(_4b,"getProjectAreaConfig",_4c,"getProjectAreaConfig",_5.TTL_INFINITE);
},getConfigurationUriForWorkItemByLinkType:function(_4d,_4e){
_19._invokeWorkItemService(_4d,"getConfigurationUriForWorkItemByLinkType",_4e);
},getHasOSLCLinkTypeMappings:function(_4f,_50){
_19._invokeWorkItemService(_4f,"getHasOSLCLinkTypeMappings",_50);
},getAllValues:function(_51,_52){
_e(_52,"postGetAllValues");
if(_52.newWorkItem){
this._setAppArgsProjectAreaItemId(_52);
}
if(!_52.ids){
_52.ids=[];
}
_19._invokeWorkItemService(_51,"postGetAllValues",_52);
},getMaxAttachmentSize:function(_53){
var _54={};
this._setAppArgsProjectAreaItemId(_54);
_19._invokeCachingWorkItemService(_53,"getMaxAttachmentSize",_54,"getMaxAttachmentSize",_5.TTL_INFINITE);
},guessCategory:function(_55,_56){
var _57=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal","WidgetMessages");
var _58=dojo.trim(_56.getValue({path:"attributes.summary.content"}));
var _59=dojo.trim(_56.getValue({path:"attributes.description.content"}));
var _5a=_56.getValue({path:"attributes.internalComments.items"});
dojo.forEach(_5a,function(_5b){
_59+=("\n"+dojo.trim(_5b.content));
});
var _5c=_56.getValue({path:["attributes",_56.SYNTHETIC_COMMENT_ID,"content"]});
if(_5c){
_59+=_5c;
}
var _5d=_56.getValue({path:"itemId"});
var _5e=_56.getValue({path:"attributes.projectArea.id"});
var _5f=new _1("com.ibm.team.workitem.common.internal.rest.IWorkItemRestService","postGuessCategory",{projectAreaItemId:_5e,workItemId:_5d,itemSummary:_58,itemContent:_59});
var op=_56.createOperation({message:_57.labelGuessingCategory,id:"guessingCategory"});
var _60={success:function(_61){
_56.finishOperation(op);
_55.doCallback(_61);
},failure:function(_62){
var _63="";
_55.doErrorCallback(_63);
_56.finishOperation(op);
}};
var _64=new _2(_60,"success","failure");
_56.startOperation(op);
_3.invokeService(_5f,_64);
},getAllQueryableValues:function(_65,_66){
this._setAppArgsProjectAreaItemId(_66);
_19._invokeWorkItemService(_65,"getAllQueryableValues",_66);
},getValues:function(_67,_68){
this._setAppArgsProjectAreaItemId(_68);
_19._invokeWorkItemService(_67,"getValues",_68);
},getTime:function(_69,_6a){
_19._invokeWorkItemService(_69,"getTime",_6a);
},getWorkItemDTO:function(_6b,_6c){
_e(_6c,"getWorkItemDTO");
if(_6c.newWorkItem){
this._setAppArgsProjectAreaItemId(_6c);
}
this._invokeWorkItemService(_6b,"getWorkItemDTO",_6c);
},getDynaCacheToken:function(_6d,_6e){
var ttl=_5.TTL_MINUTE*30;
this._invokeCachingWorkItemService(_6d,"getDynaCacheToken",_6e,"getDynaCacheToken",ttl);
},_createDynaCacheTokenArgs:function(_6f){
var _70={};
if(_6f.teamAreaItemId){
_70["projectAreaItemId"]=_6f.teamAreaItemId;
delete _6f["teamAreaItemId"];
}else{
if(_6f.categoryItemId&&_6f.targetItemId){
_70["projectAreaItemId"]=_6f.projectAreaItemId;
_70["categoryItemId"]=_6f.categoryItemId;
_70["targetItemId"]=_6f.targetItemId;
}else{
_70["projectAreaItemId"]=_6f.projectAreaItemId;
}
}
return _70;
},_getDynaCacheTokenDeferred:function(_71){
var _72=(new (require("dojo/Deferred")));
var _73={success:function(_74){
_72.resolve(_74);
},failure:function(_75){
var _76=TeamRepositoryExceptionFactory.INSTANCE.createException(_75);
console.log(_76.getMessage());
_72.resolve(null);
}};
var _77=new _2(_73,"success","failure");
this.getDynaCacheToken(_77,_71);
return _72;
},getDynaCacheWorkItemStateId:function(_78){
var _79=(new (require("dojo/Deferred")));
if(_78.newWorkItem){
_79.resolve(null);
return _79;
}
var _7a={success:function(_7b){
_79.resolve(_7b);
},failure:function(_7c){
_79.resolve(null);
console.debug(_7c);
}};
var _7d={id:_78.id};
var _7e=new _2(_7a,"success","failure");
this._invokeWorkItemService(_7e,"getDynaCacheWorkItemStateId",_7d);
return _79;
},getWorkItem:function(_7f,_80){
if(_80.newWorkItem){
this._setAppArgsProjectAreaItemId(_80);
}
var _81=_d.getConfigurationURI();
if(_81!=null){
_80.userSelectedConfigContext=_81;
}
var _82={success:function(_83){
if(_83==null){
_7f.doCallback(null);
return;
}
var _84=_7.buildMap(_83.attributes);
_83.attributes=_84;
_7f.doCallback(_83);
},failure:function(_85){
_7f.doErrorCallback(_85);
}};
var _86=new _2(_82,"success","failure");
this.getDynaCacheWorkItemStateId(_80).then(dojo.hitch(this,function(_87){
if(_87!=null){
var _88={};
_88[_b.WORK_ITEM_CACHE_STATE_ID_HEADER]=encodeURIComponent(_87);
}
this._invokeWorkItemService(_86,"getWorkItemDTO2",_80,_88);
}));
},postWorkItem2:function(_89,_8a){
if(!_8a.stateId&&!_8a.projectAreaItemId){
this._setAppArgsProjectAreaItemId(_8a);
}
this._internalPostWorkItem("postWorkItem2",_89,_8a);
},postWorkItemN:function(_8b,_8c){
var _8d=dojo.map(_8c,function(_8e){
if(!_8e.stateId&&!_8e.projectAreaItemId){
this._setAppArgsProjectAreaItemId(_8e);
}
_8e.attributeValues=dojo.map(_8e.attributeValues,function(_8f){
if(dojo.isArray(_8f)){
return dojo.toJson(_8f);
}
return _8f;
});
return dojo.toJson(_8e);
},this);
var _90={success:function(_91){
dojo.forEach(_91.workItems,function(_92){
_92.attributes=_7.buildMap(_92.attributes);
});
_8b.doCallback(_91);
},failure:function(_93){
console.debug(_93);
_8b.doErrorCallback(_93);
}};
var _94={};
var _95=_d.getConfigurationURI();
if(_95!=null){
_94[_d.OSLC_CONFIG_CONTEXT_PARAM]=_95;
}
var _96=new _2(_90,"success","failure");
this._invokeWorkItemService(_96,"postWorkItemN",{postWorkItemParams:_8d},_94);
},moveWorkItem:function(_97,_98){
if(_98.move==null||!_98.projectAreaItemId){
throw new Error("WorkItemClient#moveWorkItem: 'move' (true/false) and 'projectAreaItemId' must be set");
}
this._internalPostWorkItem("postMoveWorkItem",_97,_98);
},getUsesTimeRemaining:function(_99,_9a){
_9a=_9a||{};
this._setAppArgsProjectAreaItemId(_9a);
this._invokeWorkItemService(_99,"getUsesTimeRemaining",_9a);
},splitWorkItem:function(_9b,_9c){
if(!_9c.stateId&&!_9c.projectAreaItemId){
this._setAppArgsProjectAreaItemId(_9c);
}
this._internalPostWorkItem("postSplitWorkItem",_9b,_9c);
},_internalPostWorkItem:function(_9d,_9e,_9f){
_9f.attributeValues=dojo.map(_9f.attributeValues,function(_a0){
if(dojo.isArray(_a0)){
return dojo.toJson(_a0);
}
return _a0;
});
var _a1={};
var _a2=_d.getConfigurationURI();
if(_a2!=null){
_a1[_d.OSLC_CONFIG_CONTEXT_PARAM]=_a2;
}
var _a3={success:function(_a4){
if(_a4.severity<=_19.INFO){
var _a5=_a4.workItem;
if(_a4.infos){
_a5.infos=_a4.infos;
}
var _a6=_7.buildMap(_a5.attributes);
_a5.attributes=_a6;
_9e.doCallback(_a5);
}else{
_9e.doErrorCallback(_a4);
}
},failure:function(_a7){
console.debug(_a7);
_9e.doErrorCallback(_a7);
}};
var _a8=new _2(_a3,"success","failure");
this._invokeWorkItemService(_a8,_9d,_9f,_a1);
},postBulkChangeMultiValueWorkItems:function(_a9,_aa){
for(var i=0;i<_aa.elements.length;i++){
_aa.elements[i]=dojo.toJson(_aa.elements[i]);
}
this._invokeWorkItemService(_a9,"postBulkChangeMultiValueWorkItems",_aa);
},getResolutions:function(_ab,_ac){
if(!(_ac.status||_ac.actionId)){
throw new Error("WorkItemClient#getResolutions: must set either appArgs.status or appArgs.actionId (none set)");
}
if(_ac.status&&_ac.actionId){
throw new Error("WorkItemClient#getResolutions: must set either appArgs.status or appArgs.actionId (both set)");
}
this._setAppArgsProjectAreaItemId(_ac);
_ac.attributeName="internalResolution";
this._invokeWorkItemService(_ab,_19.GET_VALUES_METHOD,_ac);
},getContributors:function(_ad,_ae){
this._setAppArgsProjectAreaItemId(_ae);
this._invokeWorkItemService(_ad,_19.GET_CONTRIBUTORS_METHOD,_ae);
},getTeamMembers:function(_af,_b0){
_b0=_b0||{};
this._setAppArgsProjectAreaItemId(_b0);
this._invokeWorkItemService(_af,"getTeamMembers",_b0);
},getEditorPresentation:function(_b1,_b2){
if(!_b2.typeId&&!_b2.itemId){
throw new Error("WorkItemClient#getEditorPresentation: must set appArgs.typeId (the work item type id) or appArgs.itemId (the work item itemId)");
}
this._setAppArgsProjectAreaItemId(_b2);
var _b3="getEditorPresentation/typeId:"+_b2.typeId+"/target:"+(_b2.target?_b2.target:"(none)");
this._invokeCachingWorkItemService(_b1,"getEditorPresentation",_b2,_b3,_5.TTL_INFINITE);
},getQuickInformationPresentation:function(_b4,_b5){
if(!_b5.configurationId){
throw new Error("WorkItemClient#getQuickInformationPresentation: must set appArgs.configurationId");
}
this._setAppArgsProjectAreaItemId(_b5);
this._invokeCachingWorkItemService(_b4,"getQuickInformationPresentation",_b5,("getQuickInformationPresentation/configurationId:"+_b5.configurationId+"/workItemTypeId:"+_b5.workItemTypeId),_5.TTL_INFINITE);
},getDynamicAttributesPropertiesConfiguration:function(_b6,_b7,_b8){
this._getDynaCacheTokenDeferred(this._createDynaCacheTokenArgs(_b7)).then(dojo.hitch(this,function(_b9){
this._setAppArgsProjectAreaItemId(_b7);
var _ba=_b9;
var _bb={};
var _bc="getDynamicAttributesPropertiesConfiguration:"+_b8+":"+_b7.categoryItemId+":"+_b7.targetItemId;
if(_ba!=null){
_bb[_b.WORK_ITEM_CACHE_TOKEN_HEADER]=_ba;
_bc=_bc+"_"+_ba;
}
this._invokeCachingWorkItemService(_b6,"getDynamicAttributesPropertiesConfiguration",_b7,_bc,_5.TTL_MINUTE*30,_bb);
}));
},getApprovalStates:function(_bd,_be){
this._setAppArgsProjectAreaItemId(_be);
this._invokeCachingWorkItemService(_bd,"getApprovalStates",_be,"getApprovalStates",_5.TTL_INFINITE);
},getApprovalTypes:function(_bf,_c0){
this._setAppArgsProjectAreaItemId(_c0);
this._invokeCachingWorkItemService(_bf,"getApprovalTypes",_c0,"getApprovalTypes",_5.TTL_INFINITE);
},getLinkTypes:function(_c1,_c2){
this._setAppArgsProjectAreaItemId(_c2);
this._invokeCachingWorkItemService(_c1,"getLinkTypesForProject",_c2,"getLinkTypesForProject",_5.TTL_INFINITE);
},getWorkItemTypes:function(_c3,_c4){
this._setAppArgsProjectAreaItemId(_c4);
_c4.newWorkItem=true;
_c4.ids=["workItemType"];
this._invokeCachingWorkItemService(_c3,"getAllValues",_c4,"getWorkItemTypes",_5.TTL_INFINITE);
},getReleases:function(_c5,_c6){
this._setAppArgsProjectAreaItemId(_c6);
this._invokeWorkItemService(_c5,"getReleases",_c6);
},getWorkItemCategories:function(_c7,_c8){
this._setAppArgsProjectAreaItemId(_c8);
this._invokeWorkItemService(_c7,"getWorkItemCategories",_c8);
},getWorkItemTimeLines:function(_c9,_ca){
this._setAppArgsProjectAreaItemId(_ca);
this._invokeWorkItemService(_c9,"getWorkItemTimeLines",_ca);
},getWorkItemTeamAreas:function(_cb,_cc){
this._setAppArgsProjectAreaItemId(_cc);
this._invokeWorkItemService(_cb,"getWorkItemTeamAreas",_cc);
},postDeleteWorkItems:function(_cd,_ce){
this._invokeWorkItemService(_cd,"postDeleteWorkItems",_ce);
},postReleases:function(_cf,_d0){
this._setAppArgsProjectAreaItemId(_d0);
this._invokeWorkItemService(_cf,"postReleases",_d0);
},postWorkItemCategories:function(_d1,_d2){
this._setAppArgsProjectAreaItemId(_d2);
this._invokeWorkItemService(_d1,"postWorkItemCategories",_d2);
},postGetWorkItems:function(_d3,_d4){
this._setAppArgsProjectAreaItemId(_d4);
this._invokeWorkItemService(_d3,"postGetWorkItems",_d4);
},postGetWorkItemBreakdownStructure:function(_d5,_d6){
this._setAppArgsProjectAreaItemId(_d6);
this._invokeWorkItemService(_d5,"postGetWorkItemBreakdownStructure",_d6);
},getEnumerationValues:function(_d7,_d8){
this._setAppArgsProjectAreaItemId(_d8);
this._invokeWorkItemService(_d7,"getEnumerationValues",_d8);
},getAttributes:function(_d9,_da){
this._setAppArgsProjectAreaItemId(_da);
if(_da.forceFetch){
this._invokeWorkItemService(_d9,"getAttributes",_da,null);
}else{
var key="getAttributes/"+dojo.toJson(_da);
this._invokeCachingWorkItemService(_d9,"getAttributes",_da,key,_5.TTL_INFINITE);
}
},getProcessAreaHierarchies:function(_db,_dc){
this._setAppArgsProjectAreaItemId(_dc);
var _dd="getProcessAreaHierarchies";
var ttl=_5.TTL_MINUTE*30;
this._invokeCachingWorkItemService(_db,"getProcessAreaHierarchies",_dc,_dd,ttl);
},getProcessAreaHierarchiesForQueries:function(_de,_df){
this._setAppArgsProjectAreaItemId(_df);
var _e0="getProcessAreaHierarchiesForQueries";
var ttl=_5.TTL_MINUTE*30;
this._invokeCachingWorkItemService(_de,"getProcessAreaHierarchiesForQueries",_df,_e0,ttl);
},getIterations:function(_e1,_e2){
var ttl=_5.TTL_MINUTE*30;
this._invokeCachingWorkItemService(_e1,"getIterations",_e2,"getIterations",ttl,null,true);
},getTimelinesWithIterations:function(_e3,_e4){
var ttl=_5.TTL_MINUTE*30;
this._invokeCachingWorkItemService(_e3,"getTimelinesWithIterations",_e4,"getTimelinesWithIterations",ttl,null,true);
},clearIterations:function(_e5){
this._sessionCache.clear("getIterations/projectAreaItemId:"+_e5);
},transformWikiSource:function(_e6,_e7){
this._invokeWorkItemService(_e6,"postWikiSource",_e7);
},getAllProjectAreas:function(_e8,_e9){
this._invokeWorkItemService(_e8,"getAllProjectAreas",_e9);
},getAccessContexts:function(_ea,_eb){
this._invokeWorkItemService(_ea,"getAccessContexts",_eb);
},isAutoLinkArchivingEnabled:function(_ec,_ed){
this._invokeWorkItemService(_ec,"getIsAutoLinkArchivingEnabled",_ed);
},getIsContributorMemberOf:function(_ee,_ef){
this._invokeWorkItemService(_ee,"getIsContributorMemberOf",_ef);
},_copy:function(_f0,_f1){
if(_f1){
var _f2=this;
if(dojo.isArray(_f0)){
return dojo.map(_f0,function(_f3){
return _f2._copy(_f3,_f1);
});
}else{
return dojo.mixin({},_f0);
}
}
return dojo.clone(_f0);
}};
var _19=com.ibm.team.workitem.web.client.internal.WorkItemClient;
_19.INFO=0;
_19.WARNING=2;
_19.ERROR=4;
})();


;dojo.provide("com.ibm.team.workitem.web.client.internal.WorkItemAttributes");
(function(){
var _1=dojo.declare("com.ibm.team.workitem.web.client.internal.WorkItemAttributes",null,{"-chains-":{constructor:"manual"}});
_1.SEVERITY="internalSeverity";
_1.PRIORITY="internalPriority";
_1.FOUND_IN="foundIn";
_1.ID="id";
_1.TYPE="workItemType";
_1.PROJECT_AREA="projectArea";
_1.SUMMARY="summary";
_1.STATE="internalState";
_1.CREATOR="creator";
_1.OWNER="owner";
_1.DESCRIPTION="description";
_1.CREATION_DATE="creationDate";
_1.RESOLUTION="internalResolution";
_1.DUE_DATE="dueDate";
_1.ESTIMATE="duration";
_1.CORRECTED_ESTIMATE="correctedEstimate";
_1.TIME_SPENT="timeSpent";
_1.CATEGORY="category";
_1.COMMENTS="internalComments";
_1.TARGET="target";
_1.RESOLVER="resolver";
_1.RESOLUTION_DATE="resolutionDate";
_1.SUBSCRITPIONS="internalSubscriptions";
_1.TAGS="internalTags";
_1.MODIFIED="modified";
_1.MODIFIED_BY="modifiedBy";
_1.TEAM_AREA="teamArea";
_1.BUILT_IN=[_1.SEVERITY,_1.PRIORITY,_1.FOUND_IN,_1.ID,_1.TYPE,_1.PROJECT_AREA,_1.SUMMARY,_1.STATE,_1.CREATION_DATE,_1.CREATOR,_1.OWNER,_1.DESCRIPTION,_1.RESOLUTION,_1.DUE_DATE,_1.ESTIMATE,_1.CORRECTED_ESTIMATE,_1.TIME_SPENT,_1.CATEGORY,_1.COMMENTS,_1.TARGET,_1.RESOLVER,_1.RESOLUTION_DATE,_1.SUBSCRITPIONS,_1.TAGS,_1.MODIFIED,_1.MODIFIED_BY];
_1.EXT_SEVERITY="com.ibm.team.workitem.attribute.severity";
_1.EXT_PRIORITY="com.ibm.team.workitem.attribute.priority";
_1.EXT_FOUND_IN="com.ibm.team.workitem.attribute.version";
_1.EXT_ID="com.ibm.team.workitem.attribute.id";
_1.EXT_TYPE="com.ibm.team.workitem.attribute.workitemtype";
_1.EXT_PROJECT_AREA="com.ibm.team.workitem.attribute.projectarea";
_1.EXT_SUMMARY="com.ibm.team.workitem.attribute.summary";
_1.EXT_STATE="com.ibm.team.workitem.attribute.state";
_1.EXT_CREATOR="com.ibm.team.workitem.attribute.creator";
_1.EXT_OWNER="com.ibm.team.workitem.attribute.owner";
_1.EXT_DESCRIPTION="com.ibm.team.workitem.attribute.description";
_1.EXT_CREATION_DATE="com.ibm.team.workitem.attribute.creationdate";
_1.EXT_RESOLUTION="com.ibm.team.workitem.attribute.resolution";
_1.EXT_DUE_DATE="com.ibm.team.workitem.attribute.duedate";
_1.EXT_ESTIMATE="com.ibm.team.workitem.attribute.duration";
_1.EXT_CORRECTED_ESTIMATE="com.ibm.team.workitem.attribute.correctedestimate";
_1.EXT_TIME_SPENT="com.ibm.team.workitem.attribute.timespent";
_1.EXT_CATEGORY="com.ibm.team.workitem.attribute.category";
_1.EXT_COMMENTS="com.ibm.team.workitem.attribute.comments";
_1.EXT_TARGET="com.ibm.team.workitem.attribute.target";
_1.EXT_RESOLVER="com.ibm.team.workitem.attribute.resolver";
_1.EXT_RESOLUTION_DATE="com.ibm.team.workitem.attribute.resolutiondate";
_1.EXT_TAGS="com.ibm.team.workitem.attribute.tags";
_1.EXT_MODIFIED="com.ibm.team.workitem.attribute.modified";
_1.EXT_MODIFIED_BY="com.ibm.team.workitem.attribute.modifiedby";
_1.PLE_PLANNED_FOR_ID="com.ibm.team.workitem.ple.derivedFromPlannedFor";
_1._i2e=null;
_1._e2i=null;
_1.initialize=function(){
if(_1._i2e==null){
var _2={};
var _3={};
_1.init(_2,_3,_1.SEVERITY,_1.EXT_SEVERITY);
_1.init(_2,_3,_1.PRIORITY,_1.EXT_PRIORITY);
_1.init(_2,_3,_1.FOUND_IN,_1.EXT_FOUND_IN);
_1.init(_2,_3,_1.ID,_1.EXT_ID);
_1.init(_2,_3,_1.TYPE,_1.EXT_TYPE);
_1.init(_2,_3,_1.PROJECT_AREA,_1.EXT_PROJECT_AREA);
_1.init(_2,_3,_1.SUMMARY,_1.EXT_SUMMARY);
_1.init(_2,_3,_1.STATE,_1.EXT_STATE);
_1.init(_2,_3,_1.CREATOR,_1.EXT_CREATOR);
_1.init(_2,_3,_1.OWNER,_1.EXT_OWNER);
_1.init(_2,_3,_1.DESCRIPTION,_1.EXT_DESCRIPTION);
_1.init(_2,_3,_1.CREATION_DATE,_1.EXT_CREATION_DATE);
_1.init(_2,_3,_1.RESOLUTION,_1.EXT_RESOLUTION);
_1.init(_2,_3,_1.DUE_DATE,_1.EXT_DUE_DATE);
_1.init(_2,_3,_1.ESTIMATE,_1.EXT_ESTIMATE);
_1.init(_2,_3,_1.CORRECTED_ESTIMATE,_1.EXT_CORRECTED_ESTIMATE);
_1.init(_2,_3,_1.TIME_SPENT,_1.EXT_TIME_SPENT);
_1.init(_2,_3,_1.CATEGORY,_1.EXT_CATEGORY);
_1.init(_2,_3,_1.COMMENTS,_1.EXT_COMMENTS);
_1.init(_2,_3,_1.TARGET,_1.EXT_TARGET);
_1.init(_2,_3,_1.RESOLVER,_1.EXT_RESOLVER);
_1.init(_2,_3,_1.RESOLUTION_DATE,_1.EXT_RESOLUTION_DATE);
_1.init(_2,_3,_1.TAGS,_1.EXT_TAGS);
_1.init(_2,_3,_1.MODIFIED,_1.EXT_MODIFIED);
_1.init(_2,_3,_1.MODIFIED_BY,_1.EXT_MODIFIED_BY);
_1._i2e=_2;
_1._e2i=_3;
}
};
_1.init=function(_4,_5,_6,_7){
_4[_6]=_7;
_5[_7]=_6;
};
_1.getInternalId=function(_8){
_1.initialize();
var _9=_1._e2i[_8];
return _9!=null?_9:_8;
};
_1.getExternalId=function(_a){
_1.initialize();
var _b=_1._i2e[_a];
return _b!=null?_b:_a;
};
})();


;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.utils.ColourPreferenceProvider");


















dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
(function(){
var _1=com.ibm.team.dashboard.web.ui.CustomPreferenceProvider;
var _2=com.ibm.team.workitem.viewlets.web.ui.internal.utils.ColourPaletteDialog;
var _3=com.ibm.team.workitem.web.client.internal.WorkItemClient;
var _4=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _5=com.ibm.team.workitem.web.client.internal.WorkItemAttributes;
var _6=com.ibm.team.workitem.viewlets.web.ui.internal.utils.ErrorUtility;
var _7="color:#BBBBBB;";
var _8="undefined";
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.utils.ColourPreferenceProvider",[dijit._Widget,_1],{constructor:function(_9){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
},postCreate:function(){
this.inherited(arguments);
this._dialog=null;
this._parameterID=null;
this._queryCategory=null;
this._model=null;
this._context=null;
},getLabel:function(_a){
if(!_a){
return this._buildLabel(this.messages.msgNoColoursChosen,null);
}
var _b=dojo.fromJson(_a);
return this._buildLabel(this._modelToString(_b),null);
},_modelToString:function(_c){
if(!_c){
_6.logError(new Error("Empty colour model encountered"),this.id);
return dojo.string.substitute(this.messages.msgError,[this.messages.msgPreferenceFailure]);
}
var _d=[];
for(var _e in _c){
if(!_c.hasOwnProperty(_e)){
continue;
}
var _f=_c[_e];
if(!_f){
_6.logError(new Error("Expected entry missing from colour model: "+_e),this.id);
continue;
}
var _10=_f.label;
if(!_10){
_6.logError(new Error("Expected label missing from colour model: "+_e),this.id);
continue;
}
var _11=_f.colour;
if(!_11){
_6.logError(new Error("Expected colour missing from colour model: "+_e),this.id);
continue;
}
var _12=this._trimWhitespace(_10);
_d.push(_12+": "+_11);
}
if(_d.length===0){
return this.messages.msgNoColoursChosen;
}
return _d.join(", ");
},_trimWhitespace:function(_13){
var _14=_13.match(/^\s*(.+?)\s*$/);
if((_14 instanceof Array)&&(_14.length===2)){
return _14[1];
}
return _13;
},_RGBDecimalToHex:function(_15){
var _16=_15.match(/R(\d+)G(\d+)B(\d+)/);
var red=("0"+parseInt(_16[1],10).toString(16)).slice(-2),_17=("0"+parseInt(_16[2],10).toString(16)).slice(-2),_18=("0"+parseInt(_16[3],10).toString(16)).slice(-2);
return "#"+red+_17+_18;
},getLoadingLabel:function(){
return this._buildLabel(this.messages.loading,_7);
},_buildLabel:function(_19,_1a){
var _1b="<input type=\"text\" readonly=\"readonly\" value=\""+jazz.util.html.escape(_19)+"\" ";
if(_1a){
_1b+="style=\""+_1a+"\" ";
}
_1b+="/>";
return _1b;
},createChooser:function(_1c,_1d,_1e){
if(!_1d||!_1d.preferences||!_1d.preferences.parameter){
alert(this.messages.msgSelectQueryFirst);
return;
}
this._parameterID=_1d.preferences.parameter;
this._queryCategory=_1d.preferences.queryCategory;
this._model=_1d.preferences.colours;
this._context=_1e;
var _1f=_1e.getPreference(_1e._static._PREFERENCE_ID_COLOURS);
this._dialog=new _2({getModel:dojo.hitch(this,this._getModel),onOK:dojo.hitch(this,function(_20){
var _21=this._serializeModel(_20);
_1c(_21,_1e._static._PREFERENCE_ID_COLOURS);
})});
this._dialog.show();
},createDOMChooser:function(_22,_23,_24,_25){
if(!_23||!_23.preferences||!_23.preferences.parameter){
return dojo.create("div",{innerHTML:"<p>"+this.messages.msgSelectQueryFirst+"</p>"});
}
this._parameterID=_23.preferences.parameter;
this._queryCategory=_23.preferences.queryCategory;
this._model=_23.preferences.colours;
this._context=_24;
var _26=_24.getPreference(_24._static._PREFERENCE_ID_COLOURS);
this._dialog=new _2({getModel:dojo.hitch(this,this._getModel),onOK:dojo.hitch(this,function(_27){
var _28=this._serializeModel(_27);
_22(_28,_24._static._PREFERENCE_ID_COLOURS);
}),onCancel:_25});
return this._dialog.domNode;
},_serializeModel:function(_29){
var _2a=0;
for(var _2b in _29){
if(!_29.hasOwnProperty(_2b)){
continue;
}
var _2c=_29[_2b];
if(!_2c){
_6.logError(new Error("Expected entry missing from colour model: "+_2b),this.id);
delete _29[_2b];
continue;
}
var _2d=_2c.colour;
if(!_2d){
delete _29[_2b];
continue;
}
_2a++;
}
var _2e;
if(_2a===0){
_2e="";
}else{
_2e=dojo.toJson(_29);
}
return _2e;
},_getModel:function(){
var _2f=_5.getInternalId(this._parameterID);
if((_2f===_5.CREATOR)||(_2f===_5.OWNER)||(_2f===_5.RESOLVER)||(_2f===_5.MODIFIED_BY)){
return this._getTeamMembers();
}
return this._getAllValues(_2f);
},_getAllValues:function(_30){
var _31=new dojo.Deferred();
var _32={success:dojo.hitch(this,function(dto){
if(this._context._isDestroyed){
return;
}
var _33=this._processAllValues(dto);
if(_33){
_31.callback(_33);
}else{
_31.errback(new Error(this.messages.msgErrorGetValues));
}
}),failure:dojo.hitch(this,function(_34){
if(this._context._isDestroyed){
return;
}
_6.logError(_34,this.id);
_6.logError(new Error(this.messages.msgErrorGetValues),this.id);
_31.errback(_34);
})};
var _35=new _4(_32,"success","failure");
this._callRESTGetAllValues(_35,_30);
return _31;
},_getTeamMembers:function(){
var _36=new dojo.Deferred();
var _37={success:dojo.hitch(this,function(dto){
if(this._context._isDestroyed){
return;
}
var _38=this._processTeamMembers(dto);
if(_38){
_36.callback(_38);
}else{
_36.errback(new Error(this.messages.msgErrorGetValues));
}
}),failure:dojo.hitch(this,function(_39){
if(this._context._isDestroyed){
return;
}
_6.logError(_39,this.id);
_6.logError(new Error(this.messages.msgErrorGetValues),this.id);
_36.errback(_39);
})};
var _3a=new _4(_37,"success","failure");
this._callRESTGetTeamMembers(_3a);
return _36;
},_processAllValues:function(dto){
if(!(dto instanceof Array)){
_6.logError(new Error("Invalid DTO encountered"),this.id);
return null;
}else{
if(dto.length===0){
_6.logError(new Error("Invalid DTO encountered"),this.id);
return null;
}
}
var _3b=dto[0];
if(!_3b){
_6.logError(new Error("Invalid DTO encountered"),this.id);
return null;
}
var _3c=_3b.uiItems;
if(!(_3c instanceof Array)){
return {colourModel:{},parameterOrder:[]};
}
var _3d;
if(this._model){
_3d=dojo.fromJson(this._model);
}
var _3e=_5.getInternalId(this._parameterID);
var _3f={};
var _40=[];
for(var _41=0;_41<_3c.length;_41++){
var _42=_3c[_41];
if(!_42){
_6.logError(new Error("Expected DTO item is missing"),this.id);
continue;
}
var id=_42.id;
if(!id){
id=_8;
}
var _43=_42.label;
if(!_43){
_6.logError(new Error("DTO item missing label: "+id),this.id);
_43=this.messages.msgUndefined;
}
_40.push(id);
_3f[id]={label:_43};
if(_3d&&_3d.hasOwnProperty(id)&&_3d[id].hasOwnProperty("colour")){
_3f[id].colour=_3d[id].colour;
continue;
}
var _44=this._getPredefinedColour(_3e,_42.iconUrl);
if(_44){
_3f[id].colour=_44;
}
}
return {colourModel:_3f,parameterOrder:_40};
},_processTeamMembers:function(dto){
if(!(dto instanceof Array)){
_6.logError(new Error("Invalid DTO encountered"),this.id);
return null;
}else{
if(dto.length===0){
return {colourModel:{},parameterOrder:[]};
}
}
var _45;
if(this._model){
_45=dojo.fromJson(this._model);
}
var _46=_5.getInternalId(this._parameterID);
var _47={};
var _48=[];
for(var _49=0;_49<dto.length;_49++){
var _4a=dto[_49];
if(!_4a){
_6.logError(new Error("Expected DTO user is missing"),this.id);
continue;
}
var id=_4a.itemId;
if(!id){
_6.logError(new Error("DTO user missing itemId: "+id),this.id);
continue;
}
var _4b=_4a.name;
if(!_4b){
_6.logError(new Error("DTO user missing name: "+id),this.id);
continue;
}
_48.push(id);
_47[id]={label:_4b};
if(_45&&_45.hasOwnProperty(id)&&_45[id].hasOwnProperty("colour")){
_47[id].colour=_45[id].colour;
}
}
return {colourModel:_47,parameterOrder:_48};
},_getPredefinedColour:function(_4c,_4d){
if(!_4d){
return null;
}else{
if(_4c===_5.SEVERITY){
var _4e=/unassign/;
var _4f=/minor/;
var _50=/normal/;
var _51=/major/;
var _52=/critical/;
var _53=/blocker/;
if(_53.test(_4d)){
return "#b36b6b";
}else{
if(_52.test(_4d)){
return "#df7f7f";
}else{
if(_51.test(_4d)){
return "#ffcccc";
}else{
if(_50.test(_4d)){
return "#e5dab8";
}else{
if(_4f.test(_4d)){
return "#ffffde";
}else{
if(_4e.test(_4d)){
return "#f0f0f0";
}
}
}
}
}
}
}else{
if(_4c===_5.PRIORITY){
var _54=/unassign/;
var _55=/low/;
var _56=/medium/;
var _57=/high/;
if(_54.test(_4d)){
return "#f0f0f0";
}else{
if(_55.test(_4d)){
return "#c4dcf5";
}else{
if(_56.test(_4d)){
return "#faeabb";
}else{
if(_57.test(_4d)){
return "#ffbfbf";
}
}
}
}
}else{
if(_4c===_5.TYPE){
var _58=/bug/;
var _59=/enhanc/;
var _5a=/task/;
var _5b=/rfs/;
var _5c=/retrospect/;
var _5d=/planitem/;
var _5e=/build/;
var _5f=/story/;
var _60=/imped/;
var _61=/adoption/;
if(_58.test(_4d)){
return "#cecef2";
}else{
if(_59.test(_4d)){
return "#e5f7d2";
}else{
if(_5a.test(_4d)){
return "#bdf5bc";
}else{
if(_5b.test(_4d)){
return "#cca3a3";
}else{
if(_5c.test(_4d)){
return "#ffbfbf";
}else{
if(_5d.test(_4d)){
return "#d9c3ad";
}else{
if(_5e.test(_4d)){
return "#cffafa";
}else{
if(_5f.test(_4d)){
return "#e5e5a1";
}else{
if(_60.test(_4d)){
return "#d3d3de";
}else{
if(_61.test(_4d)){
return "#ffcc99";
}
}
}
}
}
}
}
}
}
}
}
}
}
}
return null;
},_getProjectAreaItemID:function(){
return this._context._getProjectAreaItemID(this._queryCategory);
},_callRESTGetAllValues:function(_62,_63){
var _64={projectAreaItemId:this._getProjectAreaItemID(),newWorkItem:true,ids:[_63],ignoreDependencies:true,includeArchived:false};
_3.getAllValues(_62,_64);
},_callRESTGetTeamMembers:function(_65){
var _66={projectAreaItemId:this._getProjectAreaItemID()};
_3.getTeamMembers(_65,_66);
},destroy:function(){
if(this._dialog){
this._dialog.destroy();
delete this._dialog;
}
this.inherited(arguments);
}});
})();


;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.QueryClient2");




(function(){
var _1=com.ibm.team.workitem.web.client.internal.QueryClient;
com.ibm.team.workitem.viewlets.web.ui.internal.QueryClient2={getQuery2:function(_2,_3){
return _1.getQuery2(_2,_3);
},getHistogram:function(_4,_5){
return this._invoke(_1.getHistogram,arguments,_5.skipOAuth,_4);
},getResultSet:function(_6,_7,_8){
return this._invoke(_1.getResultSet,arguments,_7.skipOAuth,_8);
},_invoke:function(_9,_a,_b,_c){
var _d=jazz.client.xhr;
try{
if(_b){
jazz.client.xhr=function(_e,_f){
_f.skipInterceptors=["jazz.oauth"];
var _10=_d.apply(this,arguments);
_c.xhr=_10.ioArgs.xhr;
return _10;
};
}
return _9.apply(_1,_a);
}
finally{
if(_b){
jazz.client.xhr=_d;
}
}
}};
})();


;dojo.provide("com.ibm.team.workitem.web.ui.internal.view.query.QueryResultProblemInfo");






dojo.requireLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
(function(){
var _1=dojo.i18n.getLocalization("com.ibm.team.workitem.web.ui.internal.view.query","Messages");
var _2=dijit._Widget;
var _3=jazz.ui.MessageBox;
var _4=dojo.declare("com.ibm.team.workitem.web.ui.internal.view.query.QueryResultProblemInfo",_2,{constructor:function(_5){
},postCreate:function(){
var _6=[];
for(var i=0;i<this.problems.length;i++){
var _7={message:this.problems[i].message};
_6.push(_7);
}
var _8={};
_8.summary=_1.QueryResultProblemInfo_PROBLEM_MESSAGE;
_8.details=_6;
_8.type="WARNING";
var _9=new _3();
_9.showMessage(_8);
this.domNode.appendChild(_9.domNode);
}});
_4.getProblemInfoWidget=function(_a){
if(_a!=null&&_a.length>0){
var _b={};
_b.problems=_a;
return new _4(_b);
}
return null;
};
})();


;dojo.provide("com.ibm.team.dashboard.web.ui.internal.util.Observable");
(function(){
dojo.declare("com.ibm.team.dashboard.web.ui.internal.util.Observable",null,{addListener:function(_1,_2){
if(!this._callbacksByProperty){
this._callbacksByProperty=new Object();
}
var _3=this._callbacksByProperty[_2];
if(!_3){
_3=new Array();
this._callbacksByProperty[_2]=_3;
}
_3.push(_1);
},removeListener:function(_4,_5){
if(this._callbacksByProperty){
var _6=this._callbacksByProperty[_5];
if(_6){
for(var i=0;i<_6.length;i++){
if(_6[i]===_4){
_6.splice(i,1);
break;
}
}
}
}
},propertyChanged:function(_7,_8){
if(this._callbacksByProperty){
var _9=this._callbacksByProperty[_7];
if(_9){
for(var i=0;i<_9.length;i++){
_9[i](_7,_8);
}
}
}
}});
})();


;define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/has","../registry"],function(_1,_2,_3,_4){
var _5=_1("dijit.form._ButtonMixin"+(_3("dojo-bidi")?"_NoBidi":""),null,{label:"",type:"button",__onClick:function(e){
e.stopPropagation();
e.preventDefault();
if(!this.disabled){
this.valueNode.click(e);
}
return false;
},_onClick:function(e){
if(this.disabled){
e.stopPropagation();
e.preventDefault();
return false;
}
if(this.onClick(e)===false){
e.preventDefault();
}
var _6=e.defaultPrevented;
if(!_6&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){
for(var _7=this.domNode;_7.parentNode;_7=_7.parentNode){
var _8=_4.byNode(_7);
if(_8&&typeof _8._onSubmit=="function"){
_8._onSubmit(e);
e.preventDefault();
_6=true;
break;
}
}
}
return !_6;
},postCreate:function(){
this.inherited(arguments);
_2.setSelectable(this.focusNode,false);
},onClick:function(){
return true;
},_setLabelAttr:function(_9){
this._set("label",_9);
var _a=this.containerNode||this.focusNode;
_a.innerHTML=_9;
this.onLabelSet();
},onLabelSet:function(){
}});
if(_3("dojo-bidi")){
_5=_1("dijit.form._ButtonMixin",_5,{onLabelSet:function(){
this.inherited(arguments);
var _b=this.containerNode||this.focusNode;
this.applyTextDir(_b);
}});
}
return _5;
});


;define("dojo/text!dijit/form/templates/Button.html", '<span class="dijit dijitReset dijitInline" role="presentation"	><span class="dijitReset dijitInline dijitButtonNode"		data-dojo-attach-event="ondijitclick:__onClick" role="presentation"		><span class="dijitReset dijitStretch dijitButtonContents"			data-dojo-attach-point="titleNode,focusNode"			role="button" aria-labelledby="${id}_label"			><span class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode"></span			><span class="dijitReset dijitToggleButtonIconChar">&#x25CF;</span			><span class="dijitReset dijitInline dijitButtonText"				id="${id}_label"				data-dojo-attach-point="containerNode"			></span		></span	></span	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen"		data-dojo-attach-event="onclick:_onClick"		tabIndex="-1" aria-hidden="true" data-dojo-attach-point="valueNode"/></span>');

;define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html","../a11yclick","jazz/inverted!./DropDownButton","jazz/inverted!./ComboButton","jazz/inverted!./ToggleButton"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){
var _b=_2("dijit.form.Button"+(_4("dojo-bidi")?"_NoBidi":""),[_8,_9],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_a,_setValueAttr:"valueNode",_setNameAttr:function(_c){
if(this.valueNode){
this.valueNode.setAttribute("name",_c);
}
},postCreate:function(){
this.inherited(arguments);
this._setLabelFromContainer();
},_setLabelFromContainer:function(){
if(this.containerNode&&!this.label){
this.label=_6.trim(this.containerNode.innerHTML);
this.onLabelSet();
}
},_setShowLabelAttr:function(_d){
if(this.containerNode){
_3.toggle(this.containerNode,"dijitDisplayNone",!_d);
}
this._set("showLabel",_d);
},setLabel:function(_e){
_5.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");
this.set("label",_e);
},onLabelSet:function(){
this.inherited(arguments);
if(!this.showLabel&&!("title" in this.params)){
this.titleNode.title=_6.trim(this.containerNode.innerText||this.containerNode.textContent||"");
}
}});
if(_4("dojo-bidi")){
_b=_2("dijit.form.Button",_b,{onLabelSet:function(){
this.inherited(arguments);
if(this.titleNode.title){
this.applyTextDir(this.titleNode,this.titleNode.title);
}
},_setTextDirAttr:function(_f){
if(this._created&&this.textDir!=_f){
this._set("textDir",_f);
this._setLabelAttr(this.label);
}
}});
}
return _b;
});


;define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/touch","./registry","./focus","./popup","./_FocusMixin"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,on,_b,_c,_d,_e,_f){
return _1("dijit._HasDropDown",_f,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:-1,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){
if(this.disabled||this.readOnly){
return;
}
if(e.type!="MSPointerDown"){
e.preventDefault();
}
this.own(on.once(this.ownerDocument,_b.release,_a.hitch(this,"_onDropDownMouseUp")));
this.toggleDropDown();
},_onDropDownMouseUp:function(e){
var _10=this.dropDown,_11=false;
if(e&&this._opened){
var c=_6.position(this._buttonNode,true);
if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){
var t=e.target;
while(t&&!_11){
if(_5.contains(t,"dijitPopup")){
_11=true;
}else{
t=t.parentNode;
}
}
if(_11){
t=e.target;
if(_10.onItemClick){
var _12;
while(t&&!(_12=_c.byNode(t))){
t=t.parentNode;
}
if(_12&&_12.onClick&&_12.getParent){
_12.getParent().onItemClick(_12,e);
}
}
return;
}
}
}
if(this._opened){
if(_10.focus&&(_10.autoFocus!==false||(e.type=="mouseup"&&!this.hovering))){
this._focusDropDownTimer=this.defer(function(){
_10.focus();
delete this._focusDropDownTimer;
});
}
}else{
if(this.focus){
this.defer("focus");
}
}
},_onDropDownClick:function(e){
if(this._stopClickEvents){
e.stopPropagation();
e.preventDefault();
}
},buildRendering:function(){
this.inherited(arguments);
this._buttonNode=this._buttonNode||this.focusNode||this.domNode;
this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;
var _13={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";
_5.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_13+"ArrowButton");
},postCreate:function(){
this.inherited(arguments);
var _14=this.focusNode||this.domNode;
this.own(on(this._buttonNode,_b.press,_a.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",_a.hitch(this,"_onDropDownClick")),on(_14,"keydown",_a.hitch(this,"_onKey")),on(_14,"keyup",_a.hitch(this,"_onKeyUp")));
},destroy:function(){
if(this._opened){
this.closeDropDown(true);
}
if(this.dropDown){
if(!this.dropDown._destroyed){
this.dropDown.destroyRecursive();
}
delete this.dropDown;
}
this.inherited(arguments);
},_onKey:function(e){
if(this.disabled||this.readOnly){
return;
}
var d=this.dropDown,_15=e.target;
if(d&&this._opened&&d.handleKey){
if(d.handleKey(e)===false){
e.stopPropagation();
e.preventDefault();
return;
}
}
if(d&&this._opened&&e.keyCode==_9.ESCAPE){
this.closeDropDown();
e.stopPropagation();
e.preventDefault();
}else{
if(!this._opened&&(e.keyCode==_9.DOWN_ARROW||((e.keyCode==_9.ENTER||(e.keyCode==_9.SPACE&&(!this._searchTimer||(e.ctrlKey||e.altKey||e.metaKey))))&&((_15.tagName||"").toLowerCase()!=="input"||(_15.type&&_15.type.toLowerCase()!=="text"))))){
this._toggleOnKeyUp=true;
e.stopPropagation();
e.preventDefault();
}
}
},_onKeyUp:function(){
if(this._toggleOnKeyUp){
delete this._toggleOnKeyUp;
this.toggleDropDown();
var d=this.dropDown;
if(d&&d.focus){
this.defer(_a.hitch(d,"focus"),1);
}
}
},_onBlur:function(){
this.closeDropDown(false);
this.inherited(arguments);
},isLoaded:function(){
return true;
},loadDropDown:function(_16){
_16();
},loadAndOpenDropDown:function(){
var d=new _2(),_17=_a.hitch(this,function(){
this.openDropDown();
d.resolve(this.dropDown);
});
if(!this.isLoaded()){
this.loadDropDown(_17);
}else{
_17();
}
return d;
},toggleDropDown:function(){
if(this.disabled||this.readOnly){
return;
}
if(!this._opened){
this.loadAndOpenDropDown();
}else{
this.closeDropDown(true);
}
},openDropDown:function(){
var _18=this.dropDown,_19=_18.domNode,_1a=this._aroundNode||this.domNode,_1b=this;
var _1c=_e.open({parent:this,popup:_18,around:_1a,orient:this.dropDownPosition,maxHeight:this.maxHeight,onExecute:function(){
_1b.closeDropDown(true);
},onCancel:function(){
_1b.closeDropDown(true);
},onClose:function(){
_4.set(_1b._popupStateNode,"popupActive",false);
_5.remove(_1b._popupStateNode,"dijitHasDropDownOpen");
_1b._set("_opened",false);
}});
if(this.forceWidth||(this.autoWidth&&_1a.offsetWidth>_18._popupWrapper.offsetWidth)){
var _1d=_1a.offsetWidth-_18._popupWrapper.offsetWidth;
var _1e={w:_18.domNode.offsetWidth+_1d};
this._origStyle=_19.style.cssText;
if(_a.isFunction(_18.resize)){
_18.resize(_1e);
}else{
_6.setMarginBox(_19,_1e);
}
if(_1c.corner[1]=="R"){
_18._popupWrapper.style.left=(_18._popupWrapper.style.left.replace("px","")-_1d)+"px";
}
}
_4.set(this._popupStateNode,"popupActive","true");
_5.add(this._popupStateNode,"dijitHasDropDownOpen");
this._set("_opened",true);
this._popupStateNode.setAttribute("aria-expanded","true");
this._popupStateNode.setAttribute("aria-owns",_18.id);
if(_19.getAttribute("role")!=="presentation"&&!_19.getAttribute("aria-labelledby")){
_19.setAttribute("aria-labelledby",this.id);
}
return _1c;
},closeDropDown:function(_1f){
if(this._focusDropDownTimer){
this._focusDropDownTimer.remove();
delete this._focusDropDownTimer;
}
if(this._opened){
this._popupStateNode.setAttribute("aria-expanded","false");
if(_1f&&this.focus){
this.focus();
}
_e.close(this.dropDown);
this._opened=false;
}
if(this._origStyle){
this.dropDown.domNode.style.cssText=this._origStyle;
delete this._origStyle;
}
}});
});


;define("dojo/text!dijit/form/templates/DropDownButton.html", '<span class="dijit dijitReset dijitInline"	><span class=\'dijitReset dijitInline dijitButtonNode\'		data-dojo-attach-event="ondijitclick:__onClick" data-dojo-attach-point="_buttonNode"		><span class="dijitReset dijitStretch dijitButtonContents"			data-dojo-attach-point="focusNode,titleNode,_arrowWrapperNode,_popupStateNode"			role="button" aria-haspopup="true" aria-labelledby="${id}_label"			><span class="dijitReset dijitInline dijitIcon"				data-dojo-attach-point="iconNode"			></span			><span class="dijitReset dijitInline dijitButtonText"				data-dojo-attach-point="containerNode"				id="${id}_label"			></span			><span class="dijitReset dijitInline dijitArrowButtonInner"></span			><span class="dijitReset dijitInline dijitArrowButtonChar">&#9660;</span		></span	></span	><input ${!nameAttrSetting} type="${type}" value="${value}" class="dijitOffScreen" tabIndex="-1"		data-dojo-attach-event="onclick:_onClick" data-dojo-attach-point="valueNode" aria-hidden="true"/></span>');

;define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html","../a11yclick"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a){
return _1("dijit.form.DropDownButton",[_7,_8,_9],{baseClass:"dijitDropDownButton",templateString:_a,_fillContent:function(){
var _b=this.srcNodeRef;
var _c=this.containerNode;
if(_b&&_c){
while(_b.hasChildNodes()){
var _d=_b.firstChild;
if(_d.hasAttribute&&(_d.hasAttribute("data-dojo-type")||_d.hasAttribute("dojoType")||_d.hasAttribute("data-"+_2._scopeName+"-type")||_d.hasAttribute(_2._scopeName+"Type"))){
this.dropDownContainer=this.ownerDocument.createElement("div");
this.dropDownContainer.appendChild(_d);
}else{
_c.appendChild(_d);
}
}
}
},startup:function(){
if(this._started){
return;
}
if(!this.dropDown&&this.dropDownContainer){
this.dropDown=_5.byNode(this.dropDownContainer.firstChild);
delete this.dropDownContainer;
}
if(this.dropDown){
_6.hide(this.dropDown);
}
this.inherited(arguments);
},isLoaded:function(){
var _e=this.dropDown;
return (!!_e&&(!_e.href||_e.isLoaded));
},loadDropDown:function(_f){
var _10=this.dropDown;
var _11=_10.on("load",_3.hitch(this,function(){
_11.remove();
_f();
}));
_10.refresh();
},isFocusable:function(){
return this.inherited(arguments)&&!this._mouseDown;
}});
});


;define("dojo/text!dijit/form/templates/ComboButton.html", '<table class="dijit dijitReset dijitInline dijitLeft"	cellspacing=\'0\' cellpadding=\'0\' role="presentation"	><tbody role="presentation"><tr role="presentation"		><td class="dijitReset dijitStretch dijitButtonNode" data-dojo-attach-point="buttonNode" data-dojo-attach-event="ondijitclick:__onClick,onkeydown:_onButtonKeyDown"		><div id="${id}_button" class="dijitReset dijitButtonContents"			data-dojo-attach-point="titleNode"			role="button" aria-labelledby="${id}_label"			><div class="dijitReset dijitInline dijitIcon" data-dojo-attach-point="iconNode" role="presentation"></div			><div class="dijitReset dijitInline dijitButtonText" id="${id}_label" data-dojo-attach-point="containerNode" role="presentation"></div		></div		></td		><td id="${id}_arrow" class=\'dijitReset dijitRight dijitButtonNode dijitArrowButton\'			data-dojo-attach-point="_popupStateNode,focusNode,_buttonNode"			data-dojo-attach-event="onkeydown:_onArrowKeyDown"			title="${optionsTitle}"			role="button" aria-haspopup="true"			><div class="dijitReset dijitArrowButtonInner" role="presentation"></div			><div class="dijitReset dijitArrowButtonChar" role="presentation">&#9660;</div		></td		><td style="display:none !important;"			><input ${!nameAttrSetting} type="${type}" value="${value}" data-dojo-attach-point="valueNode"				class="dijitOffScreen" aria-hidden="true" data-dojo-attach-event="onclick:_onClick"		/></td></tr></tbody></table>');

;define("dijit/form/ComboButton",["dojo/_base/declare","dojo/keys","../focus","./DropDownButton","dojo/text!./templates/ComboButton.html","../a11yclick"],function(_1,_2,_3,_4,_5){
return _1("dijit.form.ComboButton",_4,{templateString:_5,_setIdAttr:"",_setTabIndexAttr:["focusNode","titleNode"],_setTitleAttr:"titleNode",optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyDown:function(_6){
if(_6.keyCode==_2[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){
_3.focus(this._popupStateNode);
_6.stopPropagation();
_6.preventDefault();
}
},_onArrowKeyDown:function(_7){
if(_7.keyCode==_2[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){
_3.focus(this.titleNode);
_7.stopPropagation();
_7.preventDefault();
}
},focus:function(_8){
if(!this.disabled){
_3.focus(_8=="start"?this.titleNode:this._popupStateNode);
}
}});
});


;define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_1,_2){
return _1("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(_3){
var _4=this.checked;
this._set("checked",!_4);
var _5=this.inherited(arguments);
this.set("checked",_5?this.checked:_4);
return _5;
},_setCheckedAttr:function(_6,_7){
this._set("checked",_6);
var _8=this.focusNode||this.domNode;
if(this._created){
if(_2.get(_8,"checked")!=!!_6){
_2.set(_8,"checked",!!_6);
}
}
_8.setAttribute(this._aria_attr,String(_6));
this._handleOnChange(_6,_7);
},postCreate:function(){
this.inherited(arguments);
var _9=this.focusNode||this.domNode;
if(this.checked){
_9.setAttribute("checked","checked");
}
if(this._resetValue===undefined){
this._lastValueReported=this._resetValue=this.checked;
}
},reset:function(){
this._hasBeenBlurred=false;
this.set("checked",this.params.checked||false);
}});
});


;define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_1,_2,_3,_4){
return _1("dijit.form.ToggleButton",[_3,_4],{baseClass:"dijitToggleButton",setChecked:function(_5){
_2.deprecated("setChecked("+_5+") is deprecated. Use set('checked',"+_5+") instead.","","2.0");
this.set("checked",_5);
}});
});


;define("dojo/text!dijit/form/templates/HorizontalSlider.html", '<table class="dijit dijitReset dijitSlider dijitSliderH" cellspacing="0" cellpadding="0" border="0" rules="none" data-dojo-attach-event="onkeydown:_onKeyDown, onkeyup:_onKeyUp"	role="presentation"	><tr class="dijitReset"		><td class="dijitReset" colspan="2"></td		><td data-dojo-attach-point="topDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationT dijitSliderDecorationH"></td		><td class="dijitReset" colspan="2"></td	></tr	><tr class="dijitReset"		><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"			><div class="dijitSliderDecrementIconH" style="display:none" data-dojo-attach-point="decrementButton"><span class="dijitSliderButtonInner">-</span></div		></td		><td class="dijitReset"			><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderLeftBumper" data-dojo-attach-event="press:_onClkDecBumper"></div		></td		><td class="dijitReset"			><input data-dojo-attach-point="valueNode" type="hidden" ${!nameAttrSetting}			/><div class="dijitReset dijitSliderBarContainerH" role="presentation" data-dojo-attach-point="sliderBarContainer"				><div role="presentation" data-dojo-attach-point="progressBar" class="dijitSliderBar dijitSliderBarH dijitSliderProgressBar dijitSliderProgressBarH" data-dojo-attach-event="press:_onBarClick"					><div class="dijitSliderMoveable dijitSliderMoveableH"						><div data-dojo-attach-point="sliderHandle,focusNode" class="dijitSliderImageHandle dijitSliderImageHandleH" data-dojo-attach-event="press:_onHandleClick" role="slider"></div					></div				></div				><div role="presentation" data-dojo-attach-point="remainingBar" class="dijitSliderBar dijitSliderBarH dijitSliderRemainingBar dijitSliderRemainingBarH" data-dojo-attach-event="press:_onBarClick"></div			></div		></td		><td class="dijitReset"			><div class="dijitSliderBar dijitSliderBumper dijitSliderBumperH dijitSliderRightBumper" data-dojo-attach-event="press:_onClkIncBumper"></div		></td		><td class="dijitReset dijitSliderButtonContainer dijitSliderButtonContainerH"			><div class="dijitSliderIncrementIconH" style="display:none" data-dojo-attach-point="incrementButton"><span class="dijitSliderButtonInner">+</span></div		></td	></tr	><tr class="dijitReset"		><td class="dijitReset" colspan="2"></td		><td data-dojo-attach-point="containerNode,bottomDecoration" class="dijitReset dijitSliderDecoration dijitSliderDecorationB dijitSliderDecorationH"></td		><td class="dijitReset" colspan="2"></td	></tr></table>');

;define("dijit/form/HorizontalSlider",["dojo/_base/array","dojo/_base/declare","dojo/dnd/move","dojo/_base/fx","dojo/dom-geometry","dojo/dom-style","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/dnd/Moveable","dojo/dnd/Mover","dojo/query","dojo/mouse","dojo/on","../_base/manager","../focus","../typematic","./Button","./_FormValueWidget","../_Container","dojo/text!./templates/HorizontalSlider.html"],function(_1,_2,_3,fx,_4,_5,_6,_7,_8,_9,_a,_b,_c,on,_d,_e,_f,_10,_11,_12,_13){
var _14=_2("dijit.form._SliderMover",_a,{onMouseMove:function(e){
var _15=this.widget;
var _16=_15._abspos;
if(!_16){
_16=_15._abspos=_4.position(_15.sliderBarContainer,true);
_15._setPixelValue_=_7.hitch(_15,"_setPixelValue");
_15._isReversed_=_15._isReversed();
}
var _17=e[_15._mousePixelCoord]-_16[_15._startingPixelCoord];
_15._setPixelValue_(_15._isReversed_?(_16[_15._pixelCount]-_17):_17,_16[_15._pixelCount],false);
},destroy:function(e){
_a.prototype.destroy.apply(this,arguments);
var _18=this.widget;
_18._abspos=null;
_18._setValueAttr(_18.value,true);
}});
var _19=_2("dijit.form.HorizontalSlider",[_11,_12],{templateString:_13,value:0,showButtons:true,minimum:0,maximum:100,discreteValues:Infinity,pageIncrement:2,clickSelect:true,slideDuration:_d.defaultDuration,_setIdAttr:"",_setNameAttr:"valueNode",baseClass:"dijitSlider",cssStateNodes:{incrementButton:"dijitSliderIncrementButton",decrementButton:"dijitSliderDecrementButton",focusNode:"dijitSliderThumb"},_mousePixelCoord:"pageX",_pixelCount:"w",_startingPixelCoord:"x",_handleOffsetCoord:"left",_progressPixelSize:"width",_onKeyUp:function(e){
if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){
return;
}
this._setValueAttr(this.value,true);
},_onKeyDown:function(e){
if(this.disabled||this.readOnly||e.altKey||e.ctrlKey||e.metaKey){
return;
}
switch(e.keyCode){
case _6.HOME:
this._setValueAttr(this.minimum,false);
break;
case _6.END:
this._setValueAttr(this.maximum,false);
break;
case ((this._descending||this.isLeftToRight())?_6.RIGHT_ARROW:_6.LEFT_ARROW):
case (this._descending===false?_6.DOWN_ARROW:_6.UP_ARROW):
case (this._descending===false?_6.PAGE_DOWN:_6.PAGE_UP):
this.increment(e);
break;
case ((this._descending||this.isLeftToRight())?_6.LEFT_ARROW:_6.RIGHT_ARROW):
case (this._descending===false?_6.UP_ARROW:_6.DOWN_ARROW):
case (this._descending===false?_6.PAGE_UP:_6.PAGE_DOWN):
this.decrement(e);
break;
default:
return;
}
e.stopPropagation();
e.preventDefault();
},_onHandleClick:function(e){
if(this.disabled||this.readOnly){
return;
}
if(!_8("ie")){
_e.focus(this.sliderHandle);
}
e.stopPropagation();
e.preventDefault();
},_isReversed:function(){
return !this.isLeftToRight();
},_onBarClick:function(e){
if(this.disabled||this.readOnly||!this.clickSelect){
return;
}
_e.focus(this.sliderHandle);
e.stopPropagation();
e.preventDefault();
var _1a=_4.position(this.sliderBarContainer,true);
var _1b=e[this._mousePixelCoord]-_1a[this._startingPixelCoord];
this._setPixelValue(this._isReversed()?(_1a[this._pixelCount]-_1b):_1b,_1a[this._pixelCount],true);
this._movable.onMouseDown(e);
},_setPixelValue:function(_1c,_1d,_1e){
if(this.disabled||this.readOnly){
return;
}
var _1f=this.discreteValues;
if(_1f<=1||_1f==Infinity){
_1f=_1d;
}
_1f--;
var _20=_1d/_1f;
var _21=Math.round(_1c/_20);
this._setValueAttr(Math.max(Math.min((this.maximum-this.minimum)*_21/_1f+this.minimum,this.maximum),this.minimum),_1e);
},_setValueAttr:function(_22,_23){
this._set("value",_22);
this.valueNode.value=_22;
this.focusNode.setAttribute("aria-valuenow",_22);
this.inherited(arguments);
var _24=this.maximum>this.minimum?((_22-this.minimum)/(this.maximum-this.minimum)):0;
var _25=(this._descending===false)?this.remainingBar:this.progressBar;
var _26=(this._descending===false)?this.progressBar:this.remainingBar;
if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){
this._inProgressAnim.stop(true);
}
if(_23&&this.slideDuration>0&&_25.style[this._progressPixelSize]){
var _27=this;
var _28={};
var _29=parseFloat(_25.style[this._progressPixelSize]);
var _2a=this.slideDuration*(_24-_29/100);
if(_2a==0){
return;
}
if(_2a<0){
_2a=0-_2a;
}
_28[this._progressPixelSize]={start:_29,end:_24*100,units:"%"};
this._inProgressAnim=fx.animateProperty({node:_25,duration:_2a,onAnimate:function(v){
_26.style[_27._progressPixelSize]=(100-parseFloat(v[_27._progressPixelSize]))+"%";
},onEnd:function(){
delete _27._inProgressAnim;
},properties:_28});
this._inProgressAnim.play();
}else{
_25.style[this._progressPixelSize]=(_24*100)+"%";
_26.style[this._progressPixelSize]=((1-_24)*100)+"%";
}
},_bumpValue:function(_2b,_2c){
if(this.disabled||this.readOnly||(this.maximum<=this.minimum)){
return;
}
var s=_5.getComputedStyle(this.sliderBarContainer);
var c=_4.getContentBox(this.sliderBarContainer,s);
var _2d=this.discreteValues;
if(_2d<=1||_2d==Infinity){
_2d=c[this._pixelCount];
}
_2d--;
var _2e=Math.round((this.value-this.minimum)*_2d/(this.maximum-this.minimum))+_2b;
if(_2e<0){
_2e=0;
}
if(_2e>_2d){
_2e=_2d;
}
_2e=_2e*(this.maximum-this.minimum)/_2d+this.minimum;
this._setValueAttr(_2e,_2c);
},_onClkBumper:function(val){
if(this.disabled||this.readOnly||!this.clickSelect){
return;
}
this._setValueAttr(val,true);
},_onClkIncBumper:function(){
this._onClkBumper(this._descending===false?this.minimum:this.maximum);
},_onClkDecBumper:function(){
this._onClkBumper(this._descending===false?this.maximum:this.minimum);
},decrement:function(e){
this._bumpValue(e.keyCode==_6.PAGE_DOWN?-this.pageIncrement:-1);
},increment:function(e){
this._bumpValue(e.keyCode==_6.PAGE_UP?this.pageIncrement:1);
},_mouseWheeled:function(evt){
if(!this.focused){
return;
}
evt.stopPropagation();
evt.preventDefault();
this._bumpValue(evt.wheelDelta<0?-1:1,true);
},startup:function(){
if(this._started){
return;
}
_1.forEach(this.getChildren(),function(_2f){
if(this[_2f.container]!=this.containerNode){
this[_2f.container].appendChild(_2f.domNode);
}
},this);
this.inherited(arguments);
},_typematicCallback:function(_30,_31,e){
if(_30==-1){
this._setValueAttr(this.value,true);
}else{
this[(_31==(this._descending?this.incrementButton:this.decrementButton))?"decrement":"increment"](e);
}
},buildRendering:function(){
this.inherited(arguments);
if(this.showButtons){
this.incrementButton.style.display="";
this.decrementButton.style.display="";
}
var _32=_b("label[for=\""+this.id+"\"]");
if(_32.length){
if(!_32[0].id){
_32[0].id=this.id+"_label";
}
this.focusNode.setAttribute("aria-labelledby",_32[0].id);
}
this.focusNode.setAttribute("aria-valuemin",this.minimum);
this.focusNode.setAttribute("aria-valuemax",this.maximum);
},postCreate:function(){
this.inherited(arguments);
if(this.showButtons){
this.own(_f.addMouseListener(this.decrementButton,this,"_typematicCallback",25,500),_f.addMouseListener(this.incrementButton,this,"_typematicCallback",25,500));
}
this.own(on(this.domNode,_c.wheel,_7.hitch(this,"_mouseWheeled")));
var _33=_2(_14,{widget:this});
this._movable=new _9(this.sliderHandle,{mover:_33});
this._layoutHackIE7();
},destroy:function(){
this._movable.destroy();
if(this._inProgressAnim&&this._inProgressAnim.status!="stopped"){
this._inProgressAnim.stop(true);
}
this.inherited(arguments);
}});
_19._Mover=_14;
return _19;
});

dojo.provide("jazz.ui.nls.TagCloudMessages")._built=true;
dojo.provide("jazz.ui.nls.TagCloudMessages.en_us");
jazz.ui.nls.TagCloudMessages.en_us={"msgLess":"Less","msgMore":"More"};

;dojo.cache("jazz.ui", "templates/TagCloud.html", "<div class=\"jazz-ui-TagCloud\">	<div class=\"control-area\" dojoAttachPoint=\"_controlArea\">		<div class=\"hrule-label-less\">${msgLess}</div>		<div class=\"hrule-label-more\">${msgMore}</div>		<div dojoAttachPoint=\"_tagFilterControl\"></div>	</div>	<div class=\"tag-area\" dojoAttachPoint=\"_tagArea\"></div></div>");

;dojo.provide("jazz.ui.TagCloud");








dojo.requireLocalization("jazz.ui","TagCloudMessages");
(function(){
var _1=dijit.form.HorizontalSlider;
dojo.declare("jazz.ui.TagCloud",[dijit._Widget,dijit._Templated],{tags:null,viewableTagLimit:30,showFrequencies:false,hrefProvider:null,onTagClick:null,maxTagFontSize:26,minTagFontSize:12,defaultTagFontSize:12,templatePath:dojo.moduleUrl("jazz.ui","templates/TagCloud.html"),_static:function(){
},constructor:function(_2){
this.messages=dojo.i18n.getLocalization("jazz.ui","TagCloudMessages");
this.msgLess=this.messages.msgLess;
this.msgMore=this.messages.msgMore;
},postCreate:function(){
this.inherited(arguments);
if(this._validateProperties()===false){
this._logError(new Error("Specified widget properties are invalid."));
return;
}
this._initializeStaticVariables();
this._initializeInstanceVariables();
this._initializeWidget();
},destroy:function(){
if(this._tagHandlersOnMouseOver){
this._destroyTagHandlers(this._tagHandlersOnMouseOver);
delete this._tagHandlersOnMouseOver;
this._tagHandlersOnMouseOver=null;
}
if(this._tagHandlersOnKeyUp){
this._destroyTagHandlers(this._tagHandlersOnKeyUp);
delete this._tagHandlersOnKeyUp;
this._tagHandlersOnKeyUp=null;
}
if(this._tagHandlersOnClick){
this._destroyTagHandlers(this._tagHandlersOnClick);
delete this._tagHandlersOnClick;
this._tagHandlersOnClick=null;
}
if(this._horizontalSlider){
this._horizontalSlider.destroy();
delete this._horizontalSlider;
this._horizontalSlider=null;
}
this.inherited(arguments);
},_destroyTagHandlers:function(_3){
for(var _4 in _3){
if(_3.hasOwnProperty(_4)){
var _5=_3[_4];
if(!_5){
continue;
}
this.disconnect(_5);
delete _3[_4];
}
}
},_initializeStaticVariables:function(){
if(this._static._instanceCount){
this._static._instanceCount++;
return;
}
this._static._instanceCount=1;
this._static._TAG_LINK_COLOURS=["#0096CD","#3087B3","#005C87"];
this._static._TAG_TEXT_COLOURS=["#999999","#666666","#333333"];
this._static._USE_DEFAULT=-1;
},_initializeInstanceVariables:function(){
this._tagsIndex={};
this._tagsSortedByName=this.tags;
this._tagsSortedByValue=dojo.clone(this.tags);
this._maxTagValue=Number.MIN_VALUE;
this._minTagValue=Number.MAX_VALUE;
this._fontSizeRatio=0;
this._colourBucketRange=Number.MAX_VALUE;
this._tagCount=this.tags.length;
this._tagElements={};
if(this.hrefProvider){
this._createTagLinks=true;
this._tagHandlersOnMouseOver={};
this._tagHandlersOnKeyUp={};
}else{
if(this.onTagClick){
this._createTagLinks=true;
this._tagHandlersOnClick={};
}else{
this._createTagLinks=false;
}
}
if(this._tagCount>this.viewableTagLimit){
this._filterValue=this.viewableTagLimit;
}else{
this._filterValue=this._tagCount;
}
this._tagDisplayMap={};
this._horizontalSlider=null;
this._isRTL=dojo.hasClass(document.documentElement,"dj_rtl");
},_initializeWidget:function(){
this._indexTags();
this._tagsSortedByName.sort(dojo.hitch(this,this._sortTagsByName));
this._tagsSortedByValue.sort(dojo.hitch(this,this._sortTagsByValue));
this._createTagDisplayMap();
this._calculateStatistics();
this._createControls();
this._createTagCloud();
},_indexTags:function(){
for(var _6=0;_6<this.tags.length;_6++){
var _7=this.tags[_6].name;
var _8=this.tags[_6].value;
this._tagsIndex[_7]=_8;
}
},_sortTagsByName:function(_9,_a){
var _b=_9.name.toLowerCase();
var _c=_a.name.toLowerCase();
if(_b<_c){
return -1;
}else{
if(_b>_c){
return 1;
}
}
return 0;
},_sortTagsByValue:function(_d,_e){
var _f=_d.value;
var _10=_e.value;
if(_f>_10){
return -1;
}else{
if(_f<_10){
return 1;
}
}
return 0;
},_createTagDisplayMap:function(){
var _11;
var _12;
if(this._tagCount>this.viewableTagLimit){
for(_11=0;_11<this.viewableTagLimit;_11++){
_12=this._tagsSortedByValue[_11].name;
this._tagDisplayMap[_12]=true;
}
for(_11=this.viewableTagLimit;_11<this._tagCount;_11++){
_12=this._tagsSortedByValue[_11].name;
this._tagDisplayMap[_12]=false;
}
}else{
for(_11=0;_11<this._tagCount;_11++){
_12=this._tagsSortedByValue[_11].name;
this._tagDisplayMap[_12]=true;
}
}
},_validateProperties:function(){
if((this.tags instanceof Array)===false){
return false;
}else{
if(this.tags.length===0){
return false;
}
}
return true;
},_getTagColours:function(){
if(this._createTagLinks){
return this._static._TAG_LINK_COLOURS;
}
return this._static._TAG_TEXT_COLOURS;
},_calculateTagColour:function(_13){
var _14=this._getTagColours();
var _15=_14.length-1;
var _16;
if(this._colourBucketRange>0){
var _17=_13-this._minTagValue;
_16=Math.floor(_17/this._colourBucketRange);
if(_16>_15){
_16=_15;
}else{
if(_16<0){
_16=0;
}
}
}else{
_16=_15;
}
return _14[_16];
},_calculateStatistics:function(){
this._maxTagValue=this._tagsSortedByValue[0].value;
this._minTagValue=this._tagsSortedByValue[this._tagCount-1].value;
var _18=this.maxTagFontSize-this.minTagFontSize;
var _19=this._maxTagValue-this._minTagValue;
if(_19>0){
this._fontSizeRatio=_18/_19;
this._colourBucketRange=(_19+1)/this._getTagColours().length;
}else{
this._fontSizeRatio=this._static._USE_DEFAULT;
this._colourBucketRange=this._static._USE_DEFAULT;
}
},_createTagCloud:function(){
for(var _1a=0;_1a<this._tagCount;_1a++){
var _1b=this._tagsSortedByName[_1a].name;
var _1c=this._tagsSortedByName[_1a].value;
var _1d=this._tagDisplayMap[_1b];
var _1e=this._createTag(_1b,_1c,_1d);
this._tagElements[_1b]=_1e;
this._tagArea.appendChild(_1e);
}
},_createControls:function(){
if(this._tagCount>1){
this._createTagFilterControl();
}
},_createTagFilterControl:function(){
this._horizontalSlider=new _1({onChange:dojo.hitch(this,this._handleEventFilterValueChanged),minimum:1,maximum:this._tagCount,discreteValues:this._tagCount,intermediateChanges:true,value:this._filterValue});
this._tagFilterControl.appendChild(this._horizontalSlider.domNode);
this._controlArea.style.display="block";
},_handleEventFilterValueChanged:function(_1f){
var _20;
var _21;
if(_1f>this._filterValue){
_20=true;
_21=_1f-1;
}else{
if(_1f<this._filterValue){
_20=false;
_21=_1f;
}else{
return;
}
}
var _22=_1f-this._filterValue;
var _23;
if(_22>0){
_23=-1;
}else{
_23=1;
}
for(var _24=0;_24<Math.abs(_22);_24++){
var _25=_21+(_24*_23);
var _26=this._tagsSortedByValue[_25].name;
var _27=this._tagElements[_26];
this._tagDisplayMap[_26]=_20;
this._updateNodeVisibility(_27,_20);
}
this._filterValue=_1f;
},_updateNodeVisibility:function(_28,_29){
if(_29){
_28.style.display="inline-block";
}else{
_28.style.display="none";
}
},_createTag:function(_2a,_2b,_2c){
var _2d=document.createElement("span");
dojo.addClass(_2d,"tag");
_2d.style.fontSize=this._calculateFontSize(_2b);
this._updateNodeVisibility(_2d,_2c);
var _2e;
if(this._createTagLinks){
_2e=this._createTagLink(_2a);
_2e.style.color=this._calculateTagColour(_2b);
}else{
_2e=document.createTextNode(_2a);
_2d.style.color=this._calculateTagColour(_2b);
}
var _2f;
if(this.showFrequencies){
_2f=document.createElement("span");
var _30=document.createTextNode("("+_2b+")");
dojo.addClass(_2f,"frequency");
_2f.appendChild(_30);
_2d.appendChild(_2e);
_2d.appendChild(_2f);
}else{
_2d.title=_2b;
_2d.appendChild(_2e);
}
_2d.appendChild(document.createTextNode(" "));
return _2d;
},_calculateFontSize:function(_31){
var _32;
if(this._fontSizeRatio<0){
_32=this.defaultTagFontSize;
}else{
var _33=(this._maxTagValue-_31)*this._fontSizeRatio;
_32=Math.round(this.maxTagFontSize-_33);
}
return _32+"px";
},_createTagLink:function(_34){
var _35=document.createTextNode(_34);
var _36=document.createElement("a");
_36.href="#";
_36.appendChild(_35);
if(this._isRTL){
_36.dir="rtl";
}else{
_36.dir="ltr";
}
if(this.hrefProvider){
this._tagHandlersOnMouseOver[_34]=this.connect(_36,"onmouseover",this._handleEventOnMouseOverTag);
this._tagHandlersOnKeyUp[_34]=this.connect(_36,"onkeyup",this._handleEventOnKeyUpTag);
}else{
if(this.onTagClick){
this._tagHandlersOnClick[_34]=this.connect(_36,"onclick",this._handleEventOnClickTag);
}
}
return _36;
},_handleEventOnMouseOverTag:function(_37){
dojo.stopEvent(_37);
var _38=_37.target;
if(!_38){
return;
}else{
if(!_38.firstChild){
return;
}else{
if(!_38.firstChild.nodeValue){
return;
}
}
}
var _39=_37.target.firstChild.nodeValue;
var _3a=this.hrefProvider(this,_39);
_38.href=_3a;
if(this._tagHandlersOnMouseOver[_39]){
this.disconnect(this._tagHandlersOnMouseOver[_39]);
delete this._tagHandlersOnMouseOver[_39];
}
if(this._tagHandlersOnKeyUp[_39]){
this.disconnect(this._tagHandlersOnKeyUp[_39]);
delete this._tagHandlersOnKeyUp[_39];
}
},_handleEventOnKeyUpTag:function(_3b){
if(_3b&&(_3b.keyCode===dojo.keys.TAB)){
this._handleEventOnMouseOverTag(_3b);
}
},_handleEventOnClickTag:function(_3c){
dojo.stopEvent(_3c);
var _3d=_3c.target;
if(!_3d){
return;
}else{
if(!_3d.firstChild){
return;
}else{
if(!_3d.firstChild.nodeValue){
return;
}
}
}
var _3e=_3c.target.firstChild.nodeValue;
this.onTagClick(this,_3e);
},getTagValue:function(_3f){
if(_3f in this._tagsIndex){
return this._tagsIndex[_3f];
}
return -1;
},_logError:function(_40){
var _41="";
if(this.declaredClass){
_41=this.declaredClass+": ";
}
var _42="";
if(_40.lineNumber){
_42="(line "+_40.lineNumber+"): ";
}
var _43="[ERROR]: "+_41+_42+_40.message;
console.error(_43);
}});
})();

// https://d3js.org v5.9.0 Copyright 2019 Mike Bostock
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.d3=t.d3||{})}(this,function(t){"use strict";function n(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function e(t){var e;return 1===t.length&&(e=t,t=function(t,r){return n(e(t),r)}),{left:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)<0?r=o+1:i=o}return r},right:function(n,e,r,i){for(null==r&&(r=0),null==i&&(i=n.length);r<i;){var o=r+i>>>1;t(n[o],e)>0?i=o:r=o+1}return r}}}var r=e(n),i=r.right,o=r.left;function a(t,n){return[t,n]}function u(t){return null===t?NaN:+t}function c(t,n){var e,r,i=t.length,o=0,a=-1,c=0,f=0;if(null==n)for(;++a<i;)isNaN(e=u(t[a]))||(f+=(r=e-c)*(e-(c+=r/++o)));else for(;++a<i;)isNaN(e=u(n(t[a],a,t)))||(f+=(r=e-c)*(e-(c+=r/++o)));if(o>1)return f/(o-1)}function f(t,n){var e=c(t,n);return e?Math.sqrt(e):e}function s(t,n){var e,r,i,o=t.length,a=-1;if(null==n){for(;++a<o;)if(null!=(e=t[a])&&e>=e)for(r=i=e;++a<o;)null!=(e=t[a])&&(r>e&&(r=e),i<e&&(i=e))}else for(;++a<o;)if(null!=(e=n(t[a],a,t))&&e>=e)for(r=i=e;++a<o;)null!=(e=n(t[a],a,t))&&(r>e&&(r=e),i<e&&(i=e));return[r,i]}var l=Array.prototype,h=l.slice,d=l.map;function p(t){return function(){return t}}function v(t){return t}function g(t,n,e){t=+t,n=+n,e=(i=arguments.length)<2?(n=t,t=0,1):i<3?1:+e;for(var r=-1,i=0|Math.max(0,Math.ceil((n-t)/e)),o=new Array(i);++r<i;)o[r]=t+r*e;return o}var y=Math.sqrt(50),_=Math.sqrt(10),b=Math.sqrt(2);function m(t,n,e){var r,i,o,a,u=-1;if(e=+e,(t=+t)===(n=+n)&&e>0)return[t];if((r=n<t)&&(i=t,t=n,n=i),0===(a=x(t,n,e))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),n=Math.floor(n/a),o=new Array(i=Math.ceil(n-t+1));++u<i;)o[u]=(t+u)*a;else for(t=Math.floor(t*a),n=Math.ceil(n*a),o=new Array(i=Math.ceil(t-n+1));++u<i;)o[u]=(t-u)/a;return r&&o.reverse(),o}function x(t,n,e){var r=(n-t)/Math.max(0,e),i=Math.floor(Math.log(r)/Math.LN10),o=r/Math.pow(10,i);return i>=0?(o>=y?10:o>=_?5:o>=b?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(o>=y?10:o>=_?5:o>=b?2:1)}function w(t,n,e){var r=Math.abs(n-t)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),o=r/i;return o>=y?i*=10:o>=_?i*=5:o>=b&&(i*=2),n<t?-i:i}function M(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function N(t,n,e){if(null==e&&(e=u),r=t.length){if((n=+n)<=0||r<2)return+e(t[0],0,t);if(n>=1)return+e(t[r-1],r-1,t);var r,i=(r-1)*n,o=Math.floor(i),a=+e(t[o],o,t);return a+(+e(t[o+1],o+1,t)-a)*(i-o)}}function A(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&e>r&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&e>r&&(r=e);return r}function S(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--a]=r[n];return e}function k(t,n){var e,r,i=t.length,o=-1;if(null==n){for(;++o<i;)if(null!=(e=t[o])&&e>=e)for(r=e;++o<i;)null!=(e=t[o])&&r>e&&(r=e)}else for(;++o<i;)if(null!=(e=n(t[o],o,t))&&e>=e)for(r=e;++o<i;)null!=(e=n(t[o],o,t))&&r>e&&(r=e);return r}function T(t){if(!(i=t.length))return[];for(var n=-1,e=k(t,E),r=new Array(e);++n<e;)for(var i,o=-1,a=r[n]=new Array(i);++o<i;)a[o]=t[o][n];return r}function E(t){return t.length}var C=Array.prototype.slice;function P(t){return t}var z=1,R=2,D=3,q=4,L=1e-6;function U(t){return"translate("+(t+.5)+",0)"}function O(t){return"translate(0,"+(t+.5)+")"}function B(){return!this.__axis}function Y(t,n){var e=[],r=null,i=null,o=6,a=6,u=3,c=t===z||t===q?-1:1,f=t===q||t===R?"x":"y",s=t===z||t===D?U:O;function l(l){var h=null==r?n.ticks?n.ticks.apply(n,e):n.domain():r,d=null==i?n.tickFormat?n.tickFormat.apply(n,e):P:i,p=Math.max(o,0)+u,v=n.range(),g=+v[0]+.5,y=+v[v.length-1]+.5,_=(n.bandwidth?function(t){var n=Math.max(0,t.bandwidth()-1)/2;return t.round()&&(n=Math.round(n)),function(e){return+t(e)+n}}:function(t){return function(n){return+t(n)}})(n.copy()),b=l.selection?l.selection():l,m=b.selectAll(".domain").data([null]),x=b.selectAll(".tick").data(h,n).order(),w=x.exit(),M=x.enter().append("g").attr("class","tick"),N=x.select("line"),A=x.select("text");m=m.merge(m.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),x=x.merge(M),N=N.merge(M.append("line").attr("stroke","currentColor").attr(f+"2",c*o)),A=A.merge(M.append("text").attr("fill","currentColor").attr(f,c*p).attr("dy",t===z?"0em":t===D?"0.71em":"0.32em")),l!==b&&(m=m.transition(l),x=x.transition(l),N=N.transition(l),A=A.transition(l),w=w.transition(l).attr("opacity",L).attr("transform",function(t){return isFinite(t=_(t))?s(t):this.getAttribute("transform")}),M.attr("opacity",L).attr("transform",function(t){var n=this.parentNode.__axis;return s(n&&isFinite(n=n(t))?n:_(t))})),w.remove(),m.attr("d",t===q||t==R?a?"M"+c*a+","+g+"H0.5V"+y+"H"+c*a:"M0.5,"+g+"V"+y:a?"M"+g+","+c*a+"V0.5H"+y+"V"+c*a:"M"+g+",0.5H"+y),x.attr("opacity",1).attr("transform",function(t){return s(_(t))}),N.attr(f+"2",c*o),A.attr(f,c*p).text(d),b.filter(B).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",t===R?"start":t===q?"end":"middle"),b.each(function(){this.__axis=_})}return l.scale=function(t){return arguments.length?(n=t,l):n},l.ticks=function(){return e=C.call(arguments),l},l.tickArguments=function(t){return arguments.length?(e=null==t?[]:C.call(t),l):e.slice()},l.tickValues=function(t){return arguments.length?(r=null==t?null:C.call(t),l):r&&r.slice()},l.tickFormat=function(t){return arguments.length?(i=t,l):i},l.tickSize=function(t){return arguments.length?(o=a=+t,l):o},l.tickSizeInner=function(t){return arguments.length?(o=+t,l):o},l.tickSizeOuter=function(t){return arguments.length?(a=+t,l):a},l.tickPadding=function(t){return arguments.length?(u=+t,l):u},l}var F={value:function(){}};function I(){for(var t,n=0,e=arguments.length,r={};n<e;++n){if(!(t=arguments[n]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new j(r)}function j(t){this._=t}function H(t,n){for(var e,r=0,i=t.length;r<i;++r)if((e=t[r]).name===n)return e.value}function X(t,n,e){for(var r=0,i=t.length;r<i;++r)if(t[r].name===n){t[r]=F,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=e&&t.push({name:n,value:e}),t}j.prototype=I.prototype={constructor:j,on:function(t,n){var e,r,i=this._,o=(r=i,(t+"").trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");if(e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),t&&!r.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})),a=-1,u=o.length;if(!(arguments.length<2)){if(null!=n&&"function"!=typeof n)throw new Error("invalid callback: "+n);for(;++a<u;)if(e=(t=o[a]).type)i[e]=X(i[e],t.name,n);else if(null==n)for(e in i)i[e]=X(i[e],t.name,null);return this}for(;++a<u;)if((e=(t=o[a]).type)&&(e=H(i[e],t.name)))return e},copy:function(){var t={},n=this._;for(var e in n)t[e]=n[e].slice();return new j(t)},call:function(t,n){if((e=arguments.length-2)>0)for(var e,r,i=new Array(e),o=0;o<e;++o)i[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(o=0,e=(r=this._[t]).length;o<e;++o)r[o].value.apply(n,i)},apply:function(t,n,e){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,o=r.length;i<o;++i)r[i].value.apply(n,e)}};var G="http://www.w3.org/1999/xhtml",V={svg:"http://www.w3.org/2000/svg",xhtml:G,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function $(t){var n=t+="",e=n.indexOf(":");return e>=0&&"xmlns"!==(n=t.slice(0,e))&&(t=t.slice(e+1)),V.hasOwnProperty(n)?{space:V[n],local:t}:t}function W(t){var n=$(t);return(n.local?function(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}:function(t){return function(){var n=this.ownerDocument,e=this.namespaceURI;return e===G&&n.documentElement.namespaceURI===G?n.createElement(t):n.createElementNS(e,t)}})(n)}function Z(){}function Q(t){return null==t?Z:function(){return this.querySelector(t)}}function J(){return[]}function K(t){return null==t?J:function(){return this.querySelectorAll(t)}}function tt(t){return function(){return this.matches(t)}}function nt(t){return new Array(t.length)}function et(t,n){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=n}et.prototype={constructor:et,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,n){return this._parent.insertBefore(t,n)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var rt="$";function it(t,n,e,r,i,o){for(var a,u=0,c=n.length,f=o.length;u<f;++u)(a=n[u])?(a.__data__=o[u],r[u]=a):e[u]=new et(t,o[u]);for(;u<c;++u)(a=n[u])&&(i[u]=a)}function ot(t,n,e,r,i,o,a){var u,c,f,s={},l=n.length,h=o.length,d=new Array(l);for(u=0;u<l;++u)(c=n[u])&&(d[u]=f=rt+a.call(c,c.__data__,u,n),f in s?i[u]=c:s[f]=c);for(u=0;u<h;++u)(c=s[f=rt+a.call(t,o[u],u,o)])?(r[u]=c,c.__data__=o[u],s[f]=null):e[u]=new et(t,o[u]);for(u=0;u<l;++u)(c=n[u])&&s[d[u]]===c&&(i[u]=c)}function at(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function ut(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ct(t,n){return t.style.getPropertyValue(n)||ut(t).getComputedStyle(t,null).getPropertyValue(n)}function ft(t){return t.trim().split(/^|\s+/)}function st(t){return t.classList||new lt(t)}function lt(t){this._node=t,this._names=ft(t.getAttribute("class")||"")}function ht(t,n){for(var e=st(t),r=-1,i=n.length;++r<i;)e.add(n[r])}function dt(t,n){for(var e=st(t),r=-1,i=n.length;++r<i;)e.remove(n[r])}function pt(){this.textContent=""}function vt(){this.innerHTML=""}function gt(){this.nextSibling&&this.parentNode.appendChild(this)}function yt(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function _t(){return null}function bt(){var t=this.parentNode;t&&t.removeChild(this)}function mt(){return this.parentNode.insertBefore(this.cloneNode(!1),this.nextSibling)}function xt(){return this.parentNode.insertBefore(this.cloneNode(!0),this.nextSibling)}lt.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var n=this._names.indexOf(t);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var wt={};(t.event=null,"undefined"!=typeof document)&&("onmouseenter"in document.documentElement||(wt={mouseenter:"mouseover",mouseleave:"mouseout"}));function Mt(t,n,e){return t=Nt(t,n,e),function(n){var e=n.relatedTarget;e&&(e===this||8&e.compareDocumentPosition(this))||t.call(this,n)}}function Nt(n,e,r){return function(i){var o=t.event;t.event=i;try{n.call(this,this.__data__,e,r)}finally{t.event=o}}}function At(t){return function(){var n=this.__on;if(n){for(var e,r=0,i=-1,o=n.length;r<o;++r)e=n[r],t.type&&e.type!==t.type||e.name!==t.name?n[++i]=e:this.removeEventListener(e.type,e.listener,e.capture);++i?n.length=i:delete this.__on}}}function St(t,n,e){var r=wt.hasOwnProperty(t.type)?Mt:Nt;return function(i,o,a){var u,c=this.__on,f=r(n,o,a);if(c)for(var s=0,l=c.length;s<l;++s)if((u=c[s]).type===t.type&&u.name===t.name)return this.removeEventListener(u.type,u.listener,u.capture),this.addEventListener(u.type,u.listener=f,u.capture=e),void(u.value=n);this.addEventListener(t.type,f,e),u={type:t.type,name:t.name,value:n,listener:f,capture:e},c?c.push(u):this.__on=[u]}}function kt(n,e,r,i){var o=t.event;n.sourceEvent=t.event,t.event=n;try{return e.apply(r,i)}finally{t.event=o}}function Tt(t,n,e){var r=ut(t),i=r.CustomEvent;"function"==typeof i?i=new i(n,e):(i=r.document.createEvent("Event"),e?(i.initEvent(n,e.bubbles,e.cancelable),i.detail=e.detail):i.initEvent(n,!1,!1)),t.dispatchEvent(i)}var Et=[null];function Ct(t,n){this._groups=t,this._parents=n}function Pt(){return new Ct([[document.documentElement]],Et)}function zt(t){return"string"==typeof t?new Ct([[document.querySelector(t)]],[document.documentElement]):new Ct([[t]],Et)}Ct.prototype=Pt.prototype={constructor:Ct,select:function(t){"function"!=typeof t&&(t=Q(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a,u=n[i],c=u.length,f=r[i]=new Array(c),s=0;s<c;++s)(o=u[s])&&(a=t.call(o,o.__data__,s,u))&&("__data__"in o&&(a.__data__=o.__data__),f[s]=a);return new Ct(r,this._parents)},selectAll:function(t){"function"!=typeof t&&(t=K(t));for(var n=this._groups,e=n.length,r=[],i=[],o=0;o<e;++o)for(var a,u=n[o],c=u.length,f=0;f<c;++f)(a=u[f])&&(r.push(t.call(a,a.__data__,f,u)),i.push(a));return new Ct(r,i)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new Ct(r,this._parents)},data:function(t,n){if(!t)return p=new Array(this.size()),s=-1,this.each(function(t){p[++s]=t}),p;var e,r=n?ot:it,i=this._parents,o=this._groups;"function"!=typeof t&&(e=t,t=function(){return e});for(var a=o.length,u=new Array(a),c=new Array(a),f=new Array(a),s=0;s<a;++s){var l=i[s],h=o[s],d=h.length,p=t.call(l,l&&l.__data__,s,i),v=p.length,g=c[s]=new Array(v),y=u[s]=new Array(v);r(l,h,g,y,f[s]=new Array(d),p,n);for(var _,b,m=0,x=0;m<v;++m)if(_=g[m]){for(m>=x&&(x=m+1);!(b=y[x])&&++x<v;);_._next=b||null}}return(u=new Ct(u,i))._enter=c,u._exit=f,u},enter:function(){return new Ct(this._enter||this._groups.map(nt),this._parents)},exit:function(){return new Ct(this._exit||this._groups.map(nt),this._parents)},join:function(t,n,e){var r=this.enter(),i=this,o=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=n&&(i=n(i)),null==e?o.remove():e(o),r&&i?r.merge(i).order():i},merge:function(t){for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,f=n[u],s=e[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(c=f[d]||s[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new Ct(a,this._parents)},order:function(){for(var t=this._groups,n=-1,e=t.length;++n<e;)for(var r,i=t[n],o=i.length-1,a=i[o];--o>=0;)(r=i[o])&&(a&&4^r.compareDocumentPosition(a)&&a.parentNode.insertBefore(r,a),a=r);return this},sort:function(t){function n(n,e){return n&&e?t(n.__data__,e.__data__):!n-!e}t||(t=at);for(var e=this._groups,r=e.length,i=new Array(r),o=0;o<r;++o){for(var a,u=e[o],c=u.length,f=i[o]=new Array(c),s=0;s<c;++s)(a=u[s])&&(f[s]=a);f.sort(n)}return new Ct(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),n=-1;return this.each(function(){t[++n]=this}),t},node:function(){for(var t=this._groups,n=0,e=t.length;n<e;++n)for(var r=t[n],i=0,o=r.length;i<o;++i){var a=r[i];if(a)return a}return null},size:function(){var t=0;return this.each(function(){++t}),t},empty:function(){return!this.node()},each:function(t){for(var n=this._groups,e=0,r=n.length;e<r;++e)for(var i,o=n[e],a=0,u=o.length;a<u;++a)(i=o[a])&&t.call(i,i.__data__,a,o);return this},attr:function(t,n){var e=$(t);if(arguments.length<2){var r=this.node();return e.local?r.getAttributeNS(e.space,e.local):r.getAttribute(e)}return this.each((null==n?e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}}:"function"==typeof n?e.local?function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,e)}}:function(t,n){return function(){var e=n.apply(this,arguments);null==e?this.removeAttribute(t):this.setAttribute(t,e)}}:e.local?function(t,n){return function(){this.setAttributeNS(t.space,t.local,n)}}:function(t,n){return function(){this.setAttribute(t,n)}})(e,n))},style:function(t,n,e){return arguments.length>1?this.each((null==n?function(t){return function(){this.style.removeProperty(t)}}:"function"==typeof n?function(t,n,e){return function(){var r=n.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,e)}}:function(t,n,e){return function(){this.style.setProperty(t,n,e)}})(t,n,null==e?"":e)):ct(this.node(),t)},property:function(t,n){return arguments.length>1?this.each((null==n?function(t){return function(){delete this[t]}}:"function"==typeof n?function(t,n){return function(){var e=n.apply(this,arguments);null==e?delete this[t]:this[t]=e}}:function(t,n){return function(){this[t]=n}})(t,n)):this.node()[t]},classed:function(t,n){var e=ft(t+"");if(arguments.length<2){for(var r=st(this.node()),i=-1,o=e.length;++i<o;)if(!r.contains(e[i]))return!1;return!0}return this.each(("function"==typeof n?function(t,n){return function(){(n.apply(this,arguments)?ht:dt)(this,t)}}:n?function(t){return function(){ht(this,t)}}:function(t){return function(){dt(this,t)}})(e,n))},text:function(t){return arguments.length?this.each(null==t?pt:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.textContent=null==n?"":n}}:function(t){return function(){this.textContent=t}})(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?vt:("function"==typeof t?function(t){return function(){var n=t.apply(this,arguments);this.innerHTML=null==n?"":n}}:function(t){return function(){this.innerHTML=t}})(t)):this.node().innerHTML},raise:function(){return this.each(gt)},lower:function(){return this.each(yt)},append:function(t){var n="function"==typeof t?t:W(t);return this.select(function(){return this.appendChild(n.apply(this,arguments))})},insert:function(t,n){var e="function"==typeof t?t:W(t),r=null==n?_t:"function"==typeof n?n:Q(n);return this.select(function(){return this.insertBefore(e.apply(this,arguments),r.apply(this,arguments)||null)})},remove:function(){return this.each(bt)},clone:function(t){return this.select(t?xt:mt)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,n,e){var r,i,o=function(t){return t.trim().split(/^|\s+/).map(function(t){var n="",e=t.indexOf(".");return e>=0&&(n=t.slice(e+1),t=t.slice(0,e)),{type:t,name:n}})}(t+""),a=o.length;if(!(arguments.length<2)){for(u=n?St:At,null==e&&(e=!1),r=0;r<a;++r)this.each(u(o[r],n,e));return this}var u=this.node().__on;if(u)for(var c,f=0,s=u.length;f<s;++f)for(r=0,c=u[f];r<a;++r)if((i=o[r]).type===c.type&&i.name===c.name)return c.value},dispatch:function(t,n){return this.each(("function"==typeof n?function(t,n){return function(){return Tt(this,t,n.apply(this,arguments))}}:function(t,n){return function(){return Tt(this,t,n)}})(t,n))}};var Rt=0;function Dt(){return new qt}function qt(){this._="@"+(++Rt).toString(36)}function Lt(){for(var n,e=t.event;n=e.sourceEvent;)e=n;return e}function Ut(t,n){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var r=e.createSVGPoint();return r.x=n.clientX,r.y=n.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[n.clientX-i.left-t.clientLeft,n.clientY-i.top-t.clientTop]}function Ot(t){var n=Lt();return n.changedTouches&&(n=n.changedTouches[0]),Ut(t,n)}function Bt(t,n,e){arguments.length<3&&(e=n,n=Lt().changedTouches);for(var r,i=0,o=n?n.length:0;i<o;++i)if((r=n[i]).identifier===e)return Ut(t,r);return null}function Yt(){t.event.stopImmediatePropagation()}function Ft(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function It(t){var n=t.document.documentElement,e=zt(t).on("dragstart.drag",Ft,!0);"onselectstart"in n?e.on("selectstart.drag",Ft,!0):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function jt(t,n){var e=t.document.documentElement,r=zt(t).on("dragstart.drag",null);n&&(r.on("click.drag",Ft,!0),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in e?r.on("selectstart.drag",null):(e.style.MozUserSelect=e.__noselect,delete e.__noselect)}function Ht(t){return function(){return t}}function Xt(t,n,e,r,i,o,a,u,c,f){this.target=t,this.type=n,this.subject=e,this.identifier=r,this.active=i,this.x=o,this.y=a,this.dx=u,this.dy=c,this._=f}function Gt(){return!t.event.button}function Vt(){return this.parentNode}function $t(n){return null==n?{x:t.event.x,y:t.event.y}:n}function Wt(){return"ontouchstart"in this}function Zt(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Qt(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Jt(){}qt.prototype=Dt.prototype={constructor:qt,get:function(t){for(var n=this._;!(n in t);)if(!(t=t.parentNode))return;return t[n]},set:function(t,n){return t[this._]=n},remove:function(t){return this._ in t&&delete t[this._]},toString:function(){return this._}},Xt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var Kt="\\s*([+-]?\\d+)\\s*",tn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",nn="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",en=/^#([0-9a-f]{3})$/,rn=/^#([0-9a-f]{6})$/,on=new RegExp("^rgb\\("+[Kt,Kt,Kt]+"\\)$"),an=new RegExp("^rgb\\("+[nn,nn,nn]+"\\)$"),un=new RegExp("^rgba\\("+[Kt,Kt,Kt,tn]+"\\)$"),cn=new RegExp("^rgba\\("+[nn,nn,nn,tn]+"\\)$"),fn=new RegExp("^hsl\\("+[tn,nn,nn]+"\\)$"),sn=new RegExp("^hsla\\("+[tn,nn,nn,tn]+"\\)$"),ln={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function hn(t){var n;return t=(t+"").trim().toLowerCase(),(n=en.exec(t))?new yn((n=parseInt(n[1],16))>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):(n=rn.exec(t))?dn(parseInt(n[1],16)):(n=on.exec(t))?new yn(n[1],n[2],n[3],1):(n=an.exec(t))?new yn(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=un.exec(t))?pn(n[1],n[2],n[3],n[4]):(n=cn.exec(t))?pn(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=fn.exec(t))?bn(n[1],n[2]/100,n[3]/100,1):(n=sn.exec(t))?bn(n[1],n[2]/100,n[3]/100,n[4]):ln.hasOwnProperty(t)?dn(ln[t]):"transparent"===t?new yn(NaN,NaN,NaN,0):null}function dn(t){return new yn(t>>16&255,t>>8&255,255&t,1)}function pn(t,n,e,r){return r<=0&&(t=n=e=NaN),new yn(t,n,e,r)}function vn(t){return t instanceof Jt||(t=hn(t)),t?new yn((t=t.rgb()).r,t.g,t.b,t.opacity):new yn}function gn(t,n,e,r){return 1===arguments.length?vn(t):new yn(t,n,e,null==r?1:r)}function yn(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function _n(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function bn(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new xn(t,n,e,r)}function mn(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof xn)return new xn(t.h,t.s,t.l,t.opacity);if(t instanceof Jt||(t=hn(t)),!t)return new xn;if(t instanceof xn)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,u=o-i,c=(o+i)/2;return u?(a=n===o?(e-r)/u+6*(e<r):e===o?(r-n)/u+2:(n-e)/u+4,u/=c<.5?o+i:2-o-i,a*=60):u=c>0&&c<1?0:a,new xn(a,u,c,t.opacity)}(t):new xn(t,n,e,null==r?1:r)}function xn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function wn(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Zt(Jt,hn,{displayable:function(){return this.rgb().displayable()},hex:function(){return this.rgb().hex()},toString:function(){return this.rgb()+""}}),Zt(yn,gn,Qt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new yn(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},hex:function(){return"#"+_n(this.r)+_n(this.g)+_n(this.b)},toString:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Zt(xn,mn,Qt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new xn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new xn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new yn(wn(t>=240?t-240:t+120,i,r),wn(t,i,r),wn(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var Mn=Math.PI/180,Nn=180/Math.PI,An=.96422,Sn=1,kn=.82521,Tn=4/29,En=6/29,Cn=3*En*En,Pn=En*En*En;function zn(t){if(t instanceof Dn)return new Dn(t.l,t.a,t.b,t.opacity);if(t instanceof Fn){if(isNaN(t.h))return new Dn(t.l,0,0,t.opacity);var n=t.h*Mn;return new Dn(t.l,Math.cos(n)*t.c,Math.sin(n)*t.c,t.opacity)}t instanceof yn||(t=vn(t));var e,r,i=On(t.r),o=On(t.g),a=On(t.b),u=qn((.2225045*i+.7168786*o+.0606169*a)/Sn);return i===o&&o===a?e=r=u:(e=qn((.4360747*i+.3850649*o+.1430804*a)/An),r=qn((.0139322*i+.0971045*o+.7141733*a)/kn)),new Dn(116*u-16,500*(e-u),200*(u-r),t.opacity)}function Rn(t,n,e,r){return 1===arguments.length?zn(t):new Dn(t,n,e,null==r?1:r)}function Dn(t,n,e,r){this.l=+t,this.a=+n,this.b=+e,this.opacity=+r}function qn(t){return t>Pn?Math.pow(t,1/3):t/Cn+Tn}function Ln(t){return t>En?t*t*t:Cn*(t-Tn)}function Un(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function On(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Bn(t){if(t instanceof Fn)return new Fn(t.h,t.c,t.l,t.opacity);if(t instanceof Dn||(t=zn(t)),0===t.a&&0===t.b)return new Fn(NaN,0,t.l,t.opacity);var n=Math.atan2(t.b,t.a)*Nn;return new Fn(n<0?n+360:n,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function Yn(t,n,e,r){return 1===arguments.length?Bn(t):new Fn(t,n,e,null==r?1:r)}function Fn(t,n,e,r){this.h=+t,this.c=+n,this.l=+e,this.opacity=+r}Zt(Dn,Rn,Qt(Jt,{brighter:function(t){return new Dn(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new Dn(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,n=isNaN(this.a)?t:t+this.a/500,e=isNaN(this.b)?t:t-this.b/200;return new yn(Un(3.1338561*(n=An*Ln(n))-1.6168667*(t=Sn*Ln(t))-.4906146*(e=kn*Ln(e))),Un(-.9787684*n+1.9161415*t+.033454*e),Un(.0719453*n-.2289914*t+1.4052427*e),this.opacity)}})),Zt(Fn,Yn,Qt(Jt,{brighter:function(t){return new Fn(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new Fn(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return zn(this).rgb()}}));var In=-.14861,jn=1.78277,Hn=-.29227,Xn=-.90649,Gn=1.97294,Vn=Gn*Xn,$n=Gn*jn,Wn=jn*Hn-Xn*In;function Zn(t,n,e,r){return 1===arguments.length?function(t){if(t instanceof Qn)return new Qn(t.h,t.s,t.l,t.opacity);t instanceof yn||(t=vn(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(Wn*r+Vn*n-$n*e)/(Wn+Vn-$n),o=r-i,a=(Gn*(e-i)-Hn*o)/Xn,u=Math.sqrt(a*a+o*o)/(Gn*i*(1-i)),c=u?Math.atan2(a,o)*Nn-120:NaN;return new Qn(c<0?c+360:c,u,i,t.opacity)}(t):new Qn(t,n,e,null==r?1:r)}function Qn(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function Jn(t,n,e,r,i){var o=t*t,a=o*t;return((1-3*t+3*o-a)*n+(4-6*o+3*a)*e+(1+3*t+3*o-3*a)*r+a*i)/6}function Kn(t){var n=t.length-1;return function(e){var r=e<=0?e=0:e>=1?(e=1,n-1):Math.floor(e*n),i=t[r],o=t[r+1],a=r>0?t[r-1]:2*i-o,u=r<n-1?t[r+2]:2*o-i;return Jn((e-r/n)*n,a,i,o,u)}}function te(t){var n=t.length;return function(e){var r=Math.floor(((e%=1)<0?++e:e)*n),i=t[(r+n-1)%n],o=t[r%n],a=t[(r+1)%n],u=t[(r+2)%n];return Jn((e-r/n)*n,i,o,a,u)}}function ne(t){return function(){return t}}function ee(t,n){return function(e){return t+e*n}}function re(t,n){var e=n-t;return e?ee(t,e>180||e<-180?e-360*Math.round(e/360):e):ne(isNaN(t)?n:t)}function ie(t){return 1==(t=+t)?oe:function(n,e){return e-n?function(t,n,e){return t=Math.pow(t,e),n=Math.pow(n,e)-t,e=1/e,function(r){return Math.pow(t+r*n,e)}}(n,e,t):ne(isNaN(n)?e:n)}}function oe(t,n){var e=n-t;return e?ee(t,e):ne(isNaN(t)?n:t)}Zt(Qn,Zn,Qt(Jt,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new Qn(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new Qn(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*Mn,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new yn(255*(n+e*(In*r+jn*i)),255*(n+e*(Hn*r+Xn*i)),255*(n+e*(Gn*r)),this.opacity)}}));var ae=function t(n){var e=ie(n);function r(t,n){var r=e((t=gn(t)).r,(n=gn(n)).r),i=e(t.g,n.g),o=e(t.b,n.b),a=oe(t.opacity,n.opacity);return function(n){return t.r=r(n),t.g=i(n),t.b=o(n),t.opacity=a(n),t+""}}return r.gamma=t,r}(1);function ue(t){return function(n){var e,r,i=n.length,o=new Array(i),a=new Array(i),u=new Array(i);for(e=0;e<i;++e)r=gn(n[e]),o[e]=r.r||0,a[e]=r.g||0,u[e]=r.b||0;return o=t(o),a=t(a),u=t(u),r.opacity=1,function(t){return r.r=o(t),r.g=a(t),r.b=u(t),r+""}}}var ce=ue(Kn),fe=ue(te);function se(t,n){var e,r=n?n.length:0,i=t?Math.min(r,t.length):0,o=new Array(i),a=new Array(r);for(e=0;e<i;++e)o[e]=ye(t[e],n[e]);for(;e<r;++e)a[e]=n[e];return function(t){for(e=0;e<i;++e)a[e]=o[e](t);return a}}function le(t,n){var e=new Date;return n-=t=+t,function(r){return e.setTime(t+n*r),e}}function he(t,n){return n-=t=+t,function(e){return t+n*e}}function de(t,n){var e,r={},i={};for(e in null!==t&&"object"==typeof t||(t={}),null!==n&&"object"==typeof n||(n={}),n)e in t?r[e]=ye(t[e],n[e]):i[e]=n[e];return function(t){for(e in r)i[e]=r[e](t);return i}}var pe=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ve=new RegExp(pe.source,"g");function ge(t,n){var e,r,i,o=pe.lastIndex=ve.lastIndex=0,a=-1,u=[],c=[];for(t+="",n+="";(e=pe.exec(t))&&(r=ve.exec(n));)(i=r.index)>o&&(i=n.slice(o,i),u[a]?u[a]+=i:u[++a]=i),(e=e[0])===(r=r[0])?u[a]?u[a]+=r:u[++a]=r:(u[++a]=null,c.push({i:a,x:he(e,r)})),o=ve.lastIndex;return o<n.length&&(i=n.slice(o),u[a]?u[a]+=i:u[++a]=i),u.length<2?c[0]?function(t){return function(n){return t(n)+""}}(c[0].x):function(t){return function(){return t}}(n):(n=c.length,function(t){for(var e,r=0;r<n;++r)u[(e=c[r]).i]=e.x(t);return u.join("")})}function ye(t,n){var e,r=typeof n;return null==n||"boolean"===r?ne(n):("number"===r?he:"string"===r?(e=hn(n))?(n=e,ae):ge:n instanceof hn?ae:n instanceof Date?le:Array.isArray(n)?se:"function"!=typeof n.valueOf&&"function"!=typeof n.toString||isNaN(n)?de:he)(t,n)}function _e(t,n){return n-=t=+t,function(e){return Math.round(t+n*e)}}var be,me,xe,we,Me=180/Math.PI,Ne={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ae(t,n,e,r,i,o){var a,u,c;return(a=Math.sqrt(t*t+n*n))&&(t/=a,n/=a),(c=t*e+n*r)&&(e-=t*c,r-=n*c),(u=Math.sqrt(e*e+r*r))&&(e/=u,r/=u,c/=u),t*r<n*e&&(t=-t,n=-n,c=-c,a=-a),{translateX:i,translateY:o,rotate:Math.atan2(n,t)*Me,skewX:Math.atan(c)*Me,scaleX:a,scaleY:u}}function Se(t,n,e,r){function i(t){return t.length?t.pop()+" ":""}return function(o,a){var u=[],c=[];return o=t(o),a=t(a),function(t,r,i,o,a,u){if(t!==i||r!==o){var c=a.push("translate(",null,n,null,e);u.push({i:c-4,x:he(t,i)},{i:c-2,x:he(r,o)})}else(i||o)&&a.push("translate("+i+n+o+e)}(o.translateX,o.translateY,a.translateX,a.translateY,u,c),function(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(i(e)+"rotate(",null,r)-2,x:he(t,n)})):n&&e.push(i(e)+"rotate("+n+r)}(o.rotate,a.rotate,u,c),function(t,n,e,o){t!==n?o.push({i:e.push(i(e)+"skewX(",null,r)-2,x:he(t,n)}):n&&e.push(i(e)+"skewX("+n+r)}(o.skewX,a.skewX,u,c),function(t,n,e,r,o,a){if(t!==e||n!==r){var u=o.push(i(o)+"scale(",null,",",null,")");a.push({i:u-4,x:he(t,e)},{i:u-2,x:he(n,r)})}else 1===e&&1===r||o.push(i(o)+"scale("+e+","+r+")")}(o.scaleX,o.scaleY,a.scaleX,a.scaleY,u,c),o=a=null,function(t){for(var n,e=-1,r=c.length;++e<r;)u[(n=c[e]).i]=n.x(t);return u.join("")}}}var ke=Se(function(t){return"none"===t?Ne:(be||(be=document.createElement("DIV"),me=document.documentElement,xe=document.defaultView),be.style.transform=t,t=xe.getComputedStyle(me.appendChild(be),null).getPropertyValue("transform"),me.removeChild(be),Ae(+(t=t.slice(7,-1).split(","))[0],+t[1],+t[2],+t[3],+t[4],+t[5]))},"px, ","px)","deg)"),Te=Se(function(t){return null==t?Ne:(we||(we=document.createElementNS("http://www.w3.org/2000/svg","g")),we.setAttribute("transform",t),(t=we.transform.baseVal.consolidate())?Ae((t=t.matrix).a,t.b,t.c,t.d,t.e,t.f):Ne)},", ",")",")"),Ee=Math.SQRT2,Ce=2,Pe=4,ze=1e-12;function Re(t){return((t=Math.exp(t))+1/t)/2}function De(t,n){var e,r,i=t[0],o=t[1],a=t[2],u=n[0],c=n[1],f=n[2],s=u-i,l=c-o,h=s*s+l*l;if(h<ze)r=Math.log(f/a)/Ee,e=function(t){return[i+t*s,o+t*l,a*Math.exp(Ee*t*r)]};else{var d=Math.sqrt(h),p=(f*f-a*a+Pe*h)/(2*a*Ce*d),v=(f*f-a*a-Pe*h)/(2*f*Ce*d),g=Math.log(Math.sqrt(p*p+1)-p),y=Math.log(Math.sqrt(v*v+1)-v);r=(y-g)/Ee,e=function(t){var n,e=t*r,u=Re(g),c=a/(Ce*d)*(u*(n=Ee*e+g,((n=Math.exp(2*n))-1)/(n+1))-function(t){return((t=Math.exp(t))-1/t)/2}(g));return[i+c*s,o+c*l,a*u/Re(Ee*e+g)]}}return e.duration=1e3*r,e}function qe(t){return function(n,e){var r=t((n=mn(n)).h,(e=mn(e)).h),i=oe(n.s,e.s),o=oe(n.l,e.l),a=oe(n.opacity,e.opacity);return function(t){return n.h=r(t),n.s=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Le=qe(re),Ue=qe(oe);function Oe(t){return function(n,e){var r=t((n=Yn(n)).h,(e=Yn(e)).h),i=oe(n.c,e.c),o=oe(n.l,e.l),a=oe(n.opacity,e.opacity);return function(t){return n.h=r(t),n.c=i(t),n.l=o(t),n.opacity=a(t),n+""}}}var Be=Oe(re),Ye=Oe(oe);function Fe(t){return function n(e){function r(n,r){var i=t((n=Zn(n)).h,(r=Zn(r)).h),o=oe(n.s,r.s),a=oe(n.l,r.l),u=oe(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=u(t),n+""}}return e=+e,r.gamma=n,r}(1)}var Ie=Fe(re),je=Fe(oe);var He,Xe,Ge=0,Ve=0,$e=0,We=1e3,Ze=0,Qe=0,Je=0,Ke="object"==typeof performance&&performance.now?performance:Date,tr="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function nr(){return Qe||(tr(er),Qe=Ke.now()+Je)}function er(){Qe=0}function rr(){this._call=this._time=this._next=null}function ir(t,n,e){var r=new rr;return r.restart(t,n,e),r}function or(){nr(),++Ge;for(var t,n=He;n;)(t=Qe-n._time)>=0&&n._call.call(null,t),n=n._next;--Ge}function ar(){Qe=(Ze=Ke.now())+Je,Ge=Ve=0;try{or()}finally{Ge=0,function(){var t,n,e=He,r=1/0;for(;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:He=n);Xe=t,cr(r)}(),Qe=0}}function ur(){var t=Ke.now(),n=t-Ze;n>We&&(Je-=n,Ze=t)}function cr(t){Ge||(Ve&&(Ve=clearTimeout(Ve)),t-Qe>24?(t<1/0&&(Ve=setTimeout(ar,t-Ke.now()-Je)),$e&&($e=clearInterval($e))):($e||(Ze=Ke.now(),$e=setInterval(ur,We)),Ge=1,tr(ar)))}function fr(t,n,e){var r=new rr;return n=null==n?0:+n,r.restart(function(e){r.stop(),t(e+n)},n,e),r}rr.prototype=ir.prototype={constructor:rr,restart:function(t,n,e){if("function"!=typeof t)throw new TypeError("callback is not a function");e=(null==e?nr():+e)+(null==n?0:+n),this._next||Xe===this||(Xe?Xe._next=this:He=this,Xe=this),this._call=t,this._time=e,cr()},stop:function(){this._call&&(this._call=null,this._time=1/0,cr())}};var sr=I("start","end","cancel","interrupt"),lr=[],hr=0,dr=1,pr=2,vr=3,gr=4,yr=5,_r=6;function br(t,n,e,r,i,o){var a=t.__transition;if(a){if(e in a)return}else t.__transition={};!function(t,n,e){var r,i=t.__transition;function o(c){var f,s,l,h;if(e.state!==dr)return u();for(f in i)if((h=i[f]).name===e.name){if(h.state===vr)return fr(o);h.state===gr?(h.state=_r,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[f]):+f<n&&(h.state=_r,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[f])}if(fr(function(){e.state===vr&&(e.state=gr,e.timer.restart(a,e.delay,e.time),a(c))}),e.state=pr,e.on.call("start",t,t.__data__,e.index,e.group),e.state===pr){for(e.state=vr,r=new Array(l=e.tween.length),f=0,s=-1;f<l;++f)(h=e.tween[f].value.call(t,t.__data__,e.index,e.group))&&(r[++s]=h);r.length=s+1}}function a(n){for(var i=n<e.duration?e.ease.call(null,n/e.duration):(e.timer.restart(u),e.state=yr,1),o=-1,a=r.length;++o<a;)r[o].call(t,i);e.state===yr&&(e.on.call("end",t,t.__data__,e.index,e.group),u())}function u(){for(var r in e.state=_r,e.timer.stop(),delete i[n],i)return;delete t.__transition}i[n]=e,e.timer=ir(function(t){e.state=dr,e.timer.restart(o,e.delay,e.time),e.delay<=t&&o(t-e.delay)},0,e.time)}(t,e,{name:n,index:r,group:i,on:sr,tween:lr,time:o.time,delay:o.delay,duration:o.duration,ease:o.ease,timer:null,state:hr})}function mr(t,n){var e=wr(t,n);if(e.state>hr)throw new Error("too late; already scheduled");return e}function xr(t,n){var e=wr(t,n);if(e.state>vr)throw new Error("too late; already running");return e}function wr(t,n){var e=t.__transition;if(!e||!(e=e[n]))throw new Error("transition not found");return e}function Mr(t,n){var e,r,i,o=t.__transition,a=!0;if(o){for(i in n=null==n?null:n+"",o)(e=o[i]).name===n?(r=e.state>pr&&e.state<yr,e.state=_r,e.timer.stop(),e.on.call(r?"interrupt":"cancel",t,t.__data__,e.index,e.group),delete o[i]):a=!1;a&&delete t.__transition}}function Nr(t,n,e){var r=t._id;return t.each(function(){var t=xr(this,r);(t.value||(t.value={}))[n]=e.apply(this,arguments)}),function(t){return wr(t,r).value[n]}}function Ar(t,n){var e;return("number"==typeof n?he:n instanceof hn?ae:(e=hn(n))?(n=e,ae):ge)(t,n)}var Sr=Pt.prototype.constructor;function kr(t){return function(){this.style.removeProperty(t)}}var Tr=0;function Er(t,n,e,r){this._groups=t,this._parents=n,this._name=e,this._id=r}function Cr(t){return Pt().transition(t)}function Pr(){return++Tr}var zr=Pt.prototype;function Rr(t){return((t*=2)<=1?t*t:--t*(2-t)+1)/2}function Dr(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}Er.prototype=Cr.prototype={constructor:Er,select:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=Q(t));for(var r=this._groups,i=r.length,o=new Array(i),a=0;a<i;++a)for(var u,c,f=r[a],s=f.length,l=o[a]=new Array(s),h=0;h<s;++h)(u=f[h])&&(c=t.call(u,u.__data__,h,f))&&("__data__"in u&&(c.__data__=u.__data__),l[h]=c,br(l[h],n,e,h,l,wr(u,e)));return new Er(o,this._parents,n,e)},selectAll:function(t){var n=this._name,e=this._id;"function"!=typeof t&&(t=K(t));for(var r=this._groups,i=r.length,o=[],a=[],u=0;u<i;++u)for(var c,f=r[u],s=f.length,l=0;l<s;++l)if(c=f[l]){for(var h,d=t.call(c,c.__data__,l,f),p=wr(c,e),v=0,g=d.length;v<g;++v)(h=d[v])&&br(h,n,e,v,d,p);o.push(d),a.push(c)}return new Er(o,a,n,e)},filter:function(t){"function"!=typeof t&&(t=tt(t));for(var n=this._groups,e=n.length,r=new Array(e),i=0;i<e;++i)for(var o,a=n[i],u=a.length,c=r[i]=[],f=0;f<u;++f)(o=a[f])&&t.call(o,o.__data__,f,a)&&c.push(o);return new Er(r,this._parents,this._name,this._id)},merge:function(t){if(t._id!==this._id)throw new Error;for(var n=this._groups,e=t._groups,r=n.length,i=e.length,o=Math.min(r,i),a=new Array(r),u=0;u<o;++u)for(var c,f=n[u],s=e[u],l=f.length,h=a[u]=new Array(l),d=0;d<l;++d)(c=f[d]||s[d])&&(h[d]=c);for(;u<r;++u)a[u]=n[u];return new Er(a,this._parents,this._name,this._id)},selection:function(){return new Sr(this._groups,this._parents)},transition:function(){for(var t=this._name,n=this._id,e=Pr(),r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)if(a=u[f]){var s=wr(a,n);br(a,t,e,f,u,{time:s.time+s.delay+s.duration,delay:0,duration:s.duration,ease:s.ease})}return new Er(r,this._parents,t,e)},call:zr.call,nodes:zr.nodes,node:zr.node,size:zr.size,empty:zr.empty,each:zr.each,on:function(t,n){var e=this._id;return arguments.length<2?wr(this.node(),e).on.on(t):this.each(function(t,n,e){var r,i,o=function(t){return(t+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||"start"===t})}(n)?mr:xr;return function(){var a=o(this,t),u=a.on;u!==r&&(i=(r=u).copy()).on(n,e),a.on=i}}(e,t,n))},attr:function(t,n){var e=$(t),r="transform"===e?Te:Ar;return this.attrTween(t,"function"==typeof n?(e.local?function(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttributeNS(t.space,t.local))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttributeNS(t.space,t.local)}}:function(t,n,e){var r,i,o;return function(){var a,u,c=e(this);if(null!=c)return(a=this.getAttribute(t))===(u=c+"")?null:a===r&&u===i?o:(i=u,o=n(r=a,c));this.removeAttribute(t)}})(e,r,Nr(this,"attr."+t,n)):null==n?(e.local?function(t){return function(){this.removeAttributeNS(t.space,t.local)}}:function(t){return function(){this.removeAttribute(t)}})(e):(e.local?function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttributeNS(t.space,t.local);return a===o?null:a===r?i:i=n(r=a,e)}}:function(t,n,e){var r,i,o=e+"";return function(){var a=this.getAttribute(t);return a===o?null:a===r?i:i=n(r=a,e)}})(e,r,n))},attrTween:function(t,n){var e="attr."+t;if(arguments.length<2)return(e=this.tween(e))&&e._value;if(null==n)return this.tween(e,null);if("function"!=typeof n)throw new Error;var r=$(t);return this.tween(e,(r.local?function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttributeNS(t.space,t.local,n(e))}}(t,i)),e}return i._value=n,i}:function(t,n){var e,r;function i(){var i=n.apply(this,arguments);return i!==r&&(e=(r=i)&&function(t,n){return function(e){this.setAttribute(t,n(e))}}(t,i)),e}return i._value=n,i})(r,n))},style:function(t,n,e){var r="transform"==(t+="")?ke:Ar;return null==n?this.styleTween(t,function(t,n){var e,r,i;return function(){var o=ct(this,t),a=(this.style.removeProperty(t),ct(this,t));return o===a?null:o===e&&a===r?i:i=n(e=o,r=a)}}(t,r)).on("end.style."+t,kr(t)):"function"==typeof n?this.styleTween(t,function(t,n,e){var r,i,o;return function(){var a=ct(this,t),u=e(this),c=u+"";return null==u&&(this.style.removeProperty(t),c=u=ct(this,t)),a===c?null:a===r&&c===i?o:(i=c,o=n(r=a,u))}}(t,r,Nr(this,"style."+t,n))).each(function(t,n){var e,r,i,o,a="style."+n,u="end."+a;return function(){var c=xr(this,t),f=c.on,s=null==c.value[a]?o||(o=kr(n)):void 0;f===e&&i===s||(r=(e=f).copy()).on(u,i=s),c.on=r}}(this._id,t)):this.styleTween(t,function(t,n,e){var r,i,o=e+"";return function(){var a=ct(this,t);return a===o?null:a===r?i:i=n(r=a,e)}}(t,r,n),e).on("end.style."+t,null)},styleTween:function(t,n,e){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(null==n)return this.tween(r,null);if("function"!=typeof n)throw new Error;return this.tween(r,function(t,n,e){var r,i;function o(){var o=n.apply(this,arguments);return o!==i&&(r=(i=o)&&function(t,n,e){return function(r){this.style.setProperty(t,n(r),e)}}(t,o,e)),r}return o._value=n,o}(t,n,null==e?"":e))},text:function(t){return this.tween("text","function"==typeof t?function(t){return function(){var n=t(this);this.textContent=null==n?"":n}}(Nr(this,"text",t)):function(t){return function(){this.textContent=t}}(null==t?"":t+""))},remove:function(){return this.on("end.remove",(t=this._id,function(){var n=this.parentNode;for(var e in this.__transition)if(+e!==t)return;n&&n.removeChild(this)}));var t},tween:function(t,n){var e=this._id;if(t+="",arguments.length<2){for(var r,i=wr(this.node(),e).tween,o=0,a=i.length;o<a;++o)if((r=i[o]).name===t)return r.value;return null}return this.each((null==n?function(t,n){var e,r;return function(){var i=xr(this,t),o=i.tween;if(o!==e)for(var a=0,u=(r=e=o).length;a<u;++a)if(r[a].name===n){(r=r.slice()).splice(a,1);break}i.tween=r}}:function(t,n,e){var r,i;if("function"!=typeof e)throw new Error;return function(){var o=xr(this,t),a=o.tween;if(a!==r){i=(r=a).slice();for(var u={name:n,value:e},c=0,f=i.length;c<f;++c)if(i[c].name===n){i[c]=u;break}c===f&&i.push(u)}o.tween=i}})(e,t,n))},delay:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){mr(this,t).delay=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){mr(this,t).delay=n}})(n,t)):wr(this.node(),n).delay},duration:function(t){var n=this._id;return arguments.length?this.each(("function"==typeof t?function(t,n){return function(){xr(this,t).duration=+n.apply(this,arguments)}}:function(t,n){return n=+n,function(){xr(this,t).duration=n}})(n,t)):wr(this.node(),n).duration},ease:function(t){var n=this._id;return arguments.length?this.each(function(t,n){if("function"!=typeof n)throw new Error;return function(){xr(this,t).ease=n}}(n,t)):wr(this.node(),n).ease},end:function(){var t,n,e=this,r=e._id,i=e.size();return new Promise(function(o,a){var u={value:a},c={value:function(){0==--i&&o()}};e.each(function(){var e=xr(this,r),i=e.on;i!==t&&((n=(t=i).copy())._.cancel.push(u),n._.interrupt.push(u),n._.end.push(c)),e.on=n})})}};var qr=function t(n){function e(t){return Math.pow(t,n)}return n=+n,e.exponent=t,e}(3),Lr=function t(n){function e(t){return 1-Math.pow(1-t,n)}return n=+n,e.exponent=t,e}(3),Ur=function t(n){function e(t){return((t*=2)<=1?Math.pow(t,n):2-Math.pow(2-t,n))/2}return n=+n,e.exponent=t,e}(3),Or=Math.PI,Br=Or/2;function Yr(t){return(1-Math.cos(Or*t))/2}function Fr(t){return((t*=2)<=1?Math.pow(2,10*t-10):2-Math.pow(2,10-10*t))/2}function Ir(t){return((t*=2)<=1?1-Math.sqrt(1-t*t):Math.sqrt(1-(t-=2)*t)+1)/2}var jr=4/11,Hr=6/11,Xr=8/11,Gr=.75,Vr=9/11,$r=10/11,Wr=.9375,Zr=21/22,Qr=63/64,Jr=1/jr/jr;function Kr(t){return(t=+t)<jr?Jr*t*t:t<Xr?Jr*(t-=Hr)*t+Gr:t<$r?Jr*(t-=Vr)*t+Wr:Jr*(t-=Zr)*t+Qr}var ti=function t(n){function e(t){return t*t*((n+1)*t-n)}return n=+n,e.overshoot=t,e}(1.70158),ni=function t(n){function e(t){return--t*t*((n+1)*t+n)+1}return n=+n,e.overshoot=t,e}(1.70158),ei=function t(n){function e(t){return((t*=2)<1?t*t*((n+1)*t-n):(t-=2)*t*((n+1)*t+n)+2)/2}return n=+n,e.overshoot=t,e}(1.70158),ri=2*Math.PI,ii=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=ri);function i(t){return n*Math.pow(2,10*--t)*Math.sin((r-t)/e)}return i.amplitude=function(n){return t(n,e*ri)},i.period=function(e){return t(n,e)},i}(1,.3),oi=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=ri);function i(t){return 1-n*Math.pow(2,-10*(t=+t))*Math.sin((t+r)/e)}return i.amplitude=function(n){return t(n,e*ri)},i.period=function(e){return t(n,e)},i}(1,.3),ai=function t(n,e){var r=Math.asin(1/(n=Math.max(1,n)))*(e/=ri);function i(t){return((t=2*t-1)<0?n*Math.pow(2,10*t)*Math.sin((r-t)/e):2-n*Math.pow(2,-10*t)*Math.sin((r+t)/e))/2}return i.amplitude=function(n){return t(n,e*ri)},i.period=function(e){return t(n,e)},i}(1,.3),ui={time:null,delay:0,duration:250,ease:Dr};function ci(t,n){for(var e;!(e=t.__transition)||!(e=e[n]);)if(!(t=t.parentNode))return ui.time=nr(),ui;return e}Pt.prototype.interrupt=function(t){return this.each(function(){Mr(this,t)})},Pt.prototype.transition=function(t){var n,e;t instanceof Er?(n=t._id,t=t._name):(n=Pr(),(e=ui).time=nr(),t=null==t?null:t+"");for(var r=this._groups,i=r.length,o=0;o<i;++o)for(var a,u=r[o],c=u.length,f=0;f<c;++f)(a=u[f])&&br(a,t,n,f,u,e||ci(a,n));return new Er(r,this._parents,t,n)};var fi=[null];function si(t){return function(){return t}}function li(t,n,e){this.target=t,this.type=n,this.selection=e}function hi(){t.event.stopImmediatePropagation()}function di(){t.event.preventDefault(),t.event.stopImmediatePropagation()}var pi={name:"drag"},vi={name:"space"},gi={name:"handle"},yi={name:"center"},_i={name:"x",handles:["e","w"].map(Si),input:function(t,n){return t&&[[t[0],n[0][1]],[t[1],n[1][1]]]},output:function(t){return t&&[t[0][0],t[1][0]]}},bi={name:"y",handles:["n","s"].map(Si),input:function(t,n){return t&&[[n[0][0],t[0]],[n[1][0],t[1]]]},output:function(t){return t&&[t[0][1],t[1][1]]}},mi={name:"xy",handles:["n","e","s","w","nw","ne","se","sw"].map(Si),input:function(t){return t},output:function(t){return t}},xi={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},wi={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Mi={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ni={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Ai={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function Si(t){return{type:t}}function ki(){return!t.event.button}function Ti(){var t=this.ownerSVGElement||this;return[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]}function Ei(t){for(;!t.__brush;)if(!(t=t.parentNode))return;return t.__brush}function Ci(t){return t[0][0]===t[1][0]||t[0][1]===t[1][1]}function Pi(n){var e,r=Ti,i=ki,o=I(u,"start","brush","end"),a=6;function u(t){var e=t.property("__brush",h).selectAll(".overlay").data([Si("overlay")]);e.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xi.overlay).merge(e).each(function(){var t=Ei(this).extent;zt(this).attr("x",t[0][0]).attr("y",t[0][1]).attr("width",t[1][0]-t[0][0]).attr("height",t[1][1]-t[0][1])}),t.selectAll(".selection").data([Si("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xi.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var r=t.selectAll(".handle").data(n.handles,function(t){return t.type});r.exit().remove(),r.enter().append("rect").attr("class",function(t){return"handle handle--"+t.type}).attr("cursor",function(t){return xi[t.type]}),t.each(c).attr("fill","none").attr("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush touchstart.brush",l)}function c(){var t=zt(this),n=Ei(this).selection;n?(t.selectAll(".selection").style("display",null).attr("x",n[0][0]).attr("y",n[0][1]).attr("width",n[1][0]-n[0][0]).attr("height",n[1][1]-n[0][1]),t.selectAll(".handle").style("display",null).attr("x",function(t){return"e"===t.type[t.type.length-1]?n[1][0]-a/2:n[0][0]-a/2}).attr("y",function(t){return"s"===t.type[0]?n[1][1]-a/2:n[0][1]-a/2}).attr("width",function(t){return"n"===t.type||"s"===t.type?n[1][0]-n[0][0]+a:a}).attr("height",function(t){return"e"===t.type||"w"===t.type?n[1][1]-n[0][1]+a:a})):t.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(t,n){return t.__brush.emitter||new s(t,n)}function s(t,n){this.that=t,this.args=n,this.state=t.__brush,this.active=0}function l(){if(t.event.touches){if(t.event.changedTouches.length<t.event.touches.length)return di()}else if(e)return;if(i.apply(this,arguments)){var r,o,a,u,s,l,h,d,p,v,g,y,_,b=this,m=t.event.target.__data__.type,x="selection"===(t.event.metaKey?m="overlay":m)?pi:t.event.altKey?yi:gi,w=n===bi?null:Ni[m],M=n===_i?null:Ai[m],N=Ei(b),A=N.extent,S=N.selection,k=A[0][0],T=A[0][1],E=A[1][0],C=A[1][1],P=w&&M&&t.event.shiftKey,z=Ot(b),R=z,D=f(b,arguments).beforestart();"overlay"===m?N.selection=S=[[r=n===bi?k:z[0],a=n===_i?T:z[1]],[s=n===bi?E:r,h=n===_i?C:a]]:(r=S[0][0],a=S[0][1],s=S[1][0],h=S[1][1]),o=r,u=a,l=s,d=h;var q=zt(b).attr("pointer-events","none"),L=q.selectAll(".overlay").attr("cursor",xi[m]);if(t.event.touches)q.on("touchmove.brush",O,!0).on("touchend.brush touchcancel.brush",Y,!0);else{var U=zt(t.event.view).on("keydown.brush",function(){switch(t.event.keyCode){case 16:P=w&&M;break;case 18:x===gi&&(w&&(s=l-p*w,r=o+p*w),M&&(h=d-v*M,a=u+v*M),x=yi,B());break;case 32:x!==gi&&x!==yi||(w<0?s=l-p:w>0&&(r=o-p),M<0?h=d-v:M>0&&(a=u-v),x=vi,L.attr("cursor",xi.selection),B());break;default:return}di()},!0).on("keyup.brush",function(){switch(t.event.keyCode){case 16:P&&(y=_=P=!1,B());break;case 18:x===yi&&(w<0?s=l:w>0&&(r=o),M<0?h=d:M>0&&(a=u),x=gi,B());break;case 32:x===vi&&(t.event.altKey?(w&&(s=l-p*w,r=o+p*w),M&&(h=d-v*M,a=u+v*M),x=yi):(w<0?s=l:w>0&&(r=o),M<0?h=d:M>0&&(a=u),x=gi),L.attr("cursor",xi[m]),B());break;default:return}di()},!0).on("mousemove.brush",O,!0).on("mouseup.brush",Y,!0);It(t.event.view)}hi(),Mr(b),c.call(b),D.start()}function O(){var t=Ot(b);!P||y||_||(Math.abs(t[0]-R[0])>Math.abs(t[1]-R[1])?_=!0:y=!0),R=t,g=!0,di(),B()}function B(){var t;switch(p=R[0]-z[0],v=R[1]-z[1],x){case vi:case pi:w&&(p=Math.max(k-r,Math.min(E-s,p)),o=r+p,l=s+p),M&&(v=Math.max(T-a,Math.min(C-h,v)),u=a+v,d=h+v);break;case gi:w<0?(p=Math.max(k-r,Math.min(E-r,p)),o=r+p,l=s):w>0&&(p=Math.max(k-s,Math.min(E-s,p)),o=r,l=s+p),M<0?(v=Math.max(T-a,Math.min(C-a,v)),u=a+v,d=h):M>0&&(v=Math.max(T-h,Math.min(C-h,v)),u=a,d=h+v);break;case yi:w&&(o=Math.max(k,Math.min(E,r-p*w)),l=Math.max(k,Math.min(E,s+p*w))),M&&(u=Math.max(T,Math.min(C,a-v*M)),d=Math.max(T,Math.min(C,h+v*M)))}l<o&&(w*=-1,t=r,r=s,s=t,t=o,o=l,l=t,m in wi&&L.attr("cursor",xi[m=wi[m]])),d<u&&(M*=-1,t=a,a=h,h=t,t=u,u=d,d=t,m in Mi&&L.attr("cursor",xi[m=Mi[m]])),N.selection&&(S=N.selection),y&&(o=S[0][0],l=S[1][0]),_&&(u=S[0][1],d=S[1][1]),S[0][0]===o&&S[0][1]===u&&S[1][0]===l&&S[1][1]===d||(N.selection=[[o,u],[l,d]],c.call(b),D.brush())}function Y(){if(hi(),t.event.touches){if(t.event.touches.length)return;e&&clearTimeout(e),e=setTimeout(function(){e=null},500),q.on("touchmove.brush touchend.brush touchcancel.brush",null)}else jt(t.event.view,g),U.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);q.attr("pointer-events","all"),L.attr("cursor",xi.overlay),N.selection&&(S=N.selection),Ci(S)&&(N.selection=null,c.call(b)),D.end()}}function h(){var t=this.__brush||{selection:null};return t.extent=r.apply(this,arguments),t.dim=n,t}return u.move=function(t,e){t.selection?t.on("start.brush",function(){f(this,arguments).beforestart().start()}).on("interrupt.brush end.brush",function(){f(this,arguments).end()}).tween("brush",function(){var t=this,r=t.__brush,i=f(t,arguments),o=r.selection,a=n.input("function"==typeof e?e.apply(this,arguments):e,r.extent),u=ye(o,a);function s(n){r.selection=1===n&&Ci(a)?null:u(n),c.call(t),i.brush()}return o&&a?s:s(1)}):t.each(function(){var t=arguments,r=this.__brush,i=n.input("function"==typeof e?e.apply(this,t):e,r.extent),o=f(this,t).beforestart();Mr(this),r.selection=null==i||Ci(i)?null:i,c.call(this),o.start().brush().end()})},s.prototype={beforestart:function(){return 1==++this.active&&(this.state.emitter=this,this.starting=!0),this},start:function(){return this.starting&&(this.starting=!1,this.emit("start")),this},brush:function(){return this.emit("brush"),this},end:function(){return 0==--this.active&&(delete this.state.emitter,this.emit("end")),this},emit:function(t){kt(new li(u,t,n.output(this.state.selection)),o.apply,o,[t,this.that,this.args])}},u.extent=function(t){return arguments.length?(r="function"==typeof t?t:si([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),u):r},u.filter=function(t){return arguments.length?(i="function"==typeof t?t:si(!!t),u):i},u.handleSize=function(t){return arguments.length?(a=+t,u):a},u.on=function(){var t=o.on.apply(o,arguments);return t===o?u:t},u}var zi=Math.cos,Ri=Math.sin,Di=Math.PI,qi=Di/2,Li=2*Di,Ui=Math.max;var Oi=Array.prototype.slice;function Bi(t){return function(){return t}}var Yi=Math.PI,Fi=2*Yi,Ii=Fi-1e-6;function ji(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Hi(){return new ji}function Xi(t){return t.source}function Gi(t){return t.target}function Vi(t){return t.radius}function $i(t){return t.startAngle}function Wi(t){return t.endAngle}ji.prototype=Hi.prototype={constructor:ji,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,r){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+r)},bezierCurveTo:function(t,n,e,r,i,o){this._+="C"+ +t+","+ +n+","+ +e+","+ +r+","+(this._x1=+i)+","+(this._y1=+o)},arcTo:function(t,n,e,r,i){t=+t,n=+n,e=+e,r=+r,i=+i;var o=this._x1,a=this._y1,u=e-t,c=r-n,f=o-t,s=a-n,l=f*f+s*s;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(s*u-c*f)>1e-6&&i){var h=e-o,d=r-a,p=u*u+c*c,v=h*h+d*d,g=Math.sqrt(p),y=Math.sqrt(l),_=i*Math.tan((Yi-Math.acos((p+l-v)/(2*g*y)))/2),b=_/y,m=_/g;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*f)+","+(n+b*s)),this._+="A"+i+","+i+",0,0,"+ +(s*h>f*d)+","+(this._x1=t+m*u)+","+(this._y1=n+m*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,r,i,o){t=+t,n=+n;var a=(e=+e)*Math.cos(r),u=e*Math.sin(r),c=t+a,f=n+u,s=1^o,l=o?r-i:i-r;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+c+","+f:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+c+","+f),e&&(l<0&&(l=l%Fi+Fi),l>Ii?this._+="A"+e+","+e+",0,1,"+s+","+(t-a)+","+(n-u)+"A"+e+","+e+",0,1,"+s+","+(this._x1=c)+","+(this._y1=f):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=Yi)+","+s+","+(this._x1=t+e*Math.cos(i))+","+(this._y1=n+e*Math.sin(i))))},rect:function(t,n,e,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +r+"h"+-e+"Z"},toString:function(){return this._}};function Zi(){}function Qi(t,n){var e=new Zi;if(t instanceof Zi)t.each(function(t,n){e.set(n,t)});else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function Ji(){return{}}function Ki(t,n,e){t[n]=e}function to(){return Qi()}function no(t,n,e){t.set(n,e)}function eo(){}Zi.prototype=Qi.prototype={constructor:Zi,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,n){return this["$"+t]=n,this},remove:function(t){var n="$"+t;return n in this&&delete this[n]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)"$"===n[0]&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)"$"===n[0]&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)"$"===n[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var n in this)"$"===n[0]&&t(this[n],n.slice(1),this)}};var ro=Qi.prototype;function io(t,n){var e=new eo;if(t instanceof eo)t.each(function(t){e.add(t)});else if(t){var r=-1,i=t.length;if(null==n)for(;++r<i;)e.add(t[r]);else for(;++r<i;)e.add(n(t[r],r,t))}return e}eo.prototype=io.prototype={constructor:eo,has:ro.has,add:function(t){return this["$"+(t+="")]=t,this},remove:ro.remove,clear:ro.clear,values:ro.keys,size:ro.size,empty:ro.empty,each:ro.each};var oo=Array.prototype.slice;function ao(t,n){return t-n}function uo(t){return function(){return t}}function co(t,n){for(var e,r=-1,i=n.length;++r<i;)if(e=fo(t,n[r]))return e;return 0}function fo(t,n){for(var e=n[0],r=n[1],i=-1,o=0,a=t.length,u=a-1;o<a;u=o++){var c=t[o],f=c[0],s=c[1],l=t[u],h=l[0],d=l[1];if(so(c,l,n))return 0;s>r!=d>r&&e<(h-f)*(r-s)/(d-s)+f&&(i=-i)}return i}function so(t,n,e){var r,i,o,a;return function(t,n,e){return(n[0]-t[0])*(e[1]-t[1])==(e[0]-t[0])*(n[1]-t[1])}(t,n,e)&&(i=t[r=+(t[0]===n[0])],o=e[r],a=n[r],i<=o&&o<=a||a<=o&&o<=i)}function lo(){}var ho=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function po(){var t=1,n=1,e=M,r=u;function i(t){var n=e(t);if(Array.isArray(n))n=n.slice().sort(ao);else{var r=s(t),i=r[0],a=r[1];n=w(i,a,n),n=g(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){return o(t,n)})}function o(e,i){var o=[],u=[];return function(e,r,i){var o,u,c,f,s,l,h=new Array,d=new Array;o=u=-1,f=e[0]>=r,ho[f<<1].forEach(p);for(;++o<t-1;)c=f,f=e[o+1]>=r,ho[c|f<<1].forEach(p);ho[f<<0].forEach(p);for(;++u<n-1;){for(o=-1,f=e[u*t+t]>=r,s=e[u*t]>=r,ho[f<<1|s<<2].forEach(p);++o<t-1;)c=f,f=e[u*t+t+o+1]>=r,l=s,s=e[u*t+o+1]>=r,ho[c|f<<1|s<<2|l<<3].forEach(p);ho[f|s<<3].forEach(p)}o=-1,s=e[u*t]>=r,ho[s<<2].forEach(p);for(;++o<t-1;)l=s,s=e[u*t+o+1]>=r,ho[s<<2|l<<3].forEach(p);function p(t){var n,e,r=[t[0][0]+o,t[0][1]+u],c=[t[1][0]+o,t[1][1]+u],f=a(r),s=a(c);(n=d[f])?(e=h[s])?(delete d[n.end],delete h[e.start],n===e?(n.ring.push(c),i(n.ring)):h[n.start]=d[e.end]={start:n.start,end:e.end,ring:n.ring.concat(e.ring)}):(delete d[n.end],n.ring.push(c),d[n.end=s]=n):(n=h[s])?(e=d[f])?(delete h[n.start],delete d[e.end],n===e?(n.ring.push(c),i(n.ring)):h[e.start]=d[n.end]={start:e.start,end:n.end,ring:e.ring.concat(n.ring)}):(delete h[n.start],n.ring.unshift(r),h[n.start=f]=n):h[f]=d[s]={start:f,end:s,ring:[r,c]}}ho[s<<3].forEach(p)}(e,i,function(t){r(t,e,i),function(t){for(var n=0,e=t.length,r=t[e-1][1]*t[0][0]-t[e-1][0]*t[0][1];++n<e;)r+=t[n-1][1]*t[n][0]-t[n-1][0]*t[n][1];return r}(t)>0?o.push([t]):u.push(t)}),u.forEach(function(t){for(var n,e=0,r=o.length;e<r;++e)if(-1!==co((n=o[e])[0],t))return void n.push(t)}),{type:"MultiPolygon",value:i,coordinates:o}}function a(n){return 2*n[0]+n[1]*(t+1)*4}function u(e,r,i){e.forEach(function(e){var o,a=e[0],u=e[1],c=0|a,f=0|u,s=r[f*t+c];a>0&&a<t&&c===a&&(o=r[f*t+c-1],e[0]=a+(i-o)/(s-o)-.5),u>0&&u<n&&f===u&&(o=r[(f-1)*t+c],e[1]=u+(i-o)/(s-o)-.5)})}return i.contour=o,i.size=function(e){if(!arguments.length)return[t,n];var r=Math.ceil(e[0]),o=Math.ceil(e[1]);if(!(r>0&&o>0))throw new Error("invalid size");return t=r,n=o,i},i.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?uo(oo.call(t)):uo(t),i):e},i.smooth=function(t){return arguments.length?(r=t?u:lo,i):r===u},i}function vo(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<i;++a)for(var u=0,c=0;u<r+e;++u)u<r&&(c+=t.data[u+a*r]),u>=e&&(u>=o&&(c-=t.data[u-o+a*r]),n.data[u-e+a*r]=c/Math.min(u+1,r-1+o-u,o))}function go(t,n,e){for(var r=t.width,i=t.height,o=1+(e<<1),a=0;a<r;++a)for(var u=0,c=0;u<i+e;++u)u<i&&(c+=t.data[a+u*r]),u>=e&&(u>=o&&(c-=t.data[a+(u-o)*r]),n.data[a+(u-e)*r]=c/Math.min(u+1,i-1+o-u,o))}function yo(t){return t[0]}function _o(t){return t[1]}function bo(){return 1}var mo={},xo={},wo=34,Mo=10,No=13;function Ao(t){return new Function("d","return {"+t.map(function(t,n){return JSON.stringify(t)+": d["+n+"]"}).join(",")+"}")}function So(t){var n=Object.create(null),e=[];return t.forEach(function(t){for(var r in t)r in n||e.push(n[r]=r)}),e}function ko(t){var n=new RegExp('["'+t+"\n\r]"),e=t.charCodeAt(0);function r(t,n){var r,i=[],o=t.length,a=0,u=0,c=o<=0,f=!1;function s(){if(c)return xo;if(f)return f=!1,mo;var n,r,i=a;if(t.charCodeAt(i)===wo){for(;a++<o&&t.charCodeAt(a)!==wo||t.charCodeAt(++a)===wo;);return(n=a)>=o?c=!0:(r=t.charCodeAt(a++))===Mo?f=!0:r===No&&(f=!0,t.charCodeAt(a)===Mo&&++a),t.slice(i+1,n-1).replace(/""/g,'"')}for(;a<o;){if((r=t.charCodeAt(n=a++))===Mo)f=!0;else if(r===No)f=!0,t.charCodeAt(a)===Mo&&++a;else if(r!==e)continue;return t.slice(i,n)}return c=!0,t.slice(i,o)}for(t.charCodeAt(o-1)===Mo&&--o,t.charCodeAt(o-1)===No&&--o;(r=s())!==xo;){for(var l=[];r!==mo&&r!==xo;)l.push(r),r=s();n&&null==(l=n(l,u++))||i.push(l)}return i}function i(n,e){return n.map(function(n){return e.map(function(t){return a(n[t])}).join(t)})}function o(n){return n.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?t.toISOString():n.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,n){var e,i,o=r(t,function(t,r){if(e)return e(t,r-1);i=t,e=n?function(t,n){var e=Ao(t);return function(r,i){return n(e(r),i,t)}}(t,n):Ao(t)});return o.columns=i||[],o},parseRows:r,format:function(n,e){return null==e&&(e=So(n)),[e.map(a).join(t)].concat(i(n,e)).join("\n")},formatBody:function(t,n){return null==n&&(n=So(t)),i(t,n).join("\n")},formatRows:function(t){return t.map(o).join("\n")}}}var To=ko(","),Eo=To.parse,Co=To.parseRows,Po=To.format,zo=To.formatBody,Ro=To.formatRows,Do=ko("\t"),qo=Do.parse,Lo=Do.parseRows,Uo=Do.format,Oo=Do.formatBody,Bo=Do.formatRows;function Yo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.blob()}function Fo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.arrayBuffer()}function Io(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.text()}function jo(t,n){return fetch(t,n).then(Io)}function Ho(t){return function(n,e,r){return 2===arguments.length&&"function"==typeof e&&(r=e,e=void 0),jo(n,e).then(function(n){return t(n,r)})}}var Xo=Ho(Eo),Go=Ho(qo);function Vo(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);return t.json()}function $o(t){return function(n,e){return jo(n,e).then(function(n){return(new DOMParser).parseFromString(n,t)})}}var Wo=$o("application/xml"),Zo=$o("text/html"),Qo=$o("image/svg+xml");function Jo(t){return function(){return t}}function Ko(){return 1e-6*(Math.random()-.5)}function ta(t,n,e,r){if(isNaN(n)||isNaN(e))return t;var i,o,a,u,c,f,s,l,h,d=t._root,p={data:r},v=t._x0,g=t._y0,y=t._x1,_=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a,i=d,!(d=d[l=s<<1|f]))return i[l]=p,t;if(u=+t._x.call(null,d.data),c=+t._y.call(null,d.data),n===u&&e===c)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(f=n>=(o=(v+y)/2))?v=o:y=o,(s=e>=(a=(g+_)/2))?g=a:_=a}while((l=s<<1|f)==(h=(c>=a)<<1|u>=o));return i[h]=d,i[l]=p,t}function na(t,n,e,r,i){this.node=t,this.x0=n,this.y0=e,this.x1=r,this.y1=i}function ea(t){return t[0]}function ra(t){return t[1]}function ia(t,n,e){var r=new oa(null==n?ea:n,null==e?ra:e,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function oa(t,n,e,r,i,o){this._x=t,this._y=n,this._x0=e,this._y0=r,this._x1=i,this._y1=o,this._root=void 0}function aa(t){for(var n={data:t.data},e=n;t=t.next;)e=e.next={data:t.data};return n}var ua=ia.prototype=oa.prototype;function ca(t){return t.x+t.vx}function fa(t){return t.y+t.vy}function sa(t){return t.index}function la(t,n){var e=t.get(n);if(!e)throw new Error("missing: "+n);return e}function ha(t){return t.x}function da(t){return t.y}ua.copy=function(){var t,n,e=new oa(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return e;if(!r.length)return e._root=aa(r),e;for(t=[{source:r,target:e._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(n=r.source[i])&&(n.length?t.push({source:n,target:r.target[i]=new Array(4)}):r.target[i]=aa(n));return e},ua.add=function(t){var n=+this._x.call(null,t),e=+this._y.call(null,t);return ta(this.cover(n,e),n,e,t)},ua.addAll=function(t){var n,e,r,i,o=t.length,a=new Array(o),u=new Array(o),c=1/0,f=1/0,s=-1/0,l=-1/0;for(e=0;e<o;++e)isNaN(r=+this._x.call(null,n=t[e]))||isNaN(i=+this._y.call(null,n))||(a[e]=r,u[e]=i,r<c&&(c=r),r>s&&(s=r),i<f&&(f=i),i>l&&(l=i));for(s<c&&(c=this._x0,s=this._x1),l<f&&(f=this._y0,l=this._y1),this.cover(c,f).cover(s,l),e=0;e<o;++e)ta(this,a[e],u[e],t[e]);return this},ua.cover=function(t,n){if(isNaN(t=+t)||isNaN(n=+n))return this;var e=this._x0,r=this._y0,i=this._x1,o=this._y1;if(isNaN(e))i=(e=Math.floor(t))+1,o=(r=Math.floor(n))+1;else{if(!(e>t||t>i||r>n||n>o))return this;var a,u,c=i-e,f=this._root;switch(u=(n<(r+o)/2)<<1|t<(e+i)/2){case 0:do{(a=new Array(4))[u]=f,f=a}while(o=r+(c*=2),t>(i=e+c)||n>o);break;case 1:do{(a=new Array(4))[u]=f,f=a}while(o=r+(c*=2),(e=i-c)>t||n>o);break;case 2:do{(a=new Array(4))[u]=f,f=a}while(r=o-(c*=2),t>(i=e+c)||r>n);break;case 3:do{(a=new Array(4))[u]=f,f=a}while(r=o-(c*=2),(e=i-c)>t||r>n)}this._root&&this._root.length&&(this._root=f)}return this._x0=e,this._y0=r,this._x1=i,this._y1=o,this},ua.data=function(){var t=[];return this.visit(function(n){if(!n.length)do{t.push(n.data)}while(n=n.next)}),t},ua.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},ua.find=function(t,n,e){var r,i,o,a,u,c,f,s=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new na(v,s,l,h,d)),null==e?e=1/0:(s=t-e,l=n-e,h=t+e,d=n+e,e*=e);c=p.pop();)if(!(!(v=c.node)||(i=c.x0)>h||(o=c.y0)>d||(a=c.x1)<s||(u=c.y1)<l))if(v.length){var g=(i+a)/2,y=(o+u)/2;p.push(new na(v[3],g,y,a,u),new na(v[2],i,y,g,u),new na(v[1],g,o,a,y),new na(v[0],i,o,g,y)),(f=(n>=y)<<1|t>=g)&&(c=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=c)}else{var _=t-+this._x.call(null,v.data),b=n-+this._y.call(null,v.data),m=_*_+b*b;if(m<e){var x=Math.sqrt(e=m);s=t-x,l=n-x,h=t+x,d=n+x,r=v.data}}return r},ua.remove=function(t){if(isNaN(o=+this._x.call(null,t))||isNaN(a=+this._y.call(null,t)))return this;var n,e,r,i,o,a,u,c,f,s,l,h,d=this._root,p=this._x0,v=this._y0,g=this._x1,y=this._y1;if(!d)return this;if(d.length)for(;;){if((f=o>=(u=(p+g)/2))?p=u:g=u,(s=a>=(c=(v+y)/2))?v=c:y=c,n=d,!(d=d[l=s<<1|f]))return this;if(!d.length)break;(n[l+1&3]||n[l+2&3]||n[l+3&3])&&(e=n,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):n?(i?n[l]=i:delete n[l],(d=n[0]||n[1]||n[2]||n[3])&&d===(n[3]||n[2]||n[1]||n[0])&&!d.length&&(e?e[h]=d:this._root=d),this):(this._root=i,this)},ua.removeAll=function(t){for(var n=0,e=t.length;n<e;++n)this.remove(t[n]);return this},ua.root=function(){return this._root},ua.size=function(){var t=0;return this.visit(function(n){if(!n.length)do{++t}while(n=n.next)}),t},ua.visit=function(t){var n,e,r,i,o,a,u=[],c=this._root;for(c&&u.push(new na(c,this._x0,this._y0,this._x1,this._y1));n=u.pop();)if(!t(c=n.node,r=n.x0,i=n.y0,o=n.x1,a=n.y1)&&c.length){var f=(r+o)/2,s=(i+a)/2;(e=c[3])&&u.push(new na(e,f,s,o,a)),(e=c[2])&&u.push(new na(e,r,s,f,a)),(e=c[1])&&u.push(new na(e,f,i,o,s)),(e=c[0])&&u.push(new na(e,r,i,f,s))}return this},ua.visitAfter=function(t){var n,e=[],r=[];for(this._root&&e.push(new na(this._root,this._x0,this._y0,this._x1,this._y1));n=e.pop();){var i=n.node;if(i.length){var o,a=n.x0,u=n.y0,c=n.x1,f=n.y1,s=(a+c)/2,l=(u+f)/2;(o=i[0])&&e.push(new na(o,a,u,s,l)),(o=i[1])&&e.push(new na(o,s,u,c,l)),(o=i[2])&&e.push(new na(o,a,l,s,f)),(o=i[3])&&e.push(new na(o,s,l,c,f))}r.push(n)}for(;n=r.pop();)t(n.node,n.x0,n.y0,n.x1,n.y1);return this},ua.x=function(t){return arguments.length?(this._x=t,this):this._x},ua.y=function(t){return arguments.length?(this._y=t,this):this._y};var pa=10,va=Math.PI*(3-Math.sqrt(5));function ga(t,n){if((e=(t=n?t.toExponential(n-1):t.toExponential()).indexOf("e"))<0)return null;var e,r=t.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+t.slice(e+1)]}function ya(t){return(t=ga(Math.abs(t)))?t[1]:NaN}var _a,ba=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ma(t){return new xa(t)}function xa(t){if(!(n=ba.exec(t)))throw new Error("invalid format: "+t);var n;this.fill=n[1]||" ",this.align=n[2]||">",this.sign=n[3]||"-",this.symbol=n[4]||"",this.zero=!!n[5],this.width=n[6]&&+n[6],this.comma=!!n[7],this.precision=n[8]&&+n[8].slice(1),this.trim=!!n[9],this.type=n[10]||""}function wa(t,n){var e=ga(t,n);if(!e)return t+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}ma.prototype=xa.prototype,xa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var Ma={"%":function(t,n){return(100*t).toFixed(n)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,n){return t.toExponential(n)},f:function(t,n){return t.toFixed(n)},g:function(t,n){return t.toPrecision(n)},o:function(t){return Math.round(t).toString(8)},p:function(t,n){return wa(100*t,n)},r:wa,s:function(t,n){var e=ga(t,n);if(!e)return t+"";var r=e[0],i=e[1],o=i-(_a=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+ga(t,Math.max(0,n+o-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}};function Na(t){return t}var Aa,Sa=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function ka(t){var n,e,r=t.grouping&&t.thousands?(n=t.grouping,e=t.thousands,function(t,r){for(var i=t.length,o=[],a=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>r&&(u=Math.max(1,r-c)),o.push(t.substring(i-=u,i+u)),!((c+=u+1)>r));)u=n[a=(a+1)%n.length];return o.reverse().join(e)}):Na,i=t.currency,o=t.decimal,a=t.numerals?function(t){return function(n){return n.replace(/[0-9]/g,function(n){return t[+n]})}}(t.numerals):Na,u=t.percent||"%";function c(t){var n=(t=ma(t)).fill,e=t.align,c=t.sign,f=t.symbol,s=t.zero,l=t.width,h=t.comma,d=t.precision,p=t.trim,v=t.type;"n"===v?(h=!0,v="g"):Ma[v]||(null==d&&(d=12),p=!0,v="g"),(s||"0"===n&&"="===e)&&(s=!0,n="0",e="=");var g="$"===f?i[0]:"#"===f&&/[boxX]/.test(v)?"0"+v.toLowerCase():"",y="$"===f?i[1]:/[%p]/.test(v)?u:"",_=Ma[v],b=/[defgprs%]/.test(v);function m(t){var i,u,f,m=g,x=y;if("c"===v)x=_(t)+x,t="";else{var w=(t=+t)<0;if(t=_(Math.abs(t),d),p&&(t=function(t){t:for(var n,e=t.length,r=1,i=-1;r<e;++r)switch(t[r]){case".":i=n=r;break;case"0":0===i&&(i=r),n=r;break;default:if(i>0){if(!+t[r])break t;i=0}}return i>0?t.slice(0,i)+t.slice(n+1):t}(t)),w&&0==+t&&(w=!1),m=(w?"("===c?c:"-":"-"===c||"("===c?"":c)+m,x=("s"===v?Sa[8+_a/3]:"")+x+(w&&"("===c?")":""),b)for(i=-1,u=t.length;++i<u;)if(48>(f=t.charCodeAt(i))||f>57){x=(46===f?o+t.slice(i+1):t.slice(i))+x,t=t.slice(0,i);break}}h&&!s&&(t=r(t,1/0));var M=m.length+t.length+x.length,N=M<l?new Array(l-M+1).join(n):"";switch(h&&s&&(t=r(N+t,N.length?l-x.length:1/0),N=""),e){case"<":t=m+t+x+N;break;case"=":t=m+N+t+x;break;case"^":t=N.slice(0,M=N.length>>1)+m+t+x+N.slice(M);break;default:t=N+m+t+x}return a(t)}return d=null==d?6:/[gprs]/.test(v)?Math.max(1,Math.min(21,d)):Math.max(0,Math.min(20,d)),m.toString=function(){return t+""},m}return{format:c,formatPrefix:function(t,n){var e=c(((t=ma(t)).type="f",t)),r=3*Math.max(-8,Math.min(8,Math.floor(ya(n)/3))),i=Math.pow(10,-r),o=Sa[8+r/3];return function(t){return e(i*t)+o}}}}function Ta(n){return Aa=ka(n),t.format=Aa.format,t.formatPrefix=Aa.formatPrefix,Aa}function Ea(t){return Math.max(0,-ya(Math.abs(t)))}function Ca(t,n){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ya(n)/3)))-ya(Math.abs(t)))}function Pa(t,n){return t=Math.abs(t),n=Math.abs(n)-t,Math.max(0,ya(n)-ya(t))+1}function za(){return new Ra}function Ra(){this.reset()}Ta({decimal:".",thousands:",",grouping:[3],currency:["$",""]}),Ra.prototype={constructor:Ra,reset:function(){this.s=this.t=0},add:function(t){qa(Da,t,this.t),qa(this,Da.s,this.s),this.s?this.t+=Da.t:this.s=Da.t},valueOf:function(){return this.s}};var Da=new Ra;function qa(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var La=1e-6,Ua=1e-12,Oa=Math.PI,Ba=Oa/2,Ya=Oa/4,Fa=2*Oa,Ia=180/Oa,ja=Oa/180,Ha=Math.abs,Xa=Math.atan,Ga=Math.atan2,Va=Math.cos,$a=Math.ceil,Wa=Math.exp,Za=Math.log,Qa=Math.pow,Ja=Math.sin,Ka=Math.sign||function(t){return t>0?1:t<0?-1:0},tu=Math.sqrt,nu=Math.tan;function eu(t){return t>1?0:t<-1?Oa:Math.acos(t)}function ru(t){return t>1?Ba:t<-1?-Ba:Math.asin(t)}function iu(t){return(t=Ja(t/2))*t}function ou(){}function au(t,n){t&&cu.hasOwnProperty(t.type)&&cu[t.type](t,n)}var uu={Feature:function(t,n){au(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)au(e[r].geometry,n)}},cu={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){fu(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)fu(e[r],n,0)},Polygon:function(t,n){su(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)su(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)au(e[r],n)}};function fu(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function su(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)fu(t[e],n,1);n.polygonEnd()}function lu(t,n){t&&uu.hasOwnProperty(t.type)?uu[t.type](t,n):au(t,n)}var hu,du,pu,vu,gu,yu=za(),_u=za(),bu={point:ou,lineStart:ou,lineEnd:ou,polygonStart:function(){yu.reset(),bu.lineStart=mu,bu.lineEnd=xu},polygonEnd:function(){var t=+yu;_u.add(t<0?Fa+t:t),this.lineStart=this.lineEnd=this.point=ou},sphere:function(){_u.add(Fa)}};function mu(){bu.point=wu}function xu(){Mu(hu,du)}function wu(t,n){bu.point=Mu,hu=t,du=n,pu=t*=ja,vu=Va(n=(n*=ja)/2+Ya),gu=Ja(n)}function Mu(t,n){var e=(t*=ja)-pu,r=e>=0?1:-1,i=r*e,o=Va(n=(n*=ja)/2+Ya),a=Ja(n),u=gu*a,c=vu*o+u*Va(i),f=u*r*Ja(i);yu.add(Ga(f,c)),pu=t,vu=o,gu=a}function Nu(t){return[Ga(t[1],t[0]),ru(t[2])]}function Au(t){var n=t[0],e=t[1],r=Va(e);return[r*Va(n),r*Ja(n),Ja(e)]}function Su(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function ku(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function Tu(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Eu(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Cu(t){var n=tu(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Pu,zu,Ru,Du,qu,Lu,Uu,Ou,Bu,Yu,Fu,Iu,ju,Hu,Xu,Gu,Vu,$u,Wu,Zu,Qu,Ju,Ku,tc,nc,ec,rc=za(),ic={point:oc,lineStart:uc,lineEnd:cc,polygonStart:function(){ic.point=fc,ic.lineStart=sc,ic.lineEnd=lc,rc.reset(),bu.polygonStart()},polygonEnd:function(){bu.polygonEnd(),ic.point=oc,ic.lineStart=uc,ic.lineEnd=cc,yu<0?(Pu=-(Ru=180),zu=-(Du=90)):rc>La?Du=90:rc<-La&&(zu=-90),Yu[0]=Pu,Yu[1]=Ru}};function oc(t,n){Bu.push(Yu=[Pu=t,Ru=t]),n<zu&&(zu=n),n>Du&&(Du=n)}function ac(t,n){var e=Au([t*ja,n*ja]);if(Ou){var r=ku(Ou,e),i=ku([r[1],-r[0],0],r);Cu(i),i=Nu(i);var o,a=t-qu,u=a>0?1:-1,c=i[0]*Ia*u,f=Ha(a)>180;f^(u*qu<c&&c<u*t)?(o=i[1]*Ia)>Du&&(Du=o):f^(u*qu<(c=(c+360)%360-180)&&c<u*t)?(o=-i[1]*Ia)<zu&&(zu=o):(n<zu&&(zu=n),n>Du&&(Du=n)),f?t<qu?hc(Pu,t)>hc(Pu,Ru)&&(Ru=t):hc(t,Ru)>hc(Pu,Ru)&&(Pu=t):Ru>=Pu?(t<Pu&&(Pu=t),t>Ru&&(Ru=t)):t>qu?hc(Pu,t)>hc(Pu,Ru)&&(Ru=t):hc(t,Ru)>hc(Pu,Ru)&&(Pu=t)}else Bu.push(Yu=[Pu=t,Ru=t]);n<zu&&(zu=n),n>Du&&(Du=n),Ou=e,qu=t}function uc(){ic.point=ac}function cc(){Yu[0]=Pu,Yu[1]=Ru,ic.point=oc,Ou=null}function fc(t,n){if(Ou){var e=t-qu;rc.add(Ha(e)>180?e+(e>0?360:-360):e)}else Lu=t,Uu=n;bu.point(t,n),ac(t,n)}function sc(){bu.lineStart()}function lc(){fc(Lu,Uu),bu.lineEnd(),Ha(rc)>La&&(Pu=-(Ru=180)),Yu[0]=Pu,Yu[1]=Ru,Ou=null}function hc(t,n){return(n-=t)<0?n+360:n}function dc(t,n){return t[0]-n[0]}function pc(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}var vc={sphere:ou,point:gc,lineStart:_c,lineEnd:xc,polygonStart:function(){vc.lineStart=wc,vc.lineEnd=Mc},polygonEnd:function(){vc.lineStart=_c,vc.lineEnd=xc}};function gc(t,n){t*=ja;var e=Va(n*=ja);yc(e*Va(t),e*Ja(t),Ja(n))}function yc(t,n,e){ju+=(t-ju)/++Fu,Hu+=(n-Hu)/Fu,Xu+=(e-Xu)/Fu}function _c(){vc.point=bc}function bc(t,n){t*=ja;var e=Va(n*=ja);tc=e*Va(t),nc=e*Ja(t),ec=Ja(n),vc.point=mc,yc(tc,nc,ec)}function mc(t,n){t*=ja;var e=Va(n*=ja),r=e*Va(t),i=e*Ja(t),o=Ja(n),a=Ga(tu((a=nc*o-ec*i)*a+(a=ec*r-tc*o)*a+(a=tc*i-nc*r)*a),tc*r+nc*i+ec*o);Iu+=a,Gu+=a*(tc+(tc=r)),Vu+=a*(nc+(nc=i)),$u+=a*(ec+(ec=o)),yc(tc,nc,ec)}function xc(){vc.point=gc}function wc(){vc.point=Nc}function Mc(){Ac(Ju,Ku),vc.point=gc}function Nc(t,n){Ju=t,Ku=n,t*=ja,n*=ja,vc.point=Ac;var e=Va(n);tc=e*Va(t),nc=e*Ja(t),ec=Ja(n),yc(tc,nc,ec)}function Ac(t,n){t*=ja;var e=Va(n*=ja),r=e*Va(t),i=e*Ja(t),o=Ja(n),a=nc*o-ec*i,u=ec*r-tc*o,c=tc*i-nc*r,f=tu(a*a+u*u+c*c),s=ru(f),l=f&&-s/f;Wu+=l*a,Zu+=l*u,Qu+=l*c,Iu+=s,Gu+=s*(tc+(tc=r)),Vu+=s*(nc+(nc=i)),$u+=s*(ec+(ec=o)),yc(tc,nc,ec)}function Sc(t){return function(){return t}}function kc(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function Tc(t,n){return[Ha(t)>Oa?t+Math.round(-t/Fa)*Fa:t,n]}function Ec(t,n,e){return(t%=Fa)?n||e?kc(Pc(t),zc(n,e)):Pc(t):n||e?zc(n,e):Tc}function Cc(t){return function(n,e){return[(n+=t)>Oa?n-Fa:n<-Oa?n+Fa:n,e]}}function Pc(t){var n=Cc(t);return n.invert=Cc(-t),n}function zc(t,n){var e=Va(t),r=Ja(t),i=Va(n),o=Ja(n);function a(t,n){var a=Va(n),u=Va(t)*a,c=Ja(t)*a,f=Ja(n),s=f*e+u*r;return[Ga(c*i-s*o,u*e-f*r),ru(s*i+c*o)]}return a.invert=function(t,n){var a=Va(n),u=Va(t)*a,c=Ja(t)*a,f=Ja(n),s=f*i-c*o;return[Ga(c*i+f*o,u*e+s*r),ru(s*e-u*r)]},a}function Rc(t){function n(n){return(n=t(n[0]*ja,n[1]*ja))[0]*=Ia,n[1]*=Ia,n}return t=Ec(t[0]*ja,t[1]*ja,t.length>2?t[2]*ja:0),n.invert=function(n){return(n=t.invert(n[0]*ja,n[1]*ja))[0]*=Ia,n[1]*=Ia,n},n}function Dc(t,n,e,r,i,o){if(e){var a=Va(n),u=Ja(n),c=r*e;null==i?(i=n+r*Fa,o=n-c/2):(i=qc(a,i),o=qc(a,o),(r>0?i<o:i>o)&&(i+=r*Fa));for(var f,s=i;r>0?s>o:s<o;s-=c)f=Nu([a,-u*Va(s),-u*Ja(s)]),t.point(f[0],f[1])}}function qc(t,n){(n=Au(n))[0]-=t,Cu(n);var e=eu(-n[1]);return((-n[2]<0?-e:e)+Fa-La)%Fa}function Lc(){var t,n=[];return{point:function(n,e){t.push([n,e])},lineStart:function(){n.push(t=[])},lineEnd:ou,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function Uc(t,n){return Ha(t[0]-n[0])<La&&Ha(t[1]-n[1])<La}function Oc(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function Bc(t,n,e,r,i){var o,a,u=[],c=[];if(t.forEach(function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(Uc(r,a)){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);i.lineEnd()}else u.push(e=new Oc(r,t,null,!0)),c.push(e.o=new Oc(r,null,e,!1)),u.push(e=new Oc(a,t,null,!1)),c.push(e.o=new Oc(a,null,e,!0))}}),u.length){for(c.sort(n),Yc(u),Yc(c),o=0,a=c.length;o<a;++o)c[o].e=e=!e;for(var f,s,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=f.length;o<a;++o)i.point((s=f[o])[0],s[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,o=f.length-1;o>=0;--o)i.point((s=f[o])[0],s[1]);else r(h.x,h.p.x,-1,i);h=h.p}f=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function Yc(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}Tc.invert=Tc;var Fc=za();function Ic(t,n){var e=n[0],r=n[1],i=Ja(r),o=[Ja(e),-Va(e),0],a=0,u=0;Fc.reset(),1===i?r=Ba+La:-1===i&&(r=-Ba-La);for(var c=0,f=t.length;c<f;++c)if(l=(s=t[c]).length)for(var s,l,h=s[l-1],d=h[0],p=h[1]/2+Ya,v=Ja(p),g=Va(p),y=0;y<l;++y,d=b,v=x,g=w,h=_){var _=s[y],b=_[0],m=_[1]/2+Ya,x=Ja(m),w=Va(m),M=b-d,N=M>=0?1:-1,A=N*M,S=A>Oa,k=v*x;if(Fc.add(Ga(k*N*Ja(A),g*w+k*Va(A))),a+=S?M+N*Fa:M,S^d>=e^b>=e){var T=ku(Au(h),Au(_));Cu(T);var E=ku(o,T);Cu(E);var C=(S^M>=0?-1:1)*ru(E[2]);(r>C||r===C&&(T[0]||T[1]))&&(u+=S^M>=0?1:-1)}}return(a<-La||a<La&&Fc<-La)^1&u}function jc(t,n,e,r){return function(i){var o,a,u,c=n(i),f=Lc(),s=n(f),l=!1,h={point:d,lineStart:v,lineEnd:g,polygonStart:function(){h.point=y,h.lineStart=_,h.lineEnd=b,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=v,h.lineEnd=g,a=S(a);var t=Ic(o,r);a.length?(l||(i.polygonStart(),l=!0),Bc(a,Xc,t,e,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){c.point(t,n)}function v(){h.point=p,c.lineStart()}function g(){h.point=d,c.lineEnd()}function y(t,n){u.push([t,n]),s.point(t,n)}function _(){s.lineStart(),u=[]}function b(){y(u[0][0],u[0][1]),s.lineEnd();var t,n,e,r,c=s.clean(),h=f.result(),d=h.length;if(u.pop(),o.push(u),u=null,d)if(1&c){if((n=(e=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&c&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Hc))}return h}}function Hc(t){return t.length>1}function Xc(t,n){return((t=t.x)[0]<0?t[1]-Ba-La:Ba-t[1])-((n=n.x)[0]<0?n[1]-Ba-La:Ba-n[1])}var Gc=jc(function(){return!0},function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var u=o>0?Oa:-Oa,c=Ha(o-e);Ha(c-Oa)<La?(t.point(e,r=(r+a)/2>0?Ba:-Ba),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(o,r),n=0):i!==u&&c>=Oa&&(Ha(e-i)<La&&(e-=i*La),Ha(o-u)<La&&(o-=u*La),r=function(t,n,e,r){var i,o,a=Ja(t-e);return Ha(a)>La?Xa((Ja(n)*(o=Va(r))*Ja(e)-Ja(r)*(i=Va(n))*Ja(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),n=0),t.point(e=o,r=a),i=u},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}},function(t,n,e,r){var i;if(null==t)i=e*Ba,r.point(-Oa,i),r.point(0,i),r.point(Oa,i),r.point(Oa,0),r.point(Oa,-i),r.point(0,-i),r.point(-Oa,-i),r.point(-Oa,0),r.point(-Oa,i);else if(Ha(t[0]-n[0])>La){var o=t[0]<n[0]?Oa:-Oa;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])},[-Oa,-Ba]);function Vc(t){var n=Va(t),e=6*ja,r=n>0,i=Ha(n)>La;function o(t,e){return Va(t)*Va(e)>n}function a(t,e,r){var i=[1,0,0],o=ku(Au(t),Au(e)),a=Su(o,o),u=o[0],c=a-u*u;if(!c)return!r&&t;var f=n*a/c,s=-n*u/c,l=ku(i,o),h=Eu(i,f);Tu(h,Eu(o,s));var d=l,p=Su(h,d),v=Su(d,d),g=p*p-v*(Su(h,h)-1);if(!(g<0)){var y=tu(g),_=Eu(d,(-p-y)/v);if(Tu(_,h),_=Nu(_),!r)return _;var b,m=t[0],x=e[0],w=t[1],M=e[1];x<m&&(b=m,m=x,x=b);var N=x-m,A=Ha(N-Oa)<La;if(!A&&M<w&&(b=w,w=M,M=b),A||N<La?A?w+M>0^_[1]<(Ha(_[0]-m)<La?w:M):w<=_[1]&&_[1]<=M:N>Oa^(m<=_[0]&&_[0]<=x)){var S=Eu(d,(-p+y)/v);return Tu(S,h),[_,Nu(S)]}}}function u(n,e){var i=r?t:Oa-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return jc(o,function(t){var n,e,c,f,s;return{lineStart:function(){f=c=!1,s=1},point:function(l,h){var d,p=[l,h],v=o(l,h),g=r?v?0:u(l,h):v?u(l+(l<0?Oa:-Oa),h):0;if(!n&&(f=c=v)&&t.lineStart(),v!==c&&(!(d=a(n,p))||Uc(n,d)||Uc(p,d))&&(p[0]+=La,p[1]+=La,v=o(p[0],p[1])),v!==c)s=0,v?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1]),t.lineEnd()),n=d;else if(i&&n&&r^v){var y;g&e||!(y=a(p,n,!0))||(s=0,r?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1])))}!v||n&&Uc(n,p)||t.point(p[0],p[1]),n=p,c=v,e=g},lineEnd:function(){c&&t.lineEnd(),n=null},clean:function(){return s|(f&&c)<<1}}},function(n,r,i,o){Dc(o,t,e,i,n,r)},r?[0,-t]:[-Oa,t-Oa])}var $c=1e9,Wc=-$c;function Zc(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,u,f){var s=0,l=0;if(null==i||(s=a(i,u))!==(l=a(o,u))||c(i,o)<0^u>0)do{f.point(0===s||3===s?t:e,s>1?r:n)}while((s=(s+u+4)%4)!==l);else f.point(o[0],o[1])}function a(r,i){return Ha(r[0]-t)<La?i>0?0:3:Ha(r[0]-e)<La?i>0?2:1:Ha(r[1]-n)<La?i>0?1:0:i>0?3:2}function u(t,n){return c(t.x,n.x)}function c(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var c,f,s,l,h,d,p,v,g,y,_,b=a,m=Lc(),x={point:w,lineStart:function(){x.point=M,f&&f.push(s=[]);y=!0,g=!1,p=v=NaN},lineEnd:function(){c&&(M(l,h),d&&g&&m.rejoin(),c.push(m.result()));x.point=w,g&&b.lineEnd()},polygonStart:function(){b=m,c=[],f=[],_=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=f.length;e<i;++e)for(var o,a,u=f[e],c=1,s=u.length,l=u[0],h=l[0],d=l[1];c<s;++c)o=h,a=d,l=u[c],h=l[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=_&&n,i=(c=S(c)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&Bc(c,u,n,o,a),a.polygonEnd());b=a,c=f=s=null}};function w(t,n){i(t,n)&&b.point(t,n)}function M(o,a){var u=i(o,a);if(f&&s.push([o,a]),y)l=o,h=a,d=u,y=!1,u&&(b.lineStart(),b.point(o,a));else if(u&&g)b.point(o,a);else{var c=[p=Math.max(Wc,Math.min($c,p)),v=Math.max(Wc,Math.min($c,v))],m=[o=Math.max(Wc,Math.min($c,o)),a=Math.max(Wc,Math.min($c,a))];!function(t,n,e,r,i,o){var a,u=t[0],c=t[1],f=0,s=1,l=n[0]-u,h=n[1]-c;if(a=e-u,l||!(a>0)){if(a/=l,l<0){if(a<f)return;a<s&&(s=a)}else if(l>0){if(a>s)return;a>f&&(f=a)}if(a=i-u,l||!(a<0)){if(a/=l,l<0){if(a>s)return;a>f&&(f=a)}else if(l>0){if(a<f)return;a<s&&(s=a)}if(a=r-c,h||!(a>0)){if(a/=h,h<0){if(a<f)return;a<s&&(s=a)}else if(h>0){if(a>s)return;a>f&&(f=a)}if(a=o-c,h||!(a<0)){if(a/=h,h<0){if(a>s)return;a>f&&(f=a)}else if(h>0){if(a<f)return;a<s&&(s=a)}return f>0&&(t[0]=u+f*l,t[1]=c+f*h),s<1&&(n[0]=u+s*l,n[1]=c+s*h),!0}}}}}(c,m,t,n,e,r)?u&&(b.lineStart(),b.point(o,a),_=!1):(g||(b.lineStart(),b.point(c[0],c[1])),b.point(m[0],m[1]),u||b.lineEnd(),_=!1)}p=o,v=a,g=u}return x}}var Qc,Jc,Kc,tf=za(),nf={sphere:ou,point:ou,lineStart:function(){nf.point=rf,nf.lineEnd=ef},lineEnd:ou,polygonStart:ou,polygonEnd:ou};function ef(){nf.point=nf.lineEnd=ou}function rf(t,n){Qc=t*=ja,Jc=Ja(n*=ja),Kc=Va(n),nf.point=of}function of(t,n){t*=ja;var e=Ja(n*=ja),r=Va(n),i=Ha(t-Qc),o=Va(i),a=r*Ja(i),u=Kc*e-Jc*r*o,c=Jc*e+Kc*r*o;tf.add(Ga(tu(a*a+u*u),c)),Qc=t,Jc=e,Kc=r}function af(t){return tf.reset(),lu(t,nf),+tf}var uf=[null,null],cf={type:"LineString",coordinates:uf};function ff(t,n){return uf[0]=t,uf[1]=n,af(cf)}var sf={Feature:function(t,n){return hf(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(hf(e[r].geometry,n))return!0;return!1}},lf={Sphere:function(){return!0},Point:function(t,n){return df(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(df(e[r],n))return!0;return!1},LineString:function(t,n){return pf(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(pf(e[r],n))return!0;return!1},Polygon:function(t,n){return vf(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(vf(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(hf(e[r],n))return!0;return!1}};function hf(t,n){return!(!t||!lf.hasOwnProperty(t.type))&&lf[t.type](t,n)}function df(t,n){return 0===ff(t,n)}function pf(t,n){var e=ff(t[0],t[1]);return ff(t[0],n)+ff(n,t[1])<=e+La}function vf(t,n){return!!Ic(t.map(gf),yf(n))}function gf(t){return(t=t.map(yf)).pop(),t}function yf(t){return[t[0]*ja,t[1]*ja]}function _f(t,n,e){var r=g(t,n-La,e).concat(n);return function(t){return r.map(function(n){return[t,n]})}}function bf(t,n,e){var r=g(t,n-La,e).concat(n);return function(t){return r.map(function(n){return[n,t]})}}function mf(){var t,n,e,r,i,o,a,u,c,f,s,l,h=10,d=h,p=90,v=360,y=2.5;function _(){return{type:"MultiLineString",coordinates:b()}}function b(){return g($a(r/p)*p,e,p).map(s).concat(g($a(u/v)*v,a,v).map(l)).concat(g($a(n/h)*h,t,h).filter(function(t){return Ha(t%p)>La}).map(c)).concat(g($a(o/d)*d,i,d).filter(function(t){return Ha(t%v)>La}).map(f))}return _.lines=function(){return b().map(function(t){return{type:"LineString",coordinates:t}})},_.outline=function(){return{type:"Polygon",coordinates:[s(r).concat(l(a).slice(1),s(e).reverse().slice(1),l(u).reverse().slice(1))]}},_.extent=function(t){return arguments.length?_.extentMajor(t).extentMinor(t):_.extentMinor()},_.extentMajor=function(t){return arguments.length?(r=+t[0][0],e=+t[1][0],u=+t[0][1],a=+t[1][1],r>e&&(t=r,r=e,e=t),u>a&&(t=u,u=a,a=t),_.precision(y)):[[r,u],[e,a]]},_.extentMinor=function(e){return arguments.length?(n=+e[0][0],t=+e[1][0],o=+e[0][1],i=+e[1][1],n>t&&(e=n,n=t,t=e),o>i&&(e=o,o=i,i=e),_.precision(y)):[[n,o],[t,i]]},_.step=function(t){return arguments.length?_.stepMajor(t).stepMinor(t):_.stepMinor()},_.stepMajor=function(t){return arguments.length?(p=+t[0],v=+t[1],_):[p,v]},_.stepMinor=function(t){return arguments.length?(h=+t[0],d=+t[1],_):[h,d]},_.precision=function(h){return arguments.length?(y=+h,c=_f(o,i,90),f=bf(n,t,y),s=_f(u,a,90),l=bf(r,e,y),_):y},_.extentMajor([[-180,-90+La],[180,90-La]]).extentMinor([[-180,-80-La],[180,80+La]])}function xf(t){return t}var wf,Mf,Nf,Af,Sf=za(),kf=za(),Tf={point:ou,lineStart:ou,lineEnd:ou,polygonStart:function(){Tf.lineStart=Ef,Tf.lineEnd=zf},polygonEnd:function(){Tf.lineStart=Tf.lineEnd=Tf.point=ou,Sf.add(Ha(kf)),kf.reset()},result:function(){var t=Sf/2;return Sf.reset(),t}};function Ef(){Tf.point=Cf}function Cf(t,n){Tf.point=Pf,wf=Nf=t,Mf=Af=n}function Pf(t,n){kf.add(Af*t-Nf*n),Nf=t,Af=n}function zf(){Pf(wf,Mf)}var Rf=1/0,Df=Rf,qf=-Rf,Lf=qf,Uf={point:function(t,n){t<Rf&&(Rf=t);t>qf&&(qf=t);n<Df&&(Df=n);n>Lf&&(Lf=n)},lineStart:ou,lineEnd:ou,polygonStart:ou,polygonEnd:ou,result:function(){var t=[[Rf,Df],[qf,Lf]];return qf=Lf=-(Df=Rf=1/0),t}};var Of,Bf,Yf,Ff,If=0,jf=0,Hf=0,Xf=0,Gf=0,Vf=0,$f=0,Wf=0,Zf=0,Qf={point:Jf,lineStart:Kf,lineEnd:es,polygonStart:function(){Qf.lineStart=rs,Qf.lineEnd=is},polygonEnd:function(){Qf.point=Jf,Qf.lineStart=Kf,Qf.lineEnd=es},result:function(){var t=Zf?[$f/Zf,Wf/Zf]:Vf?[Xf/Vf,Gf/Vf]:Hf?[If/Hf,jf/Hf]:[NaN,NaN];return If=jf=Hf=Xf=Gf=Vf=$f=Wf=Zf=0,t}};function Jf(t,n){If+=t,jf+=n,++Hf}function Kf(){Qf.point=ts}function ts(t,n){Qf.point=ns,Jf(Yf=t,Ff=n)}function ns(t,n){var e=t-Yf,r=n-Ff,i=tu(e*e+r*r);Xf+=i*(Yf+t)/2,Gf+=i*(Ff+n)/2,Vf+=i,Jf(Yf=t,Ff=n)}function es(){Qf.point=Jf}function rs(){Qf.point=os}function is(){as(Of,Bf)}function os(t,n){Qf.point=as,Jf(Of=Yf=t,Bf=Ff=n)}function as(t,n){var e=t-Yf,r=n-Ff,i=tu(e*e+r*r);Xf+=i*(Yf+t)/2,Gf+=i*(Ff+n)/2,Vf+=i,$f+=(i=Ff*t-Yf*n)*(Yf+t),Wf+=i*(Ff+n),Zf+=3*i,Jf(Yf=t,Ff=n)}function us(t){this._context=t}us.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._context.moveTo(t,n),this._point=1;break;case 1:this._context.lineTo(t,n);break;default:this._context.moveTo(t+this._radius,n),this._context.arc(t,n,this._radius,0,Fa)}},result:ou};var cs,fs,ss,ls,hs,ds=za(),ps={point:ou,lineStart:function(){ps.point=vs},lineEnd:function(){cs&&gs(fs,ss),ps.point=ou},polygonStart:function(){cs=!0},polygonEnd:function(){cs=null},result:function(){var t=+ds;return ds.reset(),t}};function vs(t,n){ps.point=gs,fs=ls=t,ss=hs=n}function gs(t,n){ls-=t,hs-=n,ds.add(tu(ls*ls+hs*hs)),ls=t,hs=n}function ys(){this._string=[]}function _s(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function bs(t){return function(n){var e=new ms;for(var r in t)e[r]=t[r];return e.stream=n,e}}function ms(){}function xs(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),lu(e,t.stream(Uf)),n(Uf.result()),null!=r&&t.clipExtent(r),t}function ws(t,n,e){return xs(t,function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,u=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,u])},e)}function Ms(t,n,e){return ws(t,[[0,0],n],e)}function Ns(t,n,e){return xs(t,function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])},e)}function As(t,n,e){return xs(t,function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])},e)}ys.prototype={_radius:4.5,_circle:_s(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,n){switch(this._point){case 0:this._string.push("M",t,",",n),this._point=1;break;case 1:this._string.push("L",t,",",n);break;default:null==this._circle&&(this._circle=_s(this._radius)),this._string.push("M",t,",",n,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}},ms.prototype={constructor:ms,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Ss=16,ks=Va(30*ja);function Ts(t,n){return+n?function(t,n){function e(r,i,o,a,u,c,f,s,l,h,d,p,v,g){var y=f-r,_=s-i,b=y*y+_*_;if(b>4*n&&v--){var m=a+h,x=u+d,w=c+p,M=tu(m*m+x*x+w*w),N=ru(w/=M),A=Ha(Ha(w)-1)<La||Ha(o-l)<La?(o+l)/2:Ga(x,m),S=t(A,N),k=S[0],T=S[1],E=k-r,C=T-i,P=_*E-y*C;(P*P/b>n||Ha((y*E+_*C)/b-.5)>.3||a*h+u*d+c*p<ks)&&(e(r,i,o,a,u,c,k,T,A,m/=M,x/=M,w,v,g),g.point(k,T),e(k,T,A,m,x,w,f,s,l,h,d,p,v,g))}}return function(n){var r,i,o,a,u,c,f,s,l,h,d,p,v={point:g,lineStart:y,lineEnd:b,polygonStart:function(){n.polygonStart(),v.lineStart=m},polygonEnd:function(){n.polygonEnd(),v.lineStart=y}};function g(e,r){e=t(e,r),n.point(e[0],e[1])}function y(){s=NaN,v.point=_,n.lineStart()}function _(r,i){var o=Au([r,i]),a=t(r,i);e(s,l,f,h,d,p,s=a[0],l=a[1],f=r,h=o[0],d=o[1],p=o[2],Ss,n),n.point(s,l)}function b(){v.point=g,n.lineEnd()}function m(){y(),v.point=x,v.lineEnd=w}function x(t,n){_(r=t,n),i=s,o=l,a=h,u=d,c=p,v.point=_}function w(){e(s,l,f,h,d,p,i,o,r,a,u,c,Ss,n),v.lineEnd=b,b()}return v}}(t,n):function(t){return bs({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var Es=bs({point:function(t,n){this.stream.point(t*ja,n*ja)}});function Cs(t,n,e,r){var i=Va(r),o=Ja(r),a=i*t,u=o*t,c=i/t,f=o/t,s=(o*e-i*n)/t,l=(o*n+i*e)/t;function h(t,r){return[a*t-u*r+n,e-u*t-a*r]}return h.invert=function(t,n){return[c*t-f*n+s,l-f*t-c*n]},h}function Ps(t){return zs(function(){return t})()}function zs(t){var n,e,r,i,o,a,u,c,f,s,l=150,h=480,d=250,p=0,v=0,g=0,y=0,_=0,b=0,m=null,x=Gc,w=null,M=xf,N=.5;function A(t){return c(t[0]*ja,t[1]*ja)}function S(t){return(t=c.invert(t[0],t[1]))&&[t[0]*Ia,t[1]*Ia]}function k(){var t=Cs(l,0,0,b).apply(null,n(p,v)),r=(b?Cs:function(t,n,e){function r(r,i){return[n+t*r,e-t*i]}return r.invert=function(r,i){return[(r-n)/t,(e-i)/t]},r})(l,h-t[0],d-t[1],b);return e=Ec(g,y,_),u=kc(n,r),c=kc(e,u),a=Ts(u,N),T()}function T(){return f=s=null,A}return A.stream=function(t){return f&&s===t?f:f=Es(function(t){return bs({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(x(a(M(s=t)))))},A.preclip=function(t){return arguments.length?(x=t,m=void 0,T()):x},A.postclip=function(t){return arguments.length?(M=t,w=r=i=o=null,T()):M},A.clipAngle=function(t){return arguments.length?(x=+t?Vc(m=t*ja):(m=null,Gc),T()):m*Ia},A.clipExtent=function(t){return arguments.length?(M=null==t?(w=r=i=o=null,xf):Zc(w=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==w?null:[[w,r],[i,o]]},A.scale=function(t){return arguments.length?(l=+t,k()):l},A.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],k()):[h,d]},A.center=function(t){return arguments.length?(p=t[0]%360*ja,v=t[1]%360*ja,k()):[p*Ia,v*Ia]},A.rotate=function(t){return arguments.length?(g=t[0]%360*ja,y=t[1]%360*ja,_=t.length>2?t[2]%360*ja:0,k()):[g*Ia,y*Ia,_*Ia]},A.angle=function(t){return arguments.length?(b=t%360*ja,k()):b*Ia},A.precision=function(t){return arguments.length?(a=Ts(u,N=t*t),T()):tu(N)},A.fitExtent=function(t,n){return ws(A,t,n)},A.fitSize=function(t,n){return Ms(A,t,n)},A.fitWidth=function(t,n){return Ns(A,t,n)},A.fitHeight=function(t,n){return As(A,t,n)},function(){return n=t.apply(this,arguments),A.invert=n.invert&&S,k()}}function Rs(t){var n=0,e=Oa/3,r=zs(t),i=r(n,e);return i.parallels=function(t){return arguments.length?r(n=t[0]*ja,e=t[1]*ja):[n*Ia,e*Ia]},i}function Ds(t,n){var e=Ja(t),r=(e+Ja(n))/2;if(Ha(r)<La)return function(t){var n=Va(t);function e(t,e){return[t*n,Ja(e)/n]}return e.invert=function(t,e){return[t/n,ru(e*n)]},e}(t);var i=1+e*(2*r-e),o=tu(i)/r;function a(t,n){var e=tu(i-2*r*Ja(n))/r;return[e*Ja(t*=r),o-e*Va(t)]}return a.invert=function(t,n){var e=o-n;return[Ga(t,Ha(e))/r*Ka(e),ru((i-(t*t+e*e)*r*r)/(2*r))]},a}function qs(){return Rs(Ds).scale(155.424).center([0,33.6442])}function Ls(){return qs().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Us(t){return function(n,e){var r=Va(n),i=Va(e),o=t(r*i);return[o*i*Ja(n),o*Ja(e)]}}function Os(t){return function(n,e){var r=tu(n*n+e*e),i=t(r),o=Ja(i),a=Va(i);return[Ga(n*o,r*a),ru(r&&e*o/r)]}}var Bs=Us(function(t){return tu(2/(1+t))});Bs.invert=Os(function(t){return 2*ru(t/2)});var Ys=Us(function(t){return(t=eu(t))&&t/Ja(t)});function Fs(t,n){return[t,Za(nu((Ba+n)/2))]}function Is(t){var n,e,r,i=Ps(t),o=i.center,a=i.scale,u=i.translate,c=i.clipExtent,f=null;function s(){var o=Oa*a(),u=i(Rc(i.rotate()).invert([0,0]));return c(null==f?[[u[0]-o,u[1]-o],[u[0]+o,u[1]+o]]:t===Fs?[[Math.max(u[0]-o,f),n],[Math.min(u[0]+o,e),r]]:[[f,Math.max(u[1]-o,n)],[e,Math.min(u[1]+o,r)]])}return i.scale=function(t){return arguments.length?(a(t),s()):a()},i.translate=function(t){return arguments.length?(u(t),s()):u()},i.center=function(t){return arguments.length?(o(t),s()):o()},i.clipExtent=function(t){return arguments.length?(null==t?f=n=e=r=null:(f=+t[0][0],n=+t[0][1],e=+t[1][0],r=+t[1][1]),s()):null==f?null:[[f,n],[e,r]]},s()}function js(t){return nu((Ba+t)/2)}function Hs(t,n){var e=Va(t),r=t===n?Ja(t):Za(e/Va(n))/Za(js(n)/js(t)),i=e*Qa(js(t),r)/r;if(!r)return Fs;function o(t,n){i>0?n<-Ba+La&&(n=-Ba+La):n>Ba-La&&(n=Ba-La);var e=i/Qa(js(n),r);return[e*Ja(r*t),i-e*Va(r*t)]}return o.invert=function(t,n){var e=i-n,o=Ka(r)*tu(t*t+e*e);return[Ga(t,Ha(e))/r*Ka(e),2*Xa(Qa(i/o,1/r))-Ba]},o}function Xs(t,n){return[t,n]}function Gs(t,n){var e=Va(t),r=t===n?Ja(t):(e-Va(n))/(n-t),i=e/r+t;if(Ha(r)<La)return Xs;function o(t,n){var e=i-n,o=r*t;return[e*Ja(o),i-e*Va(o)]}return o.invert=function(t,n){var e=i-n;return[Ga(t,Ha(e))/r*Ka(e),i-Ka(r)*tu(t*t+e*e)]},o}Ys.invert=Os(function(t){return t}),Fs.invert=function(t,n){return[t,2*Xa(Wa(n))-Ba]},Xs.invert=Xs;var Vs=1.340264,$s=-.081106,Ws=893e-6,Zs=.003796,Qs=tu(3)/2;function Js(t,n){var e=ru(Qs*Ja(n)),r=e*e,i=r*r*r;return[t*Va(e)/(Qs*(Vs+3*$s*r+i*(7*Ws+9*Zs*r))),e*(Vs+$s*r+i*(Ws+Zs*r))]}function Ks(t,n){var e=Va(n),r=Va(t)*e;return[e*Ja(t)/r,Ja(n)/r]}function tl(t,n,e,r){return 1===t&&1===n&&0===e&&0===r?xf:bs({point:function(i,o){this.stream.point(i*t+e,o*n+r)}})}function nl(t,n){var e=n*n,r=e*e;return[t*(.8707-.131979*e+r*(r*(.003971*e-.001529*r)-.013791)),n*(1.007226+e*(.015085+r*(.028874*e-.044475-.005916*r)))]}function el(t,n){return[Va(n)*Ja(t),Ja(n)]}function rl(t,n){var e=Va(n),r=1+Va(t)*e;return[e*Ja(t)/r,Ja(n)/r]}function il(t,n){return[Za(nu((Ba+n)/2)),-t]}function ol(t,n){return t.parent===n.parent?1:2}function al(t,n){return t+n.x}function ul(t,n){return Math.max(t,n.y)}function cl(t){var n=0,e=t.children,r=e&&e.length;if(r)for(;--r>=0;)n+=e[r].value;else n=1;t.value=n}function fl(t,n){var e,r,i,o,a,u=new dl(t),c=+t.value&&(u.value=t.value),f=[u];for(null==n&&(n=sl);e=f.pop();)if(c&&(e.value=+e.data.value),(i=n(e.data))&&(a=i.length))for(e.children=new Array(a),o=a-1;o>=0;--o)f.push(r=e.children[o]=new dl(i[o])),r.parent=e,r.depth=e.depth+1;return u.eachBefore(hl)}function sl(t){return t.children}function ll(t){t.data=t.data.data}function hl(t){var n=0;do{t.height=n}while((t=t.parent)&&t.height<++n)}function dl(t){this.data=t,this.depth=this.height=0,this.parent=null}Js.invert=function(t,n){for(var e,r=n,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=e=(r*(Vs+$s*i+o*(Ws+Zs*i))-n)/(Vs+3*$s*i+o*(7*Ws+9*Zs*i)))*r)*i*i,!(Ha(e)<Ua));++a);return[Qs*t*(Vs+3*$s*i+o*(7*Ws+9*Zs*i))/Va(r),ru(Ja(r)/Qs)]},Ks.invert=Os(Xa),nl.invert=function(t,n){var e,r=n,i=25;do{var o=r*r,a=o*o;r-=e=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-n)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(Ha(e)>La&&--i>0);return[t/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},el.invert=Os(ru),rl.invert=Os(function(t){return 2*Xa(t)}),il.invert=function(t,n){return[-n,2*Xa(Wa(t))-Ba]},dl.prototype=fl.prototype={constructor:dl,count:function(){return this.eachAfter(cl)},each:function(t){var n,e,r,i,o=this,a=[o];do{for(n=a.reverse(),a=[];o=n.pop();)if(t(o),e=o.children)for(r=0,i=e.length;r<i;++r)a.push(e[r])}while(a.length);return this},eachAfter:function(t){for(var n,e,r,i=this,o=[i],a=[];i=o.pop();)if(a.push(i),n=i.children)for(e=0,r=n.length;e<r;++e)o.push(n[e]);for(;i=a.pop();)t(i);return this},eachBefore:function(t){for(var n,e,r=this,i=[r];r=i.pop();)if(t(r),n=r.children)for(e=n.length-1;e>=0;--e)i.push(n[e]);return this},sum:function(t){return this.eachAfter(function(n){for(var e=+t(n.data)||0,r=n.children,i=r&&r.length;--i>=0;)e+=r[i].value;n.value=e})},sort:function(t){return this.eachBefore(function(n){n.children&&n.children.sort(t)})},path:function(t){for(var n=this,e=function(t,n){if(t===n)return t;var e=t.ancestors(),r=n.ancestors(),i=null;for(t=e.pop(),n=r.pop();t===n;)i=t,t=e.pop(),n=r.pop();return i}(n,t),r=[n];n!==e;)n=n.parent,r.push(n);for(var i=r.length;t!==e;)r.splice(i,0,t),t=t.parent;return r},ancestors:function(){for(var t=this,n=[t];t=t.parent;)n.push(t);return n},descendants:function(){var t=[];return this.each(function(n){t.push(n)}),t},leaves:function(){var t=[];return this.eachBefore(function(n){n.children||t.push(n)}),t},links:function(){var t=this,n=[];return t.each(function(e){e!==t&&n.push({source:e.parent,target:e})}),n},copy:function(){return fl(this).eachBefore(ll)}};var pl=Array.prototype.slice;function vl(t){for(var n,e,r=0,i=(t=function(t){for(var n,e,r=t.length;r;)e=Math.random()*r--|0,n=t[r],t[r]=t[e],t[e]=n;return t}(pl.call(t))).length,o=[];r<i;)n=t[r],e&&_l(e,n)?++r:(e=ml(o=gl(o,n)),r=0);return e}function gl(t,n){var e,r;if(bl(n,t))return[n];for(e=0;e<t.length;++e)if(yl(n,t[e])&&bl(xl(t[e],n),t))return[t[e],n];for(e=0;e<t.length-1;++e)for(r=e+1;r<t.length;++r)if(yl(xl(t[e],t[r]),n)&&yl(xl(t[e],n),t[r])&&yl(xl(t[r],n),t[e])&&bl(wl(t[e],t[r],n),t))return[t[e],t[r],n];throw new Error}function yl(t,n){var e=t.r-n.r,r=n.x-t.x,i=n.y-t.y;return e<0||e*e<r*r+i*i}function _l(t,n){var e=t.r-n.r+1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function bl(t,n){for(var e=0;e<n.length;++e)if(!_l(t,n[e]))return!1;return!0}function ml(t){switch(t.length){case 1:return{x:(n=t[0]).x,y:n.y,r:n.r};case 2:return xl(t[0],t[1]);case 3:return wl(t[0],t[1],t[2])}var n}function xl(t,n){var e=t.x,r=t.y,i=t.r,o=n.x,a=n.y,u=n.r,c=o-e,f=a-r,s=u-i,l=Math.sqrt(c*c+f*f);return{x:(e+o+c/l*s)/2,y:(r+a+f/l*s)/2,r:(l+i+u)/2}}function wl(t,n,e){var r=t.x,i=t.y,o=t.r,a=n.x,u=n.y,c=n.r,f=e.x,s=e.y,l=e.r,h=r-a,d=r-f,p=i-u,v=i-s,g=c-o,y=l-o,_=r*r+i*i-o*o,b=_-a*a-u*u+c*c,m=_-f*f-s*s+l*l,x=d*p-h*v,w=(p*m-v*b)/(2*x)-r,M=(v*g-p*y)/x,N=(d*b-h*m)/(2*x)-i,A=(h*y-d*g)/x,S=M*M+A*A-1,k=2*(o+w*M+N*A),T=w*w+N*N-o*o,E=-(S?(k+Math.sqrt(k*k-4*S*T))/(2*S):T/k);return{x:r+w+M*E,y:i+N+A*E,r:E}}function Ml(t,n,e){var r,i,o,a,u=t.x-n.x,c=t.y-n.y,f=u*u+c*c;f?(i=n.r+e.r,i*=i,a=t.r+e.r,i>(a*=a)?(r=(f+a-i)/(2*f),o=Math.sqrt(Math.max(0,a/f-r*r)),e.x=t.x-r*u-o*c,e.y=t.y-r*c+o*u):(r=(f+i-a)/(2*f),o=Math.sqrt(Math.max(0,i/f-r*r)),e.x=n.x+r*u-o*c,e.y=n.y+r*c+o*u)):(e.x=n.x+e.r,e.y=n.y)}function Nl(t,n){var e=t.r+n.r-1e-6,r=n.x-t.x,i=n.y-t.y;return e>0&&e*e>r*r+i*i}function Al(t){var n=t._,e=t.next._,r=n.r+e.r,i=(n.x*e.r+e.x*n.r)/r,o=(n.y*e.r+e.y*n.r)/r;return i*i+o*o}function Sl(t){this._=t,this.next=null,this.previous=null}function kl(t){if(!(i=t.length))return 0;var n,e,r,i,o,a,u,c,f,s,l;if((n=t[0]).x=0,n.y=0,!(i>1))return n.r;if(e=t[1],n.x=-e.r,e.x=n.r,e.y=0,!(i>2))return n.r+e.r;Ml(e,n,r=t[2]),n=new Sl(n),e=new Sl(e),r=new Sl(r),n.next=r.previous=e,e.next=n.previous=r,r.next=e.previous=n;t:for(u=3;u<i;++u){Ml(n._,e._,r=t[u]),r=new Sl(r),c=e.next,f=n.previous,s=e._.r,l=n._.r;do{if(s<=l){if(Nl(c._,r._)){e=c,n.next=e,e.previous=n,--u;continue t}s+=c._.r,c=c.next}else{if(Nl(f._,r._)){(n=f).next=e,e.previous=n,--u;continue t}l+=f._.r,f=f.previous}}while(c!==f.next);for(r.previous=n,r.next=e,n.next=e.previous=e=r,o=Al(n);(r=r.next)!==e;)(a=Al(r))<o&&(n=r,o=a);e=n.next}for(n=[e._],r=e;(r=r.next)!==e;)n.push(r._);for(r=vl(n),u=0;u<i;++u)(n=t[u]).x-=r.x,n.y-=r.y;return r.r}function Tl(t){if("function"!=typeof t)throw new Error;return t}function El(){return 0}function Cl(t){return function(){return t}}function Pl(t){return Math.sqrt(t.value)}function zl(t){return function(n){n.children||(n.r=Math.max(0,+t(n)||0))}}function Rl(t,n){return function(e){if(r=e.children){var r,i,o,a=r.length,u=t(e)*n||0;if(u)for(i=0;i<a;++i)r[i].r+=u;if(o=kl(r),u)for(i=0;i<a;++i)r[i].r-=u;e.r=o+u}}}function Dl(t){return function(n){var e=n.parent;n.r*=t,e&&(n.x=e.x+t*n.x,n.y=e.y+t*n.y)}}function ql(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Ll(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(r-n)/t.value;++u<c;)(o=a[u]).y0=e,o.y1=i,o.x0=n,o.x1=n+=o.value*f}var Ul="$",Ol={depth:-1},Bl={};function Yl(t){return t.id}function Fl(t){return t.parentId}function Il(t,n){return t.parent===n.parent?1:2}function jl(t){var n=t.children;return n?n[0]:t.t}function Hl(t){var n=t.children;return n?n[n.length-1]:t.t}function Xl(t,n,e){var r=e/(n.i-t.i);n.c-=r,n.s+=e,t.c+=r,n.z+=e,n.m+=e}function Gl(t,n,e){return t.a.parent===n.parent?t.a:e}function Vl(t,n){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=n}function $l(t,n,e,r,i){for(var o,a=t.children,u=-1,c=a.length,f=t.value&&(i-e)/t.value;++u<c;)(o=a[u]).x0=n,o.x1=r,o.y0=e,o.y1=e+=o.value*f}Vl.prototype=Object.create(dl.prototype);var Wl=(1+Math.sqrt(5))/2;function Zl(t,n,e,r,i,o){for(var a,u,c,f,s,l,h,d,p,v,g,y=[],_=n.children,b=0,m=0,x=_.length,w=n.value;b<x;){c=i-e,f=o-r;do{s=_[m++].value}while(!s&&m<x);for(l=h=s,g=s*s*(v=Math.max(f/c,c/f)/(w*t)),p=Math.max(h/g,g/l);m<x;++m){if(s+=u=_[m].value,u<l&&(l=u),u>h&&(h=u),g=s*s*v,(d=Math.max(h/g,g/l))>p){s-=u;break}p=d}y.push(a={value:s,dice:c<f,children:_.slice(b,m)}),a.dice?Ll(a,e,r,i,w?r+=f*s/w:o):$l(a,e,r,w?e+=c*s/w:i,o),w-=s,b=m}return y}var Ql=function t(n){function e(t,e,r,i,o){Zl(n,t,e,r,i,o)}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Wl);var Jl=function t(n){function e(t,e,r,i,o){if((a=t._squarify)&&a.ratio===n)for(var a,u,c,f,s,l=-1,h=a.length,d=t.value;++l<h;){for(c=(u=a[l]).children,f=u.value=0,s=c.length;f<s;++f)u.value+=c[f].value;u.dice?Ll(u,e,r,i,r+=(o-r)*u.value/d):$l(u,e,r,e+=(i-e)*u.value/d,o),d-=u.value}else t._squarify=a=Zl(n,t,e,r,i,o),a.ratio=n}return e.ratio=function(n){return t((n=+n)>1?n:1)},e}(Wl);function Kl(t,n){return t[0]-n[0]||t[1]-n[1]}function th(t){for(var n,e,r,i=t.length,o=[0,1],a=2,u=2;u<i;++u){for(;a>1&&(n=t[o[a-2]],e=t[o[a-1]],r=t[u],(e[0]-n[0])*(r[1]-n[1])-(e[1]-n[1])*(r[0]-n[0])<=0);)--a;o[a++]=u}return o.slice(0,a)}function nh(){return Math.random()}var eh=function t(n){function e(t,e){return t=null==t?0:+t,e=null==e?1:+e,1===arguments.length?(e=t,t=0):e-=t,function(){return n()*e+t}}return e.source=t,e}(nh),rh=function t(n){function e(t,e){var r,i;return t=null==t?0:+t,e=null==e?1:+e,function(){var o;if(null!=r)o=r,r=null;else do{r=2*n()-1,o=2*n()-1,i=r*r+o*o}while(!i||i>1);return t+e*o*Math.sqrt(-2*Math.log(i)/i)}}return e.source=t,e}(nh),ih=function t(n){function e(){var t=rh.source(n).apply(this,arguments);return function(){return Math.exp(t())}}return e.source=t,e}(nh),oh=function t(n){function e(t){return function(){for(var e=0,r=0;r<t;++r)e+=n();return e}}return e.source=t,e}(nh),ah=function t(n){function e(t){var e=oh.source(n)(t);return function(){return e()/t}}return e.source=t,e}(nh),uh=function t(n){function e(t){return function(){return-Math.log(1-n())/t}}return e.source=t,e}(nh);function ch(t,n){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(n).domain(t)}return this}function fh(t,n){switch(arguments.length){case 0:break;case 1:this.interpolator(t);break;default:this.interpolator(n).domain(t)}return this}var sh=Array.prototype,lh=sh.map,hh=sh.slice,dh={name:"implicit"};function ph(){var t=Qi(),n=[],e=[],r=dh;function i(i){var o=i+"",a=t.get(o);if(!a){if(r!==dh)return r;t.set(o,a=n.push(i))}return e[(a-1)%e.length]}return i.domain=function(e){if(!arguments.length)return n.slice();n=[],t=Qi();for(var r,o,a=-1,u=e.length;++a<u;)t.has(o=(r=e[a])+"")||t.set(o,n.push(r));return i},i.range=function(t){return arguments.length?(e=hh.call(t),i):e.slice()},i.unknown=function(t){return arguments.length?(r=t,i):r},i.copy=function(){return ph(n,e).unknown(r)},ch.apply(i,arguments),i}function vh(){var t,n,e=ph().unknown(void 0),r=e.domain,i=e.range,o=[0,1],a=!1,u=0,c=0,f=.5;function s(){var e=r().length,s=o[1]<o[0],l=o[s-0],h=o[1-s];t=(h-l)/Math.max(1,e-u+2*c),a&&(t=Math.floor(t)),l+=(h-l-t*(e-u))*f,n=t*(1-u),a&&(l=Math.round(l),n=Math.round(n));var d=g(e).map(function(n){return l+t*n});return i(s?d.reverse():d)}return delete e.unknown,e.domain=function(t){return arguments.length?(r(t),s()):r()},e.range=function(t){return arguments.length?(o=[+t[0],+t[1]],s()):o.slice()},e.rangeRound=function(t){return o=[+t[0],+t[1]],a=!0,s()},e.bandwidth=function(){return n},e.step=function(){return t},e.round=function(t){return arguments.length?(a=!!t,s()):a},e.padding=function(t){return arguments.length?(u=Math.min(1,c=+t),s()):u},e.paddingInner=function(t){return arguments.length?(u=Math.min(1,t),s()):u},e.paddingOuter=function(t){return arguments.length?(c=+t,s()):c},e.align=function(t){return arguments.length?(f=Math.max(0,Math.min(1,t)),s()):f},e.copy=function(){return vh(r(),o).round(a).paddingInner(u).paddingOuter(c).align(f)},ch.apply(s(),arguments)}function gh(t){return+t}var yh=[0,1];function _h(t){return t}function bh(t,n){return(n-=t=+t)?function(e){return(e-t)/n}:(e=isNaN(n)?NaN:.5,function(){return e});var e}function mh(t){var n,e=t[0],r=t[t.length-1];return e>r&&(n=e,e=r,r=n),function(t){return Math.max(e,Math.min(r,t))}}function xh(t,n,e){var r=t[0],i=t[1],o=n[0],a=n[1];return i<r?(r=bh(i,r),o=e(a,o)):(r=bh(r,i),o=e(o,a)),function(t){return o(r(t))}}function wh(t,n,e){var r=Math.min(t.length,n.length)-1,o=new Array(r),a=new Array(r),u=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),n=n.slice().reverse());++u<r;)o[u]=bh(t[u],t[u+1]),a[u]=e(n[u],n[u+1]);return function(n){var e=i(t,n,1,r)-1;return a[e](o[e](n))}}function Mh(t,n){return n.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Nh(){var t,n,e,r,i,o,a=yh,u=yh,c=ye,f=_h;function s(){return r=Math.min(a.length,u.length)>2?wh:xh,i=o=null,l}function l(n){return isNaN(n=+n)?e:(i||(i=r(a.map(t),u,c)))(t(f(n)))}return l.invert=function(e){return f(n((o||(o=r(u,a.map(t),he)))(e)))},l.domain=function(t){return arguments.length?(a=lh.call(t,gh),f===_h||(f=mh(a)),s()):a.slice()},l.range=function(t){return arguments.length?(u=hh.call(t),s()):u.slice()},l.rangeRound=function(t){return u=hh.call(t),c=_e,s()},l.clamp=function(t){return arguments.length?(f=t?mh(a):_h,l):f!==_h},l.interpolate=function(t){return arguments.length?(c=t,s()):c},l.unknown=function(t){return arguments.length?(e=t,l):e},function(e,r){return t=e,n=r,s()}}function Ah(t,n){return Nh()(t,n)}function Sh(n,e,r,i){var o,a=w(n,e,r);switch((i=ma(null==i?",f":i)).type){case"s":var u=Math.max(Math.abs(n),Math.abs(e));return null!=i.precision||isNaN(o=Ca(a,u))||(i.precision=o),t.formatPrefix(i,u);case"":case"e":case"g":case"p":case"r":null!=i.precision||isNaN(o=Pa(a,Math.max(Math.abs(n),Math.abs(e))))||(i.precision=o-("e"===i.type));break;case"f":case"%":null!=i.precision||isNaN(o=Ea(a))||(i.precision=o-2*("%"===i.type))}return t.format(i)}function kh(t){var n=t.domain;return t.ticks=function(t){var e=n();return m(e[0],e[e.length-1],null==t?10:t)},t.tickFormat=function(t,e){var r=n();return Sh(r[0],r[r.length-1],null==t?10:t,e)},t.nice=function(e){null==e&&(e=10);var r,i=n(),o=0,a=i.length-1,u=i[o],c=i[a];return c<u&&(r=u,u=c,c=r,r=o,o=a,a=r),(r=x(u,c,e))>0?r=x(u=Math.floor(u/r)*r,c=Math.ceil(c/r)*r,e):r<0&&(r=x(u=Math.ceil(u*r)/r,c=Math.floor(c*r)/r,e)),r>0?(i[o]=Math.floor(u/r)*r,i[a]=Math.ceil(c/r)*r,n(i)):r<0&&(i[o]=Math.ceil(u*r)/r,i[a]=Math.floor(c*r)/r,n(i)),t},t}function Th(t,n){var e,r=0,i=(t=t.slice()).length-1,o=t[r],a=t[i];return a<o&&(e=r,r=i,i=e,e=o,o=a,a=e),t[r]=n.floor(o),t[i]=n.ceil(a),t}function Eh(t){return Math.log(t)}function Ch(t){return Math.exp(t)}function Ph(t){return-Math.log(-t)}function zh(t){return-Math.exp(-t)}function Rh(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Dh(t){return function(n){return-t(-n)}}function qh(n){var e,r,i=n(Eh,Ch),o=i.domain,a=10;function u(){return e=function(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(n){return Math.log(n)/t})}(a),r=function(t){return 10===t?Rh:t===Math.E?Math.exp:function(n){return Math.pow(t,n)}}(a),o()[0]<0?(e=Dh(e),r=Dh(r),n(Ph,zh)):n(Eh,Ch),i}return i.base=function(t){return arguments.length?(a=+t,u()):a},i.domain=function(t){return arguments.length?(o(t),u()):o()},i.ticks=function(t){var n,i=o(),u=i[0],c=i[i.length-1];(n=c<u)&&(h=u,u=c,c=h);var f,s,l,h=e(u),d=e(c),p=null==t?10:+t,v=[];if(!(a%1)&&d-h<p){if(h=Math.round(h)-1,d=Math.round(d)+1,u>0){for(;h<d;++h)for(s=1,f=r(h);s<a;++s)if(!((l=f*s)<u)){if(l>c)break;v.push(l)}}else for(;h<d;++h)for(s=a-1,f=r(h);s>=1;--s)if(!((l=f*s)<u)){if(l>c)break;v.push(l)}}else v=m(h,d,Math.min(d-h,p)).map(r);return n?v.reverse():v},i.tickFormat=function(n,o){if(null==o&&(o=10===a?".0e":","),"function"!=typeof o&&(o=t.format(o)),n===1/0)return o;null==n&&(n=10);var u=Math.max(1,a*n/i.ticks().length);return function(t){var n=t/r(Math.round(e(t)));return n*a<a-.5&&(n*=a),n<=u?o(t):""}},i.nice=function(){return o(Th(o(),{floor:function(t){return r(Math.floor(e(t)))},ceil:function(t){return r(Math.ceil(e(t)))}}))},i}function Lh(t){return function(n){return Math.sign(n)*Math.log1p(Math.abs(n/t))}}function Uh(t){return function(n){return Math.sign(n)*Math.expm1(Math.abs(n))*t}}function Oh(t){var n=1,e=t(Lh(n),Uh(n));return e.constant=function(e){return arguments.length?t(Lh(n=+e),Uh(n)):n},kh(e)}function Bh(t){return function(n){return n<0?-Math.pow(-n,t):Math.pow(n,t)}}function Yh(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Fh(t){return t<0?-t*t:t*t}function Ih(t){var n=t(_h,_h),e=1;return n.exponent=function(n){return arguments.length?1===(e=+n)?t(_h,_h):.5===e?t(Yh,Fh):t(Bh(e),Bh(1/e)):e},kh(n)}function jh(){var t=Ih(Nh());return t.copy=function(){return Mh(t,jh()).exponent(t.exponent())},ch.apply(t,arguments),t}var Hh=new Date,Xh=new Date;function Gh(t,n,e,r){function i(n){return t(n=new Date(+n)),n}return i.floor=i,i.ceil=function(e){return t(e=new Date(e-1)),n(e,1),t(e),e},i.round=function(t){var n=i(t),e=i.ceil(t);return t-n<e-t?n:e},i.offset=function(t,e){return n(t=new Date(+t),null==e?1:Math.floor(e)),t},i.range=function(e,r,o){var a,u=[];if(e=i.ceil(e),o=null==o?1:Math.floor(o),!(e<r&&o>0))return u;do{u.push(a=new Date(+e)),n(e,o),t(e)}while(a<e&&e<r);return u},i.filter=function(e){return Gh(function(n){if(n>=n)for(;t(n),!e(n);)n.setTime(n-1)},function(t,r){if(t>=t)if(r<0)for(;++r<=0;)for(;n(t,-1),!e(t););else for(;--r>=0;)for(;n(t,1),!e(t););})},e&&(i.count=function(n,r){return Hh.setTime(+n),Xh.setTime(+r),t(Hh),t(Xh),Math.floor(e(Hh,Xh))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(n){return r(n)%t==0}:function(n){return i.count(0,n)%t==0}):i:null}),i}var Vh=Gh(function(){},function(t,n){t.setTime(+t+n)},function(t,n){return n-t});Vh.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Gh(function(n){n.setTime(Math.floor(n/t)*t)},function(n,e){n.setTime(+n+e*t)},function(n,e){return(e-n)/t}):Vh:null};var $h=Vh.range,Wh=6e4,Zh=6048e5,Qh=Gh(function(t){t.setTime(t-t.getMilliseconds())},function(t,n){t.setTime(+t+1e3*n)},function(t,n){return(n-t)/1e3},function(t){return t.getUTCSeconds()}),Jh=Qh.range,Kh=Gh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())},function(t,n){t.setTime(+t+n*Wh)},function(t,n){return(n-t)/Wh},function(t){return t.getMinutes()}),td=Kh.range,nd=Gh(function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-t.getMinutes()*Wh)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getHours()}),ed=nd.range,rd=Gh(function(t){t.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Wh)/864e5},function(t){return t.getDate()-1}),id=rd.range;function od(t){return Gh(function(n){n.setDate(n.getDate()-(n.getDay()+7-t)%7),n.setHours(0,0,0,0)},function(t,n){t.setDate(t.getDate()+7*n)},function(t,n){return(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Wh)/Zh})}var ad=od(0),ud=od(1),cd=od(2),fd=od(3),sd=od(4),ld=od(5),hd=od(6),dd=ad.range,pd=ud.range,vd=cd.range,gd=fd.range,yd=sd.range,_d=ld.range,bd=hd.range,md=Gh(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,n){t.setMonth(t.getMonth()+n)},function(t,n){return n.getMonth()-t.getMonth()+12*(n.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),xd=md.range,wd=Gh(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,n){t.setFullYear(t.getFullYear()+n)},function(t,n){return n.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});wd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gh(function(n){n.setFullYear(Math.floor(n.getFullYear()/t)*t),n.setMonth(0,1),n.setHours(0,0,0,0)},function(n,e){n.setFullYear(n.getFullYear()+e*t)}):null};var Md=wd.range,Nd=Gh(function(t){t.setUTCSeconds(0,0)},function(t,n){t.setTime(+t+n*Wh)},function(t,n){return(n-t)/Wh},function(t){return t.getUTCMinutes()}),Ad=Nd.range,Sd=Gh(function(t){t.setUTCMinutes(0,0,0)},function(t,n){t.setTime(+t+36e5*n)},function(t,n){return(n-t)/36e5},function(t){return t.getUTCHours()}),kd=Sd.range,Td=Gh(function(t){t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+n)},function(t,n){return(n-t)/864e5},function(t){return t.getUTCDate()-1}),Ed=Td.range;function Cd(t){return Gh(function(n){n.setUTCDate(n.getUTCDate()-(n.getUTCDay()+7-t)%7),n.setUTCHours(0,0,0,0)},function(t,n){t.setUTCDate(t.getUTCDate()+7*n)},function(t,n){return(n-t)/Zh})}var Pd=Cd(0),zd=Cd(1),Rd=Cd(2),Dd=Cd(3),qd=Cd(4),Ld=Cd(5),Ud=Cd(6),Od=Pd.range,Bd=zd.range,Yd=Rd.range,Fd=Dd.range,Id=qd.range,jd=Ld.range,Hd=Ud.range,Xd=Gh(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCMonth(t.getUTCMonth()+n)},function(t,n){return n.getUTCMonth()-t.getUTCMonth()+12*(n.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Gd=Xd.range,Vd=Gh(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,n){t.setUTCFullYear(t.getUTCFullYear()+n)},function(t,n){return n.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Vd.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Gh(function(n){n.setUTCFullYear(Math.floor(n.getUTCFullYear()/t)*t),n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0)},function(n,e){n.setUTCFullYear(n.getUTCFullYear()+e*t)}):null};var $d=Vd.range;function Wd(t){if(0<=t.y&&t.y<100){var n=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return n.setFullYear(t.y),n}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function Zd(t){if(0<=t.y&&t.y<100){var n=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return n.setUTCFullYear(t.y),n}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function Qd(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function Jd(t){var n=t.dateTime,e=t.date,r=t.time,i=t.periods,o=t.days,a=t.shortDays,u=t.months,c=t.shortMonths,f=ap(i),s=up(i),l=ap(o),h=up(o),d=ap(a),p=up(a),v=ap(u),g=up(u),y=ap(c),_=up(c),b={a:function(t){return a[t.getDay()]},A:function(t){return o[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return u[t.getMonth()]},c:null,d:kp,e:kp,f:zp,H:Tp,I:Ep,j:Cp,L:Pp,m:Rp,M:Dp,p:function(t){return i[+(t.getHours()>=12)]},Q:cv,s:fv,S:qp,u:Lp,U:Up,V:Op,w:Bp,W:Yp,x:null,X:null,y:Fp,Y:Ip,Z:jp,"%":uv},m={a:function(t){return a[t.getUTCDay()]},A:function(t){return o[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return u[t.getUTCMonth()]},c:null,d:Hp,e:Hp,f:Wp,H:Xp,I:Gp,j:Vp,L:$p,m:Zp,M:Qp,p:function(t){return i[+(t.getUTCHours()>=12)]},Q:cv,s:fv,S:Jp,u:Kp,U:tv,V:nv,w:ev,W:rv,x:null,X:null,y:iv,Y:ov,Z:av,"%":uv},x={a:function(t,n,e){var r=d.exec(n.slice(e));return r?(t.w=p[r[0].toLowerCase()],e+r[0].length):-1},A:function(t,n,e){var r=l.exec(n.slice(e));return r?(t.w=h[r[0].toLowerCase()],e+r[0].length):-1},b:function(t,n,e){var r=y.exec(n.slice(e));return r?(t.m=_[r[0].toLowerCase()],e+r[0].length):-1},B:function(t,n,e){var r=v.exec(n.slice(e));return r?(t.m=g[r[0].toLowerCase()],e+r[0].length):-1},c:function(t,e,r){return N(t,n,e,r)},d:yp,e:yp,f:Mp,H:bp,I:bp,j:_p,L:wp,m:gp,M:mp,p:function(t,n,e){var r=f.exec(n.slice(e));return r?(t.p=s[r[0].toLowerCase()],e+r[0].length):-1},Q:Ap,s:Sp,S:xp,u:fp,U:sp,V:lp,w:cp,W:hp,x:function(t,n,r){return N(t,e,n,r)},X:function(t,n,e){return N(t,r,n,e)},y:pp,Y:dp,Z:vp,"%":Np};function w(t,n){return function(e){var r,i,o,a=[],u=-1,c=0,f=t.length;for(e instanceof Date||(e=new Date(+e));++u<f;)37===t.charCodeAt(u)&&(a.push(t.slice(c,u)),null!=(i=tp[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(o=n[r])&&(r=o(e,i)),a.push(r),c=u+1);return a.push(t.slice(c,u)),a.join("")}}function M(t,n){return function(e){var r,i,o=Qd(1900);if(N(o,t,e+="",0)!=e.length)return null;if("Q"in o)return new Date(o.Q);if("p"in o&&(o.H=o.H%12+12*o.p),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=Zd(Qd(o.y))).getUTCDay(),r=i>4||0===i?zd.ceil(r):zd(r),r=Td.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=n(Qd(o.y))).getDay(),r=i>4||0===i?ud.ceil(r):ud(r),r=rd.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?Zd(Qd(o.y)).getUTCDay():n(Qd(o.y)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,Zd(o)):n(o)}}function N(t,n,e,r){for(var i,o,a=0,u=n.length,c=e.length;a<u;){if(r>=c)return-1;if(37===(i=n.charCodeAt(a++))){if(i=n.charAt(a++),!(o=x[i in tp?n.charAt(a++):i])||(r=o(t,e,r))<0)return-1}else if(i!=e.charCodeAt(r++))return-1}return r}return b.x=w(e,b),b.X=w(r,b),b.c=w(n,b),m.x=w(e,m),m.X=w(r,m),m.c=w(n,m),{format:function(t){var n=w(t+="",b);return n.toString=function(){return t},n},parse:function(t){var n=M(t+="",Wd);return n.toString=function(){return t},n},utcFormat:function(t){var n=w(t+="",m);return n.toString=function(){return t},n},utcParse:function(t){var n=M(t,Zd);return n.toString=function(){return t},n}}}var Kd,tp={"-":"",_:" ",0:"0"},np=/^\s*\d+/,ep=/^%/,rp=/[\\^$*+?|[\]().{}]/g;function ip(t,n,e){var r=t<0?"-":"",i=(r?-t:t)+"",o=i.length;return r+(o<e?new Array(e-o+1).join(n)+i:i)}function op(t){return t.replace(rp,"\\$&")}function ap(t){return new RegExp("^(?:"+t.map(op).join("|")+")","i")}function up(t){for(var n={},e=-1,r=t.length;++e<r;)n[t[e].toLowerCase()]=e;return n}function cp(t,n,e){var r=np.exec(n.slice(e,e+1));return r?(t.w=+r[0],e+r[0].length):-1}function fp(t,n,e){var r=np.exec(n.slice(e,e+1));return r?(t.u=+r[0],e+r[0].length):-1}function sp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.U=+r[0],e+r[0].length):-1}function lp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.V=+r[0],e+r[0].length):-1}function hp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.W=+r[0],e+r[0].length):-1}function dp(t,n,e){var r=np.exec(n.slice(e,e+4));return r?(t.y=+r[0],e+r[0].length):-1}function pp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),e+r[0].length):-1}function vp(t,n,e){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(n.slice(e,e+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),e+r[0].length):-1}function gp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.m=r[0]-1,e+r[0].length):-1}function yp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.d=+r[0],e+r[0].length):-1}function _p(t,n,e){var r=np.exec(n.slice(e,e+3));return r?(t.m=0,t.d=+r[0],e+r[0].length):-1}function bp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.H=+r[0],e+r[0].length):-1}function mp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.M=+r[0],e+r[0].length):-1}function xp(t,n,e){var r=np.exec(n.slice(e,e+2));return r?(t.S=+r[0],e+r[0].length):-1}function wp(t,n,e){var r=np.exec(n.slice(e,e+3));return r?(t.L=+r[0],e+r[0].length):-1}function Mp(t,n,e){var r=np.exec(n.slice(e,e+6));return r?(t.L=Math.floor(r[0]/1e3),e+r[0].length):-1}function Np(t,n,e){var r=ep.exec(n.slice(e,e+1));return r?e+r[0].length:-1}function Ap(t,n,e){var r=np.exec(n.slice(e));return r?(t.Q=+r[0],e+r[0].length):-1}function Sp(t,n,e){var r=np.exec(n.slice(e));return r?(t.Q=1e3*+r[0],e+r[0].length):-1}function kp(t,n){return ip(t.getDate(),n,2)}function Tp(t,n){return ip(t.getHours(),n,2)}function Ep(t,n){return ip(t.getHours()%12||12,n,2)}function Cp(t,n){return ip(1+rd.count(wd(t),t),n,3)}function Pp(t,n){return ip(t.getMilliseconds(),n,3)}function zp(t,n){return Pp(t,n)+"000"}function Rp(t,n){return ip(t.getMonth()+1,n,2)}function Dp(t,n){return ip(t.getMinutes(),n,2)}function qp(t,n){return ip(t.getSeconds(),n,2)}function Lp(t){var n=t.getDay();return 0===n?7:n}function Up(t,n){return ip(ad.count(wd(t),t),n,2)}function Op(t,n){var e=t.getDay();return t=e>=4||0===e?sd(t):sd.ceil(t),ip(sd.count(wd(t),t)+(4===wd(t).getDay()),n,2)}function Bp(t){return t.getDay()}function Yp(t,n){return ip(ud.count(wd(t),t),n,2)}function Fp(t,n){return ip(t.getFullYear()%100,n,2)}function Ip(t,n){return ip(t.getFullYear()%1e4,n,4)}function jp(t){var n=t.getTimezoneOffset();return(n>0?"-":(n*=-1,"+"))+ip(n/60|0,"0",2)+ip(n%60,"0",2)}function Hp(t,n){return ip(t.getUTCDate(),n,2)}function Xp(t,n){return ip(t.getUTCHours(),n,2)}function Gp(t,n){return ip(t.getUTCHours()%12||12,n,2)}function Vp(t,n){return ip(1+Td.count(Vd(t),t),n,3)}function $p(t,n){return ip(t.getUTCMilliseconds(),n,3)}function Wp(t,n){return $p(t,n)+"000"}function Zp(t,n){return ip(t.getUTCMonth()+1,n,2)}function Qp(t,n){return ip(t.getUTCMinutes(),n,2)}function Jp(t,n){return ip(t.getUTCSeconds(),n,2)}function Kp(t){var n=t.getUTCDay();return 0===n?7:n}function tv(t,n){return ip(Pd.count(Vd(t),t),n,2)}function nv(t,n){var e=t.getUTCDay();return t=e>=4||0===e?qd(t):qd.ceil(t),ip(qd.count(Vd(t),t)+(4===Vd(t).getUTCDay()),n,2)}function ev(t){return t.getUTCDay()}function rv(t,n){return ip(zd.count(Vd(t),t),n,2)}function iv(t,n){return ip(t.getUTCFullYear()%100,n,2)}function ov(t,n){return ip(t.getUTCFullYear()%1e4,n,4)}function av(){return"+0000"}function uv(){return"%"}function cv(t){return+t}function fv(t){return Math.floor(+t/1e3)}function sv(n){return Kd=Jd(n),t.timeFormat=Kd.format,t.timeParse=Kd.parse,t.utcFormat=Kd.utcFormat,t.utcParse=Kd.utcParse,Kd}sv({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var lv=Date.prototype.toISOString?function(t){return t.toISOString()}:t.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ");var hv=+new Date("2000-01-01T00:00:00.000Z")?function(t){var n=new Date(t);return isNaN(n)?null:n}:t.utcParse("%Y-%m-%dT%H:%M:%S.%LZ"),dv=1e3,pv=60*dv,vv=60*pv,gv=24*vv,yv=7*gv,_v=30*gv,bv=365*gv;function mv(t){return new Date(t)}function xv(t){return t instanceof Date?+t:+new Date(+t)}function wv(t,n,r,i,o,a,u,c,f){var s=Ah(_h,_h),l=s.invert,h=s.domain,d=f(".%L"),p=f(":%S"),v=f("%I:%M"),g=f("%I %p"),y=f("%a %d"),_=f("%b %d"),b=f("%B"),m=f("%Y"),x=[[u,1,dv],[u,5,5*dv],[u,15,15*dv],[u,30,30*dv],[a,1,pv],[a,5,5*pv],[a,15,15*pv],[a,30,30*pv],[o,1,vv],[o,3,3*vv],[o,6,6*vv],[o,12,12*vv],[i,1,gv],[i,2,2*gv],[r,1,yv],[n,1,_v],[n,3,3*_v],[t,1,bv]];function M(e){return(u(e)<e?d:a(e)<e?p:o(e)<e?v:i(e)<e?g:n(e)<e?r(e)<e?y:_:t(e)<e?b:m)(e)}function N(n,r,i,o){if(null==n&&(n=10),"number"==typeof n){var a=Math.abs(i-r)/n,u=e(function(t){return t[2]}).right(x,a);u===x.length?(o=w(r/bv,i/bv,n),n=t):u?(o=(u=x[a/x[u-1][2]<x[u][2]/a?u-1:u])[1],n=u[0]):(o=Math.max(w(r,i,n),1),n=c)}return null==o?n:n.every(o)}return s.invert=function(t){return new Date(l(t))},s.domain=function(t){return arguments.length?h(lh.call(t,xv)):h().map(mv)},s.ticks=function(t,n){var e,r=h(),i=r[0],o=r[r.length-1],a=o<i;return a&&(e=i,i=o,o=e),e=(e=N(t,i,o,n))?e.range(i,o+1):[],a?e.reverse():e},s.tickFormat=function(t,n){return null==n?M:f(n)},s.nice=function(t,n){var e=h();return(t=N(t,e[0],e[e.length-1],n))?h(Th(e,t)):s},s.copy=function(){return Mh(s,wv(t,n,r,i,o,a,u,c,f))},s}function Mv(){var t,n,e,r,i,o=0,a=1,u=_h,c=!1;function f(n){return isNaN(n=+n)?i:u(0===e?.5:(n=(r(n)-t)*e,c?Math.max(0,Math.min(1,n)):n))}return f.domain=function(i){return arguments.length?(t=r(o=+i[0]),n=r(a=+i[1]),e=t===n?0:1/(n-t),f):[o,a]},f.clamp=function(t){return arguments.length?(c=!!t,f):c},f.interpolator=function(t){return arguments.length?(u=t,f):u},f.unknown=function(t){return arguments.length?(i=t,f):i},function(i){return r=i,t=i(o),n=i(a),e=t===n?0:1/(n-t),f}}function Nv(t,n){return n.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Av(){var t=Ih(Mv());return t.copy=function(){return Nv(t,Av()).exponent(t.exponent())},fh.apply(t,arguments)}function Sv(){var t,n,e,r,i,o,a,u=0,c=.5,f=1,s=_h,l=!1;function h(t){return isNaN(t=+t)?a:(t=.5+((t=+o(t))-n)*(t<n?r:i),s(l?Math.max(0,Math.min(1,t)):t))}return h.domain=function(a){return arguments.length?(t=o(u=+a[0]),n=o(c=+a[1]),e=o(f=+a[2]),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),h):[u,c,f]},h.clamp=function(t){return arguments.length?(l=!!t,h):l},h.interpolator=function(t){return arguments.length?(s=t,h):s},h.unknown=function(t){return arguments.length?(a=t,h):a},function(a){return o=a,t=a(u),n=a(c),e=a(f),r=t===n?0:.5/(n-t),i=n===e?0:.5/(e-n),h}}function kv(){var t=Ih(Sv());return t.copy=function(){return Nv(t,kv()).exponent(t.exponent())},fh.apply(t,arguments)}function Tv(t){for(var n=t.length/6|0,e=new Array(n),r=0;r<n;)e[r]="#"+t.slice(6*r,6*++r);return e}var Ev=Tv("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Cv=Tv("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Pv=Tv("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),zv=Tv("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Rv=Tv("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Dv=Tv("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),qv=Tv("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Lv=Tv("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Uv=Tv("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f");function Ov(t){return ce(t[t.length-1])}var Bv=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(Tv),Yv=Ov(Bv),Fv=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(Tv),Iv=Ov(Fv),jv=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(Tv),Hv=Ov(jv),Xv=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(Tv),Gv=Ov(Xv),Vv=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(Tv),$v=Ov(Vv),Wv=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(Tv),Zv=Ov(Wv),Qv=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(Tv),Jv=Ov(Qv),Kv=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(Tv),tg=Ov(Kv),ng=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(Tv),eg=Ov(ng),rg=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(Tv),ig=Ov(rg),og=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(Tv),ag=Ov(og),ug=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(Tv),cg=Ov(ug),fg=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(Tv),sg=Ov(fg),lg=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(Tv),hg=Ov(lg),dg=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(Tv),pg=Ov(dg),vg=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(Tv),gg=Ov(vg),yg=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(Tv),_g=Ov(yg),bg=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(Tv),mg=Ov(bg),xg=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(Tv),wg=Ov(xg),Mg=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(Tv),Ng=Ov(Mg),Ag=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(Tv),Sg=Ov(Ag),kg=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(Tv),Tg=Ov(kg),Eg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(Tv),Cg=Ov(Eg),Pg=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(Tv),zg=Ov(Pg),Rg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(Tv),Dg=Ov(Rg),qg=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(Tv),Lg=Ov(qg),Ug=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(Tv),Og=Ov(Ug),Bg=je(Zn(300,.5,0),Zn(-240,.5,1)),Yg=je(Zn(-100,.75,.35),Zn(80,1.5,.8)),Fg=je(Zn(260,.75,.35),Zn(80,1.5,.8)),Ig=Zn();var jg=gn(),Hg=Math.PI/3,Xg=2*Math.PI/3;function Gg(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}var Vg=Gg(Tv("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),$g=Gg(Tv("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),Wg=Gg(Tv("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),Zg=Gg(Tv("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));function Qg(t){return function(){return t}}var Jg=Math.abs,Kg=Math.atan2,ty=Math.cos,ny=Math.max,ey=Math.min,ry=Math.sin,iy=Math.sqrt,oy=1e-12,ay=Math.PI,uy=ay/2,cy=2*ay;function fy(t){return t>=1?uy:t<=-1?-uy:Math.asin(t)}function sy(t){return t.innerRadius}function ly(t){return t.outerRadius}function hy(t){return t.startAngle}function dy(t){return t.endAngle}function py(t){return t&&t.padAngle}function vy(t,n,e,r,i,o,a){var u=t-e,c=n-r,f=(a?o:-o)/iy(u*u+c*c),s=f*c,l=-f*u,h=t+s,d=n+l,p=e+s,v=r+l,g=(h+p)/2,y=(d+v)/2,_=p-h,b=v-d,m=_*_+b*b,x=i-o,w=h*v-p*d,M=(b<0?-1:1)*iy(ny(0,x*x*m-w*w)),N=(w*b-_*M)/m,A=(-w*_-b*M)/m,S=(w*b+_*M)/m,k=(-w*_+b*M)/m,T=N-g,E=A-y,C=S-g,P=k-y;return T*T+E*E>C*C+P*P&&(N=S,A=k),{cx:N,cy:A,x01:-s,y01:-l,x11:N*(i/x-1),y11:A*(i/x-1)}}function gy(t){this._context=t}function yy(t){return new gy(t)}function _y(t){return t[0]}function by(t){return t[1]}function my(){var t=_y,n=by,e=Qg(!0),r=null,i=yy,o=null;function a(a){var u,c,f,s=a.length,l=!1;for(null==r&&(o=i(f=Hi())),u=0;u<=s;++u)!(u<s&&e(c=a[u],u,a))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+t(c,u,a),+n(c,u,a));if(f)return o=null,f+""||null}return a.x=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),a):t},a.y=function(t){return arguments.length?(n="function"==typeof t?t:Qg(+t),a):n},a.defined=function(t){return arguments.length?(e="function"==typeof t?t:Qg(!!t),a):e},a.curve=function(t){return arguments.length?(i=t,null!=r&&(o=i(r)),a):i},a.context=function(t){return arguments.length?(null==t?r=o=null:o=i(r=t),a):r},a}function xy(){var t=_y,n=null,e=Qg(0),r=by,i=Qg(!0),o=null,a=yy,u=null;function c(c){var f,s,l,h,d,p=c.length,v=!1,g=new Array(p),y=new Array(p);for(null==o&&(u=a(d=Hi())),f=0;f<=p;++f){if(!(f<p&&i(h=c[f],f,c))===v)if(v=!v)s=f,u.areaStart(),u.lineStart();else{for(u.lineEnd(),u.lineStart(),l=f-1;l>=s;--l)u.point(g[l],y[l]);u.lineEnd(),u.areaEnd()}v&&(g[f]=+t(h,f,c),y[f]=+e(h,f,c),u.point(n?+n(h,f,c):g[f],r?+r(h,f,c):y[f]))}if(d)return u=null,d+""||null}function f(){return my().defined(i).curve(a).context(o)}return c.x=function(e){return arguments.length?(t="function"==typeof e?e:Qg(+e),n=null,c):t},c.x0=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),c):t},c.x1=function(t){return arguments.length?(n=null==t?null:"function"==typeof t?t:Qg(+t),c):n},c.y=function(t){return arguments.length?(e="function"==typeof t?t:Qg(+t),r=null,c):e},c.y0=function(t){return arguments.length?(e="function"==typeof t?t:Qg(+t),c):e},c.y1=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Qg(+t),c):r},c.lineX0=c.lineY0=function(){return f().x(t).y(e)},c.lineY1=function(){return f().x(t).y(r)},c.lineX1=function(){return f().x(n).y(e)},c.defined=function(t){return arguments.length?(i="function"==typeof t?t:Qg(!!t),c):i},c.curve=function(t){return arguments.length?(a=t,null!=o&&(u=a(o)),c):a},c.context=function(t){return arguments.length?(null==t?o=u=null:u=a(o=t),c):o},c}function wy(t,n){return n<t?-1:n>t?1:n>=t?0:NaN}function My(t){return t}gy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};var Ny=Sy(yy);function Ay(t){this._curve=t}function Sy(t){function n(n){return new Ay(t(n))}return n._curve=t,n}function ky(t){var n=t.curve;return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t.curve=function(t){return arguments.length?n(Sy(t)):n()._curve},t}function Ty(){return ky(my().curve(Ny))}function Ey(){var t=xy().curve(Ny),n=t.curve,e=t.lineX0,r=t.lineX1,i=t.lineY0,o=t.lineY1;return t.angle=t.x,delete t.x,t.startAngle=t.x0,delete t.x0,t.endAngle=t.x1,delete t.x1,t.radius=t.y,delete t.y,t.innerRadius=t.y0,delete t.y0,t.outerRadius=t.y1,delete t.y1,t.lineStartAngle=function(){return ky(e())},delete t.lineX0,t.lineEndAngle=function(){return ky(r())},delete t.lineX1,t.lineInnerRadius=function(){return ky(i())},delete t.lineY0,t.lineOuterRadius=function(){return ky(o())},delete t.lineY1,t.curve=function(t){return arguments.length?n(Sy(t)):n()._curve},t}function Cy(t,n){return[(n=+n)*Math.cos(t-=Math.PI/2),n*Math.sin(t)]}Ay.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(t,n){this._curve.point(n*Math.sin(t),n*-Math.cos(t))}};var Py=Array.prototype.slice;function zy(t){return t.source}function Ry(t){return t.target}function Dy(t){var n=zy,e=Ry,r=_y,i=by,o=null;function a(){var a,u=Py.call(arguments),c=n.apply(this,u),f=e.apply(this,u);if(o||(o=a=Hi()),t(o,+r.apply(this,(u[0]=c,u)),+i.apply(this,u),+r.apply(this,(u[0]=f,u)),+i.apply(this,u)),a)return o=null,a+""||null}return a.source=function(t){return arguments.length?(n=t,a):n},a.target=function(t){return arguments.length?(e=t,a):e},a.x=function(t){return arguments.length?(r="function"==typeof t?t:Qg(+t),a):r},a.y=function(t){return arguments.length?(i="function"==typeof t?t:Qg(+t),a):i},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a}function qy(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n=(n+r)/2,e,n,i,r,i)}function Ly(t,n,e,r,i){t.moveTo(n,e),t.bezierCurveTo(n,e=(e+i)/2,r,e,r,i)}function Uy(t,n,e,r,i){var o=Cy(n,e),a=Cy(n,e=(e+i)/2),u=Cy(r,e),c=Cy(r,i);t.moveTo(o[0],o[1]),t.bezierCurveTo(a[0],a[1],u[0],u[1],c[0],c[1])}var Oy={draw:function(t,n){var e=Math.sqrt(n/ay);t.moveTo(e,0),t.arc(0,0,e,0,cy)}},By={draw:function(t,n){var e=Math.sqrt(n/5)/2;t.moveTo(-3*e,-e),t.lineTo(-e,-e),t.lineTo(-e,-3*e),t.lineTo(e,-3*e),t.lineTo(e,-e),t.lineTo(3*e,-e),t.lineTo(3*e,e),t.lineTo(e,e),t.lineTo(e,3*e),t.lineTo(-e,3*e),t.lineTo(-e,e),t.lineTo(-3*e,e),t.closePath()}},Yy=Math.sqrt(1/3),Fy=2*Yy,Iy={draw:function(t,n){var e=Math.sqrt(n/Fy),r=e*Yy;t.moveTo(0,-e),t.lineTo(r,0),t.lineTo(0,e),t.lineTo(-r,0),t.closePath()}},jy=Math.sin(ay/10)/Math.sin(7*ay/10),Hy=Math.sin(cy/10)*jy,Xy=-Math.cos(cy/10)*jy,Gy={draw:function(t,n){var e=Math.sqrt(.8908130915292852*n),r=Hy*e,i=Xy*e;t.moveTo(0,-e),t.lineTo(r,i);for(var o=1;o<5;++o){var a=cy*o/5,u=Math.cos(a),c=Math.sin(a);t.lineTo(c*e,-u*e),t.lineTo(u*r-c*i,c*r+u*i)}t.closePath()}},Vy={draw:function(t,n){var e=Math.sqrt(n),r=-e/2;t.rect(r,r,e,e)}},$y=Math.sqrt(3),Wy={draw:function(t,n){var e=-Math.sqrt(n/(3*$y));t.moveTo(0,2*e),t.lineTo(-$y*e,-e),t.lineTo($y*e,-e),t.closePath()}},Zy=Math.sqrt(3)/2,Qy=1/Math.sqrt(12),Jy=3*(Qy/2+1),Ky={draw:function(t,n){var e=Math.sqrt(n/Jy),r=e/2,i=e*Qy,o=r,a=e*Qy+e,u=-o,c=a;t.moveTo(r,i),t.lineTo(o,a),t.lineTo(u,c),t.lineTo(-.5*r-Zy*i,Zy*r+-.5*i),t.lineTo(-.5*o-Zy*a,Zy*o+-.5*a),t.lineTo(-.5*u-Zy*c,Zy*u+-.5*c),t.lineTo(-.5*r+Zy*i,-.5*i-Zy*r),t.lineTo(-.5*o+Zy*a,-.5*a-Zy*o),t.lineTo(-.5*u+Zy*c,-.5*c-Zy*u),t.closePath()}},t_=[Oy,By,Iy,Vy,Gy,Wy,Ky];function n_(){}function e_(t,n,e){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+n)/6,(t._y0+4*t._y1+e)/6)}function r_(t){this._context=t}function i_(t){this._context=t}function o_(t){this._context=t}function a_(t,n){this._basis=new r_(t),this._beta=n}r_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:e_(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:e_(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},i_.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x2=t,this._y2=n;break;case 1:this._point=2,this._x3=t,this._y3=n;break;case 2:this._point=3,this._x4=t,this._y4=n,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+n)/6);break;default:e_(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},o_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var e=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+n)/6;this._line?this._context.lineTo(e,r):this._context.moveTo(e,r);break;case 3:this._point=4;default:e_(this,t,n)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n}},a_.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,n=this._y,e=t.length-1;if(e>0)for(var r,i=t[0],o=n[0],a=t[e]-i,u=n[e]-o,c=-1;++c<=e;)r=c/e,this._basis.point(this._beta*t[c]+(1-this._beta)*(i+r*a),this._beta*n[c]+(1-this._beta)*(o+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,n){this._x.push(+t),this._y.push(+n)}};var u_=function t(n){function e(t){return 1===n?new r_(t):new a_(t,n)}return e.beta=function(n){return t(+n)},e}(.85);function c_(t,n,e){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-n),t._y2+t._k*(t._y1-e),t._x2,t._y2)}function f_(t,n){this._context=t,this._k=(1-n)/6}f_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:c_(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2,this._x1=t,this._y1=n;break;case 2:this._point=3;default:c_(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var s_=function t(n){function e(t){return new f_(t,n)}return e.tension=function(n){return t(+n)},e}(0);function l_(t,n){this._context=t,this._k=(1-n)/6}l_.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:c_(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var h_=function t(n){function e(t){return new l_(t,n)}return e.tension=function(n){return t(+n)},e}(0);function d_(t,n){this._context=t,this._k=(1-n)/6}d_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:c_(this,t,n)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var p_=function t(n){function e(t){return new d_(t,n)}return e.tension=function(n){return t(+n)},e}(0);function v_(t,n,e){var r=t._x1,i=t._y1,o=t._x2,a=t._y2;if(t._l01_a>oy){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,c=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/c,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/c}if(t._l23_a>oy){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,s=3*t._l23_a*(t._l23_a+t._l12_a);o=(o*f+t._x1*t._l23_2a-n*t._l12_2a)/s,a=(a*f+t._y1*t._l23_2a-e*t._l12_2a)/s}t._context.bezierCurveTo(r,i,o,a,t._x2,t._y2)}function g_(t,n){this._context=t,this._alpha=n}g_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3;default:v_(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var y_=function t(n){function e(t){return n?new g_(t,n):new f_(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function __(t,n){this._context=t,this._alpha=n}__.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=n;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=n);break;case 2:this._point=3,this._x5=t,this._y5=n;break;default:v_(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var b_=function t(n){function e(t){return n?new __(t,n):new l_(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function m_(t,n){this._context=t,this._alpha=n}m_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){if(t=+t,n=+n,this._point){var e=this._x2-t,r=this._y2-n;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(e*e+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:v_(this,t,n)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=n}};var x_=function t(n){function e(t){return n?new m_(t,n):new d_(t,0)}return e.alpha=function(n){return t(+n)},e}(.5);function w_(t){this._context=t}function M_(t){return t<0?-1:1}function N_(t,n,e){var r=t._x1-t._x0,i=n-t._x1,o=(t._y1-t._y0)/(r||i<0&&-0),a=(e-t._y1)/(i||r<0&&-0),u=(o*i+a*r)/(r+i);return(M_(o)+M_(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(u))||0}function A_(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function S_(t,n,e){var r=t._x0,i=t._y0,o=t._x1,a=t._y1,u=(o-r)/3;t._context.bezierCurveTo(r+u,i+u*n,o-u,a-u*e,o,a)}function k_(t){this._context=t}function T_(t){this._context=new E_(t)}function E_(t){this._context=t}function C_(t){this._context=t}function P_(t){var n,e,r=t.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=t[0]+2*t[1],n=1;n<r-1;++n)i[n]=1,o[n]=4,a[n]=4*t[n]+2*t[n+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*t[r-1]+t[r],n=1;n<r;++n)e=i[n]/o[n-1],o[n]-=e,a[n]-=e*a[n-1];for(i[r-1]=a[r-1]/o[r-1],n=r-2;n>=0;--n)i[n]=(a[n]-i[n+1])/o[n];for(o[r-1]=(t[r]+i[r-1])/2,n=0;n<r-1;++n)o[n]=2*t[n+1]-i[n+1];return[i,o]}function z_(t,n){this._context=t,this._t=n}function R_(t,n){if((i=t.length)>1)for(var e,r,i,o=1,a=t[n[0]],u=a.length;o<i;++o)for(r=a,a=t[n[o]],e=0;e<u;++e)a[e][1]+=a[e][0]=isNaN(r[e][1])?r[e][0]:r[e][1]}function D_(t){for(var n=t.length,e=new Array(n);--n>=0;)e[n]=n;return e}function q_(t,n){return t[n]}function L_(t){var n=t.map(U_);return D_(t).sort(function(t,e){return n[t]-n[e]})}function U_(t){for(var n,e=-1,r=0,i=t.length,o=-1/0;++e<i;)(n=+t[e][1])>o&&(o=n,r=e);return r}function O_(t){var n=t.map(B_);return D_(t).sort(function(t,e){return n[t]-n[e]})}function B_(t){for(var n,e=0,r=-1,i=t.length;++r<i;)(n=+t[r][1])&&(e+=n);return e}function Y_(t){return function(){return t}}function F_(t){return t[0]}function I_(t){return t[1]}function j_(){this._=null}function H_(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function X_(t,n){var e=n,r=n.R,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.R=r.L,e.R&&(e.R.U=e),r.L=e}function G_(t,n){var e=n,r=n.L,i=e.U;i?i.L===e?i.L=r:i.R=r:t._=r,r.U=i,e.U=r,e.L=r.R,e.L&&(e.L.U=e),r.R=e}function V_(t){for(;t.L;)t=t.L;return t}function $_(t,n,e,r){var i=[null,null],o=_b.push(i)-1;return i.left=t,i.right=n,e&&Z_(i,t,n,e),r&&Z_(i,n,t,r),gb[t.index].halfedges.push(o),gb[n.index].halfedges.push(o),i}function W_(t,n,e){var r=[n,e];return r.left=t,r}function Z_(t,n,e,r){t[0]||t[1]?t.left===e?t[1]=r:t[0]=r:(t[0]=r,t.left=n,t.right=e)}function Q_(t,n,e,r,i){var o,a=t[0],u=t[1],c=a[0],f=a[1],s=0,l=1,h=u[0]-c,d=u[1]-f;if(o=n-c,h||!(o>0)){if(o/=h,h<0){if(o<s)return;o<l&&(l=o)}else if(h>0){if(o>l)return;o>s&&(s=o)}if(o=r-c,h||!(o<0)){if(o/=h,h<0){if(o>l)return;o>s&&(s=o)}else if(h>0){if(o<s)return;o<l&&(l=o)}if(o=e-f,d||!(o>0)){if(o/=d,d<0){if(o<s)return;o<l&&(l=o)}else if(d>0){if(o>l)return;o>s&&(s=o)}if(o=i-f,d||!(o<0)){if(o/=d,d<0){if(o>l)return;o>s&&(s=o)}else if(d>0){if(o<s)return;o<l&&(l=o)}return!(s>0||l<1)||(s>0&&(t[0]=[c+s*h,f+s*d]),l<1&&(t[1]=[c+l*h,f+l*d]),!0)}}}}}function J_(t,n,e,r,i){var o=t[1];if(o)return!0;var a,u,c=t[0],f=t.left,s=t.right,l=f[0],h=f[1],d=s[0],p=s[1],v=(l+d)/2,g=(h+p)/2;if(p===h){if(v<n||v>=r)return;if(l>d){if(c){if(c[1]>=i)return}else c=[v,e];o=[v,i]}else{if(c){if(c[1]<e)return}else c=[v,i];o=[v,e]}}else if(u=g-(a=(l-d)/(p-h))*v,a<-1||a>1)if(l>d){if(c){if(c[1]>=i)return}else c=[(e-u)/a,e];o=[(i-u)/a,i]}else{if(c){if(c[1]<e)return}else c=[(i-u)/a,i];o=[(e-u)/a,e]}else if(h<p){if(c){if(c[0]>=r)return}else c=[n,a*n+u];o=[r,a*r+u]}else{if(c){if(c[0]<n)return}else c=[r,a*r+u];o=[n,a*n+u]}return t[0]=c,t[1]=o,!0}function K_(t,n){var e=t.site,r=n.left,i=n.right;return e===i&&(i=r,r=e),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(e===r?(r=n[1],i=n[0]):(r=n[0],i=n[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function tb(t,n){return n[+(n.left!==t.site)]}function nb(t,n){return n[+(n.left===t.site)]}w_.prototype={areaStart:n_,areaEnd:n_,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,n){t=+t,n=+n,this._point?this._context.lineTo(t,n):(this._point=1,this._context.moveTo(t,n))}},k_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:S_(this,this._t0,A_(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,S_(this,A_(this,e=N_(this,t,n)),e);break;default:S_(this,this._t0,e=N_(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(T_.prototype=Object.create(k_.prototype)).point=function(t,n){k_.prototype.point.call(this,n,t)},E_.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,r,i,o){this._context.bezierCurveTo(n,t,r,e,o,i)}},C_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,n=this._y,e=t.length;if(e)if(this._line?this._context.lineTo(t[0],n[0]):this._context.moveTo(t[0],n[0]),2===e)this._context.lineTo(t[1],n[1]);else for(var r=P_(t),i=P_(n),o=0,a=1;a<e;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],t[a],n[a]);(this._line||0!==this._line&&1===e)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,n){this._x.push(+t),this._y.push(+n)}},z_.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,n),this._context.lineTo(t,n);else{var e=this._x*(1-this._t)+t*this._t;this._context.lineTo(e,this._y),this._context.lineTo(e,n)}}this._x=t,this._y=n}},j_.prototype={constructor:j_,insert:function(t,n){var e,r,i;if(t){if(n.P=t,n.N=t.N,t.N&&(t.N.P=n),t.N=n,t.R){for(t=t.R;t.L;)t=t.L;t.L=n}else t.R=n;e=t}else this._?(t=V_(this._),n.P=null,n.N=t,t.P=t.L=n,e=t):(n.P=n.N=null,this._=n,e=null);for(n.L=n.R=null,n.U=e,n.C=!0,t=n;e&&e.C;)e===(r=e.U).L?(i=r.R)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.R&&(X_(this,e),e=(t=e).U),e.C=!1,r.C=!0,G_(this,r)):(i=r.L)&&i.C?(e.C=i.C=!1,r.C=!0,t=r):(t===e.L&&(G_(this,e),e=(t=e).U),e.C=!1,r.C=!0,X_(this,r)),e=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var n,e,r,i=t.U,o=t.L,a=t.R;if(e=o?a?V_(a):o:a,i?i.L===t?i.L=e:i.R=e:this._=e,o&&a?(r=e.C,e.C=t.C,e.L=o,o.U=e,e!==a?(i=e.U,e.U=t.U,t=e.R,i.L=t,e.R=a,a.U=e):(e.U=i,i=e,t=e.R)):(r=t.C,t=e),t&&(t.U=i),!r)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===i.L){if((n=i.R).C&&(n.C=!1,i.C=!0,X_(this,i),n=i.R),n.L&&n.L.C||n.R&&n.R.C){n.R&&n.R.C||(n.L.C=!1,n.C=!0,G_(this,n),n=i.R),n.C=i.C,i.C=n.R.C=!1,X_(this,i),t=this._;break}}else if((n=i.L).C&&(n.C=!1,i.C=!0,G_(this,i),n=i.L),n.L&&n.L.C||n.R&&n.R.C){n.L&&n.L.C||(n.R.C=!1,n.C=!0,X_(this,n),n=i.L),n.C=i.C,i.C=n.L.C=!1,G_(this,i),t=this._;break}n.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var eb,rb=[];function ib(){H_(this),this.x=this.y=this.arc=this.site=this.cy=null}function ob(t){var n=t.P,e=t.N;if(n&&e){var r=n.site,i=t.site,o=e.site;if(r!==o){var a=i[0],u=i[1],c=r[0]-a,f=r[1]-u,s=o[0]-a,l=o[1]-u,h=2*(c*l-f*s);if(!(h>=-mb)){var d=c*c+f*f,p=s*s+l*l,v=(l*d-f*p)/h,g=(c*p-s*d)/h,y=rb.pop()||new ib;y.arc=t,y.site=i,y.x=v+a,y.y=(y.cy=g+u)+Math.sqrt(v*v+g*g),t.circle=y;for(var _=null,b=yb._;b;)if(y.y<b.y||y.y===b.y&&y.x<=b.x){if(!b.L){_=b.P;break}b=b.L}else{if(!b.R){_=b;break}b=b.R}yb.insert(_,y),_||(eb=y)}}}}function ab(t){var n=t.circle;n&&(n.P||(eb=n.N),yb.remove(n),rb.push(n),H_(n),t.circle=null)}var ub=[];function cb(){H_(this),this.edge=this.site=this.circle=null}function fb(t){var n=ub.pop()||new cb;return n.site=t,n}function sb(t){ab(t),vb.remove(t),ub.push(t),H_(t)}function lb(t){var n=t.circle,e=n.x,r=n.cy,i=[e,r],o=t.P,a=t.N,u=[t];sb(t);for(var c=o;c.circle&&Math.abs(e-c.circle.x)<bb&&Math.abs(r-c.circle.cy)<bb;)o=c.P,u.unshift(c),sb(c),c=o;u.unshift(c),ab(c);for(var f=a;f.circle&&Math.abs(e-f.circle.x)<bb&&Math.abs(r-f.circle.cy)<bb;)a=f.N,u.push(f),sb(f),f=a;u.push(f),ab(f);var s,l=u.length;for(s=1;s<l;++s)f=u[s],c=u[s-1],Z_(f.edge,c.site,f.site,i);c=u[0],(f=u[l-1]).edge=$_(c.site,f.site,null,i),ob(c),ob(f)}function hb(t){for(var n,e,r,i,o=t[0],a=t[1],u=vb._;u;)if((r=db(u,a)-o)>bb)u=u.L;else{if(!((i=o-pb(u,a))>bb)){r>-bb?(n=u.P,e=u):i>-bb?(n=u,e=u.N):n=e=u;break}if(!u.R){n=u;break}u=u.R}!function(t){gb[t.index]={site:t,halfedges:[]}}(t);var c=fb(t);if(vb.insert(n,c),n||e){if(n===e)return ab(n),e=fb(n.site),vb.insert(c,e),c.edge=e.edge=$_(n.site,c.site),ob(n),void ob(e);if(e){ab(n),ab(e);var f=n.site,s=f[0],l=f[1],h=t[0]-s,d=t[1]-l,p=e.site,v=p[0]-s,g=p[1]-l,y=2*(h*g-d*v),_=h*h+d*d,b=v*v+g*g,m=[(g*_-d*b)/y+s,(h*b-v*_)/y+l];Z_(e.edge,f,p,m),c.edge=$_(f,t,null,m),e.edge=$_(t,p,null,m),ob(n),ob(e)}else c.edge=$_(n.site,c.site)}}function db(t,n){var e=t.site,r=e[0],i=e[1],o=i-n;if(!o)return r;var a=t.P;if(!a)return-1/0;var u=(e=a.site)[0],c=e[1],f=c-n;if(!f)return u;var s=u-r,l=1/o-1/f,h=s/f;return l?(-h+Math.sqrt(h*h-2*l*(s*s/(-2*f)-c+f/2+i-o/2)))/l+r:(r+u)/2}function pb(t,n){var e=t.N;if(e)return db(e,n);var r=t.site;return r[1]===n?r[0]:1/0}var vb,gb,yb,_b,bb=1e-6,mb=1e-12;function xb(t,n){return n[1]-t[1]||n[0]-t[0]}function wb(t,n){var e,r,i,o=t.sort(xb).pop();for(_b=[],gb=new Array(t.length),vb=new j_,yb=new j_;;)if(i=eb,o&&(!i||o[1]<i.y||o[1]===i.y&&o[0]<i.x))o[0]===e&&o[1]===r||(hb(o),e=o[0],r=o[1]),o=t.pop();else{if(!i)break;lb(i.arc)}if(function(){for(var t,n,e,r,i=0,o=gb.length;i<o;++i)if((t=gb[i])&&(r=(n=t.halfedges).length)){var a=new Array(r),u=new Array(r);for(e=0;e<r;++e)a[e]=e,u[e]=K_(t,_b[n[e]]);for(a.sort(function(t,n){return u[n]-u[t]}),e=0;e<r;++e)u[e]=n[a[e]];for(e=0;e<r;++e)n[e]=u[e]}}(),n){var a=+n[0][0],u=+n[0][1],c=+n[1][0],f=+n[1][1];!function(t,n,e,r){for(var i,o=_b.length;o--;)J_(i=_b[o],t,n,e,r)&&Q_(i,t,n,e,r)&&(Math.abs(i[0][0]-i[1][0])>bb||Math.abs(i[0][1]-i[1][1])>bb)||delete _b[o]}(a,u,c,f),function(t,n,e,r){var i,o,a,u,c,f,s,l,h,d,p,v,g=gb.length,y=!0;for(i=0;i<g;++i)if(o=gb[i]){for(a=o.site,u=(c=o.halfedges).length;u--;)_b[c[u]]||c.splice(u,1);for(u=0,f=c.length;u<f;)p=(d=nb(o,_b[c[u]]))[0],v=d[1],l=(s=tb(o,_b[c[++u%f]]))[0],h=s[1],(Math.abs(p-l)>bb||Math.abs(v-h)>bb)&&(c.splice(u,0,_b.push(W_(a,d,Math.abs(p-t)<bb&&r-v>bb?[t,Math.abs(l-t)<bb?h:r]:Math.abs(v-r)<bb&&e-p>bb?[Math.abs(h-r)<bb?l:e,r]:Math.abs(p-e)<bb&&v-n>bb?[e,Math.abs(l-e)<bb?h:n]:Math.abs(v-n)<bb&&p-t>bb?[Math.abs(h-n)<bb?l:t,n]:null))-1),++f);f&&(y=!1)}if(y){var _,b,m,x=1/0;for(i=0,y=null;i<g;++i)(o=gb[i])&&(m=(_=(a=o.site)[0]-t)*_+(b=a[1]-n)*b)<x&&(x=m,y=o);if(y){var w=[t,n],M=[t,r],N=[e,r],A=[e,n];y.halfedges.push(_b.push(W_(a=y.site,w,M))-1,_b.push(W_(a,M,N))-1,_b.push(W_(a,N,A))-1,_b.push(W_(a,A,w))-1)}}for(i=0;i<g;++i)(o=gb[i])&&(o.halfedges.length||delete gb[i])}(a,u,c,f)}this.edges=_b,this.cells=gb,vb=yb=_b=gb=null}function Mb(t){return function(){return t}}function Nb(t,n,e){this.target=t,this.type=n,this.transform=e}function Ab(t,n,e){this.k=t,this.x=n,this.y=e}wb.prototype={constructor:wb,polygons:function(){var t=this.edges;return this.cells.map(function(n){var e=n.halfedges.map(function(e){return tb(n,t[e])});return e.data=n.site.data,e})},triangles:function(){var t=[],n=this.edges;return this.cells.forEach(function(e,r){if(o=(i=e.halfedges).length)for(var i,o,a,u,c,f,s=e.site,l=-1,h=n[i[o-1]],d=h.left===s?h.right:h.left;++l<o;)a=d,d=(h=n[i[l]]).left===s?h.right:h.left,a&&d&&r<a.index&&r<d.index&&(c=a,f=d,((u=s)[0]-f[0])*(c[1]-u[1])-(u[0]-c[0])*(f[1]-u[1])<0)&&t.push([s.data,a.data,d.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,n,e){for(var r,i,o=this,a=o._found||0,u=o.cells.length;!(i=o.cells[a]);)if(++a>=u)return null;var c=t-i.site[0],f=n-i.site[1],s=c*c+f*f;do{i=o.cells[r=a],a=null,i.halfedges.forEach(function(e){var r=o.edges[e],u=r.left;if(u!==i.site&&u||(u=r.right)){var c=t-u[0],f=n-u[1],l=c*c+f*f;l<s&&(s=l,a=u.index)}})}while(null!==a);return o._found=r,null==e||s<=e*e?i.site:null}},Ab.prototype={constructor:Ab,scale:function(t){return 1===t?this:new Ab(this.k*t,this.x,this.y)},translate:function(t,n){return 0===t&0===n?this:new Ab(this.k,this.x+this.k*t,this.y+this.k*n)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Sb=new Ab(1,0,0);function kb(t){return t.__zoom||Sb}function Tb(){t.event.stopImmediatePropagation()}function Eb(){t.event.preventDefault(),t.event.stopImmediatePropagation()}function Cb(){return!t.event.button}function Pb(){var t,n,e=this;return e instanceof SVGElement?(t=(e=e.ownerSVGElement||e).width.baseVal.value,n=e.height.baseVal.value):(t=e.clientWidth,n=e.clientHeight),[[0,0],[t,n]]}function zb(){return this.__zoom||Sb}function Rb(){return-t.event.deltaY*(t.event.deltaMode?120:1)/500}function Db(){return"ontouchstart"in this}function qb(t,n,e){var r=t.invertX(n[0][0])-e[0][0],i=t.invertX(n[1][0])-e[1][0],o=t.invertY(n[0][1])-e[0][1],a=t.invertY(n[1][1])-e[1][1];return t.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),a>o?(o+a)/2:Math.min(0,o)||Math.max(0,a))}kb.prototype=Ab.prototype,t.version="5.9.0",t.bisect=i,t.bisectRight=i,t.bisectLeft=o,t.ascending=n,t.bisector=e,t.cross=function(t,n,e){var r,i,o,u,c=t.length,f=n.length,s=new Array(c*f);for(null==e&&(e=a),r=o=0;r<c;++r)for(u=t[r],i=0;i<f;++i,++o)s[o]=e(u,n[i]);return s},t.descending=function(t,n){return n<t?-1:n>t?1:n>=t?0:NaN},t.deviation=f,t.extent=s,t.histogram=function(){var t=v,n=s,e=M;function r(r){var o,a,u=r.length,c=new Array(u);for(o=0;o<u;++o)c[o]=t(r[o],o,r);var f=n(c),s=f[0],l=f[1],h=e(c,s,l);Array.isArray(h)||(h=w(s,l,h),h=g(Math.ceil(s/h)*h,l,h));for(var d=h.length;h[0]<=s;)h.shift(),--d;for(;h[d-1]>l;)h.pop(),--d;var p,v=new Array(d+1);for(o=0;o<=d;++o)(p=v[o]=[]).x0=o>0?h[o-1]:s,p.x1=o<d?h[o]:l;for(o=0;o<u;++o)s<=(a=c[o])&&a<=l&&v[i(h,a,0,d)].push(r[o]);return v}return r.value=function(n){return arguments.length?(t="function"==typeof n?n:p(n),r):t},r.domain=function(t){return arguments.length?(n="function"==typeof t?t:p([t[0],t[1]]),r):n},r.thresholds=function(t){return arguments.length?(e="function"==typeof t?t:Array.isArray(t)?p(h.call(t)):p(t),r):e},r},t.thresholdFreedmanDiaconis=function(t,e,r){return t=d.call(t,u).sort(n),Math.ceil((r-e)/(2*(N(t,.75)-N(t,.25))*Math.pow(t.length,-1/3)))},t.thresholdScott=function(t,n,e){return Math.ceil((e-n)/(3.5*f(t)*Math.pow(t.length,-1/3)))},t.thresholdSturges=M,t.max=A,t.mean=function(t,n){var e,r=t.length,i=r,o=-1,a=0;if(null==n)for(;++o<r;)isNaN(e=u(t[o]))?--i:a+=e;else for(;++o<r;)isNaN(e=u(n(t[o],o,t)))?--i:a+=e;if(i)return a/i},t.median=function(t,e){var r,i=t.length,o=-1,a=[];if(null==e)for(;++o<i;)isNaN(r=u(t[o]))||a.push(r);else for(;++o<i;)isNaN(r=u(e(t[o],o,t)))||a.push(r);return N(a.sort(n),.5)},t.merge=S,t.min=k,t.pairs=function(t,n){null==n&&(n=a);for(var e=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);e<r;)o[e]=n(i,i=t[++e]);return o},t.permute=function(t,n){for(var e=n.length,r=new Array(e);e--;)r[e]=t[n[e]];return r},t.quantile=N,t.range=g,t.scan=function(t,e){if(r=t.length){var r,i,o=0,a=0,u=t[a];for(null==e&&(e=n);++o<r;)(e(i=t[o],u)<0||0!==e(u,u))&&(u=i,a=o);return 0===e(u,u)?a:void 0}},t.shuffle=function(t,n,e){for(var r,i,o=(null==e?t.length:e)-(n=null==n?0:+n);o;)i=Math.random()*o--|0,r=t[o+n],t[o+n]=t[i+n],t[i+n]=r;return t},t.sum=function(t,n){var e,r=t.length,i=-1,o=0;if(null==n)for(;++i<r;)(e=+t[i])&&(o+=e);else for(;++i<r;)(e=+n(t[i],i,t))&&(o+=e);return o},t.ticks=m,t.tickIncrement=x,t.tickStep=w,t.transpose=T,t.variance=c,t.zip=function(){return T(arguments)},t.axisTop=function(t){return Y(z,t)},t.axisRight=function(t){return Y(R,t)},t.axisBottom=function(t){return Y(D,t)},t.axisLeft=function(t){return Y(q,t)},t.brush=function(){return Pi(mi)},t.brushX=function(){return Pi(_i)},t.brushY=function(){return Pi(bi)},t.brushSelection=function(t){var n=t.__brush;return n?n.dim.output(n.selection):null},t.chord=function(){var t=0,n=null,e=null,r=null;function i(i){var o,a,u,c,f,s,l=i.length,h=[],d=g(l),p=[],v=[],y=v.groups=new Array(l),_=new Array(l*l);for(o=0,f=-1;++f<l;){for(a=0,s=-1;++s<l;)a+=i[f][s];h.push(a),p.push(g(l)),o+=a}for(n&&d.sort(function(t,e){return n(h[t],h[e])}),e&&p.forEach(function(t,n){t.sort(function(t,r){return e(i[n][t],i[n][r])})}),c=(o=Ui(0,Li-t*l)/o)?t:Li/l,a=0,f=-1;++f<l;){for(u=a,s=-1;++s<l;){var b=d[f],m=p[b][s],x=i[b][m],w=a,M=a+=x*o;_[m*l+b]={index:b,subindex:m,startAngle:w,endAngle:M,value:x}}y[b]={index:b,startAngle:u,endAngle:a,value:h[b]},a+=c}for(f=-1;++f<l;)for(s=f-1;++s<l;){var N=_[s*l+f],A=_[f*l+s];(N.value||A.value)&&v.push(N.value<A.value?{source:A,target:N}:{source:N,target:A})}return r?v.sort(r):v}return i.padAngle=function(n){return arguments.length?(t=Ui(0,n),i):t},i.sortGroups=function(t){return arguments.length?(n=t,i):n},i.sortSubgroups=function(t){return arguments.length?(e=t,i):e},i.sortChords=function(t){return arguments.length?(null==t?r=null:(n=t,r=function(t,e){return n(t.source.value+t.target.value,e.source.value+e.target.value)})._=t,i):r&&r._;var n},i},t.ribbon=function(){var t=Xi,n=Gi,e=Vi,r=$i,i=Wi,o=null;function a(){var a,u=Oi.call(arguments),c=t.apply(this,u),f=n.apply(this,u),s=+e.apply(this,(u[0]=c,u)),l=r.apply(this,u)-qi,h=i.apply(this,u)-qi,d=s*zi(l),p=s*Ri(l),v=+e.apply(this,(u[0]=f,u)),g=r.apply(this,u)-qi,y=i.apply(this,u)-qi;if(o||(o=a=Hi()),o.moveTo(d,p),o.arc(0,0,s,l,h),l===g&&h===y||(o.quadraticCurveTo(0,0,v*zi(g),v*Ri(g)),o.arc(0,0,v,g,y)),o.quadraticCurveTo(0,0,d,p),o.closePath(),a)return o=null,a+""||null}return a.radius=function(t){return arguments.length?(e="function"==typeof t?t:Bi(+t),a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Bi(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Bi(+t),a):i},a.source=function(n){return arguments.length?(t=n,a):t},a.target=function(t){return arguments.length?(n=t,a):n},a.context=function(t){return arguments.length?(o=null==t?null:t,a):o},a},t.nest=function(){var t,n,e,r=[],i=[];function o(e,i,a,u){if(i>=r.length)return null!=t&&e.sort(t),null!=n?n(e):e;for(var c,f,s,l=-1,h=e.length,d=r[i++],p=Qi(),v=a();++l<h;)(s=p.get(c=d(f=e[l])+""))?s.push(f):p.set(c,[f]);return p.each(function(t,n){u(v,n,o(t,i,a,u))}),v}return e={object:function(t){return o(t,0,Ji,Ki)},map:function(t){return o(t,0,to,no)},entries:function(t){return function t(e,o){if(++o>r.length)return e;var a,u=i[o-1];return null!=n&&o>=r.length?a=e.entries():(a=[],e.each(function(n,e){a.push({key:e,values:t(n,o)})})),null!=u?a.sort(function(t,n){return u(t.key,n.key)}):a}(o(t,0,to,no),0)},key:function(t){return r.push(t),e},sortKeys:function(t){return i[r.length-1]=t,e},sortValues:function(n){return t=n,e},rollup:function(t){return n=t,e}}},t.set=io,t.map=Qi,t.keys=function(t){var n=[];for(var e in t)n.push(e);return n},t.values=function(t){var n=[];for(var e in t)n.push(t[e]);return n},t.entries=function(t){var n=[];for(var e in t)n.push({key:e,value:t[e]});return n},t.color=hn,t.rgb=gn,t.hsl=mn,t.lab=Rn,t.hcl=Yn,t.lch=function(t,n,e,r){return 1===arguments.length?Bn(t):new Fn(e,n,t,null==r?1:r)},t.gray=function(t,n){return new Dn(t,0,0,null==n?1:n)},t.cubehelix=Zn,t.contours=po,t.contourDensity=function(){var t=yo,n=_o,e=bo,r=960,i=500,o=20,a=2,u=3*o,c=r+2*u>>a,f=i+2*u>>a,s=uo(20);function l(r){var i=new Float32Array(c*f),l=new Float32Array(c*f);r.forEach(function(r,o,s){var l=+t(r,o,s)+u>>a,h=+n(r,o,s)+u>>a,d=+e(r,o,s);l>=0&&l<c&&h>=0&&h<f&&(i[l+h*c]+=d)}),vo({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),go({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a),vo({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),go({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a),vo({width:c,height:f,data:i},{width:c,height:f,data:l},o>>a),go({width:c,height:f,data:l},{width:c,height:f,data:i},o>>a);var d=s(i);if(!Array.isArray(d)){var p=A(i);d=w(0,p,d),(d=g(0,Math.floor(p/d)*d,d)).shift()}return po().thresholds(d).size([c,f])(i).map(h)}function h(t){return t.value*=Math.pow(2,-2*a),t.coordinates.forEach(d),t}function d(t){t.forEach(p)}function p(t){t.forEach(v)}function v(t){t[0]=t[0]*Math.pow(2,a)-u,t[1]=t[1]*Math.pow(2,a)-u}function y(){return c=r+2*(u=3*o)>>a,f=i+2*u>>a,l}return l.x=function(n){return arguments.length?(t="function"==typeof n?n:uo(+n),l):t},l.y=function(t){return arguments.length?(n="function"==typeof t?t:uo(+t),l):n},l.weight=function(t){return arguments.length?(e="function"==typeof t?t:uo(+t),l):e},l.size=function(t){if(!arguments.length)return[r,i];var n=Math.ceil(t[0]),e=Math.ceil(t[1]);if(!(n>=0||n>=0))throw new Error("invalid size");return r=n,i=e,y()},l.cellSize=function(t){if(!arguments.length)return 1<<a;if(!((t=+t)>=1))throw new Error("invalid cell size");return a=Math.floor(Math.log(t)/Math.LN2),y()},l.thresholds=function(t){return arguments.length?(s="function"==typeof t?t:Array.isArray(t)?uo(oo.call(t)):uo(t),l):s},l.bandwidth=function(t){if(!arguments.length)return Math.sqrt(o*(o+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return o=Math.round((Math.sqrt(4*t*t+1)-1)/2),y()},l},t.dispatch=I,t.drag=function(){var n,e,r,i,o=Gt,a=Vt,u=$t,c=Wt,f={},s=I("start","drag","end"),l=0,h=0;function d(t){t.on("mousedown.drag",p).filter(c).on("touchstart.drag",y).on("touchmove.drag",_).on("touchend.drag touchcancel.drag",b).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function p(){if(!i&&o.apply(this,arguments)){var u=m("mouse",a.apply(this,arguments),Ot,this,arguments);u&&(zt(t.event.view).on("mousemove.drag",v,!0).on("mouseup.drag",g,!0),It(t.event.view),Yt(),r=!1,n=t.event.clientX,e=t.event.clientY,u("start"))}}function v(){if(Ft(),!r){var i=t.event.clientX-n,o=t.event.clientY-e;r=i*i+o*o>h}f.mouse("drag")}function g(){zt(t.event.view).on("mousemove.drag mouseup.drag",null),jt(t.event.view,r),Ft(),f.mouse("end")}function y(){if(o.apply(this,arguments)){var n,e,r=t.event.changedTouches,i=a.apply(this,arguments),u=r.length;for(n=0;n<u;++n)(e=m(r[n].identifier,i,Bt,this,arguments))&&(Yt(),e("start"))}}function _(){var n,e,r=t.event.changedTouches,i=r.length;for(n=0;n<i;++n)(e=f[r[n].identifier])&&(Ft(),e("drag"))}function b(){var n,e,r=t.event.changedTouches,o=r.length;for(i&&clearTimeout(i),i=setTimeout(function(){i=null},500),n=0;n<o;++n)(e=f[r[n].identifier])&&(Yt(),e("end"))}function m(n,e,r,i,o){var a,c,h,p=r(e,n),v=s.copy();if(kt(new Xt(d,"beforestart",a,n,l,p[0],p[1],0,0,v),function(){return null!=(t.event.subject=a=u.apply(i,o))&&(c=a.x-p[0]||0,h=a.y-p[1]||0,!0)}))return function t(u){var s,g=p;switch(u){case"start":f[n]=t,s=l++;break;case"end":delete f[n],--l;case"drag":p=r(e,n),s=l}kt(new Xt(d,u,a,n,s,p[0]+c,p[1]+h,p[0]-g[0],p[1]-g[1],v),v.apply,v,[u,i,o])}}return d.filter=function(t){return arguments.length?(o="function"==typeof t?t:Ht(!!t),d):o},d.container=function(t){return arguments.length?(a="function"==typeof t?t:Ht(t),d):a},d.subject=function(t){return arguments.length?(u="function"==typeof t?t:Ht(t),d):u},d.touchable=function(t){return arguments.length?(c="function"==typeof t?t:Ht(!!t),d):c},d.on=function(){var t=s.on.apply(s,arguments);return t===s?d:t},d.clickDistance=function(t){return arguments.length?(h=(t=+t)*t,d):Math.sqrt(h)},d},t.dragDisable=It,t.dragEnable=jt,t.dsvFormat=ko,t.csvParse=Eo,t.csvParseRows=Co,t.csvFormat=Po,t.csvFormatBody=zo,t.csvFormatRows=Ro,t.tsvParse=qo,t.tsvParseRows=Lo,t.tsvFormat=Uo,t.tsvFormatBody=Oo,t.tsvFormatRows=Bo,t.autoType=function(t){for(var n in t){var e,r=t[n].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(e=+r)){if(!/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/.test(r))continue;r=new Date(r)}else r=e;else r=null;t[n]=r}return t},t.easeLinear=function(t){return+t},t.easeQuad=Rr,t.easeQuadIn=function(t){return t*t},t.easeQuadOut=function(t){return t*(2-t)},t.easeQuadInOut=Rr,t.easeCubic=Dr,t.easeCubicIn=function(t){return t*t*t},t.easeCubicOut=function(t){return--t*t*t+1},t.easeCubicInOut=Dr,t.easePoly=Ur,t.easePolyIn=qr,t.easePolyOut=Lr,t.easePolyInOut=Ur,t.easeSin=Yr,t.easeSinIn=function(t){return 1-Math.cos(t*Br)},t.easeSinOut=function(t){return Math.sin(t*Br)},t.easeSinInOut=Yr,t.easeExp=Fr,t.easeExpIn=function(t){return Math.pow(2,10*t-10)},t.easeExpOut=function(t){return 1-Math.pow(2,-10*t)},t.easeExpInOut=Fr,t.easeCircle=Ir,t.easeCircleIn=function(t){return 1-Math.sqrt(1-t*t)},t.easeCircleOut=function(t){return Math.sqrt(1- --t*t)},t.easeCircleInOut=Ir,t.easeBounce=Kr,t.easeBounceIn=function(t){return 1-Kr(1-t)},t.easeBounceOut=Kr,t.easeBounceInOut=function(t){return((t*=2)<=1?1-Kr(1-t):Kr(t-1)+1)/2},t.easeBack=ei,t.easeBackIn=ti,t.easeBackOut=ni,t.easeBackInOut=ei,t.easeElastic=oi,t.easeElasticIn=ii,t.easeElasticOut=oi,t.easeElasticInOut=ai,t.blob=function(t,n){return fetch(t,n).then(Yo)},t.buffer=function(t,n){return fetch(t,n).then(Fo)},t.dsv=function(t,n,e,r){3===arguments.length&&"function"==typeof e&&(r=e,e=void 0);var i=ko(t);return jo(n,e).then(function(t){return i.parse(t,r)})},t.csv=Xo,t.tsv=Go,t.image=function(t,n){return new Promise(function(e,r){var i=new Image;for(var o in n)i[o]=n[o];i.onerror=r,i.onload=function(){e(i)},i.src=t})},t.json=function(t,n){return fetch(t,n).then(Vo)},t.text=jo,t.xml=Wo,t.html=Zo,t.svg=Qo,t.forceCenter=function(t,n){var e;function r(){var r,i,o=e.length,a=0,u=0;for(r=0;r<o;++r)a+=(i=e[r]).x,u+=i.y;for(a=a/o-t,u=u/o-n,r=0;r<o;++r)(i=e[r]).x-=a,i.y-=u}return null==t&&(t=0),null==n&&(n=0),r.initialize=function(t){e=t},r.x=function(n){return arguments.length?(t=+n,r):t},r.y=function(t){return arguments.length?(n=+t,r):n},r},t.forceCollide=function(t){var n,e,r=1,i=1;function o(){for(var t,o,u,c,f,s,l,h=n.length,d=0;d<i;++d)for(o=ia(n,ca,fa).visitAfter(a),t=0;t<h;++t)u=n[t],s=e[u.index],l=s*s,c=u.x+u.vx,f=u.y+u.vy,o.visit(p);function p(t,n,e,i,o){var a=t.data,h=t.r,d=s+h;if(!a)return n>c+d||i<c-d||e>f+d||o<f-d;if(a.index>u.index){var p=c-a.x-a.vx,v=f-a.y-a.vy,g=p*p+v*v;g<d*d&&(0===p&&(g+=(p=Ko())*p),0===v&&(g+=(v=Ko())*v),g=(d-(g=Math.sqrt(g)))/g*r,u.vx+=(p*=g)*(d=(h*=h)/(l+h)),u.vy+=(v*=g)*d,a.vx-=p*(d=1-d),a.vy-=v*d)}}}function a(t){if(t.data)return t.r=e[t.data.index];for(var n=t.r=0;n<4;++n)t[n]&&t[n].r>t.r&&(t.r=t[n].r)}function u(){if(n){var r,i,o=n.length;for(e=new Array(o),r=0;r<o;++r)i=n[r],e[i.index]=+t(i,r,n)}}return"function"!=typeof t&&(t=Jo(null==t?1:+t)),o.initialize=function(t){n=t,u()},o.iterations=function(t){return arguments.length?(i=+t,o):i},o.strength=function(t){return arguments.length?(r=+t,o):r},o.radius=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),u(),o):t},o},t.forceLink=function(t){var n,e,r,i,o,a=sa,u=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},c=Jo(30),f=1;function s(r){for(var i=0,a=t.length;i<f;++i)for(var u,c,s,l,h,d,p,v=0;v<a;++v)c=(u=t[v]).source,l=(s=u.target).x+s.vx-c.x-c.vx||Ko(),h=s.y+s.vy-c.y-c.vy||Ko(),l*=d=((d=Math.sqrt(l*l+h*h))-e[v])/d*r*n[v],h*=d,s.vx-=l*(p=o[v]),s.vy-=h*p,c.vx+=l*(p=1-p),c.vy+=h*p}function l(){if(r){var u,c,f=r.length,s=t.length,l=Qi(r,a);for(u=0,i=new Array(f);u<s;++u)(c=t[u]).index=u,"object"!=typeof c.source&&(c.source=la(l,c.source)),"object"!=typeof c.target&&(c.target=la(l,c.target)),i[c.source.index]=(i[c.source.index]||0)+1,i[c.target.index]=(i[c.target.index]||0)+1;for(u=0,o=new Array(s);u<s;++u)c=t[u],o[u]=i[c.source.index]/(i[c.source.index]+i[c.target.index]);n=new Array(s),h(),e=new Array(s),d()}}function h(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+u(t[e],e,t)}function d(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+c(t[n],n,t)}return null==t&&(t=[]),s.initialize=function(t){r=t,l()},s.links=function(n){return arguments.length?(t=n,l(),s):t},s.id=function(t){return arguments.length?(a=t,s):a},s.iterations=function(t){return arguments.length?(f=+t,s):f},s.strength=function(t){return arguments.length?(u="function"==typeof t?t:Jo(+t),h(),s):u},s.distance=function(t){return arguments.length?(c="function"==typeof t?t:Jo(+t),d(),s):c},s},t.forceManyBody=function(){var t,n,e,r,i=Jo(-30),o=1,a=1/0,u=.81;function c(r){var i,o=t.length,a=ia(t,ha,da).visitAfter(s);for(e=r,i=0;i<o;++i)n=t[i],a.visit(l)}function f(){if(t){var n,e,o=t.length;for(r=new Array(o),n=0;n<o;++n)e=t[n],r[e.index]=+i(e,n,t)}}function s(t){var n,e,i,o,a,u=0,c=0;if(t.length){for(i=o=a=0;a<4;++a)(n=t[a])&&(e=Math.abs(n.value))&&(u+=n.value,c+=e,i+=e*n.x,o+=e*n.y);t.x=i/c,t.y=o/c}else{(n=t).x=n.data.x,n.y=n.data.y;do{u+=r[n.data.index]}while(n=n.next)}t.value=u}function l(t,i,c,f){if(!t.value)return!0;var s=t.x-n.x,l=t.y-n.y,h=f-i,d=s*s+l*l;if(h*h/u<d)return d<a&&(0===s&&(d+=(s=Ko())*s),0===l&&(d+=(l=Ko())*l),d<o&&(d=Math.sqrt(o*d)),n.vx+=s*t.value*e/d,n.vy+=l*t.value*e/d),!0;if(!(t.length||d>=a)){(t.data!==n||t.next)&&(0===s&&(d+=(s=Ko())*s),0===l&&(d+=(l=Ko())*l),d<o&&(d=Math.sqrt(o*d)));do{t.data!==n&&(h=r[t.data.index]*e/d,n.vx+=s*h,n.vy+=l*h)}while(t=t.next)}}return c.initialize=function(n){t=n,f()},c.strength=function(t){return arguments.length?(i="function"==typeof t?t:Jo(+t),f(),c):i},c.distanceMin=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.distanceMax=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c.theta=function(t){return arguments.length?(u=t*t,c):Math.sqrt(u)},c},t.forceRadial=function(t,n,e){var r,i,o,a=Jo(.1);function u(t){for(var a=0,u=r.length;a<u;++a){var c=r[a],f=c.x-n||1e-6,s=c.y-e||1e-6,l=Math.sqrt(f*f+s*s),h=(o[a]-l)*i[a]*t/l;c.vx+=f*h,c.vy+=s*h}}function c(){if(r){var n,e=r.length;for(i=new Array(e),o=new Array(e),n=0;n<e;++n)o[n]=+t(r[n],n,r),i[n]=isNaN(o[n])?0:+a(r[n],n,r)}}return"function"!=typeof t&&(t=Jo(+t)),null==n&&(n=0),null==e&&(e=0),u.initialize=function(t){r=t,c()},u.strength=function(t){return arguments.length?(a="function"==typeof t?t:Jo(+t),c(),u):a},u.radius=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),c(),u):t},u.x=function(t){return arguments.length?(n=+t,u):n},u.y=function(t){return arguments.length?(e=+t,u):e},u},t.forceSimulation=function(t){var n,e=1,r=.001,i=1-Math.pow(r,1/300),o=0,a=.6,u=Qi(),c=ir(s),f=I("tick","end");function s(){l(),f.call("tick",n),e<r&&(c.stop(),f.call("end",n))}function l(r){var c,f,s=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(e+=(o-e)*i,u.each(function(t){t(e)}),c=0;c<s;++c)null==(f=t[c]).fx?f.x+=f.vx*=a:(f.x=f.fx,f.vx=0),null==f.fy?f.y+=f.vy*=a:(f.y=f.fy,f.vy=0);return n}function h(){for(var n,e=0,r=t.length;e<r;++e){if((n=t[e]).index=e,isNaN(n.fx)||(n.x=n.fx),isNaN(n.fy)||(n.y=n.fy),isNaN(n.x)||isNaN(n.y)){var i=pa*Math.sqrt(e),o=e*va;n.x=i*Math.cos(o),n.y=i*Math.sin(o)}(isNaN(n.vx)||isNaN(n.vy))&&(n.vx=n.vy=0)}}function d(n){return n.initialize&&n.initialize(t),n}return null==t&&(t=[]),h(),n={tick:l,restart:function(){return c.restart(s),n},stop:function(){return c.stop(),n},nodes:function(e){return arguments.length?(t=e,h(),u.each(d),n):t},alpha:function(t){return arguments.length?(e=+t,n):e},alphaMin:function(t){return arguments.length?(r=+t,n):r},alphaDecay:function(t){return arguments.length?(i=+t,n):+i},alphaTarget:function(t){return arguments.length?(o=+t,n):o},velocityDecay:function(t){return arguments.length?(a=1-t,n):1-a},force:function(t,e){return arguments.length>1?(null==e?u.remove(t):u.set(t,d(e)),n):u.get(t)},find:function(n,e,r){var i,o,a,u,c,f=0,s=t.length;for(null==r?r=1/0:r*=r,f=0;f<s;++f)(a=(i=n-(u=t[f]).x)*i+(o=e-u.y)*o)<r&&(c=u,r=a);return c},on:function(t,e){return arguments.length>1?(f.on(t,e),n):f.on(t)}}},t.forceX=function(t){var n,e,r,i=Jo(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vx+=(r[o]-i.x)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Jo(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Jo(+t),a(),o):i},o.x=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),a(),o):t},o},t.forceY=function(t){var n,e,r,i=Jo(.1);function o(t){for(var i,o=0,a=n.length;o<a;++o)(i=n[o]).vy+=(r[o]-i.y)*e[o]*t}function a(){if(n){var o,a=n.length;for(e=new Array(a),r=new Array(a),o=0;o<a;++o)e[o]=isNaN(r[o]=+t(n[o],o,n))?0:+i(n[o],o,n)}}return"function"!=typeof t&&(t=Jo(null==t?0:+t)),o.initialize=function(t){n=t,a()},o.strength=function(t){return arguments.length?(i="function"==typeof t?t:Jo(+t),a(),o):i},o.y=function(n){return arguments.length?(t="function"==typeof n?n:Jo(+n),a(),o):t},o},t.formatDefaultLocale=Ta,t.formatLocale=ka,t.formatSpecifier=ma,t.precisionFixed=Ea,t.precisionPrefix=Ca,t.precisionRound=Pa,t.geoArea=function(t){return _u.reset(),lu(t,bu),2*_u},t.geoBounds=function(t){var n,e,r,i,o,a,u;if(Du=Ru=-(Pu=zu=1/0),Bu=[],lu(t,ic),e=Bu.length){for(Bu.sort(dc),n=1,o=[r=Bu[0]];n<e;++n)pc(r,(i=Bu[n])[0])||pc(r,i[1])?(hc(r[0],i[1])>hc(r[0],r[1])&&(r[1]=i[1]),hc(i[0],r[1])>hc(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(u=hc(r[1],i[0]))>a&&(a=u,Pu=i[0],Ru=r[1])}return Bu=Yu=null,Pu===1/0||zu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Pu,zu],[Ru,Du]]},t.geoCentroid=function(t){Fu=Iu=ju=Hu=Xu=Gu=Vu=$u=Wu=Zu=Qu=0,lu(t,vc);var n=Wu,e=Zu,r=Qu,i=n*n+e*e+r*r;return i<Ua&&(n=Gu,e=Vu,r=$u,Iu<La&&(n=ju,e=Hu,r=Xu),(i=n*n+e*e+r*r)<Ua)?[NaN,NaN]:[Ga(e,n)*Ia,ru(r/tu(i))*Ia]},t.geoCircle=function(){var t,n,e=Sc([0,0]),r=Sc(90),i=Sc(6),o={point:function(e,r){t.push(e=n(e,r)),e[0]*=Ia,e[1]*=Ia}};function a(){var a=e.apply(this,arguments),u=r.apply(this,arguments)*ja,c=i.apply(this,arguments)*ja;return t=[],n=Ec(-a[0]*ja,-a[1]*ja,0).invert,Dc(o,u,c,1),a={type:"Polygon",coordinates:[t]},t=n=null,a}return a.center=function(t){return arguments.length?(e="function"==typeof t?t:Sc([+t[0],+t[1]]),a):e},a.radius=function(t){return arguments.length?(r="function"==typeof t?t:Sc(+t),a):r},a.precision=function(t){return arguments.length?(i="function"==typeof t?t:Sc(+t),a):i},a},t.geoClipAntimeridian=Gc,t.geoClipCircle=Vc,t.geoClipExtent=function(){var t,n,e,r=0,i=0,o=960,a=500;return e={stream:function(e){return t&&n===e?t:t=Zc(r,i,o,a)(n=e)},extent:function(u){return arguments.length?(r=+u[0][0],i=+u[0][1],o=+u[1][0],a=+u[1][1],t=n=null,e):[[r,i],[o,a]]}}},t.geoClipRectangle=Zc,t.geoContains=function(t,n){return(t&&sf.hasOwnProperty(t.type)?sf[t.type]:hf)(t,n)},t.geoDistance=ff,t.geoGraticule=mf,t.geoGraticule10=function(){return mf()()},t.geoInterpolate=function(t,n){var e=t[0]*ja,r=t[1]*ja,i=n[0]*ja,o=n[1]*ja,a=Va(r),u=Ja(r),c=Va(o),f=Ja(o),s=a*Va(e),l=a*Ja(e),h=c*Va(i),d=c*Ja(i),p=2*ru(tu(iu(o-r)+a*c*iu(i-e))),v=Ja(p),g=p?function(t){var n=Ja(t*=p)/v,e=Ja(p-t)/v,r=e*s+n*h,i=e*l+n*d,o=e*u+n*f;return[Ga(i,r)*Ia,Ga(o,tu(r*r+i*i))*Ia]}:function(){return[e*Ia,r*Ia]};return g.distance=p,g},t.geoLength=af,t.geoPath=function(t,n){var e,r,i=4.5;function o(t){return t&&("function"==typeof i&&r.pointRadius(+i.apply(this,arguments)),lu(t,e(r))),r.result()}return o.area=function(t){return lu(t,e(Tf)),Tf.result()},o.measure=function(t){return lu(t,e(ps)),ps.result()},o.bounds=function(t){return lu(t,e(Uf)),Uf.result()},o.centroid=function(t){return lu(t,e(Qf)),Qf.result()},o.projection=function(n){return arguments.length?(e=null==n?(t=null,xf):(t=n).stream,o):t},o.context=function(t){return arguments.length?(r=null==t?(n=null,new ys):new us(n=t),"function"!=typeof i&&r.pointRadius(i),o):n},o.pointRadius=function(t){return arguments.length?(i="function"==typeof t?t:(r.pointRadius(+t),+t),o):i},o.projection(t).context(n)},t.geoAlbers=Ls,t.geoAlbersUsa=function(){var t,n,e,r,i,o,a=Ls(),u=qs().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=qs().rotate([157,0]).center([-3,19.9]).parallels([8,18]),f={point:function(t,n){o=[t,n]}};function s(t){var n=t[0],a=t[1];return o=null,e.point(n,a),o||(r.point(n,a),o)||(i.point(n,a),o)}function l(){return t=n=null,s}return s.invert=function(t){var n=a.scale(),e=a.translate(),r=(t[0]-e[0])/n,i=(t[1]-e[1])/n;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?u:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:a).invert(t)},s.stream=function(e){return t&&n===e?t:(r=[a.stream(n=e),u.stream(e),c.stream(e)],i=r.length,t={point:function(t,n){for(var e=-1;++e<i;)r[e].point(t,n)},sphere:function(){for(var t=-1;++t<i;)r[t].sphere()},lineStart:function(){for(var t=-1;++t<i;)r[t].lineStart()},lineEnd:function(){for(var t=-1;++t<i;)r[t].lineEnd()},polygonStart:function(){for(var t=-1;++t<i;)r[t].polygonStart()},polygonEnd:function(){for(var t=-1;++t<i;)r[t].polygonEnd()}});var r,i},s.precision=function(t){return arguments.length?(a.precision(t),u.precision(t),c.precision(t),l()):a.precision()},s.scale=function(t){return arguments.length?(a.scale(t),u.scale(.35*t),c.scale(t),s.translate(a.translate())):a.scale()},s.translate=function(t){if(!arguments.length)return a.translate();var n=a.scale(),o=+t[0],s=+t[1];return e=a.translate(t).clipExtent([[o-.455*n,s-.238*n],[o+.455*n,s+.238*n]]).stream(f),r=u.translate([o-.307*n,s+.201*n]).clipExtent([[o-.425*n+La,s+.12*n+La],[o-.214*n-La,s+.234*n-La]]).stream(f),i=c.translate([o-.205*n,s+.212*n]).clipExtent([[o-.214*n+La,s+.166*n+La],[o-.115*n-La,s+.234*n-La]]).stream(f),l()},s.fitExtent=function(t,n){return ws(s,t,n)},s.fitSize=function(t,n){return Ms(s,t,n)},s.fitWidth=function(t,n){return Ns(s,t,n)},s.fitHeight=function(t,n){return As(s,t,n)},s.scale(1070)},t.geoAzimuthalEqualArea=function(){return Ps(Bs).scale(124.75).clipAngle(179.999)},t.geoAzimuthalEqualAreaRaw=Bs,t.geoAzimuthalEquidistant=function(){return Ps(Ys).scale(79.4188).clipAngle(179.999)},t.geoAzimuthalEquidistantRaw=Ys,t.geoConicConformal=function(){return Rs(Hs).scale(109.5).parallels([30,30])},t.geoConicConformalRaw=Hs,t.geoConicEqualArea=qs,t.geoConicEqualAreaRaw=Ds,t.geoConicEquidistant=function(){return Rs(Gs).scale(131.154).center([0,13.9389])},t.geoConicEquidistantRaw=Gs,t.geoEqualEarth=function(){return Ps(Js).scale(177.158)},t.geoEqualEarthRaw=Js,t.geoEquirectangular=function(){return Ps(Xs).scale(152.63)},t.geoEquirectangularRaw=Xs,t.geoGnomonic=function(){return Ps(Ks).scale(144.049).clipAngle(60)},t.geoGnomonicRaw=Ks,t.geoIdentity=function(){var t,n,e,r,i,o,a=1,u=0,c=0,f=1,s=1,l=xf,h=null,d=xf;function p(){return r=i=null,o}return o={stream:function(t){return r&&i===t?r:r=l(d(i=t))},postclip:function(r){return arguments.length?(d=r,h=t=n=e=null,p()):d},clipExtent:function(r){return arguments.length?(d=null==r?(h=t=n=e=null,xf):Zc(h=+r[0][0],t=+r[0][1],n=+r[1][0],e=+r[1][1]),p()):null==h?null:[[h,t],[n,e]]},scale:function(t){return arguments.length?(l=tl((a=+t)*f,a*s,u,c),p()):a},translate:function(t){return arguments.length?(l=tl(a*f,a*s,u=+t[0],c=+t[1]),p()):[u,c]},reflectX:function(t){return arguments.length?(l=tl(a*(f=t?-1:1),a*s,u,c),p()):f<0},reflectY:function(t){return arguments.length?(l=tl(a*f,a*(s=t?-1:1),u,c),p()):s<0},fitExtent:function(t,n){return ws(o,t,n)},fitSize:function(t,n){return Ms(o,t,n)},fitWidth:function(t,n){return Ns(o,t,n)},fitHeight:function(t,n){return As(o,t,n)}}},t.geoProjection=Ps,t.geoProjectionMutator=zs,t.geoMercator=function(){return Is(Fs).scale(961/Fa)},t.geoMercatorRaw=Fs,t.geoNaturalEarth1=function(){return Ps(nl).scale(175.295)},t.geoNaturalEarth1Raw=nl,t.geoOrthographic=function(){return Ps(el).scale(249.5).clipAngle(90+La)},t.geoOrthographicRaw=el,t.geoStereographic=function(){return Ps(rl).scale(250).clipAngle(142)},t.geoStereographicRaw=rl,t.geoTransverseMercator=function(){var t=Is(il),n=t.center,e=t.rotate;return t.center=function(t){return arguments.length?n([-t[1],t[0]]):[(t=n())[1],-t[0]]},t.rotate=function(t){return arguments.length?e([t[0],t[1],t.length>2?t[2]+90:90]):[(t=e())[0],t[1],t[2]-90]},e([0,0,90]).scale(159.155)},t.geoTransverseMercatorRaw=il,t.geoRotation=Rc,t.geoStream=lu,t.geoTransform=function(t){return{stream:bs(t)}},t.cluster=function(){var t=ol,n=1,e=1,r=!1;function i(i){var o,a=0;i.eachAfter(function(n){var e=n.children;e?(n.x=function(t){return t.reduce(al,0)/t.length}(e),n.y=function(t){return 1+t.reduce(ul,0)}(e)):(n.x=o?a+=t(n,o):0,n.y=0,o=n)});var u=function(t){for(var n;n=t.children;)t=n[0];return t}(i),c=function(t){for(var n;n=t.children;)t=n[n.length-1];return t}(i),f=u.x-t(u,c)/2,s=c.x+t(c,u)/2;return i.eachAfter(r?function(t){t.x=(t.x-i.x)*n,t.y=(i.y-t.y)*e}:function(t){t.x=(t.x-f)/(s-f)*n,t.y=(1-(i.y?t.y/i.y:1))*e})}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.hierarchy=fl,t.pack=function(){var t=null,n=1,e=1,r=El;function i(i){return i.x=n/2,i.y=e/2,t?i.eachBefore(zl(t)).eachAfter(Rl(r,.5)).eachBefore(Dl(1)):i.eachBefore(zl(Pl)).eachAfter(Rl(El,1)).eachAfter(Rl(r,i.r/Math.min(n,e))).eachBefore(Dl(Math.min(n,e)/(2*i.r))),i}return i.radius=function(n){return arguments.length?(t=null==(e=n)?null:Tl(e),i):t;var e},i.size=function(t){return arguments.length?(n=+t[0],e=+t[1],i):[n,e]},i.padding=function(t){return arguments.length?(r="function"==typeof t?t:Cl(+t),i):r},i},t.packSiblings=function(t){return kl(t),t},t.packEnclose=vl,t.partition=function(){var t=1,n=1,e=0,r=!1;function i(i){var o=i.height+1;return i.x0=i.y0=e,i.x1=t,i.y1=n/o,i.eachBefore(function(t,n){return function(r){r.children&&Ll(r,r.x0,t*(r.depth+1)/n,r.x1,t*(r.depth+2)/n);var i=r.x0,o=r.y0,a=r.x1-e,u=r.y1-e;a<i&&(i=a=(i+a)/2),u<o&&(o=u=(o+u)/2),r.x0=i,r.y0=o,r.x1=a,r.y1=u}}(n,o)),r&&i.eachBefore(ql),i}return i.round=function(t){return arguments.length?(r=!!t,i):r},i.size=function(e){return arguments.length?(t=+e[0],n=+e[1],i):[t,n]},i.padding=function(t){return arguments.length?(e=+t,i):e},i},t.stratify=function(){var t=Yl,n=Fl;function e(e){var r,i,o,a,u,c,f,s=e.length,l=new Array(s),h={};for(i=0;i<s;++i)r=e[i],u=l[i]=new dl(r),null!=(c=t(r,i,e))&&(c+="")&&(h[f=Ul+(u.id=c)]=f in h?Bl:u);for(i=0;i<s;++i)if(u=l[i],null!=(c=n(e[i],i,e))&&(c+="")){if(!(a=h[Ul+c]))throw new Error("missing: "+c);if(a===Bl)throw new Error("ambiguous: "+c);a.children?a.children.push(u):a.children=[u],u.parent=a}else{if(o)throw new Error("multiple roots");o=u}if(!o)throw new Error("no root");if(o.parent=Ol,o.eachBefore(function(t){t.depth=t.parent.depth+1,--s}).eachBefore(hl),o.parent=null,s>0)throw new Error("cycle");return o}return e.id=function(n){return arguments.length?(t=Tl(n),e):t},e.parentId=function(t){return arguments.length?(n=Tl(t),e):n},e},t.tree=function(){var t=Il,n=1,e=1,r=null;function i(i){var c=function(t){for(var n,e,r,i,o,a=new Vl(t,0),u=[a];n=u.pop();)if(r=n._.children)for(n.children=new Array(o=r.length),i=o-1;i>=0;--i)u.push(e=n.children[i]=new Vl(r[i],i)),e.parent=n;return(a.parent=new Vl(null,0)).children=[a],a}(i);if(c.eachAfter(o),c.parent.m=-c.z,c.eachBefore(a),r)i.eachBefore(u);else{var f=i,s=i,l=i;i.eachBefore(function(t){t.x<f.x&&(f=t),t.x>s.x&&(s=t),t.depth>l.depth&&(l=t)});var h=f===s?1:t(f,s)/2,d=h-f.x,p=n/(s.x+h+d),v=e/(l.depth||1);i.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*v})}return i}function o(n){var e=n.children,r=n.parent.children,i=n.i?r[n.i-1]:null;if(e){!function(t){for(var n,e=0,r=0,i=t.children,o=i.length;--o>=0;)(n=i[o]).z+=e,n.m+=e,e+=n.s+(r+=n.c)}(n);var o=(e[0].z+e[e.length-1].z)/2;i?(n.z=i.z+t(n._,i._),n.m=n.z-o):n.z=o}else i&&(n.z=i.z+t(n._,i._));n.parent.A=function(n,e,r){if(e){for(var i,o=n,a=n,u=e,c=o.parent.children[0],f=o.m,s=a.m,l=u.m,h=c.m;u=Hl(u),o=jl(o),u&&o;)c=jl(c),(a=Hl(a)).a=n,(i=u.z+l-o.z-f+t(u._,o._))>0&&(Xl(Gl(u,n,r),n,i),f+=i,s+=i),l+=u.m,f+=o.m,h+=c.m,s+=a.m;u&&!Hl(a)&&(a.t=u,a.m+=l-s),o&&!jl(c)&&(c.t=o,c.m+=f-h,r=n)}return r}(n,i,n.parent.A||r[0])}function a(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function u(t){t.x*=n,t.y=t.depth*e}return i.separation=function(n){return arguments.length?(t=n,i):t},i.size=function(t){return arguments.length?(r=!1,n=+t[0],e=+t[1],i):r?null:[n,e]},i.nodeSize=function(t){return arguments.length?(r=!0,n=+t[0],e=+t[1],i):r?[n,e]:null},i},t.treemap=function(){var t=Ql,n=!1,e=1,r=1,i=[0],o=El,a=El,u=El,c=El,f=El;function s(t){return t.x0=t.y0=0,t.x1=e,t.y1=r,t.eachBefore(l),i=[0],n&&t.eachBefore(ql),t}function l(n){var e=i[n.depth],r=n.x0+e,s=n.y0+e,l=n.x1-e,h=n.y1-e;l<r&&(r=l=(r+l)/2),h<s&&(s=h=(s+h)/2),n.x0=r,n.y0=s,n.x1=l,n.y1=h,n.children&&(e=i[n.depth+1]=o(n)/2,r+=f(n)-e,s+=a(n)-e,(l-=u(n)-e)<r&&(r=l=(r+l)/2),(h-=c(n)-e)<s&&(s=h=(s+h)/2),t(n,r,s,l,h))}return s.round=function(t){return arguments.length?(n=!!t,s):n},s.size=function(t){return arguments.length?(e=+t[0],r=+t[1],s):[e,r]},s.tile=function(n){return arguments.length?(t=Tl(n),s):t},s.padding=function(t){return arguments.length?s.paddingInner(t).paddingOuter(t):s.paddingInner()},s.paddingInner=function(t){return arguments.length?(o="function"==typeof t?t:Cl(+t),s):o},s.paddingOuter=function(t){return arguments.length?s.paddingTop(t).paddingRight(t).paddingBottom(t).paddingLeft(t):s.paddingTop()},s.paddingTop=function(t){return arguments.length?(a="function"==typeof t?t:Cl(+t),s):a},s.paddingRight=function(t){return arguments.length?(u="function"==typeof t?t:Cl(+t),s):u},s.paddingBottom=function(t){return arguments.length?(c="function"==typeof t?t:Cl(+t),s):c},s.paddingLeft=function(t){return arguments.length?(f="function"==typeof t?t:Cl(+t),s):f},s},t.treemapBinary=function(t,n,e,r,i){var o,a,u=t.children,c=u.length,f=new Array(c+1);for(f[0]=a=o=0;o<c;++o)f[o+1]=a+=u[o].value;!function t(n,e,r,i,o,a,c){if(n>=e-1){var s=u[n];return s.x0=i,s.y0=o,s.x1=a,void(s.y1=c)}for(var l=f[n],h=r/2+l,d=n+1,p=e-1;d<p;){var v=d+p>>>1;f[v]<h?d=v+1:p=v}h-f[d-1]<f[d]-h&&n+1<d&&--d;var g=f[d]-l,y=r-g;if(a-i>c-o){var _=(i*y+a*g)/r;t(n,d,g,i,o,_,c),t(d,e,y,_,o,a,c)}else{var b=(o*y+c*g)/r;t(n,d,g,i,o,a,b),t(d,e,y,i,b,a,c)}}(0,c,t.value,n,e,r,i)},t.treemapDice=Ll,t.treemapSlice=$l,t.treemapSliceDice=function(t,n,e,r,i){(1&t.depth?$l:Ll)(t,n,e,r,i)},t.treemapSquarify=Ql,t.treemapResquarify=Jl,t.interpolate=ye,t.interpolateArray=se,t.interpolateBasis=Kn,t.interpolateBasisClosed=te,t.interpolateDate=le,t.interpolateDiscrete=function(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}},t.interpolateHue=function(t,n){var e=re(+t,+n);return function(t){var n=e(t);return n-360*Math.floor(n/360)}},t.interpolateNumber=he,t.interpolateObject=de,t.interpolateRound=_e,t.interpolateString=ge,t.interpolateTransformCss=ke,t.interpolateTransformSvg=Te,t.interpolateZoom=De,t.interpolateRgb=ae,t.interpolateRgbBasis=ce,t.interpolateRgbBasisClosed=fe,t.interpolateHsl=Le,t.interpolateHslLong=Ue,t.interpolateLab=function(t,n){var e=oe((t=Rn(t)).l,(n=Rn(n)).l),r=oe(t.a,n.a),i=oe(t.b,n.b),o=oe(t.opacity,n.opacity);return function(n){return t.l=e(n),t.a=r(n),t.b=i(n),t.opacity=o(n),t+""}},t.interpolateHcl=Be,t.interpolateHclLong=Ye,t.interpolateCubehelix=Ie,t.interpolateCubehelixLong=je,t.piecewise=function(t,n){for(var e=0,r=n.length-1,i=n[0],o=new Array(r<0?0:r);e<r;)o[e]=t(i,i=n[++e]);return function(t){var n=Math.max(0,Math.min(r-1,Math.floor(t*=r)));return o[n](t-n)}},t.quantize=function(t,n){for(var e=new Array(n),r=0;r<n;++r)e[r]=t(r/(n-1));return e},t.path=Hi,t.polygonArea=function(t){for(var n,e=-1,r=t.length,i=t[r-1],o=0;++e<r;)n=i,i=t[e],o+=n[1]*i[0]-n[0]*i[1];return o/2},t.polygonCentroid=function(t){for(var n,e,r=-1,i=t.length,o=0,a=0,u=t[i-1],c=0;++r<i;)n=u,u=t[r],c+=e=n[0]*u[1]-u[0]*n[1],o+=(n[0]+u[0])*e,a+=(n[1]+u[1])*e;return[o/(c*=3),a/c]},t.polygonHull=function(t){if((e=t.length)<3)return null;var n,e,r=new Array(e),i=new Array(e);for(n=0;n<e;++n)r[n]=[+t[n][0],+t[n][1],n];for(r.sort(Kl),n=0;n<e;++n)i[n]=[r[n][0],-r[n][1]];var o=th(r),a=th(i),u=a[0]===o[0],c=a[a.length-1]===o[o.length-1],f=[];for(n=o.length-1;n>=0;--n)f.push(t[r[o[n]][2]]);for(n=+u;n<a.length-c;++n)f.push(t[r[a[n]][2]]);return f},t.polygonContains=function(t,n){for(var e,r,i=t.length,o=t[i-1],a=n[0],u=n[1],c=o[0],f=o[1],s=!1,l=0;l<i;++l)e=(o=t[l])[0],(r=o[1])>u!=f>u&&a<(c-e)*(u-r)/(f-r)+e&&(s=!s),c=e,f=r;return s},t.polygonLength=function(t){for(var n,e,r=-1,i=t.length,o=t[i-1],a=o[0],u=o[1],c=0;++r<i;)n=a,e=u,n-=a=(o=t[r])[0],e-=u=o[1],c+=Math.sqrt(n*n+e*e);return c},t.quadtree=ia,t.randomUniform=eh,t.randomNormal=rh,t.randomLogNormal=ih,t.randomBates=ah,t.randomIrwinHall=oh,t.randomExponential=uh,t.scaleBand=vh,t.scalePoint=function(){return function t(n){var e=n.copy;return n.padding=n.paddingOuter,delete n.paddingInner,delete n.paddingOuter,n.copy=function(){return t(e())},n}(vh.apply(null,arguments).paddingInner(1))},t.scaleIdentity=function t(n){var e;function r(t){return isNaN(t=+t)?e:t}return r.invert=r,r.domain=r.range=function(t){return arguments.length?(n=lh.call(t,gh),r):n.slice()},r.unknown=function(t){return arguments.length?(e=t,r):e},r.copy=function(){return t(n).unknown(e)},n=arguments.length?lh.call(n,gh):[0,1],kh(r)},t.scaleLinear=function t(){var n=Ah(_h,_h);return n.copy=function(){return Mh(n,t())},ch.apply(n,arguments),kh(n)},t.scaleLog=function t(){var n=qh(Nh()).domain([1,10]);return n.copy=function(){return Mh(n,t()).base(n.base())},ch.apply(n,arguments),n},t.scaleSymlog=function t(){var n=Oh(Nh());return n.copy=function(){return Mh(n,t()).constant(n.constant())},ch.apply(n,arguments)},t.scaleOrdinal=ph,t.scaleImplicit=dh,t.scalePow=jh,t.scaleSqrt=function(){return jh.apply(null,arguments).exponent(.5)},t.scaleQuantile=function t(){var e,r=[],o=[],a=[];function u(){var t=0,n=Math.max(1,o.length);for(a=new Array(n-1);++t<n;)a[t-1]=N(r,t/n);return c}function c(t){return isNaN(t=+t)?e:o[i(a,t)]}return c.invertExtent=function(t){var n=o.indexOf(t);return n<0?[NaN,NaN]:[n>0?a[n-1]:r[0],n<a.length?a[n]:r[r.length-1]]},c.domain=function(t){if(!arguments.length)return r.slice();r=[];for(var e,i=0,o=t.length;i<o;++i)null==(e=t[i])||isNaN(e=+e)||r.push(e);return r.sort(n),u()},c.range=function(t){return arguments.length?(o=hh.call(t),u()):o.slice()},c.unknown=function(t){return arguments.length?(e=t,c):e},c.quantiles=function(){return a.slice()},c.copy=function(){return t().domain(r).range(o).unknown(e)},ch.apply(c,arguments)},t.scaleQuantize=function t(){var n,e=0,r=1,o=1,a=[.5],u=[0,1];function c(t){return t<=t?u[i(a,t,0,o)]:n}function f(){var t=-1;for(a=new Array(o);++t<o;)a[t]=((t+1)*r-(t-o)*e)/(o+1);return c}return c.domain=function(t){return arguments.length?(e=+t[0],r=+t[1],f()):[e,r]},c.range=function(t){return arguments.length?(o=(u=hh.call(t)).length-1,f()):u.slice()},c.invertExtent=function(t){var n=u.indexOf(t);return n<0?[NaN,NaN]:n<1?[e,a[0]]:n>=o?[a[o-1],r]:[a[n-1],a[n]]},c.unknown=function(t){return arguments.length?(n=t,c):c},c.thresholds=function(){return a.slice()},c.copy=function(){return t().domain([e,r]).range(u).unknown(n)},ch.apply(kh(c),arguments)},t.scaleThreshold=function t(){var n,e=[.5],r=[0,1],o=1;function a(t){return t<=t?r[i(e,t,0,o)]:n}return a.domain=function(t){return arguments.length?(e=hh.call(t),o=Math.min(e.length,r.length-1),a):e.slice()},a.range=function(t){return arguments.length?(r=hh.call(t),o=Math.min(e.length,r.length-1),a):r.slice()},a.invertExtent=function(t){var n=r.indexOf(t);return[e[n-1],e[n]]},a.unknown=function(t){return arguments.length?(n=t,a):n},a.copy=function(){return t().domain(e).range(r).unknown(n)},ch.apply(a,arguments)},t.scaleTime=function(){return ch.apply(wv(wd,md,ad,rd,nd,Kh,Qh,Vh,t.timeFormat).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)},t.scaleUtc=function(){return ch.apply(wv(Vd,Xd,Pd,Td,Sd,Nd,Qh,Vh,t.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)},t.scaleSequential=function t(){var n=kh(Mv()(_h));return n.copy=function(){return Nv(n,t())},fh.apply(n,arguments)},t.scaleSequentialLog=function t(){var n=qh(Mv()).domain([1,10]);return n.copy=function(){return Nv(n,t()).base(n.base())},fh.apply(n,arguments)},t.scaleSequentialPow=Av,t.scaleSequentialSqrt=function(){return Av.apply(null,arguments).exponent(.5)},t.scaleSequentialSymlog=function t(){var n=Oh(Mv());return n.copy=function(){return Nv(n,t()).constant(n.constant())},fh.apply(n,arguments)},t.scaleSequentialQuantile=function t(){var e=[],r=_h;function o(t){if(!isNaN(t=+t))return r((i(e,t)-1)/(e.length-1))}return o.domain=function(t){if(!arguments.length)return e.slice();e=[];for(var r,i=0,a=t.length;i<a;++i)null==(r=t[i])||isNaN(r=+r)||e.push(r);return e.sort(n),o},o.interpolator=function(t){return arguments.length?(r=t,o):r},o.copy=function(){return t(r).domain(e)},fh.apply(o,arguments)},t.scaleDiverging=function t(){var n=kh(Sv()(_h));return n.copy=function(){return Nv(n,t())},fh.apply(n,arguments)},t.scaleDivergingLog=function t(){var n=qh(Sv()).domain([.1,1,10]);return n.copy=function(){return Nv(n,t()).base(n.base())},fh.apply(n,arguments)},t.scaleDivergingPow=kv,t.scaleDivergingSqrt=function(){return kv.apply(null,arguments).exponent(.5)},t.scaleDivergingSymlog=function t(){var n=Oh(Sv());return n.copy=function(){return Nv(n,t()).constant(n.constant())},fh.apply(n,arguments)},t.tickFormat=Sh,t.schemeCategory10=Ev,t.schemeAccent=Cv,t.schemeDark2=Pv,t.schemePaired=zv,t.schemePastel1=Rv,t.schemePastel2=Dv,t.schemeSet1=qv,t.schemeSet2=Lv,t.schemeSet3=Uv,t.interpolateBrBG=Yv,t.schemeBrBG=Bv,t.interpolatePRGn=Iv,t.schemePRGn=Fv,t.interpolatePiYG=Hv,t.schemePiYG=jv,t.interpolatePuOr=Gv,t.schemePuOr=Xv,t.interpolateRdBu=$v,t.schemeRdBu=Vv,t.interpolateRdGy=Zv,t.schemeRdGy=Wv,t.interpolateRdYlBu=Jv,t.schemeRdYlBu=Qv,t.interpolateRdYlGn=tg,t.schemeRdYlGn=Kv,t.interpolateSpectral=eg,t.schemeSpectral=ng,t.interpolateBuGn=ig,t.schemeBuGn=rg,t.interpolateBuPu=ag,t.schemeBuPu=og,t.interpolateGnBu=cg,t.schemeGnBu=ug,t.interpolateOrRd=sg,t.schemeOrRd=fg,t.interpolatePuBuGn=hg,t.schemePuBuGn=lg,t.interpolatePuBu=pg,t.schemePuBu=dg,t.interpolatePuRd=gg,t.schemePuRd=vg,t.interpolateRdPu=_g,t.schemeRdPu=yg,t.interpolateYlGnBu=mg,t.schemeYlGnBu=bg,t.interpolateYlGn=wg,t.schemeYlGn=xg,t.interpolateYlOrBr=Ng,t.schemeYlOrBr=Mg,t.interpolateYlOrRd=Sg,t.schemeYlOrRd=Ag,t.interpolateBlues=Tg,t.schemeBlues=kg,t.interpolateGreens=Cg,t.schemeGreens=Eg,t.interpolateGreys=zg,t.schemeGreys=Pg,t.interpolatePurples=Dg,t.schemePurples=Rg,t.interpolateReds=Lg,t.schemeReds=qg,t.interpolateOranges=Og,t.schemeOranges=Ug,t.interpolateCubehelixDefault=Bg,t.interpolateRainbow=function(t){(t<0||t>1)&&(t-=Math.floor(t));var n=Math.abs(t-.5);return Ig.h=360*t-100,Ig.s=1.5-1.5*n,Ig.l=.8-.9*n,Ig+""},t.interpolateWarm=Yg,t.interpolateCool=Fg,t.interpolateSinebow=function(t){var n;return t=(.5-t)*Math.PI,jg.r=255*(n=Math.sin(t))*n,jg.g=255*(n=Math.sin(t+Hg))*n,jg.b=255*(n=Math.sin(t+Xg))*n,jg+""},t.interpolateViridis=Vg,t.interpolateMagma=$g,t.interpolateInferno=Wg,t.interpolatePlasma=Zg,t.create=function(t){return zt(W(t).call(document.documentElement))},t.creator=W,t.local=Dt,t.matcher=tt,t.mouse=Ot,t.namespace=$,t.namespaces=V,t.clientPoint=Ut,t.select=zt,t.selectAll=function(t){return"string"==typeof t?new Ct([document.querySelectorAll(t)],[document.documentElement]):new Ct([null==t?[]:t],Et)},t.selection=Pt,t.selector=Q,t.selectorAll=K,t.style=ct,t.touch=Bt,t.touches=function(t,n){null==n&&(n=Lt().touches);for(var e=0,r=n?n.length:0,i=new Array(r);e<r;++e)i[e]=Ut(t,n[e]);return i},t.window=ut,t.customEvent=kt,t.arc=function(){var t=sy,n=ly,e=Qg(0),r=null,i=hy,o=dy,a=py,u=null;function c(){var c,f,s,l=+t.apply(this,arguments),h=+n.apply(this,arguments),d=i.apply(this,arguments)-uy,p=o.apply(this,arguments)-uy,v=Jg(p-d),g=p>d;if(u||(u=c=Hi()),h<l&&(f=h,h=l,l=f),h>oy)if(v>cy-oy)u.moveTo(h*ty(d),h*ry(d)),u.arc(0,0,h,d,p,!g),l>oy&&(u.moveTo(l*ty(p),l*ry(p)),u.arc(0,0,l,p,d,g));else{var y,_,b=d,m=p,x=d,w=p,M=v,N=v,A=a.apply(this,arguments)/2,S=A>oy&&(r?+r.apply(this,arguments):iy(l*l+h*h)),k=ey(Jg(h-l)/2,+e.apply(this,arguments)),T=k,E=k;if(S>oy){var C=fy(S/l*ry(A)),P=fy(S/h*ry(A));(M-=2*C)>oy?(x+=C*=g?1:-1,w-=C):(M=0,x=w=(d+p)/2),(N-=2*P)>oy?(b+=P*=g?1:-1,m-=P):(N=0,b=m=(d+p)/2)}var z=h*ty(b),R=h*ry(b),D=l*ty(w),q=l*ry(w);if(k>oy){var L,U=h*ty(m),O=h*ry(m),B=l*ty(x),Y=l*ry(x);if(v<ay&&(L=function(t,n,e,r,i,o,a,u){var c=e-t,f=r-n,s=a-i,l=u-o,h=l*c-s*f;if(!(h*h<oy))return[t+(h=(s*(n-o)-l*(t-i))/h)*c,n+h*f]}(z,R,B,Y,U,O,D,q))){var F=z-L[0],I=R-L[1],j=U-L[0],H=O-L[1],X=1/ry(((s=(F*j+I*H)/(iy(F*F+I*I)*iy(j*j+H*H)))>1?0:s<-1?ay:Math.acos(s))/2),G=iy(L[0]*L[0]+L[1]*L[1]);T=ey(k,(l-G)/(X-1)),E=ey(k,(h-G)/(X+1))}}N>oy?E>oy?(y=vy(B,Y,z,R,h,E,g),_=vy(U,O,D,q,h,E,g),u.moveTo(y.cx+y.x01,y.cy+y.y01),E<k?u.arc(y.cx,y.cy,E,Kg(y.y01,y.x01),Kg(_.y01,_.x01),!g):(u.arc(y.cx,y.cy,E,Kg(y.y01,y.x01),Kg(y.y11,y.x11),!g),u.arc(0,0,h,Kg(y.cy+y.y11,y.cx+y.x11),Kg(_.cy+_.y11,_.cx+_.x11),!g),u.arc(_.cx,_.cy,E,Kg(_.y11,_.x11),Kg(_.y01,_.x01),!g))):(u.moveTo(z,R),u.arc(0,0,h,b,m,!g)):u.moveTo(z,R),l>oy&&M>oy?T>oy?(y=vy(D,q,U,O,l,-T,g),_=vy(z,R,B,Y,l,-T,g),u.lineTo(y.cx+y.x01,y.cy+y.y01),T<k?u.arc(y.cx,y.cy,T,Kg(y.y01,y.x01),Kg(_.y01,_.x01),!g):(u.arc(y.cx,y.cy,T,Kg(y.y01,y.x01),Kg(y.y11,y.x11),!g),u.arc(0,0,l,Kg(y.cy+y.y11,y.cx+y.x11),Kg(_.cy+_.y11,_.cx+_.x11),g),u.arc(_.cx,_.cy,T,Kg(_.y11,_.x11),Kg(_.y01,_.x01),!g))):u.arc(0,0,l,w,x,g):u.lineTo(D,q)}else u.moveTo(0,0);if(u.closePath(),c)return u=null,c+""||null}return c.centroid=function(){var e=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+i.apply(this,arguments)+ +o.apply(this,arguments))/2-ay/2;return[ty(r)*e,ry(r)*e]},c.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),c):t},c.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:Qg(+t),c):n},c.cornerRadius=function(t){return arguments.length?(e="function"==typeof t?t:Qg(+t),c):e},c.padRadius=function(t){return arguments.length?(r=null==t?null:"function"==typeof t?t:Qg(+t),c):r},c.startAngle=function(t){return arguments.length?(i="function"==typeof t?t:Qg(+t),c):i},c.endAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qg(+t),c):o},c.padAngle=function(t){return arguments.length?(a="function"==typeof t?t:Qg(+t),c):a},c.context=function(t){return arguments.length?(u=null==t?null:t,c):u},c},t.area=xy,t.line=my,t.pie=function(){var t=My,n=wy,e=null,r=Qg(0),i=Qg(cy),o=Qg(0);function a(a){var u,c,f,s,l,h=a.length,d=0,p=new Array(h),v=new Array(h),g=+r.apply(this,arguments),y=Math.min(cy,Math.max(-cy,i.apply(this,arguments)-g)),_=Math.min(Math.abs(y)/h,o.apply(this,arguments)),b=_*(y<0?-1:1);for(u=0;u<h;++u)(l=v[p[u]=u]=+t(a[u],u,a))>0&&(d+=l);for(null!=n?p.sort(function(t,e){return n(v[t],v[e])}):null!=e&&p.sort(function(t,n){return e(a[t],a[n])}),u=0,f=d?(y-h*b)/d:0;u<h;++u,g=s)c=p[u],s=g+((l=v[c])>0?l*f:0)+b,v[c]={data:a[c],index:u,value:l,startAngle:g,endAngle:s,padAngle:_};return v}return a.value=function(n){return arguments.length?(t="function"==typeof n?n:Qg(+n),a):t},a.sortValues=function(t){return arguments.length?(n=t,e=null,a):n},a.sort=function(t){return arguments.length?(e=t,n=null,a):e},a.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:Qg(+t),a):r},a.endAngle=function(t){return arguments.length?(i="function"==typeof t?t:Qg(+t),a):i},a.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:Qg(+t),a):o},a},t.areaRadial=Ey,t.radialArea=Ey,t.lineRadial=Ty,t.radialLine=Ty,t.pointRadial=Cy,t.linkHorizontal=function(){return Dy(qy)},t.linkVertical=function(){return Dy(Ly)},t.linkRadial=function(){var t=Dy(Uy);return t.angle=t.x,delete t.x,t.radius=t.y,delete t.y,t},t.symbol=function(){var t=Qg(Oy),n=Qg(64),e=null;function r(){var r;if(e||(e=r=Hi()),t.apply(this,arguments).draw(e,+n.apply(this,arguments)),r)return e=null,r+""||null}return r.type=function(n){return arguments.length?(t="function"==typeof n?n:Qg(n),r):t},r.size=function(t){return arguments.length?(n="function"==typeof t?t:Qg(+t),r):n},r.context=function(t){return arguments.length?(e=null==t?null:t,r):e},r},t.symbols=t_,t.symbolCircle=Oy,t.symbolCross=By,t.symbolDiamond=Iy,t.symbolSquare=Vy,t.symbolStar=Gy,t.symbolTriangle=Wy,t.symbolWye=Ky,t.curveBasisClosed=function(t){return new i_(t)},t.curveBasisOpen=function(t){return new o_(t)},t.curveBasis=function(t){return new r_(t)},t.curveBundle=u_,t.curveCardinalClosed=h_,t.curveCardinalOpen=p_,t.curveCardinal=s_,t.curveCatmullRomClosed=b_,t.curveCatmullRomOpen=x_,t.curveCatmullRom=y_,t.curveLinearClosed=function(t){return new w_(t)},t.curveLinear=yy,t.curveMonotoneX=function(t){return new k_(t)},t.curveMonotoneY=function(t){return new T_(t)},t.curveNatural=function(t){return new C_(t)},t.curveStep=function(t){return new z_(t,.5)},t.curveStepAfter=function(t){return new z_(t,1)},t.curveStepBefore=function(t){return new z_(t,0)},t.stack=function(){var t=Qg([]),n=D_,e=R_,r=q_;function i(i){var o,a,u=t.apply(this,arguments),c=i.length,f=u.length,s=new Array(f);for(o=0;o<f;++o){for(var l,h=u[o],d=s[o]=new Array(c),p=0;p<c;++p)d[p]=l=[0,+r(i[p],h,p,i)],l.data=i[p];d.key=h}for(o=0,a=n(s);o<f;++o)s[a[o]].index=o;return e(s,a),s}return i.keys=function(n){return arguments.length?(t="function"==typeof n?n:Qg(Py.call(n)),i):t},i.value=function(t){return arguments.length?(r="function"==typeof t?t:Qg(+t),i):r},i.order=function(t){return arguments.length?(n=null==t?D_:"function"==typeof t?t:Qg(Py.call(t)),i):n},i.offset=function(t){return arguments.length?(e=null==t?R_:t,i):e},i},t.stackOffsetExpand=function(t,n){if((r=t.length)>0){for(var e,r,i,o=0,a=t[0].length;o<a;++o){for(i=e=0;e<r;++e)i+=t[e][o][1]||0;if(i)for(e=0;e<r;++e)t[e][o][1]/=i}R_(t,n)}},t.stackOffsetDiverging=function(t,n){if((u=t.length)>1)for(var e,r,i,o,a,u,c=0,f=t[n[0]].length;c<f;++c)for(o=a=0,e=0;e<u;++e)(i=(r=t[n[e]][c])[1]-r[0])>=0?(r[0]=o,r[1]=o+=i):i<0?(r[1]=a,r[0]=a+=i):r[0]=o},t.stackOffsetNone=R_,t.stackOffsetSilhouette=function(t,n){if((e=t.length)>0){for(var e,r=0,i=t[n[0]],o=i.length;r<o;++r){for(var a=0,u=0;a<e;++a)u+=t[a][r][1]||0;i[r][1]+=i[r][0]=-u/2}R_(t,n)}},t.stackOffsetWiggle=function(t,n){if((i=t.length)>0&&(r=(e=t[n[0]]).length)>0){for(var e,r,i,o=0,a=1;a<r;++a){for(var u=0,c=0,f=0;u<i;++u){for(var s=t[n[u]],l=s[a][1]||0,h=(l-(s[a-1][1]||0))/2,d=0;d<u;++d){var p=t[n[d]];h+=(p[a][1]||0)-(p[a-1][1]||0)}c+=l,f+=h*l}e[a-1][1]+=e[a-1][0]=o,c&&(o-=f/c)}e[a-1][1]+=e[a-1][0]=o,R_(t,n)}},t.stackOrderAppearance=L_,t.stackOrderAscending=O_,t.stackOrderDescending=function(t){return O_(t).reverse()},t.stackOrderInsideOut=function(t){var n,e,r=t.length,i=t.map(B_),o=L_(t),a=0,u=0,c=[],f=[];for(n=0;n<r;++n)e=o[n],a<u?(a+=i[e],c.push(e)):(u+=i[e],f.push(e));return f.reverse().concat(c)},t.stackOrderNone=D_,t.stackOrderReverse=function(t){return D_(t).reverse()},t.timeInterval=Gh,t.timeMillisecond=Vh,t.timeMilliseconds=$h,t.utcMillisecond=Vh,t.utcMilliseconds=$h,t.timeSecond=Qh,t.timeSeconds=Jh,t.utcSecond=Qh,t.utcSeconds=Jh,t.timeMinute=Kh,t.timeMinutes=td,t.timeHour=nd,t.timeHours=ed,t.timeDay=rd,t.timeDays=id,t.timeWeek=ad,t.timeWeeks=dd,t.timeSunday=ad,t.timeSundays=dd,t.timeMonday=ud,t.timeMondays=pd,t.timeTuesday=cd,t.timeTuesdays=vd,t.timeWednesday=fd,t.timeWednesdays=gd,t.timeThursday=sd,t.timeThursdays=yd,t.timeFriday=ld,t.timeFridays=_d,t.timeSaturday=hd,t.timeSaturdays=bd,t.timeMonth=md,t.timeMonths=xd,t.timeYear=wd,t.timeYears=Md,t.utcMinute=Nd,t.utcMinutes=Ad,t.utcHour=Sd,t.utcHours=kd,t.utcDay=Td,t.utcDays=Ed,t.utcWeek=Pd,t.utcWeeks=Od,t.utcSunday=Pd,t.utcSundays=Od,t.utcMonday=zd,t.utcMondays=Bd,t.utcTuesday=Rd,t.utcTuesdays=Yd,t.utcWednesday=Dd,t.utcWednesdays=Fd,t.utcThursday=qd,t.utcThursdays=Id,t.utcFriday=Ld,t.utcFridays=jd,t.utcSaturday=Ud,t.utcSaturdays=Hd,t.utcMonth=Xd,t.utcMonths=Gd,t.utcYear=Vd,t.utcYears=$d,t.timeFormatDefaultLocale=sv,t.timeFormatLocale=Jd,t.isoFormat=lv,t.isoParse=hv,t.now=nr,t.timer=ir,t.timerFlush=or,t.timeout=fr,t.interval=function(t,n,e){var r=new rr,i=n;return null==n?(r.restart(t,n,e),r):(n=+n,e=null==e?nr():+e,r.restart(function o(a){a+=i,r.restart(o,i+=n,e),t(a)},n,e),r)},t.transition=Cr,t.active=function(t,n){var e,r,i=t.__transition;if(i)for(r in n=null==n?null:n+"",i)if((e=i[r]).state>dr&&e.name===n)return new Er([[t]],fi,n,+r);return null},t.interrupt=Mr,t.voronoi=function(){var t=F_,n=I_,e=null;function r(r){return new wb(r.map(function(e,i){var o=[Math.round(t(e,i,r)/bb)*bb,Math.round(n(e,i,r)/bb)*bb];return o.index=i,o.data=e,o}),e)}return r.polygons=function(t){return r(t).polygons()},r.links=function(t){return r(t).links()},r.triangles=function(t){return r(t).triangles()},r.x=function(n){return arguments.length?(t="function"==typeof n?n:Y_(+n),r):t},r.y=function(t){return arguments.length?(n="function"==typeof t?t:Y_(+t),r):n},r.extent=function(t){return arguments.length?(e=null==t?null:[[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]],r):e&&[[e[0][0],e[0][1]],[e[1][0],e[1][1]]]},r.size=function(t){return arguments.length?(e=null==t?null:[[0,0],[+t[0],+t[1]]],r):e&&[e[1][0]-e[0][0],e[1][1]-e[0][1]]},r},t.zoom=function(){var n,e,r=Cb,i=Pb,o=qb,a=Rb,u=Db,c=[0,1/0],f=[[-1/0,-1/0],[1/0,1/0]],s=250,l=De,h=[],d=I("start","zoom","end"),p=500,v=150,g=0;function y(t){t.property("__zoom",zb).on("wheel.zoom",N).on("mousedown.zoom",A).on("dblclick.zoom",S).filter(u).on("touchstart.zoom",k).on("touchmove.zoom",T).on("touchend.zoom touchcancel.zoom",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function _(t,n){return(n=Math.max(c[0],Math.min(c[1],n)))===t.k?t:new Ab(n,t.x,t.y)}function b(t,n,e){var r=n[0]-e[0]*t.k,i=n[1]-e[1]*t.k;return r===t.x&&i===t.y?t:new Ab(t.k,r,i)}function m(t){return[(+t[0][0]+ +t[1][0])/2,(+t[0][1]+ +t[1][1])/2]}function x(t,n,e){t.on("start.zoom",function(){w(this,arguments).start()}).on("interrupt.zoom end.zoom",function(){w(this,arguments).end()}).tween("zoom",function(){var t=arguments,r=w(this,t),o=i.apply(this,t),a=e||m(o),u=Math.max(o[1][0]-o[0][0],o[1][1]-o[0][1]),c=this.__zoom,f="function"==typeof n?n.apply(this,t):n,s=l(c.invert(a).concat(u/c.k),f.invert(a).concat(u/f.k));return function(t){if(1===t)t=f;else{var n=s(t),e=u/n[2];t=new Ab(e,a[0]-n[0]*e,a[1]-n[1]*e)}r.zoom(null,t)}})}function w(t,n){for(var e,r=0,i=h.length;r<i;++r)if((e=h[r]).that===t)return e;return new M(t,n)}function M(t,n){this.that=t,this.args=n,this.index=-1,this.active=0,this.extent=i.apply(t,n)}function N(){if(r.apply(this,arguments)){var t=w(this,arguments),n=this.__zoom,e=Math.max(c[0],Math.min(c[1],n.k*Math.pow(2,a.apply(this,arguments)))),i=Ot(this);if(t.wheel)t.mouse[0][0]===i[0]&&t.mouse[0][1]===i[1]||(t.mouse[1]=n.invert(t.mouse[0]=i)),clearTimeout(t.wheel);else{if(n.k===e)return;t.mouse=[i,n.invert(i)],Mr(this),t.start()}Eb(),t.wheel=setTimeout(function(){t.wheel=null,t.end()},v),t.zoom("mouse",o(b(_(n,e),t.mouse[0],t.mouse[1]),t.extent,f))}}function A(){if(!e&&r.apply(this,arguments)){var n=w(this,arguments),i=zt(t.event.view).on("mousemove.zoom",function(){if(Eb(),!n.moved){var e=t.event.clientX-u,r=t.event.clientY-c;n.moved=e*e+r*r>g}n.zoom("mouse",o(b(n.that.__zoom,n.mouse[0]=Ot(n.that),n.mouse[1]),n.extent,f))},!0).on("mouseup.zoom",function(){i.on("mousemove.zoom mouseup.zoom",null),jt(t.event.view,n.moved),Eb(),n.end()},!0),a=Ot(this),u=t.event.clientX,c=t.event.clientY;It(t.event.view),Tb(),n.mouse=[a,this.__zoom.invert(a)],Mr(this),n.start()}}function S(){if(r.apply(this,arguments)){var n=this.__zoom,e=Ot(this),a=n.invert(e),u=n.k*(t.event.shiftKey?.5:2),c=o(b(_(n,u),e,a),i.apply(this,arguments),f);Eb(),s>0?zt(this).transition().duration(s).call(x,c,e):zt(this).call(y.transform,c)}}function k(){if(r.apply(this,arguments)){var e,i,o,a,u=w(this,arguments),c=t.event.changedTouches,f=c.length;for(Tb(),i=0;i<f;++i)a=[a=Bt(this,c,(o=c[i]).identifier),this.__zoom.invert(a),o.identifier],u.touch0?u.touch1||(u.touch1=a):(u.touch0=a,e=!0);if(n&&(n=clearTimeout(n),!u.touch1))return u.end(),void((a=zt(this).on("dblclick.zoom"))&&a.apply(this,arguments));e&&(n=setTimeout(function(){n=null},p),Mr(this),u.start())}}function T(){var e,r,i,a,u=w(this,arguments),c=t.event.changedTouches,s=c.length;for(Eb(),n&&(n=clearTimeout(n)),e=0;e<s;++e)i=Bt(this,c,(r=c[e]).identifier),u.touch0&&u.touch0[2]===r.identifier?u.touch0[0]=i:u.touch1&&u.touch1[2]===r.identifier&&(u.touch1[0]=i);if(r=u.that.__zoom,u.touch1){var l=u.touch0[0],h=u.touch0[1],d=u.touch1[0],p=u.touch1[1],v=(v=d[0]-l[0])*v+(v=d[1]-l[1])*v,g=(g=p[0]-h[0])*g+(g=p[1]-h[1])*g;r=_(r,Math.sqrt(v/g)),i=[(l[0]+d[0])/2,(l[1]+d[1])/2],a=[(h[0]+p[0])/2,(h[1]+p[1])/2]}else{if(!u.touch0)return;i=u.touch0[0],a=u.touch0[1]}u.zoom("touch",o(b(r,i,a),u.extent,f))}function E(){var n,r,i=w(this,arguments),o=t.event.changedTouches,a=o.length;for(Tb(),e&&clearTimeout(e),e=setTimeout(function(){e=null},p),n=0;n<a;++n)r=o[n],i.touch0&&i.touch0[2]===r.identifier?delete i.touch0:i.touch1&&i.touch1[2]===r.identifier&&delete i.touch1;i.touch1&&!i.touch0&&(i.touch0=i.touch1,delete i.touch1),i.touch0?i.touch0[1]=this.__zoom.invert(i.touch0[0]):i.end()}return y.transform=function(t,n){var e=t.selection?t.selection():t;e.property("__zoom",zb),t!==e?x(t,n):e.interrupt().each(function(){w(this,arguments).start().zoom(null,"function"==typeof n?n.apply(this,arguments):n).end()})},y.scaleBy=function(t,n){y.scaleTo(t,function(){return this.__zoom.k*("function"==typeof n?n.apply(this,arguments):n)})},y.scaleTo=function(t,n){y.transform(t,function(){var t=i.apply(this,arguments),e=this.__zoom,r=m(t),a=e.invert(r),u="function"==typeof n?n.apply(this,arguments):n;return o(b(_(e,u),r,a),t,f)})},y.translateBy=function(t,n,e){y.transform(t,function(){return o(this.__zoom.translate("function"==typeof n?n.apply(this,arguments):n,"function"==typeof e?e.apply(this,arguments):e),i.apply(this,arguments),f)})},y.translateTo=function(t,n,e){y.transform(t,function(){var t=i.apply(this,arguments),r=this.__zoom,a=m(t);return o(Sb.translate(a[0],a[1]).scale(r.k).translate("function"==typeof n?-n.apply(this,arguments):-n,"function"==typeof e?-e.apply(this,arguments):-e),t,f)})},M.prototype={start:function(){return 1==++this.active&&(this.index=h.push(this)-1,this.emit("start")),this},zoom:function(t,n){return this.mouse&&"mouse"!==t&&(this.mouse[1]=n.invert(this.mouse[0])),this.touch0&&"touch"!==t&&(this.touch0[1]=n.invert(this.touch0[0])),this.touch1&&"touch"!==t&&(this.touch1[1]=n.invert(this.touch1[0])),this.that.__zoom=n,this.emit("zoom"),this},end:function(){return 0==--this.active&&(h.splice(this.index,1),this.index=-1,this.emit("end")),this},emit:function(t){kt(new Nb(y,t,this.that.__zoom),d.apply,d,[t,this.that,this.args])}},y.wheelDelta=function(t){return arguments.length?(a="function"==typeof t?t:Mb(+t),y):a},y.filter=function(t){return arguments.length?(r="function"==typeof t?t:Mb(!!t),y):r},y.touchable=function(t){return arguments.length?(u="function"==typeof t?t:Mb(!!t),y):u},y.extent=function(t){return arguments.length?(i="function"==typeof t?t:Mb([[+t[0][0],+t[0][1]],[+t[1][0],+t[1][1]]]),y):i},y.scaleExtent=function(t){return arguments.length?(c[0]=+t[0],c[1]=+t[1],y):[c[0],c[1]]},y.translateExtent=function(t){return arguments.length?(f[0][0]=+t[0][0],f[1][0]=+t[1][0],f[0][1]=+t[0][1],f[1][1]=+t[1][1],y):[[f[0][0],f[0][1]],[f[1][0],f[1][1]]]},y.constrain=function(t){return arguments.length?(o=t,y):o},y.duration=function(t){return arguments.length?(s=+t,y):s},y.interpolate=function(t){return arguments.length?(l=t,y):l},y.on=function(){var t=d.on.apply(d,arguments);return t===d?y:t},y.clickDistance=function(t){return arguments.length?(g=(t=+t)*t,y):Math.sqrt(g)},y},t.zoomTransform=kb,t.zoomIdentity=Sb,Object.defineProperty(t,"__esModule",{value:!0})});


;dojo.cache("com.ibm.team.workitem.viewlets.web", "ui/internal/templates/StatisticsViewlet.html", "<div class=\"com-ibm-team-workitem-viewlets-web-ui-internal-StatisticsViewlet\">	<div class=\"content-area\" dojoAttachPoint=\"_contentArea\"></div>	<div class=\"message-area\" dojoAttachPoint=\"_messageArea\"></div></div>");

;dojo.provide("com.ibm.team.workitem.viewlets.web.ui.internal.StatisticsViewlet");














































dojo.requireLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
(function(){
var _1={};
var _2=com.ibm.team.dashboard.web.ui.Viewlet;
var _3=com.ibm.team.repository.web.transport.ServiceResponseHandler;
var _4=com.ibm.team.workitem.viewlets.web.ui.internal.QueryClient2;
var _5=com.ibm.team.workitem.viewlets.web.ui.internal.utils.WorkItemQueryPreferenceProvider;
var _6=com.ibm.team.workitem.viewlets.web.ui.internal.utils.UUIDUtility;
var _7=com.ibm.team.workitem.viewlets.web.ui.internal.utils.ParameterNameChooserDialog;
var _8=com.ibm.team.workitem.viewlets.web.ui.internal.utils.MetagroupsPreferenceProvider;
var _9=com.ibm.team.workitem.viewlets.web.ui.internal.utils.ColourPreferenceProvider;
var _a=jazz.util.ResizeNotifier;
var _b=com.ibm.team.workitem.web.client.util;
var _c=jazz.util.i18n;
var _d=com.ibm.team.workitem.web.client.internal.WorkItemAttributes;
var _e=com.ibm.team.workitem.web.client.internal.WorkItemClient;
var _f=jazz.ui.TagCloud;
var _10=com.ibm.team.process.web.client.internal.ProcessClient;
var _11=com.ibm.team.dashboard.web.ui.internal.util.Observable;
var _12=com.ibm.team.workitem.viewlets.web.ui.internal.utils.ErrorUtility;
var _13="undefined";
var _14="#990000";
dojo.declare("com.ibm.team.workitem.viewlets.web.ui.internal.StatisticsViewlet",_2,{templatePath:dojo.moduleUrl("com.ibm.team.workitem.viewlets.web","ui/internal/templates/StatisticsViewlet.html"),_static:function(){
},constructor:function(_15){
this.messages=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","StatisticsMessages");
this.workItemsMessages=dojo.i18n.getLocalization("com.ibm.team.workitem.viewlets.web.ui.internal","WorkItemsMessages");
},init:function(){
this._onExpandContextFunction=dojo.hitch(this._site.context,this._site.context.onExpand);
this._site.context.onExpand=this._onExpand();
this._initializeStaticConstants();
if(jazz.app.context.get().itemId){
this._local=true;
}else{
this._local=false;
}
this._queryPreferenceProvider=new _5({prefId:this._static._PREFERENCE_ID_QUERY,queryCategoryPrefId:this._static._PREFERENCE_ID_CATEGORY,queryParametersPrefId:this._static._PREFERENCE_ID_PARAMETERS,suppressCrossRepoQueries:false});
this._metagroupsPreferenceProvider=null;
this._colorPreferenceProvider=null;
this._cachedChartParameters=null;
this._currentQueryItemID=null;
this._lastClientWidth=this._static._DEFAULT_CLIENT_WIDTH;
this._lastClientHeight=this._static._DEFAULT_CLIENT_HEIGHT;
this._excessParameterStartIndex=-1;
this._windowResizeHandler=null;
this._tableLabelElements=null;
this._countHeaderRowNode=null;
this._warningImageHover=null;
this._internalValueRegistry={};
this._iconURLRegistry={};
this._iconURLRegistryMetaGroup={};
this._reportNode=null;
this._tagCloud=null;
this._attributesDTO={};
this._timeoutDTOCount=0;
this._patternGroups=null;
this._patternResults=null;
this._projectAreaName=null;
this._skipOAuth=true;
this._loginTracker=null;
this._loginCallback=null;
this._workItemQueryResultsHandler=null;
this._tooltipDiv=null;
this._isToolTipShowing=false;
},_initializeStaticConstants:function(){
if(this._static._instanceCount){
this._static._instanceCount++;
return;
}
this._static._instanceCount=1;
this._static._CLASSNAME="com.ibm.team.workitem.viewlets.web.ui.internal.StatisticsViewlet";
this._static._PREFERENCE_ID_QUERY="query";
this._static._PREFERENCE_ID_PRESENTATION="presentation";
this._static._PREFERENCE_ID_PARAMETER="parameter";
this._static._PREFERENCE_ID_CATEGORY="queryCategory";
this._static._PREFERENCE_ID_PARAMETERS="queryParams";
this._static._PREFERENCE_ID_METAGROUPS="metagroups";
this._static._PREFERENCE_ID_OTHERGROUP="othergroup";
this._static._PREFERENCE_ID_COLOURS="colours";
this._static._PREFERENCE_VALUE_PIE="pie";
this._static._PREFERENCE_VALUE_COLUMN="bar";
this._static._PREFERENCE_VALUE_BAR="h-bar";
this._static._PREFERENCE_VALUE_TABLE="table";
this._static._PREFERENCE_VALUE_LIST="list";
this._static._PREFERENCE_VALUE_UNDEFINED="-1";
this._static._ICONS_URI=dojo.moduleUrl("com.ibm.team.workitem.viewlets.web","graphics/statistics/icons/");
this._static._PARAMETER_UNDEFINED=this.messages.msgUndefined;
this._static._PARAMETER_OTHER=this.messages.msgOther;
this._static._PARAMETER_ID_METAGROUP="mg";
this._static._COLOUR_RGB_PRIORITY=["R240G240B240","R196G220B245","R250G234B187","R255G191B191"];
this._static._COLOUR_REGEX_PRIORITY=["unassign","low","medium","high"];
this._static._COLOUR_RGB_SEVERITY=["R240G240B240","R255G255B222","R229G218B184","R255G204B204","R223G127B127","R179G107B107"];
this._static._COLOUR_REGEX_SEVERITY=["unassign","minor","normal","major","critical","blocker"];
this._static._COLOUR_RGB_TYPE=["R206G206B242","R229G247B210","R189G245B188","R204G163B163","R255G191B191","R217G195B173","R207G250B250","R229G229B161","R211G211B222","R255G204B153"];
this._static._COLOUR_REGEX_TYPE=["bug","enhanc","task","rfs","retrospect","planitem","build","story","imped","adoption"];
this._static._COLOUR_RGB_UNDEFINED="R216G227B230";
this._static._IMAGE_DEFAULT="icon-default.gif";
this._static._IMAGE_CATEGORY="icon-category.gif";
this._static._IMAGE_TAGS="icon-tags.gif";
this._static._IMAGE_OTHER="icon-other.gif";
this._static._IMAGE_METAGROUP="icon-metagroup.gif";
this._static._IMAGE_WARN="icon_warning.gif";
this._static._DEFAULT_CLIENT_WIDTH=325;
this._static._DEFAULT_CLIENT_HEIGHT=162;
this._static._LEGEND_ITEM_HEIGHT=21;
this._static._CHART_SCALE_RATIO=0.95;
this._static._CHART_MINIMUM_WIDTH=120;
this._static._CHART_MAXIMUM_WIDTH=2800;
this._static._CHART_MINIMUM_HEIGHT=100;
this._static._CHART_MAXIMUM_HEIGHT=2800;
this._static._CHART_HEIGHT_SCALE_RATIO_PIE_CHART=2;
this._static._CHART_HEIGHT_SCALE_RATIO_COLUMN_CHART=1.5;
this._static._CHART_HEIGHT_SCALE_RATIO_BAR_CHART=1.5;
this._static._CHART_BAR_HEIGHT_FACTOR=26;
this._static._CHART_BAR_HEIGHT_BASE=25;
this._static._MAX_TABLE_DISPLAY_ITEMS=11;
this._static._MAX_TABLE_DISPLAY_ITEMS_ZOOMED=201;
this._static._PALETTE_TYPE_FIXED=1;
this._static._PALETTE_TYPE_RANDOM=2;
this._static._RGB_COLOUR_GREY="R229G229B229";
this._static._DTO_IN_PROGRESS="progress";
this._static._DTO_FAILURE="error";
this._static._DTO_TIMEOUT_LIMIT=40;
this._static._CALM_QUERY_LOGIN="login";
this._static._D3_MIN_TICKS=10;
this._static._D3_GRAD=Math.PI/180;
this._static._D3_OPACITY_HIGHLIGHTED=0.5;
this._static._D3_OPACITY_NOT_HIGHLIGHTED=1;
this._static._D3_TRANSITION_DELAY_INITIAL=600;
this._static._D3_TRANSITION_DELAY_RESIZE=0;
this._static._D3_TRANSITION_DELAY_HOVER=300;
this._static._COLOUR_BLUE="#C3CCE0";
this._static._COLOUR_YELLOW="#EADB99";
this._static._COLOUR_GREEN="#AECBAD";
this._static._COLOUR_PURPLE="#C399CE";
this._static._COLOUR_ORANGE="#E4C396";
this._static._COLOUR_GREY="#D0D0D0";
this._static._COLOUR_LIGHT_BLUE="#D8E3E6";
this._static._COLOUR_LIGHT_YELLOW="#F8F8E3";
this._static._COLOUR_LIGHT_GREEN="#E3EED8";
this._static._COLOUR_LIGHT_PURPLE="#D4BECE";
this._static._COLOUR_LIGHT_ORANGE="#E3CFB1";
this._static._COLOUR_LIGHT_GREY="#F6F6F6";
this._static._COLOUR_DARK_BLUE="#BBBFD8";
this._static._COLOUR_DARK_YELLOW="#D0CC9F";
this._static._COLOUR_DARK_GREEN="#B7D3A2";
this._static._COLOUR_DARK_PURPLE="#BA8FB6";
this._static._COLOUR_DARK_ORANGE="#D2B18E";
this._static._COLOUR_DARK_GREY="#BEBBBA";
this._static._RANDOM_COLOURS=[this._static._COLOUR_BLUE,this._static._COLOUR_YELLOW,this._static._COLOUR_GREEN,this._static._COLOUR_PURPLE,this._static._COLOUR_ORANGE,this._static._COLOUR_GREY,this._static._COLOUR_LIGHT_BLUE,this._static._COLOUR_LIGHT_YELLOW,this._static._COLOUR_LIGHT_GREEN,this._static._COLOUR_LIGHT_PURPLE,this._static._COLOUR_LIGHT_ORANGE,this._static._COLOUR_LIGHT_GREY,this._static._COLOUR_DARK_BLUE,this._static._COLOUR_DARK_YELLOW,this._static._COLOUR_DARK_GREEN,this._static._COLOUR_DARK_PURPLE,this._static._COLOUR_DARK_ORANGE,this._static._COLOUR_DARK_GREY];
},_setExcessParameterStartIndex:function(_16){
this._excessParameterStartIndex=_16;
},_getExcessParameterStartIndex:function(){
return this._excessParameterStartIndex;
},_getTableLabelElements:function(){
return this._tableLabelElements;
},_resetTableLabelElements:function(){
this._tableLabelElements=new Array();
},_addTableLabelElement:function(_17){
this._tableLabelElements.push(_17);
},_getPreferredChartDimensions:function(_18){
var _19=new Object();
var _1a=this._getClientWidth();
var _1b=this._getPreferredWidth(_1a);
var _1c=this.getPreference(this._static._PREFERENCE_ID_PRESENTATION);
var _1d=this._getCachedChartParameters();
var _1e;
var _1f=Math.round(_1b/_18);
if(_1d&&(_1c===this._static._PREFERENCE_VALUE_BAR)){
_1e=(_1d.parameterNames.length*this._static._CHART_BAR_HEIGHT_FACTOR)+this._static._CHART_BAR_HEIGHT_BASE;
var _20=this.getPreference(this._static._PREFERENCE_ID_OTHERGROUP);
if((this.isZoomed()===false)&&(!_20)&&(_1e>_1f)){
_1e=_1f;
}
}else{
_1e=_1f;
}
var _21=this._getPreferredHeight(_1e);
_19.width=_1b;
_19.height=_21;
return _19;
},_getPreferredWidth:function(_22){
var _23=_22;
if(_22<this._static._CHART_MINIMUM_WIDTH){
_23=this._static._CHART_MINIMUM_WIDTH;
}else{
if(_22>this._static._CHART_MAXIMUM_WIDTH){
_23=this._static._CHART_MAXIMUM_WIDTH;
}
}
return _23;
},_getPreferredHeight:function(_24){
var _25=_24;
if(_24<this._static._CHART_MINIMUM_HEIGHT){
_25=this._static._CHART_MINIMUM_HEIGHT;
}else{
if(_24>this._static._CHART_MAXIMUM_HEIGHT){
_25=this._static._CHART_MAXIMUM_HEIGHT;
}
}
return _25;
},_getMaxLegendItems:function(_26){
var _27=Math.round(_26/this._static._LEGEND_ITEM_HEIGHT);
return _27;
},_getReportDomID:function(){
return "report:"+this.id;
},_getMaxTableLabelWidth:function(){
var _28=this._getClientWidth();
var _29=0.7;
var _2a=Math.round(_28*_29);
var _2b=20;
var _2c=16;
var _2d=_2a-_2b-_2c;
return _2d;
},_updateTableLabelElementWidths:function(){
var _2e=this._getTableLabelElements();
if(_2e==null){
return;
}
var _2f=this._getMaxTableLabelWidth();
for(var i=0;i<_2e.length;i++){
var _30=_2e[i];
_30.style.width=_2f+"px";
}
},_disconnectWindowResizeHandler:function(){
if(this._windowResizeHandler){
_a.unregister(this._windowResizeHandler);
this._windowResizeHandler=null;
}
},_registerWindowsResizeHandlerForTableView:function(){
this._resetTableLabelElements();
this._disconnectWindowResizeHandler();
this._windowResizeHandler=_a.register({context:this,callback:this._updateTableLabelElementWidths});
},_createTable:function(_31){
this._registerWindowsResizeHandlerForTableView();
var _32=this._regroupDataToFitViewletArea(_31,this._getMaxTableItems());
var _33=this._contentArea;
var _34=document.createElement("table");
_34.setAttribute("id",this._getReportDomID());
_34.cellspacing=1;
var _35=document.createElement("tbody");
for(var i=0;i<_32.parameterCount;i++){
var _36=_32.parameterNames[i];
var _37=_32.parameterValues[i];
this._createTableRow(_35,_36,_37,_32.parameterID);
}
this._removeLastTableRowBorder(_35);
var _38=this._createTableHeader(_32);
_34.appendChild(_38);
_34.appendChild(_35);
this._addReportNode(_33,_34);
this._updateTableLabelElementWidths();
},_removeLastTableRowBorder:function(_39){
var _3a=_39.lastChild;
if(this._isObjectDefined(_3a.firstChild,false,null)){
dojo.removeClass(_3a.firstChild,"bottom-line");
}
if(this._isObjectDefined(_3a.lastChild,false,null)){
dojo.removeClass(_3a.lastChild,"bottom-line");
}
},_createTableHeader:function(_3b){
var _3c=document.createElement("thead");
var _3d=document.createElement("tr");
var _3e=document.createElement("th");
dojo.addClass(_3e,"header-topline");
var _3f=document.createElement("div");
dojo.addClass(_3f,"topline");
_3e.appendChild(_3f);
var _40=document.createElement("th");
dojo.addClass(_40,"header-topline");
var _41=document.createElement("div");
dojo.addClass(_41,"topline");
_40.appendChild(_41);
_3d.appendChild(_3e);
_3d.appendChild(_40);
var _42=document.createElement("tr");
var _43=document.createElement("th");
dojo.addClass(_43,"parameter-header");
this._countHeaderRowNode=document.createElement("th");
dojo.addClass(this._countHeaderRowNode,"count-header");
var _44=document.createTextNode(_3b.displayName);
var _45=document.createTextNode(this.messages.msgCount);
_43.appendChild(_44);
this._countHeaderRowNode.appendChild(_45);
_42.appendChild(_43);
_42.appendChild(this._countHeaderRowNode);
var _46=dojo.create("tr");
var _47=dojo.create("th",{"class":"header-topline"},_46);
dojo.create("div",{"class":"bottomline"},_47);
var _48=dojo.create("th",{"class":"header-topline"},_46);
dojo.create("div",{"class":"bottomline"},_48);
_3c.appendChild(_3d);
_3c.appendChild(_42);
_3c.appendChild(_46);
return _3c;
},_getPresentationPreference:function(){
var _49=this.getPreference(this._static._PREFERENCE_ID_PRESENTATION);
return _49;
},_createTableRow:function(_4a,_4b,_4c,_4d){
var tr=document.createElement("tr");
var td1=document.createElement("td");
dojo.addClass(td1,"label-entry");
dojo.addClass(td1,"bottom-line");
var td2=document.createElement("td");
dojo.addClass(td2,"count-entry");
dojo.addClass(td2,"bottom-line");
var img=document.createElement("img");
var _4e=this._getIconURL(_4d,_4b,true);
img.src=_4e;
img.width="16";
img.height="16";
img.alt=this.messages.msgIcon;
var _4f=this._createTableClickThroughLink(_4b,_4c);
var _50=document.createElement("span");
dojo.addClass(_50,"label");
this._addTableLabelElement(_50);
_50.appendChild(_4f);
var _51=document.createTextNode(_4c);
var _52=document.createElement("span");
_52.appendChild(_51);
td1.appendChild(img);
td1.appendChild(_50);
td2.appendChild(_52);
tr.appendChild(td1);
tr.appendChild(td2);
_4a.appendChild(tr);
},_createTableClickThroughLink:function(_53,_54){
var _55=document.createTextNode(_53);
var _56=document.createElement("a");
_56.setAttribute("title",_54);
_56.href="javascript:void(0);";
_56.appendChild(_55);
var _57=this;
this.connect(_56,"onclick",function(){
var _58=_53;
var _59=_57._getQueryItemID();
var _5a=_57._getCachedChartParameters();
if(_5a==null){
_57._alertOperationalError(_57.messages.msgDrillChartParamsUndef,_57.messages.msgDrillChartParamsUndef_explanation,_57.messages.msgDrillChartParamsUndef_useraction);
return;
}
var _5b=_5a.parameterID;
_57._getWorkItemQueryFilteredResults(_58,_59,_5b);
});
return _56;
},_createTagCloud:function(_5c){
if(this._tagCloud){
this._tagCloud.destroy();
}
var _5d=[];
for(var _5e=0;_5e<_5c.parameterNames.length;_5e++){
_5d[_5e]={name:_5c.parameterNames[_5e],value:_5c.parameterValues[_5e]};
}
this._tagCloud=new _f({tags:_5d,onTagClick:dojo.hitch(this,this._handleEventTagClick)});
var _5f=document.createElement("div");
_5f.id=this._getReportDomID();
_5f.appendChild(this._tagCloud.domNode);
this._addReportNode(this._contentArea,_5f);
},_handleEventTagClick:function(_60,_61){
var _62=this._getCachedChartParameters();
if(!_62){
this._alertOperationalError(this.messages.msgDrillChartParamsUndef,this.messages.msgDrillChartParamsUndef_explanation,this.messages.msgDrillChartParamsUndef_useraction);
return;
}
this._getWorkItemQueryFilteredResults(_61,this._getQueryItemID(),_62.parameterID);
},_addReportNode:function(_63,_64){
var _65=this._reportNode;
if(!_65){
this._removeAllChildren(_63);
if(_64){
_63.appendChild(_64);
}
}else{
if(_64){
_63.replaceChild(_64,_65);
}else{
this._removeAllChildren(_63);
}
}
this._reportNode=_64;
this._displayLoadingMessage(null);
},_getCurrentWidth:function(){
if(this._isObjectDefined(this.domNode,false,"domNode")==false){
return 0;
}else{
if(this._hasProperty(this.domNode,"clientWidth",false,"domNode")==false){
return 0;
}
}
return this.domNode.clientWidth;
},_getCurrentHeight:function(){
if(this._isObjectDefined(this.domNode,false,"domNode")==false){
return 0;
}else{
if(this._hasProperty(this.domNode,"clientHeight",false,"domNode")==false){
return 0;
}
}
return this.domNode.clientHeight;
},_getClientWidth:function(){
var _66=Math.round(this.getSite().getWidth()*this._static._CHART_SCALE_RATIO);
if(_66<=0){
_66=Math.round(this._getCurrentWidth()*this._static._CHART_SCALE_RATIO);
}
if(_66<=0){
_66=this._lastClientWidth;
}else{
this._lastClientWidth=_66;
}
return _66;
},_getClientHeight:function(){
var _67=Math.round(this.getSite().getHeight()*this._static._CHART_SCALE_RATIO);
if(_67<=0){
_67=Math.round(this._getCurrentHeight()*this._static._CHART_SCALE_RATIO);
}
if(_67<=0){
_67=this._lastClientHeight;
}else{
this._lastClientHeight=_67;
}
return _67;
},_getIconURL:function(_68,_69,_6a){
if(_6a&&_69 in this._iconURLRegistryMetaGroup){
return this._iconURLRegistryMetaGroup[_69];
}else{
if(_69 in this._iconURLRegistry){
return this._iconURLRegistry[_69];
}else{
if(_69===this._static._PARAMETER_OTHER){
return this._static._ICONS_URI+this._static._IMAGE_OTHER;
}else{
if(_68===_d.EXT_CATEGORY){
return this._static._ICONS_URI+this._static._IMAGE_CATEGORY;
}else{
if(_68===_d.EXT_TAGS){
return this._static._ICONS_URI+this._static._IMAGE_TAGS;
}
}
}
}
}
return this._static._ICONS_URI+this._static._IMAGE_DEFAULT;
},_showMessageArea:function(){
this._updateVisibility(this._contentArea,false);
this._updateVisibility(this._messageArea,true);
},_showContentArea:function(){
this._updateVisibility(this._messageArea,false);
this._updateVisibility(this._contentArea,true);
},_getChartID:function(){
return "chart:"+this.id;
},_createChart:function(_6b,_6c,_6d){
var _6e=this._getPreferredChartDimensions(this._getChartHeightScaleRatio());
var _6f=this._getMaxLegendItems(_6e.height);
var _70=this._regroupDataToFitViewletArea(_6b,_6f);
var _71=this._generateDataArray(_70);
var _72=this._reportNode;
var _73=document.createElement("div");
this._addReportNode(this._contentArea,_73);
if(this._contentArea.parentElement===this._contentArea.offsetParent){
var _74=d3.select(_73).append("svg").attr("viewBox","0 0 "+_6e.width+" "+_6e.height).attr("preserveAspectRatio","xMidYMid meet");
if(_6c===this._static._PREFERENCE_VALUE_COLUMN){
this._createD3ColumnChart(_6e,_74,_71,_6d);
}else{
if(_6c===this._static._PREFERENCE_VALUE_PIE){
this._createD3PieChart(_6e,_74,_71,_6d);
}else{
this._createD3BarChart(_6e,_74,_71,_6d);
}
}
if(dojo.isIE){
var _6e=this._getPreferredChartDimensions(this._getChartHeightScaleRatio());
this._reportNode.style.width=_6e.width+"px";
this._reportNode.style.height=_6e.height+"px";
}
}else{
this._addReportNode(this._contentArea,_72);
}
this._registerWindowResizeHandlerForChartView();
},_onExpand:function(){
var _75=this;
return function(){
_75._onExpandContextFunction();
setTimeout(dojo.hitch(_75,function(){
if(!this.isDestroyed()){
_75._updatePresentation();
}
}),0);
};
},_createD3ColumnChart:function(_76,_77,_78,_79){
var _7a=this;
var _7b=15;
var _7c=5;
var _7d=20;
var _7e=_76.height-2*_7b;
var _7f=this._createLegend(_77,_78,_76,10);
var _80=d3.max(_78,function(d){
return d.value;
});
var _81=d3.scaleLinear().range([_7e,0]).domain([0,_80]);
var _82=d3.axisLeft(_81);
if(_80<this._static._D3_MIN_TICKS){
_82.ticks(_80);
}
var _83=_77.append("g");
var _84=_83.append("g").attr("class","axis").call(_82);
var _85=-_84._groups[0][0].getBBox().x;
var _86=_76.width-_85-_7c-_7d-_7f.width;
_83.attr("transform","translate("+(_7c+_85)+","+_7b+")");
var _87=d3.axisLeft().scale(_81).tickSize(-_86,0,0).tickFormat("");
if(_80<this._static._D3_MIN_TICKS){
_87.ticks(_80);
}
_83.append("g").attr("class","grid").call(_87);
var _88=d3.scaleBand().range([0,_86]).domain(_78.map(function(d){
return d.label;
})).padding(0.5);
_83.append("g").attr("class","axis").attr("transform","translate(0,"+_7e+")").call(d3.axisBottom(_88).tickValues([]).tickSize(0));
_83.selectAll().data(_78).enter().append("rect").attr("class","bar").attr("width",_88.bandwidth()).attr("height",0).attr("opacity",_7a._static._D3_OPACITY_NOT_HIGHLIGHTED).attr("x",function(d){
return _88(d.label);
}).attr("y",function(d){
return _7e;
}).style("fill",function(d){
d.on=function(){
d3.select(this).transition().duration(_7a._static._D3_TRANSITION_DELAY_HOVER).attr("opacity",_7a._static._D3_OPACITY_HIGHLIGHTED).attr("width",_88.bandwidth()+1);
}.bind(this);
d.off=function(){
d3.select(this).transition().duration(_7a._static._D3_TRANSITION_DELAY_HOVER).attr("opacity",_7a._static._D3_OPACITY_NOT_HIGHLIGHTED).attr("width",_88.bandwidth());
}.bind(this);
return d.color;
}).style("stroke",function(d){
return d.color.darker();
}).style("stroke-width",1).on("click",function(d,i){
_7a._dispatchChartEventOnClick(d);
}).on("mouseover",function(d){
_7a._showTooltip(d,d3.event);
if(d.on){
d.on();
}
}).on("mousemove",function(d){
_7a._showTooltip(d,d3.event);
}).on("mouseout",function(d){
_7a._hideTooltip();
if(d.off){
d.off();
}
}).transition().duration(_79).attr("height",function(d){
return _7e-_81(d.value);
}).attr("y",function(d){
return _81(d.value);
});
},_getMaxLabelLength:function(_89,_8a,_8b){
var _8c=-1;
var _8d=0;
var _8e;
_8b.forEach(function(d){
if(_8d<d.label.length){
_8e=d.label;
_8d=_8e.length;
}
});
var _8f=_8e;
var _90=false;
while(!_90){
var _91=d3.scaleBand().range([0,1]).domain([_8f]);
var _92=_8a.call(d3.axisLeft().scale(_91));
var _93=-_92._groups[0][0].getBBox().x;
if(_93<_89){
_90=true;
}else{
_8d-=3;
_8c=_8d;
_8f=_8f.substring(0,_8d);
}
}
return _8c;
},_createD3BarChart:function(_94,_95,_96,_97){
var _98=5;
var _99=20;
var _9a=7;
var _9b=20;
var _9c=this;
var _9d=_95.append("g");
var _9e=_94.height-_98-_99;
var _9f=_9d.append("g").attr("class","axis");
var _a0=(_94.width-_9a-_9b)/4;
var _a1=d3.scaleBand().range([0,_9e]).domain(_96.map(function(d){
return d.label;
})).padding(0.3);
var _a2=_9f.call(d3.axisLeft().scale(_a1).tickSize(0));
var _a3=function(){
var _a4=d3.select(this);
var _a5=_a4.node().getComputedTextLength();
var _a6=_a4.text();
while((_a5>_a0)&&_a6.length>0){
_a6=_a6.slice(0,-1);
_a4.text(_a6+"...");
_a5=_a4.node().getComputedTextLength();
}
};
_a2.selectAll("text").each(_a3);
var _a7=-_a2._groups[0][0].getBBox().x;
var _a8=_94.width-_a7-_9a-_9b;
_9d.attr("transform","translate("+(_9a+_a7)+","+_98+")");
var _a9=d3.max(_96,function(d){
return d.value;
});
var _aa=d3.scaleLinear().rangeRound([0,_a8]).domain([0,_a9]);
var _ab=d3.axisBottom(_aa);
if(_a9<this._static._D3_MIN_TICKS){
_ab.ticks(_a9);
}
_9d.append("g").attr("class","axis").attr("transform","translate("+0+","+_9e+")").call(_ab);
var _ac=d3.axisBottom().scale(_aa).tickSize(_9e,0,0).tickFormat("");
if(_a9<this._static._D3_MIN_TICKS){
_ac.ticks(_a9);
}
_9d.append("g").attr("class","grid").call(_ac);
_9d.selectAll().data(_96).enter().append("rect").attr("class","bar").attr("opacity",_9c._static._D3_OPACITY_NOT_HIGHLIGHTED).attr("height",_a1.bandwidth()).attr("x",function(d){
return 1;
}).attr("y",function(d){
return _a1(d.label);
}).style("fill",function(d){
d.on=function(){
d3.select(this).transition().duration(_9c._static._D3_TRANSITION_DELAY_HOVER).attr("opacity",_9c._static._D3_OPACITY_HIGHLIGHTED).attr("height",_a1.bandwidth()+1);
}.bind(this);
d.off=function(){
d3.select(this).transition().duration(_9c._static._D3_TRANSITION_DELAY_HOVER).attr("opacity",_9c._static._D3_OPACITY_NOT_HIGHLIGHTED).attr("height",_a1.bandwidth());
}.bind(this);
return d.color;
}).style("stroke",function(d){
return d.color.darker();
}).style("stroke-width",1).on("click",function(d,i){
_9c._dispatchChartEventOnClick(d);
}).on("mouseover",function(d){
_9c._showTooltip(d,d3.event);
if(d.on){
d.on();
}
}).on("mousemove",function(d){
_9c._showTooltip(d,d3.event);
}).on("mouseout",function(d){
_9c._hideTooltip();
if(d.off){
d.off();
}
}).transition().duration(_97).attr("width",function(d){
return _aa(d.value)-_aa(0);
});
},_createD3PieChart:function(_ad,_ae,_af,_b0){
var _b1=this;
var _b2=10;
var _b3=(Math.min(_ad.width,_ad.height)/2)*0.85;
var _b4=this._createLegend(_ae,_af,_ad,_b2);
var _b5=_ad.width-_b4.width-_b2;
var _b6=_ae.append("g").attr("transform","translate("+(_b5/2)+","+(_ad.height/2)+")");
var _b7=d3.arc().outerRadius(1).innerRadius(0);
var arc=d3.arc().outerRadius(_b3).innerRadius(0);
var _b8=d3.arc().outerRadius(_b3+9).innerRadius(0);
var pie=d3.pie().sort(null).startAngle(90*this._static._D3_GRAD).endAngle(-270*this._static._D3_GRAD).value(function(d){
return d.value;
});
_b6.selectAll(".arc").data(pie(_af)).enter().append("g").attr("class","arc").append("path").attr("d",_b7).style("fill",function(d){
d.data.on=function(){
d3.select(this).transition().duration(_b1._static._D3_TRANSITION_DELAY_HOVER).attr("d",_b8);
}.bind(this);
d.data.off=function(){
d3.select(this).transition().duration(_b1._static._D3_TRANSITION_DELAY_HOVER).attr("d",arc);
}.bind(this);
return d.data.color;
}).style("stroke",function(d){
return d.data.color.darker();
}).style("stroke-width",1).on("click",function(d,i){
_b1._dispatchChartEventOnClick(d.data);
}.bind(this)).on("mouseover",function(d){
_b1._showTooltip(d.data,d3.event);
d.data.on();
}).on("mousemove",function(d){
_b1._showTooltip(d.data,d3.event);
}).on("mouseout",function(d){
_b1._hideTooltip();
d.data.off();
}).transition().duration(_b0).attr("d",arc);
},_createLegend:function(svg,_b9,_ba,_bb){
var _bc=10;
var _bd=5;
var _be=10;
var _bf=_be;
var _c0=svg.append("g").attr("class","legend").attr("transform","translate(10,"+_ba.width+")");
var _c1=_c0.append("rect").attr("class","legend-background");
var _c2=Math.floor((_ba.height-2*_bb)/(_bc+_bd));
_c2=Math.min(_c2,_b9.length);
var _c3=(_c2<_b9.length)?_b9.slice(0,_c2):_b9;
var _c4=this;
var _c5=_c0.selectAll(".legend-entry").data(_c3).enter().append("g").attr("class","legend-entry").on("click",function(d,i){
_c4._dispatchChartEventOnClick(d);
});
_c5.each(function(d,i){
var _c6=d3.select(this);
_c6.append("rect").attr("class","legend-swatch").attr("x",function(d){
return _be;
}).attr("y",function(d){
return _bf;
}).attr("height",function(d){
return _bc;
}).attr("width",function(d){
return _bc;
}).style("fill",function(d){
return d.color;
}).style("stroke",function(d){
return d.color.darker();
}).style("stroke-width",1);
var _c7=_c6.append("text").attr("class","legend-text").attr("x",function(d){
return _be+_bc+_bd;
}).attr("y",function(d){
return _bf;
}).attr("dy",".85em").text(d.label);
var _c8=(_ba.width-2*_bb)/4;
while(_c7.node().getComputedTextLength()>_c8){
var _c9=_c7.text();
_c9=_c9.substring(0,_c9.length-6);
_c7.text(_c9+"...");
}
_c6.on("mouseover",function(d){
if(d.on){
d.on();
}
_c4._showTooltip(d,d3.event);
}).on("mousemove",function(d){
_c4._showTooltip(d,d3.event);
}).on("mouseout",function(d){
_c4._hideTooltip();
if(d.off){
d.off();
}
_c4._hideTooltip.bind(_c4);
});
_bf=_bf+_bc+_bd;
});
var _ca=_c0._groups[0][0].getBBox();
var _cb=_ba.width-_ca.width-_bb-2*_be;
var _bf=(_ba.height-_ca.height)/2-_bb;
_c0.attr("transform","translate("+_cb+", "+_bf+")");
_c1.attr("height",function(d){
return _ca.height+2*_be;
}).attr("width",function(d){
return _ca.width+2*_be;
});
return _c0._groups[0][0].getBBox();
},createXAxisGridLine:function(_cc){
return d3.svg.axis().scale(_cc).orient("bottom");
},_dispatchChartEventOnClick:function(d){
this._hideTooltip();
this._getWorkItemQueryFilteredResults(d.label,this._getQueryItemID(),this._getCachedChartParameters().parameterID);
},_showTooltip:function(d,_cd){
if(!this._tooltipDiv){
this._tooltipDiv=d3.select("body").append("div").attr("class","StatisticsViewletTooltip");
}
var _ce="<div>"+"<span class=\"name\">"+jazz.util.html.escape(d.label)+"</span>"+" : "+"<span class=\"value\">"+d.value+"</span>"+"</div>";
this._tooltipDiv.html(_ce);
if(!this._isToolTipShowing){
this._tooltipDiv.style("display","block").transition().duration(this._static._D3_TRANSITION_DELAY_HOVER).style("opacity",1).style("position","absolute");
this._isToolTipShowing=true;
}
var _cf=_cd.pageY+25;
var _d0=_cd.pageX;
var _d1=this._tooltipDiv._groups[0][0];
_d0=(_d0<_d1.parentElement.offsetWidth/2)?_d0+15:_d0-_d1.offsetWidth;
this._tooltipDiv.style("top",_cf+"px").style("left",_d0+"px");
},_hideTooltip:function(){
if(this._isToolTipShowing){
this._tooltipDiv.style("display","none").style("opacity",0);
this._isToolTipShowing=false;
}
},_RGBDecimalToHex:function(_d2){
var _d3=_d2.match(/R(\d+)G(\d+)B(\d+)/);
var red=("0"+parseInt(_d3[1],10).toString(16)).slice(-2),_d4=("0"+parseInt(_d3[2],10).toString(16)).slice(-2),_d5=("0"+parseInt(_d3[3],10).toString(16)).slice(-2);
return "#"+red+_d4+_d5;
},_generateDataArray:function(_d6){
var _d7=[];
var _d8=0;
var _d9;
for(var _d8=0;_d8<_d6.parameterNames.length;_d8++){
if(_d6.parameterColours&&_d6.parameterColours.length>_d8){
_d9=d3.color(this._RGBDecimalToHex(_d6.parameterColours[_d8]));
}else{
_d9=d3.color(this._generatePredefinedRandomColour(_d8));
}
var _da={label:_d6.parameterNames[_d8],value:_d6.parameterValues[_d8],color:_d9};
_d7.push(_da);
}
return _d7;
},_generatePredefinedRandomColour:function(id){
return this._static._RANDOM_COLOURS[id%this._static._RANDOM_COLOURS.length];
},_getChartHeightScaleRatio:function(){
var _db=this.getPreference(this._static._PREFERENCE_ID_PRESENTATION);
var _dc=1;
if(_db===this._static._PREFERENCE_VALUE_PIE){
_dc=this._static._CHART_HEIGHT_SCALE_RATIO_PIE_CHART;
}else{
if(_db===this._static._PREFERENCE_VALUE_COLUMN){
_dc=this._static._CHART_HEIGHT_SCALE_RATIO_COLUMN_CHART;
}else{
if(_db===this._static._PREFERENCE_VALUE_BAR){
_dc=this._static._CHART_HEIGHT_SCALE_RATIO_BAR_CHART;
}
}
}
return _dc;
},_registerWindowResizeHandlerForChartView:function(){
this._disconnectWindowResizeHandler();
this._windowResizeHandler=_a.register({context:this,callback:this._updateChartDimensions});
},_dumpObject:function(_dd){
console.log("=== DUMP OBJECT START ===");
for(var _de in _dd){
console.log(" ");
console.log("Property Name: "+_de);
var _df=_dd[_de];
if(_df instanceof Array){
console.log("Property Type: Array");
console.log("Property Values: Length = "+_df.length);
this._dumpArray(_df);
}else{
if(typeof (_df)==="string"){
console.log("Property Type: String");
console.log("Property Value: "+_df);
}else{
if(typeof (_df)==="number"){
console.log("Property Type: Number");
console.log("Property Value: "+_df);
}else{
if(typeof (_df)==="object"){
console.log("Property Type: Object");
this._dumpObject(_df);
}else{
if(typeof (_df)==="function"){
console.log("Property Type: Function");
console.log("Property Value: "+_df);
}else{
console.log("Property Type: ?");
console.log("Property Value: "+_df);
}
}
}
}
}
}
console.log("=== DUMP OBJECT END ===");
},_dumpArray:function(_e0){
for(var _e1=0;_e1<_e0.length;_e1++){
console.log("["+_e1+"]: "+_e0[_e1]);
}
},_cloneObject:function(_e2){
var _e3=new Object();
for(var _e4 in _e2){
var _e5=_e2[_e4];
if(_e5 instanceof Array){
_e3[_e4]=this._cloneArray(_e5);
}else{
if(typeof (_e5)==="string"){
_e3[_e4]=_e5;
}else{
if(typeof (_e5)==="number"){
_e3[_e4]=_e5;
}else{
if(typeof (_e5)==="object"){
_e3[_e4]=this._cloneObject(_e5);
}else{
if(typeof (_e5)==="function"){
_e3[_e4]=_e5;
}else{
_e3[_e4]=_e5;
}
}
}
}
}
}
return _e3;
},_cloneArray:function(_e6){
var _e7=new Array();
for(var _e8=0;_e8<_e6.length;_e8++){
_e7[_e8]=_e6[_e8];
}
return _e7;
},_regroupDataToFitViewletArea:function(_e9,_ea){
var _eb=this.getPreference(this._static._PREFERENCE_ID_OTHERGROUP);
if(_eb){
return _e9;
}else{
if(_ea<=0){
return _e9;
}else{
if(_e9.parameterCount<=_ea){
return _e9;
}
}
}
var _ec=this._cloneObject(_e9);
var _ed=_ea-1;
this._setExcessParameterStartIndex(_ed);
var _ee=0;
for(var i=_ed;i<_e9.parameterCount;i++){
_ee=_ee+_e9.parameterValues[i];
}
var _ef=_e9.parameterNames.slice(0,_ea);
_ef[_ed]=this._static._PARAMETER_OTHER;
_ec.parameterNames=_ef;
var _f0=_e9.parameterValues.slice(0,_ea);
_f0[_ed]=_ee;
_ec.parameterValues=_f0;
if(_e9.paletteType==this._static._PALETTE_TYPE_FIXED){
var _f1=_e9.parameterColours.slice(0,_ea);
_f1[_ed]=this._static._RGB_COLOUR_GREY;
_ec.parameterColours=_f1;
}
if(_e9.parameterIcons.length>=_ea){
var _f2=_e9.parameterIcons.slice(0,_ea);
_f2[_ed]=this._static._ICONS_URI+this._static._IMAGE_OTHER;
_ec.parameterIcons=_f2;
}
var _f3=_e9.parameterInternalValues.slice(0,_ea);
_f3[_ed]=this._static._PARAMETER_OTHER;
_ec.parameterInternalValues=_f3;
_ec.parameterCount=_ea;
if(_ee>_ec.maxValue){
_ec.maxValue=_ee;
}
var _f4=Number.MAX_VALUE;
for(var i=0;i<=_ed;i++){
var _f5=_ec.parameterValues[i];
if(_f5===_ec.minValue){
_f4=_ec.minValue;
break;
}else{
if(_f5<_f4){
_f4=_f5;
}
}
}
_ec.minValue=_f4;
return _ec;
},_getWorkItemQuery:function(){
this._displayLoadingMessage(this.messages.msgLoading);
var _f6=this;
var _f7={success:function(_f8){
if(!_f6._isDestroyed){
_f6._processQueryDTO(_f8);
}
},failure:function(_f9){
if(!_f6._isDestroyed){
if(_f9&&_f9.status==403){
_f6._displayErrorMessage(_f6.messages.msgWorkItemQueryPermissionDenied);
}else{
_f6._displayOperationalError(_f6.messages.msgWorkItemQueryFailure,_f6.messages.msgWorkItemQueryFailure_explanation,_f6.messages.msgWorkItemQueryFailure_useraction,_f9);
}
}
}};
var _fa=new _3(_f7,"success","failure");
this._callRESTGetQuery(_fa);
},_getWorkItemQueryResults:function(){
this._displayLoadingMessage(this.messages.msgLoading);
var _fb=this;
var _fc={success:function(_fd){
if(!_fb._isDestroyed){
_fb._processQueryResultsDTO(_fd);
}
},failure:function(_fe){
if(!_fb._isDestroyed){
_fb._processQueryResultsError(_fe);
}
}};
this._workItemQueryResultsHandler=new _3(_fc,"success","failure");
this._callRESTGetFilteredQueryResults(this._workItemQueryResultsHandler);
},_processQueryResultsError:function(_ff){
var _100;
if(this._workItemQueryResultsHandler&&this._workItemQueryResultsHandler.xhr){
_100=this._workItemQueryResultsHandler.xhr.getResponseHeader("X-jazz-web-oauth-url");
}
if(_100){
var _101=new dojo._Url(_100);
this._displayMessageLogin(_101);
}else{
this._fireEventCALMQueryLogin();
this._displayOperationalError(this.messages.msgWorkItemQueryFailure,this.messages.msgWorkItemQueryFailure_explanation,this.messages.msgWorkItemQueryFailure_useraction,_ff);
}
},_getWorkItemAttributes:function(_102){
this._attributesDTO[_102]=this._static._DTO_IN_PROGRESS;
var _103=this;
var _104={success:function(_105){
if(!_103._isDestroyed){
_103._attributesDTO[_102]=_105;
}
},failure:function(_106){
if(!_103._isDestroyed){
_103._attributesDTO[_102]=_103._static._DTO_FAILURE;
_103._displayOperationalError(_103.messages.msgWorkItemAttributesFailure,_103.messages.msgWorkItemAttributesFailure_explanation,_103.messages.msgWorkItemAttributesFailure_useraction,_106);
}
}};
var _107=new _3(_104,"success","failure");
this._callRESTGetAttributes(_107,_102);
},_getProjectAreaName:function(_108){
if(!_108){
return;
}
var _109=this;
var _10a={success:function(dto){
if(!_109._isDestroyed){
_109._projectAreaName=dto.name;
_109._updateTitleLinkURL();
}
},failure:function(_10b){
if(!_109._isDestroyed){
_109._logError(_10b);
_109._logError(new Error("Failed to retrieve the project area name for "+_108));
}
}};
var _10c=new _3(_10a,"success","failure");
this._callRESTGetProjectArea(_10c,_108);
},_createOtherPNameChooser:function(_10d,_10e){
var _10f=this._getCachedChartParameters();
if(!_10f){
this._alertOperationalError(this.messages.msgDrillChartParamsUndef,this.messages.msgDrillChartParamsUndef_explanation,this.messages.msgDrillChartParamsUndef_useraction);
return;
}
var _110=this._getExcessParameterStartIndex();
var _111=new _7({parameterNames:_10f.parameterNames.slice(_110),parameterValues:_10f.parameterValues.slice(_110),queryItemID:_10d,parameterID:_10e,onOK:dojo.hitch(this,this._handleEventParamNameDialogExit),iconProvider:dojo.hitch(this,this._getIconURL)});
_111.show();
},_createMetaGroupPNameChooser:function(_112,_113,_114){
var _115=[];
var _116=[];
for(var _117=0;_117<_114.length;_117++){
var _118=_114[_117];
_115.push(_118.name);
_116.push(_118.value);
}
var _119=new _7({parameterNames:_115,parameterValues:_116,queryItemID:_112,parameterID:_113,onOK:dojo.hitch(this,this._handleEventParamNameDialogExit),iconProvider:dojo.hitch(this,this._getIconURL)});
_119.show();
},_handleEventParamNameDialogExit:function(_11a){
var _11b=_11a.getSelection();
if(_11b.name){
this._getWorkItemQueryFilteredResults(_11b.name,_11a.queryItemID,_11a.parameterID,true);
}
},_getWorkItemQueryFilteredResults:function(_11c,_11d,_11e,_11f){
if(_11c===this._static._PARAMETER_OTHER){
this._createOtherPNameChooser(_11d,_11e);
return true;
}
if(this._patternResults&&(_11c in this._patternResults)&&!_11f){
this._createMetaGroupPNameChooser(_11d,_11e,this._patternResults[_11c].results);
return true;
}
var _120=this._internalValueRegistry[_11c];
if(_120===this._static._PARAMETER_UNDEFINED){
this._alertOperationalError(this.messages.msgNoFilterValueForLabel,dojo.string.substitute(this.messages.msgNoFilterValueForLabel_explanation,[_11c]),this.messages.msgNoFilterValueForLabel_useraction);
return false;
}
var url=_b.getRunSavedQueryUri(_11d,null,null,null,null,true,false,_d.getInternalId(_11e),_120,this.getPreference(this._static._PREFERENCE_ID_PARAMETERS),true);
if(!this.getSite().navigateAwayEvent(false,true)){
return true;
}
if(this._isEmbedded()){
var link=this._getServerURL()+url;
dojo.publish("/jazz.ensemble.iframe.viewlet.container/navigate",[link]);
return true;
}
if(this._local){
location.href=url;
return true;
}
if(dojo.getObject("window.parent.location.href")){
var _121=this._getServerURL();
if(!_121){
this._logError(new Error("Work item drill-in failure encountered. Unable to generate server URL."));
return false;
}
window.parent.location.href=_121+url;
return true;
}
this._logError(new Error("Work item drill-in failure encountered. Remote viewlet property is undefined: 'window.parent.location.href'"));
return false;
},_isEmbedded:function(){
var _122=/jazz.ensemble.iframe.viewlet.container/;
if(_122.test(location.href)){
return true;
}
return false;
},_getServerURL:function(){
if(!this._projectAreaName){
return "";
}
var url=this.getWebURL()+"/web/projects/"+encodeURIComponent(this._projectAreaName);
if(djConfig.isDebug){
url=url+"?debug=true";
}
return url;
},_isValidCALMQueryID:function(_123){
if(!_123){
return false;
}else{
if(_123.length!==(_6.UUID_LENGTH*2)){
return false;
}
}
var _124=_123.substring(0,_6.UUID_LENGTH);
return _6.isValidUUID(_124);
},_isValidUUID:function(_125){
if(this._isValidCALMQueryID(_125)){
return true;
}
return _6.isValidUUID(_125);
},_callRESTGetQuery:function(_126){
var _127=this.getPreference(this._static._PREFERENCE_ID_QUERY);
var args={};
args.includeCount=false;
if(this._isValidUUID(_127)){
args.itemId=_127;
}else{
args.id=_127;
}
var _128=this.getPreference(this._static._PREFERENCE_ID_CATEGORY);
args.projectAreaItemId=this._getProjectAreaItemID(_128);
_4.getQuery2(_126,args);
},_callRESTGetFilteredQueryResults:function(_129){
var _12a=this.getPreference(this._static._PREFERENCE_ID_PARAMETER);
var _12b=this.getPreference(this._static._PREFERENCE_ID_CATEGORY);
var _12c=this.getPreference(this._static._PREFERENCE_ID_PARAMETERS);
var args={queryItemId:this._getQueryItemID(),attributeId:_12a,includeCount:true,projectAreaItemId:this._getProjectAreaItemID(_12b),skipOAuth:this._skipOAuth,absoluteURIs:true};
if(_12c){
args.jsonParameterValues=_12c;
}
_4.getHistogram(_129,args);
},_callRESTGetAttributes:function(_12d,_12e){
var args={projectAreaItemId:_12e,filter:_e.FILTER_HISTOGRAM};
_e.getAttributes(_12d,args);
},_callRESTGetProjectArea:function(_12f,_130){
var args={processAreaItemId:_130,checkProcessAuthoringLicenses:false,maxMembers:0};
_10.getProjectAreaByUUIDWithLimitedMembersWithChecks(args,_12f);
},_displayMessageLogin:function(_131){
this._setViewletHeaderLogin();
this._addLoginTracker(_131);
var _132=document.createElement("div");
_132.id=this._getReportDomID();
dojo.addClass(_132,"login");
var _133=document.createElement("div");
if(_131&&_131.host){
_133.innerHTML=dojo.string.substitute(this.workItemsMessages.viewletLogin,[_131.host]);
}else{
_133.innerHTML=dojo.string.substitute(this.workItemsMessages.viewletLogin,[this.messages.msgUndefined]);
}
var link=document.createElement("a");
link.href="javascript:void(0);";
link.innerHTML=this.workItemsMessages.viewletLogin2;
this.connect(link,"onclick",dojo.hitch(this,this._handleEventLoginClicked));
link.style.display="block";
dojo.addClass(link,"link");
_132.appendChild(_133);
_132.appendChild(link);
this._addReportNode(this._contentArea,_132);
},_displayMessageSelectPreference:function(text,_134){
var div=document.createElement("div");
div.id=this._getReportDomID();
dojo.addClass(div,"status");
this._addActionOpenSettings(div,text,_134);
this._addReportNode(this._contentArea,div);
},_displayMessageSelectQuery:function(){
this._displayMessageSelectPreference(this.messages.msgNoWorkItemQueryDefAction,this.messages.msgNoWorkItemQueryDef);
},_displayMessageNoResults:function(){
var node=this._contentArea;
var div=document.createElement("div");
div.setAttribute("id",this._getReportDomID());
dojo.addClass(div,"status");
var _135=document.createTextNode(this.messages.msgNoWorkItemsFound);
div.appendChild(_135);
this._addReportNode(node,div);
},_displayMessageNonExistingQuery:function(){
this._displayMessageSelectPreference(this.messages.msgWorkItemQueryNotExistAction,this.messages.msgWorkItemQueryNotExist);
},_addActionOpenSettings:function(_136,text,_137){
if(this.getSite().isDashboardEditing()){
var _138=_c.addMessage(_136,text);
var link=_138[0];
link.href="javascript:void(0);";
this.connect(link,"onclick",this._handleEventPrefLinkClicked);
}else{
if(this._isStringDef(_137)){
var _139=document.createTextNode(_137);
_136.appendChild(_139);
}
}
},_displayMessageNoParameters:function(_13a){
var node=this._contentArea;
var div=document.createElement("div");
div.setAttribute("id",this._getReportDomID());
dojo.addClass(div,"status");
var _13b=document.createTextNode(dojo.string.substitute(this.messages.msgNoWorkItemsFoundGrouping,[_13a]));
div.appendChild(_13b);
this._addReportNode(node,div);
},_displayCALMQueryProblemsInfoNode:function(_13c){
if(this.calmQueryProblemsInfoNode){
this._contentArea.removeChild(this.calmQueryProblemsInfoNode);
this.calmQueryProblemsInfoNode=null;
}
var _13d=com.ibm.team.workitem.web.ui.internal.view.query.QueryResultProblemInfo.getProblemInfoWidget(_13c);
if(_13d){
this.calmQueryProblemsInfoNode=_13d.domNode;
this._contentArea.appendChild(this.calmQueryProblemsInfoNode);
}
},_displayLoadingMessage:function(text){
var _13e;
if(this._isStringDefined(text,false,null)){
_13e=true;
var _13f=this._reportNode;
if(this._isObjectDefined(_13f,false,"oldReportNode")==false){
this._showMessageArea();
}else{
if(dojo.hasClass(_13f,"status")){
this._showMessageArea();
}
}
}else{
_13e=false;
this.getSite().doneRefresh();
this._showContentArea();
}
this._updateLoadingMessage(text,this._messageArea,_13e);
},_displayErrorMessage:function(text,_140){
this.getSite().setLoading(false);
this.getSite().doneRefresh();
if(_140){
this._logError(_140);
}
this._updateErrorMessage(text,_140,this._messageArea);
this._showMessageArea();
},_alertErrorMessage:function(_141,_142){
var text=dojo.string.substitute(this.messages.msgError,[_141]);
if(_142==null){
alert(text);
return;
}
this._logError(_142);
var _143=_142.message;
if((typeof (_143)=="string")&&(_143.length!=0)){
text=text+": "+_143;
}
alert(text);
},_alertOperationalError:function(_144,_145,_146){
var text=_144+"\n"+_145+"\n"+_146;
alert(text);
},_displayOperationalError:function(_147,_148,_149,_14a){
this.getSite().setLoading(false);
this.getSite().doneRefresh();
if(_14a){
this._logError(_14a);
}
var text=this._getOperationalErrorText(_147,_148,_149);
this._updateMessage(text,this._messageArea,_14);
this._showMessageArea();
},_getOperationalErrorText:function(_14b,_14c,_14d){
var text=_14b+" "+_14c+" "+_14d;
return text;
},_addLoginTracker:function(_14e){
var url=_14e.scheme+"://"+_14e.host+(_14e.port?":"+_14e.port:"");
this._loginTracker=_1[url];
if(!this._loginTracker){
this._loginTracker=_1[url]=new _11();
}
this._loginCallback=dojo.hitch(this,function(){
setTimeout(dojo.hitch(this,function(){
if(!this.isDestroyed()){
this._removeLoginTracker();
this._handleEventLoginClicked(null);
}
}),0);
});
this._loginTracker.addListener(this._loginCallback,this._static._CALM_QUERY_LOGIN);
},_removeLoginTracker:function(){
if(this._loginCallback&&this._loginTracker){
this._loginTracker.removeListener(this._loginCallback,this._static._CALM_QUERY_LOGIN);
delete this._loginCallback;
delete this._loginTracker;
}
},_fireEventCALMQueryLogin:function(){
var _14f=this._loginTracker;
if(_14f){
this._removeLoginTracker();
_14f.propertyChanged(this._static._CALM_QUERY_LOGIN);
}
},_setViewletHeaderDefault:function(){
this.getSite().setIcon(dojo.moduleUrl("com.ibm.team.workitem.viewlets.web","graphics/statistics/icons/statistics.gif?etag=dLdT7CQ"));
this.getSite().setSecondaryTitle("");
},_setViewletHeaderLogin:function(){
this.getSite().setIcon(dojo.moduleUrl("com.ibm.team.dashboard.web","graphics/content/icons/login.gif"));
this.getSite().setSecondaryTitle(this.workItemsMessages.viewletNotLoggedIn);
},_handleEventLoginClicked:function(_150){
if(_150){
dojo.stopEvent(_150);
}
this._setViewletHeaderDefault();
this._skipOAuth=false;
this.refresh();
return true;
},_handleEventPrefLinkClicked:function(_151){
_151.preventDefault();
this.getSite().toggleSettings();
},_processQueryResultsDTO:function(_152){
this._fireEventCALMQueryLogin();
try{
this._validateFilteredQueryResultsDTO(_152);
}
catch(errorObject){
this._displayOperationalError(this.messages.msgWorkItemDTOParseFailed,this.messages.msgWorkItemDTOParseFailed_explanation,this.messages.msgWorkItemDTOParseFailed_useraction,errorObject);
return;
}
var _153=_152.totalCount;
this._updateSecondaryTitle(_153,_152.attribute.label);
if(_153===0){
this._displayMessageNoResults();
return;
}
if(this._hasParameterResults(_152)===false){
this._displayMessageNoParameters(_152.attribute.label);
return;
}
var _154=null;
try{
_154=this._generateChartParameters(_152);
}
catch(errorObject){
this._displayOperationalError(this.messages.msgChartParamGenFailure,this.messages.msgChartParamGenFailure_explanation,this.messages.msgChartParamGenFailure_useraction,errorObject);
return;
}
this._setCachedChartParameters(_154);
this._displayReport(_154);
this._displayCALMQueryProblemsInfoNode(_152.problems);
},_displayReport:function(_155){
var _156=this._getPresentationPreference();
if((_156===this._static._PREFERENCE_VALUE_BAR)||(_156===this._static._PREFERENCE_VALUE_PIE)||(_156===this._static._PREFERENCE_VALUE_COLUMN)){
this._createChart(_155,_156,this._static._D3_TRANSITION_DELAY_INITIAL);
}else{
if(_156===this._static._PREFERENCE_VALUE_TABLE){
this._createTable(_155);
}else{
if(_156===this._static._PREFERENCE_VALUE_LIST){
this._createTagCloud(_155);
}else{
this._displayOperationalError(this.messages.msgUnknownPresentationVal,dojo.string.substitute(this.messages.msgUnknownPresentationVal_explanation,[_156]),this.messages.msgUnknownPresentationVal_useraction,null);
return;
}
}
}
},_sortParameters:function(_157){
var _158=this._getPresentationPreference();
var _159=this.getPreference(this._static._PREFERENCE_ID_PARAMETER);
if(this._patternGroups){
this._sortByCustomGroups(_157,this._patternGroups);
}else{
if((_159===_d.EXT_SEVERITY)||(_159===_d.EXT_PRIORITY)||(_159===_d.EXT_STATE)){
this._parameterInternalValuesShellSort(_157,false);
}else{
if(_159===_d.EXT_RESOLUTION){
this._parameterInternalValuesShellSort(_157,true);
}else{
if(_158==this._static._PREFERENCE_VALUE_LIST){
this._parameterNamesShellSort(_157);
}else{
this._parameterValuesShellSort(_157);
}
}
}
}
},_sortByCustomGroups:function(_15a,_15b){
if(_15a.parameterCount<2){
return;
}
var _15c={};
for(var i=0;i<_15a.parameterNames.length;i++){
_15c[_15a.parameterNames[i]]=i;
}
var _15d={};
for(var i=0;i<_15b.length;i++){
var _15e=_15b[i];
if(!(_15e.name in _15d)){
_15d[_15e.name]=i;
}
}
var _15f=[];
var _160=[];
for(var i=0;i<_15a.parameterNames.length;i++){
var _161=_15a.parameterNames[i];
if(_161 in _15d){
_15f.push(_161);
}else{
_160.push(_161);
}
}
_15f.sort(function(a,b){
return _15d[a]-_15d[b];
});
var _162=[];
_162=_15f.concat(_160);
_15a.parameterNames=_162;
var _163=_15a.parameterInternalValues;
_15a.parameterInternalValues=[];
var _164=_15a.parameterValues;
_15a.parameterValues=[];
var _165=_15a.parameterIcons;
_15a.parameterIcons=[];
for(var i=0;i<_162.length;i++){
var _161=_162[i];
var _166=_15c[_161];
_15a.parameterInternalValues[i]=_163[_166];
_15a.parameterValues[i]=_164[_166];
_15a.parameterIcons[i]=_165[_166];
}
},_parameterInternalValuesShellSort:function(_167,_168){
if(_167.parameterCount<=0){
return;
}
var _169=_167.parameterNames;
var _16a=_167.parameterValues;
var _16b=_167.parameterInternalValues;
var _16c=_167.parameterIcons;
var sort=function(i,j,_16d){
var _16e=_16a[j];
_16a[j]=_16a[j-_16d];
_16a[j-_16d]=_16e;
var _16f=_169[j];
_169[j]=_169[j-_16d];
_169[j-_16d]=_16f;
var _170=_16b[j];
_16b[j]=_16b[j-_16d];
_16b[j-_16d]=_170;
var _171=_16c[j];
_16c[j]=_16c[j-_16d];
_16c[j-_16d]=_171;
};
for(var _172=_16b.length/2;_172>0;_172=(_172==2?1:Math.round(_172/2.2))){
for(var i=_172;i<_16b.length;i++){
var j;
if(_168){
for(j=i;j>=_172&&_16b[j-_172]>_16b[j];j-=_172){
sort(i,j,_172);
}
}else{
for(j=i;j>=_172&&_16b[j-_172]<_16b[j];j-=_172){
sort(i,j,_172);
}
}
}
}
},_parameterNamesShellSort:function(_173){
if(_173.parameterCount<=0){
return;
}
var _174=_173.parameterNames;
var _175=_173.parameterValues;
var _176=_173.parameterInternalValues;
var _177=_173.parameterIcons;
for(var _178=_174.length/2;_178>0;_178=(_178==2?1:Math.round(_178/2.2))){
for(var i=_178;i<_174.length;i++){
for(var j=i;j>=_178&&_174[j-_178]>_174[j];j-=_178){
var _179=_175[j];
_175[j]=_175[j-_178];
_175[j-_178]=_179;
var _17a=_174[j];
_174[j]=_174[j-_178];
_174[j-_178]=_17a;
var _17b=_176[j];
_176[j]=_176[j-_178];
_176[j-_178]=_17b;
var _17c=_177[j];
_177[j]=_177[j-_178];
_177[j-_178]=_17c;
}
}
}
},_parameterValuesShellSort:function(_17d){
if(_17d.parameterCount<=0){
return;
}
var _17e=_17d.parameterNames;
var _17f=_17d.parameterValues;
var _180=_17d.parameterInternalValues;
var _181=_17d.parameterIcons;
for(var _182=_17f.length/2;_182>0;_182=(_182==2?1:Math.round(_182/2.2))){
for(var i=_182;i<_17f.length;i++){
for(var j=i;j>=_182&&_17f[j-_182]<_17f[j];j-=_182){
var _183=_17f[j];
_17f[j]=_17f[j-_182];
_17f[j-_182]=_183;
var _184=_17e[j];
_17e[j]=_17e[j-_182];
_17e[j-_182]=_184;
var _185=_180[j];
_180[j]=_180[j-_182];
_180[j-_182]=_185;
var _186=_181[j];
_181[j]=_181[j-_182];
_181[j-_182]=_186;
}
}
}
},_addColoursToChartParameters:function(_187){
var _188=_187.parameterID;
var _189=_187.parameterIcons;
var _18a=this.getPreference(this._static._PREFERENCE_ID_COLOURS);
if(_18a){
_187.paletteType=this._static._PALETTE_TYPE_FIXED;
_187.parameterColours=this._getCustomParameterColours(_18a,_187.parameterInternalValues);
}else{
if(_188===_d.EXT_SEVERITY){
_187.paletteType=this._static._PALETTE_TYPE_FIXED;
_187.parameterColours=this._generateParameterColours(_189,this._static._COLOUR_REGEX_SEVERITY,this._static._COLOUR_RGB_SEVERITY);
}else{
if(_188===_d.EXT_PRIORITY){
_187.paletteType=this._static._PALETTE_TYPE_FIXED;
_187.parameterColours=this._generateParameterColours(_189,this._static._COLOUR_REGEX_PRIORITY,this._static._COLOUR_RGB_PRIORITY);
}else{
if(_188===_d.EXT_TYPE){
_187.paletteType=this._static._PALETTE_TYPE_FIXED;
_187.parameterColours=this._generateParameterColours(_189,this._static._COLOUR_REGEX_TYPE,this._static._COLOUR_RGB_TYPE);
}else{
_187.paletteType=this._static._PALETTE_TYPE_RANDOM;
_187.parameterColours=new Array();
}
}
}
}
},_getCustomParameterColours:function(_18b,_18c){
var _18d=dojo.fromJson(_18b);
if(!_18d){
_12.logError(new Error("Empty colour model encountered"),this.id);
return [];
}
var _18e=[];
for(var _18f=0;_18f<_18c.length;_18f++){
var _190=_18c[_18f];
if(!_190){
_190=_13;
}
if(!_18d.hasOwnProperty(_190)){
_18e.push(this._static._COLOUR_RGB_UNDEFINED);
continue;
}
var _191=_18d[_190];
if(!_191){
_12.logError(new Error("Expected entry missing from colour model: "+_190),this.id);
_18e.push(this._static._COLOUR_RGB_UNDEFINED);
continue;
}
var _192=_191.colour;
if(!_192){
_18e.push(this._static._COLOUR_RGB_UNDEFINED);
continue;
}
var _193=this._hexToRGBDecimal(_192);
_18e.push(_193);
}
return _18e;
},_hexToRGBDecimal:function(_194){
return "R"+parseInt(_194.slice(1,3),16)+"G"+parseInt(_194.slice(3,5),16)+"B"+parseInt(_194.slice(5,7),16);
},_generateParameterColours:function(_195,_196,_197){
var _198=new Array();
for(var _199=0;_199<_195.length;_199++){
var _19a=this._getIconLocalFilename(_195[_199]);
var _19b=this._getAssociatedColour(_19a,_196,_197);
_198.push(_19b);
}
return _198;
},_getIconLocalFilename:function(_19c){
var _19d=_19c.split(/\//);
if(_19d.length===0){
return "";
}
var _19e=_19d.length-1;
return _19d[_19e];
},_getAssociatedColour:function(_19f,_1a0,_1a1){
for(var _1a2=0;_1a2<_1a0.length;_1a2++){
var _1a3=new RegExp(_1a0[_1a2]);
var _1a4=_19f.match(_1a3);
if(_1a4){
return _1a1[_1a2];
}
}
return this._static._COLOUR_RGB_UNDEFINED;
},_normalizeParameterName:function(_1a5){
var _1a6=/'/g;
var _1a7=_1a5.replace(_1a6,"`");
return _1a7;
},_processQueryDTO:function(_1a8){
if(this._isObjectDef(_1a8)===false){
this._displayMessageNonExistingQuery();
return;
}
try{
this._validateQueryDTO(_1a8);
}
catch(errorObject){
this._displayOperationalError(this.messages.msgWorkItemDTOProblem,this.messages.msgWorkItemDTOProblem_explanation,this.messages.msgWorkItemDTOProblem_useraction,errorObject);
return;
}
this._initQueryPreferenceProvider(_1a8);
this.getSite().setTitle(_1a8.name,false);
this._setQueryItemID(_1a8.itemId);
this._getWorkItemQueryResults();
},_initQueryPreferenceProvider:function(_1a9){
var _1aa=this.getPreference(this._static._PREFERENCE_ID_QUERY);
if(this._isValidUUID(_1aa)){
return;
}
this._queryPreferenceProvider.initDefault(_1a9);
},_updateSecondaryTitle:function(_1ab,_1ac){
var _1ad="("+_1ab+") "+_1ac;
this.getSite().setSecondaryTitle(_1ad);
},_updatePrimaryTitle:function(_1ae,_1af){
var _1b0=this._queryPreferenceProvider.getTextLabel(_1ae);
if(this._isStringDefined(_1b0,false,"queryName")){
this.getSite().setTitle(_1b0,_1af);
}
},_validateQueryDTO:function(_1b1){
this._hasProperty(_1b1,"name",true,"queryDTO");
this._isStringDefined(_1b1.name,true,"name");
this._hasProperty(_1b1,"itemId",true,"queryDTO");
this._isStringDefined(_1b1.itemId,true,"itemId");
},_validateFilteredQueryResultsDTO:function(_1b2){
this._isObjectDefined(_1b2,true,"queryResultsDTO");
if(!_1b2.attribute||!_1b2.attribute.label){
throw new Error(dojo.string.substitute(this.messages.msgVariableIsNotAString,["queryResultsDTO.attribute.label"]));
}
this._hasProperty(_1b2,"totalCount",true,"queryResultsDTO");
this._isNumberDefined(_1b2.totalCount,true,"totalCount");
if(_1b2.totalCount===0){
return;
}else{
if(("counts" in _1b2)===false){
return;
}
}
this._isArray(_1b2.counts,true,"counts");
for(var _1b3=0;_1b3<_1b2.counts.length;_1b3++){
var _1b4=_1b2.counts[_1b3];
var _1b5="queryResultsDTO.counts["+_1b3+"]";
this._isObjectDefined(_1b4,true,_1b5);
this._hasProperty(_1b4,"count",true,_1b5);
this._isNumberDefined(_1b4.count,true,_1b5+".count");
this._hasProperty(_1b4,"value",true,_1b5);
this._isObjectDefined(_1b4.value,true,_1b5+".value");
if(!_1b4.value.hasOwnProperty("id")){
this._logError(new Error(dojo.string.substitute(this.messages.msgPropertyDoesNotExist,[_1b5+".value","id"])));
}
if(!_1b4.value.hasOwnProperty("label")){
this._logError(new Error(dojo.string.substitute(this.messages.msgPropertyDoesNotExist,[_1b5+".value","label"])));
}
}
},_setQueryItemID:function(_1b6){
this._currentQueryItemID=_1b6;
},_getQueryItemID:function(){
return this._currentQueryItemID;
},_setCachedChartParameters:function(_1b7){
this._cachedChartParameters=_1b7;
},_clearCachedChartParameters:function(){
this._cachedChartParameters=null;
this._internalValueRegistry={};
this._iconURLRegistry={};
this._iconURLRegistryMetaGroup={};
this._duplicateLabelTracker={};
},_getCachedChartParameters:function(){
return this._cachedChartParameters;
},_generateChartParameters:function(_1b8){
var _1b9=this.getPreference(this._static._PREFERENCE_ID_PARAMETER);
var _1ba=new Array();
var _1bb=new Array();
var _1bc=new Array();
var _1bd=new Array();
var _1be=Number.MIN_VALUE;
var _1bf=Number.MAX_VALUE;
var _1c0=0;
var _1c1=this._getPatternGroups();
var _1c2=false;
this._patternResults={};
for(var _1c3=0;_1c3<_1b8.counts.length;_1c3++){
var _1c4=_1b8.counts[_1c3].count;
var _1c5=_1b8.counts[_1c3].value;
var _1c6;
if(this._isStringDefined(_1c5.label,false,null)){
_1c6=this._normalizeParameterName(_1c5.label);
if(this._duplicateLabelTracker.hasOwnProperty(_1c6)){
this._duplicateLabelTracker[_1c6]++;
_1c6=_1c6+" ("+this._duplicateLabelTracker[_1c6]+")";
}else{
this._duplicateLabelTracker[_1c6]=1;
}
}else{
if(_1b9===_d.EXT_TAGS){
continue;
}else{
_1c6=this._static._PARAMETER_UNDEFINED;
this._logWarning("Encountered a parameter group with an undefined label (id="+_1c5.id+")",null);
}
}
_1c2=false;
if(_1c1){
for(var _1c7=0;_1c7<_1c1.length;_1c7++){
var _1c8=_1c1[_1c7];
var re=_1c8.value;
var _1c9=_1c8.name;
if(re.test(_1c6)){
if(_1c9 in this._patternResults){
this._patternResults[_1c9].total+=_1c4;
}else{
this._patternResults[_1c9]={total:_1c4,results:[]};
}
this._patternResults[_1c9].results.push({name:_1c6,value:_1c4});
_1c2=true;
break;
}
}
}
var _1ca;
if(_1c5.iconUrl){
if(this._local){
_1ca=_1c5.iconUrl;
}else{
_1ca=jazz.app.proxy.encodeProxiedURI(_1c5.iconUrl);
}
this._iconURLRegistry[_1c6]=_1ca;
}else{
_1ca=this._static._PARAMETER_UNDEFINED;
}
var id;
if(typeof (_1c5.id)==="string"){
id=_1c5.id;
}else{
id=this._static._PARAMETER_UNDEFINED;
}
this._internalValueRegistry[_1c6]=id;
if(_1c2){
continue;
}
_1bb.push(_1c6);
_1ba.push(_1c4);
_1bc.push(_1ca);
_1bd.push(id);
if(_1c4>_1be){
_1be=_1c4;
}
if(_1c4<_1bf){
_1bf=_1c4;
}
_1c0++;
}
for(var _1cb in this._patternResults){
var _1cc=this._patternResults[_1cb].total;
var _1cd=this._static._ICONS_URI+this._static._IMAGE_METAGROUP;
if(this._iconURLRegistry[_1cb]){
this._iconURLRegistryMetaGroup[_1cb]=_1cd;
}else{
this._iconURLRegistry[_1cb]=_1cd;
}
_1bb.push(_1cb);
_1ba.push(_1cc);
_1bc.push(_1cd);
_1bd.push(this._static._PARAMETER_ID_METAGROUP);
if(_1cc>_1be){
_1be=_1cc;
}
if(_1cc<_1bf){
_1bf=_1cc;
}
_1c0++;
}
var _1ce=new Object();
_1ce.maxValue=_1be;
_1ce.minValue=_1bf;
_1ce.parameterCount=_1c0;
_1ce.parameterIcons=_1bc;
_1ce.parameterInternalValues=_1bd;
_1ce.parameterNames=_1bb;
_1ce.parameterValues=_1ba;
_1ce.total=_1b8.totalCount;
_1ce.parameterID=_1b9;
_1ce.displayName=_1b8.attribute.label;
this._sortParameters(_1ce);
this._addColoursToChartParameters(_1ce);
return _1ce;
},_hasParameterResults:function(_1cf){
var _1d0=_1cf.counts;
if((_1d0 instanceof Array)===false){
return false;
}else{
if(_1d0.length===1){
var _1d1=_1d0[0].value;
if(!_1d1){
return false;
}else{
if(!_1d1.label&&_d.EXT_TAGS===this.getPreference(this._static._PREFERENCE_ID_PARAMETER)){
return false;
}
}
}
}
return true;
},_getPatternGroups:function(){
if(this._patternGroups){
return this._patternGroups;
}
var _1d2=this.getPreference(this._static._PREFERENCE_ID_METAGROUPS);
if(!_1d2){
return null;
}
var _1d3=_1d2.split("@@");
this._patternGroups=[];
for(var _1d4=0;_1d4<_1d3.length;_1d4++){
var _1d5=_1d3[_1d4];
if(!_1d5){
continue;
}
var _1d6=_1d5.split("~~",2);
if(_1d6.length!==2){
continue;
}
var _1d7=_1d6[0];
var _1d8=_1d6[1];
this._patternGroups.push({name:_1d7,value:new RegExp(_1d8,"i")});
}
if(this._patternGroups.length===0){
return null;
}
return this._patternGroups;
},_debugChartParameters:function(_1d9){
console.log("= START ==========================");
console.log("Display Name: "+_1d9.displayName);
console.log("Parameter ID: "+_1d9.parameterID);
console.log("Total: "+_1d9.total);
console.log("Parameter Count: "+_1d9.parameterCount);
console.log("Max Value: "+_1d9.maxValue);
console.log("Min Value: "+_1d9.minValue);
console.log("Palette Type: "+_1d9.paletteType);
for(var _1da=0;_1da<_1d9.parameterCount;_1da++){
console.log("---------------------");
console.log("Index: "+_1da);
console.log("---------------------");
console.log("Parameter Name: "+_1d9.parameterNames[_1da]);
console.log("Parameter Value: "+_1d9.parameterValues[_1da]);
console.log("Parameter Internal Value: "+_1d9.parameterInternalValues[_1da]);
console.log("Parameter Icon: "+_1d9.parameterIcons[_1da]);
console.log("Parameter Colour: "+_1d9.parameterColours[_1da]);
}
console.log("= END   ==========================");
},_getPreferenceFailureList:function(){
var _1db={options:[{label:dojo.string.substitute(this.messages.msgError,[this.messages.msgPreferenceFailure]),value:""}]};
return _1db;
},_getPreferenceSelectList:function(){
var _1dc={options:[{label:this.messages.msgSelectQuery,value:""}]};
return _1dc;
},_getPreferenceParameterList:function(_1dd){
var _1de=new Object();
_1de.options=new Array();
for(var _1df=0;_1df<this._attributesDTO[_1dd].length;_1df++){
var _1e0=this._attributesDTO[_1dd][_1df];
var _1e1=new Object();
_1e1.label=_1e0.label;
_1e1.value=_1e0.externalId;
_1de.options.push(_1e1);
}
_1de.options.sort(this._sortPreferencesArray);
return _1de;
},_sortPreferencesArray:function(a,b){
if(a.label<b.label){
return -1;
}else{
if(a.label>b.label){
return 1;
}
}
return 0;
},getPreferenceOptions:function(_1e2,_1e3){
if(_1e2!==this._static._PREFERENCE_ID_PARAMETER){
this._logError(new Error("Unexpected preference ID encountered"));
return this._getPreferenceFailureList();
}
var _1e4=this._getProjectAreaItemID(_1e3.preferences[this._static._PREFERENCE_ID_CATEGORY]);
if(!_1e4){
return this._getPreferenceSelectList();
}
this._timeoutDTOCount++;
if(this._isArrayDef(this._attributesDTO[_1e4])){
this._timeoutDTOCount=0;
return this._getPreferenceParameterList(_1e4);
}else{
if(this._timeoutDTOCount>=this._static._DTO_TIMEOUT_LIMIT){
this._logError(new Error("Preference loading timed-out"));
this._timeoutDTOCount=0;
this._attributesDTO[_1e4]=null;
return this._getPreferenceFailureList();
}else{
if(this._attributesDTO[_1e4]===this._static._DTO_IN_PROGRESS){
return null;
}else{
if(this._attributesDTO[_1e4]===this._static._DTO_FAILURE){
this._logError(new Error("Preference loading failed"));
this._timeoutDTOCount=0;
this._attributesDTO[_1e4]=null;
return this._getPreferenceFailureList();
}
}
}
}
this._getWorkItemAttributes(_1e4);
return null;
},_getProjectAreaItemID:function(_1e5){
if(!_1e5){
if(this._local){
return jazz.app.context.get().itemId;
}
return null;
}else{
if(_1e5.indexOf("|")>0){
var _1e6=_1e5.split("|");
return _1e6[0];
}
}
return _1e5;
},settingsAreaToggled:function(_1e7){
},hasZoomableContent:function(){
if(this.getSite().isLoading()){
return false;
}
return true;
},settingChanging:function(_1e8){
if(_1e8===this._static._PREFERENCE_ID_CATEGORY){
return [this._static._PREFERENCE_ID_PARAMETER];
}else{
if(_1e8===this._static._PREFERENCE_ID_PARAMETER){
return [this._static._PREFERENCE_ID_COLOURS];
}
}
return [];
},settingsChanged:function(_1e9,_1ea){
var _1eb=this._static._PREFERENCE_ID_QUERY;
var _1ec=this._static._PREFERENCE_ID_PRESENTATION;
var _1ed=this._static._PREFERENCE_ID_PARAMETER;
var _1ee=this._static._PREFERENCE_ID_PARAMETERS;
var _1ef=this._static._PREFERENCE_ID_METAGROUPS;
var _1f0=this._static._PREFERENCE_ID_OTHERGROUP;
var _1f1=this._static._PREFERENCE_ID_CATEGORY;
var _1f2=this._static._PREFERENCE_ID_COLOURS;
var _1f3=false;
var _1f4=false;
if(_1e9.preferences[_1eb]!=_1ea.preferences[_1eb]||_1e9.preferences[_1ee]!=_1ea.preferences[_1ee]){
_1f3=true;
}
if(_1e9.preferences[_1ec]!=_1ea.preferences[_1ec]){
_1f4=true;
}
if(_1e9.preferences[_1f2]!=_1ea.preferences[_1f2]){
_1f3=true;
}
if(_1e9.preferences[_1ed]!=_1ea.preferences[_1ed]){
_1f3=true;
}
if(_1e9.preferences[_1ef]!==_1ea.preferences[_1ef]){
_1f3=true;
this._patternGroups=null;
}
if(_1e9.preferences[_1f0]!==_1ea.preferences[_1f0]){
_1f3=true;
}
var _1f5=_1e9.preferences[_1f1];
var _1f6=_1ea.preferences[_1f1];
if(_1f5!==_1f6){
_1f3=true;
if(!this._isSameProjectAreaItemID(_1f5,_1f6)){
this._projectAreaName=null;
}
}
if(_1f3){
this.getSite().refresh();
}else{
if(_1f4){
this._updatePresentation();
}
}
if(this._isValidUUID(_1ea.preferences[_1eb])){
this._updatePrimaryTitle(_1ea.preferences[_1eb],true);
}
},_isSameProjectAreaItemID:function(_1f7,_1f8){
if(!_1f7){
return false;
}else{
if(!_1f8){
return false;
}
}
var _1f9=_1f7.split("|")[0];
var _1fa=_1f8.split("|")[0];
if(_1f9===_1fa){
return true;
}
return false;
},_updatePresentation:function(){
this._disconnectWindowResizeHandler();
var _1fb=this._getCachedChartParameters();
if(!_1fb){
return;
}
this._displayReport(_1fb);
},getPreferenceProvider:function(_1fc){
if(_1fc===this._static._PREFERENCE_ID_QUERY){
return this._queryPreferenceProvider;
}else{
if(_1fc===this._static._PREFERENCE_ID_METAGROUPS){
return this._getMetagroupsPreferenceProvider();
}else{
if(_1fc===this._static._PREFERENCE_ID_COLOURS){
return this._getColourPreferenceProvider();
}
}
}
return null;
},_getMetagroupsPreferenceProvider:function(){
if(!this._metagroupsPreferenceProvider){
this._metagroupsPreferenceProvider=new _8();
}
return this._metagroupsPreferenceProvider;
},_getColourPreferenceProvider:function(){
if(!this._colorPreferenceProvider){
this._colorPreferenceProvider=new _9();
}
return this._colorPreferenceProvider;
},refresh:function(){
this._disconnectWindowResizeHandler();
this._clearCachedChartParameters();
var _1fd=this.getPreference(this._static._PREFERENCE_ID_QUERY);
if(!_1fd||(_1fd===this._static._PREFERENCE_VALUE_UNDEFINED)){
this._displayMessageSelectQuery();
return;
}
var _1fe=this.getPreference(this._static._PREFERENCE_ID_PARAMETER);
if(!_1fe){
this._displayErrorMessage(this.messages.msgMissingParameter);
return;
}
var _1ff=this._getProjectAreaItemID(this.getPreference(this._static._PREFERENCE_ID_CATEGORY));
if(!_1ff){
this._displayOperationalError(this.messages.msgMissingProjectArea,this.messages.msgMissingProjectArea_explanation,this.messages.msgMissingProjectArea_useraction,null);
return;
}
if(!this._local&&!this._projectAreaName){
this._getProjectAreaName(_1ff);
}
this._getWorkItemQuery();
},update:function(){
var _200=this._getPresentationPreference();
if(_200===this._static._PREFERENCE_VALUE_TABLE){
var _201=this._getCachedChartParameters();
if(!_201){
return;
}else{
if(_201.parameterCount<=this._static._MAX_TABLE_DISPLAY_ITEMS){
this._updateTableLabelElementWidths();
return;
}
}
this._createTable(_201);
}
},_getMaxTableItems:function(){
if(this.isZoomed()){
return this._static._MAX_TABLE_DISPLAY_ITEMS_ZOOMED;
}
return this._static._MAX_TABLE_DISPLAY_ITEMS;
},_updateChartDimensions:function(){
if(this._contentArea.parentElement===this._contentArea.offsetParent){
var _202=this._getPresentationPreference();
if((_202===this._static._PREFERENCE_VALUE_PIE)||(_202===this._static._PREFERENCE_VALUE_BAR)||(_202===this._static._PREFERENCE_VALUE_COLUMN)){
var _203=this._getCachedChartParameters();
if(_203){
this._createChart(_203,_202,this._static._D3_TRANSITION_DELAY_RESIZE);
}
}
}
},postZoom:function(){
this._updateChartDimensions();
},getTitleHyperlinkURL:function(){
var _204=this._getQueryItemID();
if(this._local){
if(_204){
return _b.getRunSavedQueryUri(_204,null,null,null,null,null,null,null,null,this.getPreference(this._static._PREFERENCE_ID_PARAMETERS))+"&refresh=true";
}
return _b.getWelcomePageUri();
}
var _205=this._getServerURL();
if(_204&&_205){
return _205+_b.getRunSavedQueryUri(_204,null,null,null,null,null,null,null,null,this.getPreference(this._static._PREFERENCE_ID_PARAMETERS))+"&refresh=true";
}else{
if(_205){
return _205+_b.getWelcomePageUri();
}
}
return null;
},_updateTitleLinkURL:function(){
this.getSite().viewletAdapter.updateTitleURL();
},_isObjectDef:function(_206){
if(typeof (_206)!=="object"){
return false;
}else{
if(_206===null){
return false;
}
}
return true;
},_isArrayDef:function(_207){
if((_207 instanceof Array)===false){
return false;
}else{
if(_207.length===0){
return false;
}
}
return true;
},_isStringDef:function(text){
if(typeof (text)!="string"){
return false;
}else{
if(text.length===0){
return false;
}
}
return true;
},_isObjectDefined:function(_208,_209,_20a){
if(typeof (_208)!="object"){
if(_209){
throw new Error(dojo.string.substitute(this.messages.msgNotValidObjectType,[_20a]));
}
return false;
}
if(_208==null){
if(_209){
throw new Error(dojo.string.substitute(this.messages.msgVariableIsNull,[_20a]));
}
return false;
}
return true;
},_isNumberDefined:function(_20b,_20c,_20d){
if(typeof (_20b)!="number"){
if(_20c){
throw new Error(dojo.string.substitute(this.messages.msgVariableIsNotANumber,[_20d]));
}
return false;
}
return true;
},_isStringDefined:function(text,_20e,_20f){
if(text==null){
if(_20e){
throw new Error(dojo.string.substitute(this.messages.msgVariableIsNull,[_20f]));
}
return false;
}
if(typeof (text)!="string"){
if(_20e){
throw new Error(dojo.string.substitute(this.messages.msgVariableIsNotAString,[_20f]));
}
return false;
}
if(text.length==0){
if(_20e){
throw new Error(dojo.string.substitute(this.messages.msgVariableIsZeroLength,[_20f]));
}
return false;
}
return true;
},_isArray:function(_210,_211,_212){
if(_210 instanceof Array){
return true;
}
if(_211){
throw new Error(dojo.string.substitute(this.messages.msgVariableIsNotAnArray,[_212]));
}
return false;
},_hasProperty:function(_213,_214,_215,_216){
if(_214 in _213){
return true;
}
if(_215){
throw new Error(dojo.string.substitute(this.messages.msgPropertyDoesNotExist,[_216,_214]));
}
return false;
},_logError:function(_217){
var _218="[ERROR]: ";
var _219="";
var _21a="";
var _21b="";
if(this.id){
_219=this.id+": ";
}
if(_217){
if(_217.lineNumber){
_21a="(line "+_217.lineNumber+"): ";
}
if(_217.message){
_21b=_217.message;
}else{
_21b="Message unavailable";
}
}else{
_21b="Undefined exception";
}
var _21c=_218+_219+_21a+_21b;
console.error(_21c);
},_logWarning:function(_21d,_21e){
var _21f="";
if(_21e&&_21e.message){
_21f=": "+_21e.message;
}
var _220="[WARNING]: "+this._static._CLASSNAME+": "+_21d+_21f;
console.warn(_220);
},_updateErrorMessage:function(_221,_222,node){
var text;
if(_222){
text=dojo.string.substitute(this.messages.msgError,[_221]);
var _223=_222.message;
if((typeof (_223)=="string")&&(_223.length!=0)){
text=text+": "+_223;
}
}else{
text=_221;
}
this._updateMessage(text,node,_14);
},_updateLoadingMessage:function(text,node,_224){
this.getSite().setLoading(_224);
this._updateMessage(text,node,"#BBBBBB");
},_updateMessage:function(text,node,_225){
node.style.color=_225;
var _226=node.firstChild;
if((_226==null)&&(this._isStringDefined(text,false,null)==false)){
return;
}else{
if(this._isStringDefined(text,false,null)==false){
node.removeChild(_226);
}else{
if(_226==null){
_226=document.createTextNode(text);
node.appendChild(_226);
}else{
_226.replaceData(0,_226.length,text);
}
}
}
},_removeAllChildren:function(node){
while(node.firstChild!=null){
node.removeChild(node.firstChild);
}
},_updateVisibility:function(node,show){
if(show){
if(node.style.display!="block"){
node.style.display="block";
}
}else{
if(node.style.display!="none"){
node.style.display="none";
}
}
},destroy:function(){
if(this._colorPreferenceProvider){
this._colorPreferenceProvider.destroy();
delete this._colorPreferenceProvider;
}
if(this._tagCloud){
this._tagCloud.destroy();
this._tagCloud=null;
}
if(this._warningImageHover){
this._warningImageHover.destroy();
this._warningImageHover=null;
}
if(this._tooltipDiv!=null){
this._tooltipDiv.remove();
this._tooltipDiv=null;
this._isToolTipShowing=false;
}
this._disconnectWindowResizeHandler();
this.inherited(arguments);
this._isDestroyed=true;
},toString:function(){
return this._static._CLASSNAME;
}});
})();


jazz.core.loader._loaded = jazz.core.loader._loaded.concat(["d"]);
