/*******************************************************************************
 * Licensed Materials - Property of IBM
 * Â© Copyright IBM Corporation 2014, 2020. All Rights Reserved.
 * 
 * Note to U.S. Government Users Restricted Rights:
 * Use, duplication or disclosure restricted by GSA ADP Schedule
 * Contract with IBM Corp.
 *******************************************************************************/
define(["common/config!","./report-parameter"],function(a,b){var c={};return function(d){function e(){if(h.showDisplayValues(),h._dateValues()?(h.updateRequired(!1),h.updateWarning(!1)):(h.updateRequired(!0),h.updateWarning(!0)),h.inline){var a=h.$rangeStart.datepicker("getDate"),b=h.$rangeEnd.datepicker("getDate"),c=[a&&a.isValid()?!0:!1,b&&b.isValid()?!0:!1];c[0]===c[1]&&h._config.inlineRun&&h._config.inlineRun()}}function f(a){var b=a;if("string"==typeof a){var c=a.split("-");3==c.length&&(b=new Date,b.setDate(1),b.setFullYear(c[0]),b.setMonth(parseInt(c[1])-1),b.setDate(c[2]),b.setHours(0),b.setMinutes(0),b.setSeconds(0))}else"number"==typeof a&&(b=new Date(a));return b}function g(a){var b=a.datepicker("getDate");return"number"==typeof b&&(b=new Date(b)),b}var h=new b(d);h.hideFilterOp=!0;var i=h.title(),j=c[i];return void 0!==j?(c[i]=void 0,null):(c[i]=h,h.start=function(){return this.$rangeControl=this.templates.$inflate("_dateRangeKindContent",null,this),this.$rangeStart.datepicker({multidate:!1,autoclose:!0,language:a.locale}).on("changeDate",e),this.$rangeEnd.datepicker({multidate:!1,autoclose:!0,language:a.locale}).on("changeDate",e),this.contents(this.$rangeControl),this},h._dateValues=function(){var a=g(this.$rangeStart),b=g(this.$rangeEnd);return a&&a.isValid()&&b&&b.isValid()?[a,b]:null},h.getValues=function(){return h.getFilteringValues()},h.getFilteringValues=function(){var a=this._dateValues();return a?[a[0].toISODateString(),a[1].toISODateString()]:null},h.setDefaultDisplayValue=function(a){h.defaultDisplayValue=a},h.getDisplayValues=function(a){var b=a||this._dateValues();return b&&2===b.length?b[0]&&b[1]?(("number"==typeof b[0]&&"number"==typeof b[1]||"string"==typeof b[0]&&"string"==typeof b[1])&&(b[0]=f(b[0]),b[1]=f(b[1])),b[0].toLocaleDateString&&b[1].toLocaleDateString?[b[0].toLocaleDateString(),b[1].toLocaleDateString()].join(" - "):""):"":h.defaultDisplayValue?h.defaultDisplayValue:""},h.getQueryFilterString=function(){var a=this.getFilteringValues();return null==a?null:$.expand("({{queryVar}}>='{{start}}' and {{queryVar}}<='{{end}}')",{queryVar:this.getQueryVariable(),start:a[0],end:a[1]})},h.setSelectedValues=function(a){if(b.prototype.setSelectedValues.apply(this,[a]),Array.isArray(a)){var c=a[0];this.$rangeStart.datepicker("update",c?f(c):"");var d=a[1];this.$rangeEnd.datepicker("update",d?f(d):"")}else this.$rangeStart.datepicker("update",""),this.$rangeEnd.datepicker("update","")},h)}});