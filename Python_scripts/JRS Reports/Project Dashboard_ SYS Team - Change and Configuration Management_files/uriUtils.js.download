/*******************************************************************************
 * Licensed Materials - Property of IBM
 * (c) Copyright IBM Corporation 2014, 2021. All Rights Reserved.
 * 
 * Note to U.S. Government Users Restricted Rights:
 * Use, duplication or disclosure restricted by GSA ADP Schedule
 * Contract with IBM Corp.
 *******************************************************************************/
define(["common/alert-section","common/request","i18n!nls/messages"],function(a,b,c){return{getRootURL:function(){var a=location.href,b=a.lastIndexOf("#");return-1!=b&&(a=a.substring(0,b+1)),b=a.lastIndexOf("/"),a.substring(0,b+1)},getRootURL2:function(){var a=location.href,b=a.lastIndexOf("#");-1!=b&&(a=a.substring(0,b+1)),b=a.lastIndexOf("/");var c=a.substring(b+1);return isNaN(c)?a=a.substring(0,b+1):(a=a.substring(0,b),b=a.lastIndexOf("/"),a=a.substring(0,b+1)),a},getCompletePath:function(b){var d=void 0,e=void 0,f=void 0;if(!b&&0!=b)return d;var g=this.getRootURL()+"folder/"+b+"?action=path-folder";return $.ajax({async:!1,dataType:"json",url:g,type:"GET",context:this,success:function(a,b,c){d=a,d.folderPath&&(d.folderPath=decodeURIComponent(d.folderPath)),f=d.folderPath},error:function(b,d,g){e="Unbale to load folder info",a.setAlertError(c.folder_not_available),f="failed",$("#report-folder-display").text("")}}),f},paramStringToObject:function(a){for(var b=[],c=a?a.split("&"):[],d=0;d<c.length;d++){var e=c[d].split("=");b.push({n:e[0],v:e[1]})}return b},getIndexFromURL:function(a){if(!a)return void 0;47==a.charCodeAt(a.length-1)&&(a=a.substring(0,str.length-1));var b=a.split("/"),c=parseInt(b[b.length-1]);return c||0==c?c:void 0},getFolderInfoJSON:function(a,b,c){var d=void 0,e=void 0;if(!b&&0!=b)return d;var f=this.getRootURL()+"folder/"+b+"?action=info";$.ajax({async:a,dataType:"json",url:f,type:"GET",context:this,success:function(a,b,c){d=a,d.displayName&&(d.displayName=decodeURIComponent(d.displayName))},error:function(a,b,c){e="Unbale to load folder info"},complete:function(a,b){c(d,b,e)}})},resolveUsers:function(d,e){var f=this.getRootURL2()+"setup?method=userinfo&urls="+encodeURIComponent(JSON.stringify(d)),g=new b({url:f,contentType:b.ContentType.JSON,postPaths:["userinfo"]});g.setUrl(f),g.send(function(b){b.data?e(b.data):a.setAlertError(c.WebUI_FailedToFetchUsers)})},getCurrentUserName:function(){var a=$(document).data("userProfile");return a.substring(a.lastIndexOf("/")+1,a.length)},getJTSUrl:function(){var a=$(document).data("userProfile");return a.substring(0,a.lastIndexOf("/")+1)}}});