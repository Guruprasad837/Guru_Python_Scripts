/*******************************************************************************
 * Licensed Materials - Property of IBM Â© Copyright IBM Corporation 2014, 2021. All
 * Rights Reserved.
 * 
 * Note to U.S. Government Users Restricted Rights: Use, duplication or
 * disclosure restricted by GSA ADP Schedule Contract with IBM Corp.
 ******************************************************************************/
define(["i18n!nls/query-builder","i18n!nls/messages","common/jquery-ext"],function(a,b,c){function d(){c("#alert-div").hide()}function e(b,d,e){var f=c("#alert-div"),g=c("#alert-twistie");if(c("#alert-timestamp").html(""),c("#alert-details").hide(),c("#alert-action-section").html(""),g.removeAttr("title"),g.removeAttr("title"),"string"==typeof d)c("#alert-summary").html(decodeURIComponent(d)),g.removeClass("alert-twistie-closed"),g.removeClass("alert-twistie-open");else if(d.responseJSON)h(d.responseJSON);else{var i="error"==b?d.getResponseHeader("errMsg"):d.getResponseHeader("succMsg");if(i)i=decodeURIComponent(i),c("#alert-summary").html(i),g.removeClass("alert-twistie-closed"),g.removeClass("alert-twistie-open");else if(d.responseText)try{var j=jQuery.parseJSON(d.responseText);"object"==typeof j?h(j):(c("#alert-summary").text(d.responseText),g.removeClass("alert-twistie-closed"),g.removeClass("alert-twistie-open"))}catch(k){c("#alert-summary").text(k.message+": "+d.responseText),g.removeClass("alert-twistie-closed"),g.removeClass("alert-twistie-open")}else i=d.status+": "+d.statusText,c("#alert-summary").html(i),g.removeClass("alert-twistie-closed"),g.removeClass("alert-twistie-open")}c("#alert-timestamp").html(e?e:(new Date).toLocaleTimeString());var l=f.find(".alert-icon");"warn"==b?(f.attr("class","alert alert-warning"),l.attr("class","alert-icon alert-icon-warning"),l.attr("title",a.warning),l.attr("alt",a.warning),f.find(".alert-icon .sr-only").text(a.warning)):"error"==b?(f.attr("class","alert alert-danger"),l.attr("class","alert-icon alert-icon-error"),l.attr("title",a.error),l.attr("alt",a.error),f.find(".alert-icon .sr-only").text(a.error)):(f.attr("class","alert alert-success"),l.attr("class","alert-icon alert-icon-success"),l.attr("title",a.success),l.attr("alt",a.success),f.find(".alert-icon .sr-only").text(a.success)),f.show(),document.getElementById("alert-div").scrollIntoView(!1)}function f(b){var d=c("#persistent-alert-div");d.attr("class","alert alert-warning"),d.find(".alert-icon").attr("class","alert-icon alert-icon-warning"),d.find(".alert-icon .sr-only").text(a.warning),c("#persistent-alert-timestamp").html(""),c("#persistent-alert-summary").html(b),c("#persistent-alert-timestamp").html((new Date).toLocaleTimeString()),d.show(),document.getElementById("persistent-alert-div").scrollIntoView(!1)}function g(){c("#persistent-alert-div").hide()}function h(a){var d=c("#alert-twistie");a.errMsg&&c("#alert-summary").html(a.errMsg),a.succMsg&&c("#alert-summary").html(a.succMsg),a.explanation?(d.removeClass("alert-twistie-closed"),d.addClass("alert-twistie-open"),d.attr("alt",b.expand),d.attr("title",b.expand),a.useraction?c("#alert-details").html("<p>"+a.explanation+"<p>"+a.useraction):c("#alert-details").html("<p>"+a.explanation)):(d.removeClass("alert-twistie-closed"),d.removeClass("alert-twistie-open"),c("#alert-details").html()),a.actionItems&&(c("#alert-action-section").html(a.actionItems),c("#alert-action-section").show())}return c("#alert-div .close .sr-only").text(a.close),c(".close").on("click",d),c("#alert-twistie").on("click",function(){var a=c(this);a.hasClass("alert-twistie-open")?(c("#alert-details").toggle(),a.removeClass("alert-twistie-open"),a.addClass("alert-twistie-closed"),a.attr("alt",b.collapse),a.attr("title",b.collapse)):a.hasClass("alert-twistie-closed")&&(c("#alert-details").toggle(),a.removeClass("alert-twistie-closed"),a.addClass("alert-twistie-open"),a.attr("alt",b.expand),a.attr("title",b.expand))}),{callConfirmModal:function(a,b,d,e,f){var g=c("#confirm-discard-report");c("#discard-report-ok-button").on("click",a),c("#discard-report-cancel-button").on("click",b),g.find(".close").on("click",b),g.find("#myModalLabel").html(d);var h;e&&e.length>0&&(h=g.find("#myModalTitle").text(),g.find("#myModalTitle").html(e)),f&&g.find("#discard-report-ok-button").removeClass("bx--btn--danger").addClass("bx--btn--primary"),g.on("hide.bs.modal",function(a){h&&h.length>0&&g.find("#myModalTitle").html(h),f&&g.find("#discard-report-ok-button").removeClass("bx--btn--primary").addClass("bx--btn--danger"),g.find(".close").off("click"),c("#discard-report-ok-button").off("click"),c("#discard-report-cancel-button").off("click")}),g.modal({backdrop:"static",keyboard:!0}),g.addClass("is-visible")},clearAlert:function(){d()},setAlertError:function(a,b){e("error",a,b)},setAlertWarning:function(a,b){e("warn",a,b)},setAlertSuccess:function(a,b){e("succ",a,b)},setPersistentAlert:function(a){f(a)},clearPersistentAlert:function(a){g(a)}}});